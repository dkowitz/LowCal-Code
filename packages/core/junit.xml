<?xml version="1.0" encoding="UTF-8" ?>
<testsuites name="vitest tests" tests="2624" failures="7" errors="0" time="16.415558767">
    <testsuite name="src/index.test.ts" timestamp="2025-10-02T21:38:30.445Z" hostname="uby" tests="1" failures="0" errors="0" skipped="0" time="0.002556232">
        <testcase classname="src/index.test.ts" name="placeholder tests &gt; should pass" time="0.001248812">
        </testcase>
    </testsuite>
    <testsuite name="src/code_assist/converter.test.ts" timestamp="2025-10-02T21:38:30.446Z" hostname="uby" tests="21" failures="0" errors="0" skipped="0" time="0.005270377">
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toCodeAssistRequest &gt; should convert a simple request with project" time="0.001502491">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toCodeAssistRequest &gt; should convert a request without a project" time="0.000159155">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toCodeAssistRequest &gt; should convert a request with sessionId" time="0.000120363">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toCodeAssistRequest &gt; should handle string content" time="0.000102549">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toCodeAssistRequest &gt; should handle Part[] content" time="0.000109252">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toCodeAssistRequest &gt; should handle system instructions" time="0.000138256">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toCodeAssistRequest &gt; should handle generation config" time="0.000112518">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toCodeAssistRequest &gt; should handle all generation config fields" time="0.000141532">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; fromCodeAssistResponse &gt; should convert a simple response" time="0.000288404">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; fromCodeAssistResponse &gt; should handle prompt feedback and usage metadata" time="0.000089626">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; fromCodeAssistResponse &gt; should handle automatic function calling history" time="0.000055823">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toContents &gt; should handle Content" time="0.000065481">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toContents &gt; should handle array of Contents" time="0.000059981">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toContents &gt; should handle Part" time="0.000042819">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toContents &gt; should handle array of Parts" time="0.000046826">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toContents &gt; should handle string" time="0.000037911">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toContents &gt; should handle array of strings" time="0.000096118">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toContents &gt; should convert thought parts to text parts for API compatibility" time="0.000324671">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toContents &gt; should combine text and thought for text parts with thoughts" time="0.000165877">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toContents &gt; should preserve non-thought properties while removing thought" time="0.000144056">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toContents &gt; should convert invalid text content to valid text part with thought" time="0.000124481">
        </testcase>
    </testsuite>
    <testsuite name="src/code_assist/oauth2.test.ts" timestamp="2025-10-02T21:38:30.447Z" hostname="uby" tests="15" failures="0" errors="0" skipped="0" time="0.065885906">
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; should perform a web login" time="0.010514706">
            <system-out>


Code Assist login required.
Attempting to open authentication page in your browser.
Otherwise navigate to:

https://example.com/auth



Waiting for authentication...

            </system-out>
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; should perform login with user code" time="0.003077217">
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; in Cloud Shell &gt; should attempt to load cached credentials first" time="0.003587">
            <system-out>
Loaded cached credentials.

            </system-out>
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; in Cloud Shell &gt; should use Compute to get a client if no cached credentials exist" time="0.002076223">
            <system-out>
Attempting to authenticate via Cloud Shell VM&apos;s ADC.

Authentication successful.

            </system-out>
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; in Cloud Shell &gt; should not cache the credentials after fetching them via ADC" time="0.000786616">
            <system-out>
Attempting to authenticate via Cloud Shell VM&apos;s ADC.

Authentication successful.

            </system-out>
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; in Cloud Shell &gt; should return the Compute client on successful ADC authentication" time="0.000521255">
            <system-out>
Attempting to authenticate via Cloud Shell VM&apos;s ADC.

Authentication successful.

            </system-out>
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; in Cloud Shell &gt; should throw an error if ADC fails" time="0.001505778">
            <system-out>
Attempting to authenticate via Cloud Shell VM&apos;s ADC.

            </system-out>
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; credential loading order &gt; should prioritize default cached credentials over GOOGLE_APPLICATION_CREDENTIALS" time="0.004128303">
            <system-out>
Loaded cached credentials.

            </system-out>
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; credential loading order &gt; should fall back to GOOGLE_APPLICATION_CREDENTIALS if default cache is missing" time="0.0045806">
            <system-out>
Loaded cached credentials.

            </system-out>
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; with GCP environment variables &gt; should use GOOGLE_CLOUD_ACCESS_TOKEN when GOOGLE_GENAI_USE_GCA is true" time="0.004803173">
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; with GCP environment variables &gt; should not use GCP token if GOOGLE_CLOUD_ACCESS_TOKEN is not set" time="0.002601476">
            <system-out>
Loaded cached credentials.

            </system-out>
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; with GCP environment variables &gt; should not use GCP token if GOOGLE_GENAI_USE_GCA is not set" time="0.002305558">
            <system-out>
Loaded cached credentials.

            </system-out>
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; clearCachedCredentialFile &gt; should clear cached credentials and Google account" time="0.011120318">
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; clearCachedCredentialFile &gt; should handle Qwen module clearing gracefully" time="0.007735771">
            <system-err>
Failed to clear cached credentials: Error: ENOENT: no such file or directory, open &apos;/tmp/qwen-code-test-home-Z2ump3/.qwen/google_accounts.json&apos;
[90m    at open (node:internal/fs/promises:642:25)[39m
[90m    at Object.writeFile (node:internal/fs/promises:1249:14)[39m
    at UserAccountManager.clearCachedGoogleAccount [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/userAccountManager.ts:138:5[90m)[39m
    at Module.clearCachedCredentialFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/code_assist/oauth2.ts:395:5[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/code_assist/oauth2.test.ts:572:7
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20 {
  errno: [33m-2[39m,
  code: [32m&apos;ENOENT&apos;[39m,
  syscall: [32m&apos;open&apos;[39m,
  path: [32m&apos;/tmp/qwen-code-test-home-Z2ump3/.qwen/google_accounts.json&apos;[39m
}

            </system-err>
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; clearCachedCredentialFile &gt; should clear the in-memory OAuth client cache" time="0.004919457">
            <system-out>
Loaded cached credentials.

Loaded cached credentials.

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="src/code_assist/server.test.ts" timestamp="2025-10-02T21:38:30.448Z" hostname="uby" tests="7" failures="0" errors="0" skipped="0" time="0.01801453">
        <testcase classname="src/code_assist/server.test.ts" name="CodeAssistServer &gt; should be able to be constructed" time="0.004090883">
        </testcase>
        <testcase classname="src/code_assist/server.test.ts" name="CodeAssistServer &gt; should call the generateContent endpoint" time="0.003637574">
        </testcase>
        <testcase classname="src/code_assist/server.test.ts" name="CodeAssistServer &gt; should call the generateContentStream endpoint" time="0.001779123">
        </testcase>
        <testcase classname="src/code_assist/server.test.ts" name="CodeAssistServer &gt; should call the onboardUser endpoint" time="0.001514995">
        </testcase>
        <testcase classname="src/code_assist/server.test.ts" name="CodeAssistServer &gt; should call the loadCodeAssist endpoint" time="0.001592889">
        </testcase>
        <testcase classname="src/code_assist/server.test.ts" name="CodeAssistServer &gt; should return 0 for countTokens" time="0.001497332">
        </testcase>
        <testcase classname="src/code_assist/server.test.ts" name="CodeAssistServer &gt; should throw an error for embedContent" time="0.002578103">
        </testcase>
    </testsuite>
    <testsuite name="src/code_assist/setup.test.ts" timestamp="2025-10-02T21:38:30.448Z" hostname="uby" tests="7" failures="0" errors="0" skipped="0" time="0.009087955">
        <testcase classname="src/code_assist/setup.test.ts" name="setupUser for existing user &gt; should use GOOGLE_CLOUD_PROJECT when set and project from server is undefined" time="0.003708065">
        </testcase>
        <testcase classname="src/code_assist/setup.test.ts" name="setupUser for existing user &gt; should ignore GOOGLE_CLOUD_PROJECT when project from server is set" time="0.001307461">
        </testcase>
        <testcase classname="src/code_assist/setup.test.ts" name="setupUser for existing user &gt; should throw ProjectIdRequiredError when no project ID is available" time="0.000818726">
        </testcase>
        <testcase classname="src/code_assist/setup.test.ts" name="setupUser for new user &gt; should use GOOGLE_CLOUD_PROJECT when set and onboard a new paid user" time="0.00087487">
        </testcase>
        <testcase classname="src/code_assist/setup.test.ts" name="setupUser for new user &gt; should onboard a new free user when GOOGLE_CLOUD_PROJECT is not set" time="0.000404469">
        </testcase>
        <testcase classname="src/code_assist/setup.test.ts" name="setupUser for new user &gt; should use GOOGLE_CLOUD_PROJECT when onboard response has no project ID" time="0.000220107">
        </testcase>
        <testcase classname="src/code_assist/setup.test.ts" name="setupUser for new user &gt; should throw ProjectIdRequiredError when no project ID is available" time="0.000260072">
        </testcase>
    </testsuite>
    <testsuite name="src/config/config.test.ts" timestamp="2025-10-02T21:38:30.448Z" hostname="uby" tests="48" failures="0" errors="0" skipped="0" time="0.056566292">
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; initialize &gt; should throw an error if checkpointing is enabled and GitService fails" time="0.005518497">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; initialize &gt; should not throw an error if checkpointing is disabled and GitService fails" time="0.00336513">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; initialize &gt; should throw an error if initialized more than once" time="0.002667018">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; refreshAuth &gt; should refresh auth and update config" time="0.002273839">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; refreshAuth &gt; should preserve conversation history when refreshing auth" time="0.001238353">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; refreshAuth &gt; should handle case when no existing client is initialized" time="0.00108526">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; refreshAuth &gt; should strip thoughts when switching from GenAI to Vertex" time="0.00071286">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; refreshAuth &gt; should not strip thoughts when switching from Vertex to GenAI" time="0.000500336">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; setModel &gt; updates fallback model when content generator config is unavailable" time="0.001306549">
            <system-out>
Logger not initialized or session ID missing. Cannot log message.

            </system-out>
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Config constructor should store userMemory correctly" time="0.000311506">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Config constructor should default userMemory to empty string if not provided" time="0.000216802">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Config constructor should call setGeminiMdFilename with contextFileName if provided" time="0.000244743">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Config constructor should not call setGeminiMdFilename if contextFileName is not provided" time="0.000240605">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; should set default file filtering settings when not provided" time="0.000202545">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; should set custom file filtering settings when provided" time="0.000237029">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; should initialize WorkspaceContext with includeDirectories" time="0.000847238">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Config constructor should set telemetry to true when provided as true" time="0.000255723">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Config constructor should set telemetry to false when provided as false" time="0.000174012">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Config constructor should default telemetry to default value if not provided" time="0.000261625">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; should have a getFileService method that returns FileDiscoveryService" time="0.000791425">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Usage Statistics &gt; defaults usage statistics to enabled if not specified" time="0.014144356">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Usage Statistics &gt; sets usage statistics based on the provided value (enabled: true)" time="0.00079953">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Usage Statistics &gt; sets usage statistics based on the provided value (enabled: false)" time="0.000196735">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Telemetry Settings &gt; should return default telemetry target if not provided" time="0.000224195">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Telemetry Settings &gt; should return provided OTLP endpoint" time="0.000252036">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Telemetry Settings &gt; should return default OTLP endpoint if not provided" time="0.000202464">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Telemetry Settings &gt; should return provided logPrompts setting" time="0.000203547">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Telemetry Settings &gt; should return default logPrompts setting (true) if not provided" time="0.000420338">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Telemetry Settings &gt; should return default logPrompts setting (true) if telemetry object is not provided" time="0.000250263">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Telemetry Settings &gt; should return default telemetry target if telemetry object is not provided" time="0.000153594">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Telemetry Settings &gt; should return default OTLP endpoint if telemetry object is not provided" time="0.000156971">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Telemetry Settings &gt; should return provided OTLP protocol" time="0.000246496">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Telemetry Settings &gt; should return default OTLP protocol if not provided" time="0.000233623">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Telemetry Settings &gt; should return default OTLP protocol if telemetry object is not provided" time="0.000234985">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; UseRipgrep Configuration &gt; should default useRipgrep to false when not provided" time="0.000187688">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; UseRipgrep Configuration &gt; should set useRipgrep to true when provided as true" time="0.000193057">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; UseRipgrep Configuration &gt; should set useRipgrep to false when explicitly provided as false" time="0.000153875">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; UseRipgrep Configuration &gt; should default useRipgrep to false when undefined" time="0.000144547">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; createToolRegistry &gt; should register a tool if coreTools contains an argument-specific pattern" time="0.005663224">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="setApprovalMode with folder trust &gt; should throw an error when setting YOLO mode in an untrusted folder" time="0.000612945">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="setApprovalMode with folder trust &gt; should throw an error when setting AUTO_EDIT mode in an untrusted folder" time="0.000241407">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="setApprovalMode with folder trust &gt; should NOT throw an error when setting DEFAULT mode in an untrusted folder" time="0.000163824">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="setApprovalMode with folder trust &gt; should NOT throw an error when setting PLAN mode in an untrusted folder" time="0.000163212">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="setApprovalMode with folder trust &gt; should NOT throw an error when setting any mode in a trusted folder" time="0.00030784">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="setApprovalMode with folder trust &gt; should NOT throw an error when setting any mode if trustedFolder is undefined" time="0.000303091">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="setApprovalMode with folder trust &gt; Model Switch Logging &gt; should log model switch when setModel is called with different model" time="0.002250797">
            <system-out>
Logger not initialized or session ID missing. Cannot log message.

            </system-out>
        </testcase>
        <testcase classname="src/config/config.test.ts" name="setApprovalMode with folder trust &gt; Model Switch Logging &gt; should not log when setModel is called with same model" time="0.001828184">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="setApprovalMode with folder trust &gt; Model Switch Logging &gt; should use default reason when no options provided" time="0.002159728">
            <system-out>
Logger not initialized or session ID missing. Cannot log message.

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="src/config/flashFallback.test.ts" timestamp="2025-10-02T21:38:30.450Z" hostname="uby" tests="6" failures="0" errors="0" skipped="0" time="0.027938282">
        <testcase classname="src/config/flashFallback.test.ts" name="Flash Model Fallback Configuration &gt; setModel &gt; should only mark as switched if contentGeneratorConfig exists" time="0.02436131">
            <system-out>
Invalid JSON in log file /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json. Backing up and starting fresh. SyntaxError: &quot;undefined&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Logger._readLogFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:91:31[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:155:19[90m)[39m

Backed up corrupted log file to /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json.invalid_json.1759441107083.bak
Logger not initialized or session ID missing. Cannot log message.

Invalid JSON in log file /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json. Backing up and starting fresh. SyntaxError: &quot;undefined&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Logger._readLogFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:91:31[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:155:19[90m)[39m

Backed up corrupted log file to /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json.invalid_json.1759441107084.bak

            </system-out>
            <system-err>
Error accessing installation ID file, generating ephemeral ID: TypeError: Cannot read properties of undefined (reading &apos;trim&apos;)
    at InstallationManager.readInstallationIdFromFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/installationManager.ts:21:50[90m)[39m
    at InstallationManager.getInstallationId [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/installationManager.ts:42:33[90m)[39m
    at QwenLogger.generateUserId [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/qwen-logger/qwen-logger.ts:123:53[90m)[39m
    at new QwenLogger [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/qwen-logger/qwen-logger.ts:114:24[90m)[39m
    at QwenLogger.getInstance [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/qwen-logger/qwen-logger.ts:131:29[90m)[39m
    at logCliConfiguration [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/loggers.ts:85:14[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:452:5[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/config/flashFallback.test.ts:22:14
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20

            </system-err>
        </testcase>
        <testcase classname="src/config/flashFallback.test.ts" name="Flash Model Fallback Configuration &gt; getModel &gt; should return contentGeneratorConfig model if available" time="0.000590894">
            <system-out>
Invalid JSON in log file /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json. Backing up and starting fresh. SyntaxError: &quot;undefined&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Logger._readLogFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:91:31[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:155:19[90m)[39m

Backed up corrupted log file to /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json.invalid_json.1759441107085.bak
Logger not initialized or session ID missing. Cannot log message.

            </system-out>
        </testcase>
        <testcase classname="src/config/flashFallback.test.ts" name="Flash Model Fallback Configuration &gt; getModel &gt; should fall back to initial model if contentGeneratorConfig is not available" time="0.000742865">
            <system-out>
Invalid JSON in log file /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json. Backing up and starting fresh. SyntaxError: &quot;undefined&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Logger._readLogFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:91:31[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:155:19[90m)[39m

Backed up corrupted log file to /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json.invalid_json.1759441107086.bak

Invalid JSON in log file /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json. Backing up and starting fresh. SyntaxError: &quot;undefined&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Logger._readLogFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:91:31[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:155:19[90m)[39m

Backed up corrupted log file to /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json.invalid_json.1759441107086.bak

            </system-out>
        </testcase>
        <testcase classname="src/config/flashFallback.test.ts" name="Flash Model Fallback Configuration &gt; isInFallbackMode &gt; should start as false for new session" time="0.000422222">
            <system-out>
Invalid JSON in log file /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json. Backing up and starting fresh. SyntaxError: &quot;undefined&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Logger._readLogFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:91:31[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:155:19[90m)[39m

Backed up corrupted log file to /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json.invalid_json.1759441107087.bak

            </system-out>
        </testcase>
        <testcase classname="src/config/flashFallback.test.ts" name="Flash Model Fallback Configuration &gt; isInFallbackMode &gt; should remain false if no model switch occurs" time="0.000415269">
            <system-out>
Invalid JSON in log file /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json. Backing up and starting fresh. SyntaxError: &quot;undefined&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Logger._readLogFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:91:31[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:155:19[90m)[39m

Backed up corrupted log file to /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json.invalid_json.1759441107087.bak

            </system-out>
        </testcase>
        <testcase classname="src/config/flashFallback.test.ts" name="Flash Model Fallback Configuration &gt; isInFallbackMode &gt; should persist switched state throughout session" time="0.000464841">
            <system-out>
Invalid JSON in log file /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json. Backing up and starting fresh. SyntaxError: &quot;undefined&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Logger._readLogFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:91:31[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:155:19[90m)[39m

Backed up corrupted log file to /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json.invalid_json.1759441107087.bak
Logger not initialized or session ID missing. Cannot log message.

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="src/config/storage.test.ts" timestamp="2025-10-02T21:38:30.450Z" hostname="uby" tests="5" failures="0" errors="0" skipped="0" time="0.002865785">
        <testcase classname="src/config/storage.test.ts" name="Storage – getGlobalSettingsPath &gt; returns path to ~/.qwen/settings.json" time="0.001050094">
        </testcase>
        <testcase classname="src/config/storage.test.ts" name="Storage – additional helpers &gt; getWorkspaceSettingsPath returns project/.qwen/settings.json" time="0.000245054">
        </testcase>
        <testcase classname="src/config/storage.test.ts" name="Storage – additional helpers &gt; getUserCommandsDir returns ~/.qwen/commands" time="0.000158052">
        </testcase>
        <testcase classname="src/config/storage.test.ts" name="Storage – additional helpers &gt; getProjectCommandsDir returns project/.qwen/commands" time="0.000104212">
        </testcase>
        <testcase classname="src/config/storage.test.ts" name="Storage – additional helpers &gt; getMcpOAuthTokensPath returns ~/.qwen/mcp-oauth-tokens.json" time="0.000106637">
        </testcase>
    </testsuite>
    <testsuite name="src/core/client.test.ts" timestamp="2025-10-02T21:38:30.451Z" hostname="uby" tests="70" failures="4" errors="0" skipped="1" time="1.015780762">
        <testcase classname="src/core/client.test.ts" name="findIndexAfterFraction &gt; should throw an error for non-positive numbers" time="0.001956372">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="findIndexAfterFraction &gt; should throw an error for a fraction greater than or equal to 1" time="0.000245574">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="findIndexAfterFraction &gt; should handle a fraction in the middle" time="0.000190332">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="findIndexAfterFraction &gt; should handle a fraction that results in the last index" time="0.000074869">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="findIndexAfterFraction &gt; should handle an empty history" time="0.000056695">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="findIndexAfterFraction &gt; should handle a history with only one item" time="0.000054541">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="findIndexAfterFraction &gt; should handle history with weird parts" time="0.000079267">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; generateEmbedding &gt; should call embedContent with correct parameters and return embeddings" time="0.016524442">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; generateEmbedding &gt; should return an empty array if an empty array is passed" time="0.008465292">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; generateEmbedding &gt; should throw an error if API response has no embeddings array" time="0.00723776">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; generateEmbedding &gt; should throw an error if API response has an empty embeddings array" time="0.007249011">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; generateEmbedding &gt; should throw an error if API returns a mismatched number of embeddings" time="0.013711054">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; generateEmbedding &gt; should throw an error if any embedding has nullish values" time="0.006931031">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; generateEmbedding &gt; should throw an error if any embedding has an empty values array" time="0.006170964">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; generateEmbedding &gt; should propagate errors from the API call" time="0.013524017">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; generateJson &gt; should call generateContent with the correct parameters" time="0.009102562">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; generateJson &gt; should allow overriding model and config" time="0">
            <skipped/>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; addHistory &gt; should call chat.addHistory with the provided content" time="0.015471302">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; resetChat &gt; should create a new chat session, clearing the old history" time="0.008838833">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; when compression inflates the token count &gt; uses the truncated history for compression" time="0.008939741">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; when compression inflates the token count &gt; allows compression to be forced/manual after a failure" time="0.02373444">
            <failure message="expected { originalTokenCount: 1000, …(2) } to deeply equal { compressionStatus: 1, …(3) }" type="AssertionError">
AssertionError: expected { originalTokenCount: 1000, …(2) } to deeply equal { compressionStatus: 1, …(3) }

- Expected
+ Received

  {
    &quot;compressionStatus&quot;: 1,
-   &quot;model&quot;: &quot;test-model&quot;,
    &quot;newTokenCount&quot;: 1000,
    &quot;originalTokenCount&quot;: 1000,
  }

 ❯ src/core/client.test.ts:614:24
            </failure>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; when compression inflates the token count &gt; yields the result even if the compression inflated the tokens" time="0.024066916">
            <failure message="expected { originalTokenCount: 1000, …(2) } to deeply equal { compressionStatus: 2, …(3) }" type="AssertionError">
AssertionError: expected { originalTokenCount: 1000, …(2) } to deeply equal { compressionStatus: 2, …(3) }

- Expected
+ Received

  {
    &quot;compressionStatus&quot;: 2,
-   &quot;model&quot;: &quot;test-model&quot;,
    &quot;newTokenCount&quot;: 5000,
    &quot;originalTokenCount&quot;: 1000,
  }

 ❯ src/core/client.test.ts:626:24
            </failure>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; when compression inflates the token count &gt; does not manipulate the source chat" time="0.009200613">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; when compression inflates the token count &gt; restores the history back to the original" time="0.009020459">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; when compression inflates the token count &gt; will not attempt to compress context after a failure" time="0.010968646">
            <failure message="expected { originalTokenCount: +0, …(2) } to deeply equal { compressionStatus: 4, …(3) }" type="AssertionError">
AssertionError: expected { originalTokenCount: +0, …(2) } to deeply equal { compressionStatus: 4, …(3) }

- Expected
+ Received

  {
    &quot;compressionStatus&quot;: 4,
-   &quot;model&quot;: &quot;test-model&quot;,
    &quot;newTokenCount&quot;: 0,
    &quot;originalTokenCount&quot;: 0,
  }

 ❯ src/core/client.test.ts:676:24
            </failure>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; attempts to compress with a maxOutputTokens set to the original token count" time="0.01643131">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; should not trigger summarization if token count is below threshold" time="0.017492024">
            <failure message="expected { originalTokenCount: 699, …(2) } to deeply equal { compressionStatus: 4, …(3) }" type="AssertionError">
AssertionError: expected { originalTokenCount: 699, …(2) } to deeply equal { compressionStatus: 4, …(3) }

- Expected
+ Received

  {
    &quot;compressionStatus&quot;: 4,
-   &quot;model&quot;: &quot;test-model&quot;,
    &quot;newTokenCount&quot;: 699,
    &quot;originalTokenCount&quot;: 699,
  }

 ❯ src/core/client.test.ts:729:22
            </failure>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; logs a telemetry event when compressing" time="0.015801794">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; should trigger summarization if token count is at threshold with contextPercentageThreshold setting" time="0.01037664">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; should not compress across a function call response" time="0.01238008">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; should always trigger summarization when force is true, regardless of token count" time="0.01552956">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; should use current model from config for token counting after sendMessage" time="0.014086849">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; injects a plan mode reminder before user queries when approval mode is PLAN" time="0.01490884">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; emits a compression event when the context was automatically compressed" time="0.025691743">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; does not emit a compression event when the status is 2" time="0.014760496">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; does not emit a compression event when the status is 4" time="0.01361769">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; does not emit a compression event when the status is 3" time="0.019088799">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; should include editor context when ideMode is enabled" time="0.013436766">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; should not add context if ideMode is enabled but no open files" time="0.015364635">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; should add context if ideMode is enabled and there is one active file" time="0.016279228">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; should add context if ideMode is enabled and there are open files but no active file" time="0.012800578">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; should return the turn instance after the stream is complete" time="0.01402789">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; should stop infinite loop after MAX_TURNS when nextSpeaker always returns model" time="0.025118713">
            <system-out>
checkNextSpeaker called 100 times - infinite loop protection worked

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; should yield MaxSessionTurns and stop when session turn limit is reached" time="0.02671603">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; should respect MAX_TURNS limit even when turns parameter is set to a large value" time="0.036052875">
            <system-out>
Infinite loop protection working: checkNextSpeaker called 100 times, 1 events generated (properly bounded by MAX_TURNS)

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; Editor context delta &gt; &apos;sends delta when active file changes&apos;" time="0.012853025">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; Editor context delta &gt; &apos;sends delta when cursor line changes&apos;" time="0.016028764">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; Editor context delta &gt; &apos;sends delta when cursor character cha…&apos;" time="0.01501613">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; Editor context delta &gt; &apos;sends delta when selected text changes&apos;" time="0.029461613">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; Editor context delta &gt; &apos;sends delta when selected text is add…&apos;" time="0.013895525">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; Editor context delta &gt; &apos;sends delta when selected text is rem…&apos;" time="0.017918783">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; Editor context delta &gt; &apos;does not send context when nothing ch…&apos;" time="0.014558543">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; Editor context delta &gt; sends full context when history is cleared, even if editor state is unchanged" time="0.014233321">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; IDE context with pending tool calls &gt; should NOT add IDE context when a tool call is pending" time="0.013594107">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; IDE context with pending tool calls &gt; should add IDE context when no tool call is pending" time="0.01766337">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; IDE context with pending tool calls &gt; should send the latest IDE context on the next message after a skipped context" time="0.013795049">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; IDE context with pending tool calls &gt; should send a context DELTA on the next message after a skipped context" time="0.022147141">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; should not call checkNextSpeaker when turn.run() yields an error" time="0.026311451">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; should not call checkNextSpeaker when turn.run() yields a value then an error" time="0.012534125">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; does not run loop checks when skipLoopDetection is true" time="0.020474194">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; runs loop checks when skipLoopDetection is false" time="0.020151697">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; generateContent &gt; should call generateContent with the correct parameters" time="0.011533092">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; generateContent &gt; should use current model from config for content generation" time="0.02482577">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; handleFlashFallback &gt; should use current model from config when checking for fallback" time="0.029952091">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; setHistory &gt; should strip thought signatures when stripThoughts is true" time="0.027253054">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; setHistory &gt; should not strip thought signatures when stripThoughts is false" time="0.016728269">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; initialize &gt; should accept extraHistory parameter and pass it to startChat" time="0.018961654">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; initialize &gt; should use empty array when no extraHistory is provided" time="0.01406045">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; reinitialize &gt; should reinitialize with preserved user history" time="0.016731495">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; reinitialize &gt; should not throw error when chat is not initialized" time="0.018274372">
        </testcase>
    </testsuite>
    <testsuite name="src/core/contentGenerator.test.ts" timestamp="2025-10-02T21:38:30.454Z" hostname="uby" tests="10" failures="0" errors="0" skipped="0" time="0.009521468">
        <testcase classname="src/core/contentGenerator.test.ts" name="createContentGenerator &gt; should create a CodeAssistContentGenerator" time="0.002386618">
        </testcase>
        <testcase classname="src/core/contentGenerator.test.ts" name="createContentGenerator &gt; should create a GoogleGenAI content generator" time="0.001557423">
        </testcase>
        <testcase classname="src/core/contentGenerator.test.ts" name="createContentGenerator &gt; should create a GoogleGenAI content generator with client install id logging disabled" time="0.000594772">
        </testcase>
        <testcase classname="src/core/contentGenerator.test.ts" name="createContentGeneratorConfig &gt; should configure for Gemini using GEMINI_API_KEY when set" time="0.001359958">
        </testcase>
        <testcase classname="src/core/contentGenerator.test.ts" name="createContentGeneratorConfig &gt; should not configure for Gemini if GEMINI_API_KEY is empty" time="0.000447889">
        </testcase>
        <testcase classname="src/core/contentGenerator.test.ts" name="createContentGeneratorConfig &gt; should configure for Vertex AI using GOOGLE_API_KEY when set" time="0.000411352">
        </testcase>
        <testcase classname="src/core/contentGenerator.test.ts" name="createContentGeneratorConfig &gt; should configure for Vertex AI using GCP project and location when set" time="0.000465141">
        </testcase>
        <testcase classname="src/core/contentGenerator.test.ts" name="createContentGeneratorConfig &gt; should not configure for Vertex AI if required env vars are empty" time="0.000341542">
        </testcase>
        <testcase classname="src/core/contentGenerator.test.ts" name="createContentGeneratorConfig &gt; should retain the config model for OpenAI when OPENAI_MODEL is not set" time="0.000352753">
        </testcase>
        <testcase classname="src/core/contentGenerator.test.ts" name="createContentGeneratorConfig &gt; should prefer OPENAI_MODEL when provided" time="0.000267115">
        </testcase>
    </testsuite>
    <testsuite name="src/core/coreToolScheduler.test.ts" timestamp="2025-10-02T21:38:30.454Z" hostname="uby" tests="24" failures="0" errors="0" skipped="0" time="0.245562844">
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler &gt; should cancel a tool call if the signal is aborted before confirmation" time="0.03319305">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler &gt; plan mode enforcement &gt; returns plan reminder and skips execution for edit tools" time="0.002569366">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler &gt; plan mode enforcement &gt; allows read tools to execute in plan mode" time="0.011391208">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler &gt; plan mode enforcement &gt; enforces shell command restrictions in plan mode" time="0.014306566">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler &gt; getToolSuggestion &gt; should suggest the top N closest tool names for a typo" time="0.000502811">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler with payload &gt; should update args and diff and execute tool when payload is provided" time="0.00479143">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="convertToFunctionResponse &gt; should handle simple string llmContent" time="0.000265181">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="convertToFunctionResponse &gt; should handle llmContent as a single Part with text" time="0.000150619">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="convertToFunctionResponse &gt; should handle llmContent as a PartListUnion array with a single text Part" time="0.000135661">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="convertToFunctionResponse &gt; should handle llmContent with inlineData" time="0.000154967">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="convertToFunctionResponse &gt; should handle llmContent with fileData" time="0.000117127">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="convertToFunctionResponse &gt; should handle llmContent as an array of multiple Parts (text and inlineData)" time="0.000163643">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="convertToFunctionResponse &gt; should handle llmContent as an array with a single inlineData Part" time="0.000103822">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="convertToFunctionResponse &gt; should handle llmContent as a generic Part (not text, inlineData, or fileData)" time="0.00009756">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="convertToFunctionResponse &gt; should handle empty string llmContent" time="0.000085899">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="convertToFunctionResponse &gt; should handle llmContent as an empty array" time="0.000078054">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="convertToFunctionResponse &gt; should handle llmContent as a Part with undefined inlineData/fileData/text" time="0.000093152">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler edit cancellation &gt; should preserve diff when an edit is cancelled" time="0.001331315">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler YOLO mode &gt; should execute tool requiring confirmation directly without waiting" time="0.002147535">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler cancellation during executing with live output &gt; sets status to cancelled and preserves last output" time="0.102771572">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler request queueing &gt; should queue a request if another is running" time="0.012909519">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler request queueing &gt; should auto-approve a tool call if it is on the allowedTools list" time="0.001857168">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler request queueing &gt; should handle two synchronous calls to schedule" time="0.001603008">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler request queueing &gt; should auto-approve remaining tool calls when first tool call is approved with ProceedAlways" time="0.052609136">
        </testcase>
    </testsuite>
    <testsuite name="src/core/geminiChat.test.ts" timestamp="2025-10-02T21:38:30.455Z" hostname="uby" tests="31" failures="0" errors="0" skipped="0" time="5.54573696">
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessage &gt; should retain the initial user message when an automatic function call occurs" time="0.003748049">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessage &gt; should throw an error when attempting to add a user turn after another user turn" time="0.001668178">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessage &gt; should preserve text parts that are in the same response as a thought" time="0.001408748">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessage &gt; should add a placeholder model turn when a tool call is followed by an empty model response" time="0.001086401">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessage &gt; should call generateContent with the correct parameters" time="0.002296231">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessageStream &gt; should succeed if a tool call is followed by an empty part" time="0.002158496">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessageStream &gt; should fail if the stream ends with an empty part and has no finishReason" time="1.504092887">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessageStream &gt; should succeed if the stream ends with an invalid part but has a finishReason and contained a valid part" time="0.001170166">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessageStream &gt; should not consolidate text into a part that also contains a functionCall" time="0.000598468">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessageStream &gt; should consolidate subsequent text chunks after receiving an empty text chunk" time="0.000571218">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessageStream &gt; should consolidate adjacent text parts that arrive in separate stream chunks" time="0.000670071">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessageStream &gt; should preserve text parts that stream in the same chunk as a thought" time="0.000619818">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessageStream &gt; should add a placeholder model turn when a tool call is followed by an empty stream response" time="0.00069151">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessageStream &gt; should call generateContentStream with the correct parameters" time="0.002231131">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; recordHistory &gt; should consolidate all consecutive model turns into a single turn" time="0.000531304">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; recordHistory &gt; should add a placeholder model turn when a tool call is followed by an empty response" time="0.001746594">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; recordHistory &gt; should add user input and a single model output to history" time="0.000477925">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; recordHistory &gt; should consolidate adjacent text parts from multiple content objects" time="0.000244062">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; recordHistory &gt; should add an empty placeholder turn if modelOutput is empty" time="0.000230898">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; recordHistory &gt; should preserve model outputs with undefined or empty parts arrays" time="0.000244823">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; recordHistory &gt; should not consolidate content with different roles" time="0.000235576">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; addHistory &gt; should add a new content item to the history" time="0.000232821">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; addHistory &gt; should add multiple items correctly" time="0.000282312">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessageStream with retries &gt; should yield a RETRY event when an invalid stream is encountered" time="0.501375855">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessageStream with retries &gt; should retry on invalid content, succeed, and report metrics" time="0.502962792">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessageStream with retries &gt; should fail after all retries on persistent invalid content and report metrics" time="1.503942895">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; should correctly retry and append to an existing history mid-conversation" time="0.502236684">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; concurrency control &gt; should queue a subsequent sendMessage call until the first one completes" time="0.001829137">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; should retry if the model returns a completely empty stream (no chunks)" time="0.501777883">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; should queue a subsequent sendMessageStream call until the first stream is fully consumed" time="0.000674659">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; should discard valid partial content from a failed attempt upon retry" time="0.50158188">
        </testcase>
    </testsuite>
    <testsuite name="src/core/geminiRequest.test.ts" timestamp="2025-10-02T21:38:30.456Z" hostname="uby" tests="12" failures="0" errors="0" skipped="0" time="0.003059134">
        <testcase classname="src/core/geminiRequest.test.ts" name="partListUnionToString &gt; should return the string value if the input is a string" time="0.001235518">
        </testcase>
        <testcase classname="src/core/geminiRequest.test.ts" name="partListUnionToString &gt; should return a concatenated string if the input is an array of strings" time="0.000124651">
        </testcase>
        <testcase classname="src/core/geminiRequest.test.ts" name="partListUnionToString &gt; should handle videoMetadata" time="0.000088274">
        </testcase>
        <testcase classname="src/core/geminiRequest.test.ts" name="partListUnionToString &gt; should handle thought" time="0.000072985">
        </testcase>
        <testcase classname="src/core/geminiRequest.test.ts" name="partListUnionToString &gt; should handle codeExecutionResult" time="0.000051515">
        </testcase>
        <testcase classname="src/core/geminiRequest.test.ts" name="partListUnionToString &gt; should handle executableCode" time="0.000041336">
        </testcase>
        <testcase classname="src/core/geminiRequest.test.ts" name="partListUnionToString &gt; should handle fileData" time="0.000045474">
        </testcase>
        <testcase classname="src/core/geminiRequest.test.ts" name="partListUnionToString &gt; should handle functionCall" time="0.000044673">
        </testcase>
        <testcase classname="src/core/geminiRequest.test.ts" name="partListUnionToString &gt; should handle functionResponse" time="0.000050624">
        </testcase>
        <testcase classname="src/core/geminiRequest.test.ts" name="partListUnionToString &gt; should handle inlineData" time="0.000040034">
        </testcase>
        <testcase classname="src/core/geminiRequest.test.ts" name="partListUnionToString &gt; should handle text" time="0.000037309">
        </testcase>
        <testcase classname="src/core/geminiRequest.test.ts" name="partListUnionToString &gt; should return an empty string for an unknown part type" time="0.000037028">
        </testcase>
    </testsuite>
    <testsuite name="src/core/logger.test.ts" timestamp="2025-10-02T21:38:30.456Z" hostname="uby" tests="40" failures="0" errors="0" skipped="0" time="0.140318896">
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; initialize &gt; should create .gemini directory and an empty log file if none exist" time="0.013192013">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; initialize &gt; should load existing logs and set correct messageId for the current session" time="0.002366601">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; initialize &gt; should set messageId to 0 for a new session if log file exists but has no logs for current session" time="0.001140992">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; initialize &gt; should be idempotent" time="0.002276074">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; initialize &gt; should handle invalid JSON in log file by backing it up and starting fresh" time="0.006416469">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; initialize &gt; should handle non-array JSON in log file by backing it up and starting fresh" time="0.003889791">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; logMessage &gt; should append a message to the log file and update in-memory logs" time="0.004314047">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; logMessage &gt; should correctly increment messageId for subsequent messages in the same session" time="0.003047762">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; logMessage &gt; should handle logger not initialized" time="0.002689078">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; logMessage &gt; should simulate concurrent writes from different logger instances to the same file" time="0.005065017">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; logMessage &gt; should not throw, not increment messageId, and log error if writing to file fails" time="0.001777931">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; getPreviousUserMessages &gt; should retrieve all user messages from logs, sorted newest first" time="0.011573196">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; getPreviousUserMessages &gt; should return empty array if no user messages exist" time="0.001549689">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; getPreviousUserMessages &gt; should return empty array if logger not initialized" time="0.001249283">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; saveCheckpoint &gt; should save a checkpoint" time="0.004632927">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; saveCheckpoint &gt; should save a checkpoint" time="0.002589374">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; saveCheckpoint &gt; should save a checkpoint" time="0.001942657">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; saveCheckpoint &gt; should save a checkpoint" time="0.00120998">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; saveCheckpoint &gt; should not throw if logger is not initialized" time="0.003160401">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; loadCheckpoint &gt; should load from a checkpoint" time="0.00192824">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; loadCheckpoint &gt; should load from a checkpoint" time="0.003569348">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; loadCheckpoint &gt; should load from a checkpoint" time="0.003809142">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; loadCheckpoint &gt; should load from a checkpoint" time="0.00268475">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; loadCheckpoint &gt; should return an empty array if a tagged checkpoint file does not exist" time="0.00128559">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; loadCheckpoint &gt; should return an empty array if the checkpoint file does not exist" time="0.001985276">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; loadCheckpoint &gt; should return an empty array if the file contains invalid JSON" time="0.002481945">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; loadCheckpoint &gt; should return an empty array if logger is not initialized" time="0.002060675">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; deleteCheckpoint &gt; should delete the specified checkpoint file and return true" time="0.003685624">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; deleteCheckpoint &gt; should delete both new and old checkpoint files if they exist" time="0.005457393">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; deleteCheckpoint &gt; should return false if the checkpoint file does not exist" time="0.001697002">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; deleteCheckpoint &gt; should re-throw an error if file deletion fails for reasons other than not existing" time="0.003539783">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; deleteCheckpoint &gt; should return false if logger is not initialized" time="0.002550913">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; checkpointExists &gt; should return true if the checkpoint file exists" time="0.003437133">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; checkpointExists &gt; should return false if the checkpoint file does not exist" time="0.001819388">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; checkpointExists &gt; should throw an error if logger is not initialized" time="0.002167363">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; checkpointExists &gt; should re-throw an error if fs.access fails for reasons other than not existing" time="0.00189562">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; Backward compatibility &gt; should load from a checkpoint with a raw special character tag" time="0.004115529">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; close &gt; should reset logger state" time="0.003607989">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; Model Switch Logging &gt; should log model switch events correctly" time="0.005457484">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; Model Switch Logging &gt; should handle multiple model switch events" time="0.003811016">
        </testcase>
    </testsuite>
    <testsuite name="src/core/nonInteractiveToolExecutor.test.ts" timestamp="2025-10-02T21:38:30.458Z" hostname="uby" tests="6" failures="0" errors="0" skipped="0" time="0.039905528">
        <testcase classname="src/core/nonInteractiveToolExecutor.test.ts" name="executeToolCall &gt; should execute a tool successfully" time="0.032823226">
        </testcase>
        <testcase classname="src/core/nonInteractiveToolExecutor.test.ts" name="executeToolCall &gt; should return an error if tool is not found" time="0.000895237">
        </testcase>
        <testcase classname="src/core/nonInteractiveToolExecutor.test.ts" name="executeToolCall &gt; should return an error if tool validation fails" time="0.000578271">
        </testcase>
        <testcase classname="src/core/nonInteractiveToolExecutor.test.ts" name="executeToolCall &gt; should return an error if tool execution fails" time="0.00124788">
        </testcase>
        <testcase classname="src/core/nonInteractiveToolExecutor.test.ts" name="executeToolCall &gt; should return an unhandled exception error if execution throws" time="0.001186116">
        </testcase>
        <testcase classname="src/core/nonInteractiveToolExecutor.test.ts" name="executeToolCall &gt; should correctly format llmContent with inlineData" time="0.001840808">
        </testcase>
    </testsuite>
    <testsuite name="src/core/prompts.test.ts" timestamp="2025-10-02T21:38:30.458Z" hostname="uby" tests="40" failures="0" errors="0" skipped="0" time="0.02184404">
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; should return the base prompt when no userMemory is provided" time="0.003537609">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; should return the base prompt when userMemory is empty string" time="0.001119914">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; should return the base prompt when userMemory is whitespace only" time="0.000442739">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; should append userMemory with separator when provided" time="0.000590323">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; should include sandbox-specific instructions when SANDBOX env var is set" time="0.000276321">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; should include seatbelt-specific instructions when SANDBOX env var is &quot;sandbox-exec&quot;" time="0.000303952">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; should include non-sandbox instructions when SANDBOX env var is not set" time="0.000266032">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; should include git instructions when in a git repo" time="0.000225688">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; should not include git instructions when not in a git repo" time="0.000211121">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_SYSTEM_MD environment variable &gt; should use default prompt when GEMINI_SYSTEM_MD is &quot;false&quot;" time="0.00044276">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_SYSTEM_MD environment variable &gt; should use default prompt when GEMINI_SYSTEM_MD is &quot;0&quot;" time="0.000299374">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_SYSTEM_MD environment variable &gt; should throw error if GEMINI_SYSTEM_MD points to a non-existent file" time="0.001000161">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_SYSTEM_MD environment variable &gt; should read from default path when GEMINI_SYSTEM_MD is &quot;true&quot;" time="0.001468118">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_SYSTEM_MD environment variable &gt; should read from default path when GEMINI_SYSTEM_MD is &quot;1&quot;" time="0.000376968">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_SYSTEM_MD environment variable &gt; should read from custom path when GEMINI_SYSTEM_MD provides one, preserving case" time="0.0002699">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_SYSTEM_MD environment variable &gt; should expand tilde in custom path when GEMINI_SYSTEM_MD is set" time="0.000386485">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_WRITE_SYSTEM_MD environment variable &gt; should not write to file when GEMINI_WRITE_SYSTEM_MD is &quot;false&quot;" time="0.001493866">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_WRITE_SYSTEM_MD environment variable &gt; should not write to file when GEMINI_WRITE_SYSTEM_MD is &quot;0&quot;" time="0.000301759">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_WRITE_SYSTEM_MD environment variable &gt; should write to default path when GEMINI_WRITE_SYSTEM_MD is &quot;true&quot;" time="0.000974724">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_WRITE_SYSTEM_MD environment variable &gt; should write to default path when GEMINI_WRITE_SYSTEM_MD is &quot;1&quot;" time="0.000326114">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_WRITE_SYSTEM_MD environment variable &gt; should write to custom path when GEMINI_WRITE_SYSTEM_MD provides one" time="0.000257406">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_WRITE_SYSTEM_MD environment variable &gt; should expand tilde in custom path when GEMINI_WRITE_SYSTEM_MD is set" time="0.000428743">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_WRITE_SYSTEM_MD environment variable &gt; should expand tilde in custom path when GEMINI_WRITE_SYSTEM_MD is just ~" time="0.000314702">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="URL matching with trailing slash compatibility &gt; should match URLs with and without trailing slash" time="0.000908132">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="URL matching with trailing slash compatibility &gt; should not match when URLs are different" time="0.000203507">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Model-specific tool call formats &gt; should use XML format for qwen3-coder model" time="0.000563724">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Model-specific tool call formats &gt; should use JSON format for qwen-vl model" time="0.000396735">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Model-specific tool call formats &gt; should use bracket format for generic models" time="0.000556761">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Model-specific tool call formats &gt; should use bracket format when no model is specified" time="0.000335451">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Model-specific tool call formats &gt; should preserve model-specific formats with user memory" time="0.000284337">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Model-specific tool call formats &gt; should preserve model-specific formats with sandbox environment" time="0.000246105">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="getCustomSystemPrompt &gt; should handle string custom instruction without user memory" time="0.000374994">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="getCustomSystemPrompt &gt; should handle string custom instruction with user memory" time="0.000160847">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="getCustomSystemPrompt &gt; should handle Content object with parts array and user memory" time="0.00011846">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="getSubagentSystemReminder &gt; should format single agent type correctly" time="0.000191544">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="getSubagentSystemReminder &gt; should join multiple agent types with commas" time="0.000044552">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="getSubagentSystemReminder &gt; should handle empty array" time="0.000046326">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="getPlanModeSystemReminder &gt; should return plan mode system reminder with proper structure" time="0.000098732">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="getPlanModeSystemReminder &gt; should include workflow instructions" time="0.000055463">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="getPlanModeSystemReminder &gt; should be deterministic" time="0.000034634">
        </testcase>
    </testsuite>
    <testsuite name="src/core/tokenLimits.test.ts" timestamp="2025-10-02T21:38:30.459Z" hostname="uby" tests="61" failures="0" errors="0" skipped="0" time="0.012224712">
        <testcase classname="src/core/tokenLimits.test.ts" name="normalize &gt; should lowercase and trim the model string" time="0.001389663">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="normalize &gt; should strip provider prefixes" time="0.000180814">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="normalize &gt; should handle pipe and colon separators" time="0.000063608">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="normalize &gt; should collapse whitespace to a single hyphen" time="0.000056705">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="normalize &gt; should remove date and version suffixes" time="0.000146031">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="normalize &gt; should remove quantization and numeric suffixes" time="0.000155588">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="normalize &gt; should handle a combination of normalization rules" time="0.000074397">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="normalize &gt; should handle empty or null input" time="0.000103281">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="normalize &gt; should remove preview suffixes" time="0.000046887">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="normalize &gt; should remove version numbers with dots when they are at the end" time="0.000053089">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Google Gemini &gt; should return the correct limit for Gemini 1.5 Pro" time="0.000220979">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Google Gemini &gt; should return the correct limit for Gemini 1.5 Flash" time="0.000139709">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Google Gemini &gt; should return the correct limit for Gemini 2.5 Pro" time="0.0001025">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Google Gemini &gt; should return the correct limit for Gemini 2.5 Flash" time="0.000095837">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Google Gemini &gt; should return the correct limit for Gemini 2.0 Flash with image generation" time="0.000103692">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Google Gemini &gt; should return the correct limit for Gemini 2.0 Flash" time="0.000089666">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; OpenAI &gt; should return the correct limit for o3-mini" time="0.000104233">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; OpenAI &gt; should return the correct limit for o3 models" time="0.000080799">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; OpenAI &gt; should return the correct limit for o4-mini" time="0.00008606">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; OpenAI &gt; should return the correct limit for gpt-4o-mini" time="0.00011356">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; OpenAI &gt; should return the correct limit for gpt-4o" time="0.000112639">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; OpenAI &gt; should return the correct limit for gpt-4.1-mini" time="0.00006507">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; OpenAI &gt; should return the correct limit for gpt-4.1 models" time="0.000052778">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; OpenAI &gt; should return the correct limit for gpt-4" time="0.000081701">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Anthropic Claude &gt; should return the correct limit for Claude 3.5 Sonnet" time="0.000094134">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Anthropic Claude &gt; should return the correct limit for Claude 3.7 Sonnet" time="0.000091219">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Anthropic Claude &gt; should return the correct limit for Claude Sonnet 4" time="0.000086801">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Anthropic Claude &gt; should return the correct limit for Claude Opus 4" time="0.000087853">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Alibaba Qwen &gt; should return the correct limit for qwen3-coder commercial models" time="0.000204168">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Alibaba Qwen &gt; should return the correct limit for qwen3-coder open source models" time="0.000184041">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Alibaba Qwen &gt; should return the correct limit for qwen3 2507 variants" time="0.000089456">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Alibaba Qwen &gt; should return the correct limit for qwen2.5-1m" time="0.000131383">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Alibaba Qwen &gt; should return the correct limit for qwen2.5" time="0.000115544">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Alibaba Qwen &gt; should return the correct limit for qwen-plus" time="0.000137845">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Alibaba Qwen &gt; should return the correct limit for qwen-flash" time="0.000097139">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Alibaba Qwen &gt; should return the correct limit for qwen-turbo" time="0.000109273">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; ByteDance Seed-OSS &gt; should return the correct limit for seed-oss" time="0.000180264">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Zhipu GLM &gt; should return the correct limit for glm-4.5v" time="0.000130191">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Zhipu GLM &gt; should return the correct limit for glm-4.5-air" time="0.000127967">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Zhipu GLM &gt; should return the correct limit for glm-4.5" time="0.000108901">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Other models &gt; should return the correct limit for deepseek-r1" time="0.000112779">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Other models &gt; should return the correct limit for deepseek-v3" time="0.000151811">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Other models &gt; should return the correct limit for deepseek-v3.1" time="0.000121174">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Other models &gt; should return the correct limit for kimi-k2-instruct" time="0.000072444">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Other models &gt; should return the correct limit for gpt-oss" time="0.000061484">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Other models &gt; should return the correct limit for llama-4-scout" time="0.000057406">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Other models &gt; should return the correct limit for mistral-large-2" time="0.000056625">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; should return the default token limit for an unknown model" time="0.000084176">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; should return the correct limit for a complex model string" time="0.00005895">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; should handle case-insensitive model names" time="0.000073986">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit with output type &gt; Qwen models with output limits &gt; should return the correct output limit for qwen3-coder-plus" time="0.000256956">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit with output type &gt; Qwen models with output limits &gt; should return the correct output limit for qwen-vl-max-latest" time="0.00010233">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit with output type &gt; Default output limits &gt; should return the default output limit for unknown models" time="0.000201423">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit with output type &gt; Default output limits &gt; should return the default output limit for models without specific output patterns" time="0.000100055">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit with output type &gt; Input vs Output limits comparison &gt; should return different limits for input vs output for qwen3-coder-plus" time="0.000079437">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit with output type &gt; Input vs Output limits comparison &gt; should return different limits for input vs output for qwen-vl-max-latest" time="0.000066884">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit with output type &gt; Input vs Output limits comparison &gt; should return same default limits for unknown models" time="0.000070951">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit with output type &gt; Backward compatibility &gt; should default to input type when no type is specified" time="0.0001078">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit with output type &gt; Backward compatibility &gt; should work with explicit input type" time="0.000084266">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit with output type &gt; Model normalization with output limits &gt; should handle normalized model names for output limits" time="0.000086981">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit with output type &gt; Model normalization with output limits &gt; should handle complex model strings for output limits" time="0.000066844">
        </testcase>
    </testsuite>
    <testsuite name="src/core/turn.test.ts" timestamp="2025-10-02T21:38:30.461Z" hostname="uby" tests="14" failures="0" errors="0" skipped="0" time="0.01377377">
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; constructor &gt; should initialize pendingToolCalls and debugResponses" time="0.00266286">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; run &gt; should yield content events for text parts" time="0.002864683">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; run &gt; should yield tool_call_request events for function calls" time="0.000988901">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; run &gt; should yield UserCancelled event if signal is aborted" time="0.000570606">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; run &gt; should yield Error event and report if sendMessageStream throws" time="0.00110193">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; run &gt; should handle function calls with undefined name or args" time="0.00096706">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; run &gt; should yield finished event when response has finish reason" time="0.000354606">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; run &gt; should yield finished event for MAX_TOKENS finish reason" time="0.000289526">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; run &gt; should yield finished event for SAFETY finish reason" time="0.000287082">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; run &gt; should not yield finished event when there is no finish reason" time="0.000539639">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; run &gt; should handle multiple responses with different finish reasons" time="0.000315424">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; run &gt; should not crash when cancelled request has malformed error" time="0.000694736">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; run &gt; should yield a Retry event when it receives one from the chat stream" time="0.00030819">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; getDebugResponses &gt; should return collected debug responses" time="0.000283605">
        </testcase>
    </testsuite>
    <testsuite name="src/ide/detect-ide.test.ts" timestamp="2025-10-02T21:38:30.461Z" hostname="uby" tests="21" failures="0" errors="0" skipped="0" time="0.007838692">
        <testcase classname="src/ide/detect-ide.test.ts" name="detectIde &gt; should return undefined if TERM_PROGRAM is not vscode" time="0.001643171">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="detectIde &gt; should detect Devin" time="0.000441678">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="detectIde &gt; should detect Replit" time="0.000216381">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="detectIde &gt; should detect Cursor" time="0.000119962">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="detectIde &gt; should detect Codespaces" time="0.000189751">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="detectIde &gt; should detect Cloud Shell via EDITOR_IN_CLOUD_SHELL" time="0.000219125">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="detectIde &gt; should detect Cloud Shell via CLOUD_SHELL" time="0.000119031">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="detectIde &gt; should detect Trae" time="0.000093644">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="detectIde &gt; should detect Firebase Studio via MONOSPACE_ENV" time="0.00030257">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="detectIde &gt; should detect VSCode when no other IDE is detected and command includes &quot;code&quot;" time="0.000218454">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="detectIde &gt; should detect VSCodeFork when no other IDE is detected and command does not include &quot;code&quot;" time="0.000281111">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="detectIde &gt; should prioritize other IDEs over VSCode detection" time="0.000105124">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="getIdeInfo &gt; should return correct info for Devin" time="0.000667075">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="getIdeInfo &gt; should return correct info for Replit" time="0.000100717">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="getIdeInfo &gt; should return correct info for Cursor" time="0.000152453">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="getIdeInfo &gt; should return correct info for CloudShell" time="0.000081941">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="getIdeInfo &gt; should return correct info for Codespaces" time="0.000058989">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="getIdeInfo &gt; should return correct info for FirebaseStudio" time="0.000165727">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="getIdeInfo &gt; should return correct info for Trae" time="0.000375144">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="getIdeInfo &gt; should return correct info for VSCode" time="0.000108821">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="getIdeInfo &gt; should return correct info for VSCodeFork" time="0.000063348">
        </testcase>
    </testsuite>
    <testsuite name="src/ide/ide-client.test.ts" timestamp="2025-10-02T21:38:30.462Z" hostname="uby" tests="9" failures="0" errors="0" skipped="0" time="0.018983514">
        <testcase classname="src/ide/ide-client.test.ts" name="IdeClient &gt; connect &gt; should return invalid if QWEN_CODE_IDE_WORKSPACE_PATH is undefined" time="0.002781429">
        </testcase>
        <testcase classname="src/ide/ide-client.test.ts" name="IdeClient &gt; connect &gt; should return invalid if QWEN_CODE_IDE_WORKSPACE_PATH is empty" time="0.001070903">
        </testcase>
        <testcase classname="src/ide/ide-client.test.ts" name="IdeClient &gt; connect &gt; should connect using HTTP when port is provided in config file" time="0.006850442">
            <system-out>
[DEBUG] [IDEClient] Attempting to connect to IDE via HTTP SSE

            </system-out>
        </testcase>
        <testcase classname="src/ide/ide-client.test.ts" name="IdeClient &gt; connect &gt; should connect using stdio when stdio config is provided in file" time="0.001775016">
            <system-out>
[DEBUG] [IDEClient] Attempting to connect to IDE via stdio

            </system-out>
        </testcase>
        <testcase classname="src/ide/ide-client.test.ts" name="IdeClient &gt; connect &gt; should prioritize port over stdio when both are in config file" time="0.001169174">
            <system-out>
[DEBUG] [IDEClient] Attempting to connect to IDE via HTTP SSE

            </system-out>
        </testcase>
        <testcase classname="src/ide/ide-client.test.ts" name="IdeClient &gt; connect &gt; should connect using HTTP when port is provided in environment variables" time="0.001254202">
            <system-out>
[DEBUG] [IDEClient] Attempting to connect to IDE via HTTP SSE

            </system-out>
        </testcase>
        <testcase classname="src/ide/ide-client.test.ts" name="IdeClient &gt; connect &gt; should connect using stdio when stdio config is in environment variables" time="0.00084218">
            <system-out>
[DEBUG] [IDEClient] Attempting to connect to IDE via stdio

            </system-out>
        </testcase>
        <testcase classname="src/ide/ide-client.test.ts" name="IdeClient &gt; connect &gt; should prioritize file config over environment variables" time="0.000877965">
            <system-out>
[DEBUG] [IDEClient] Attempting to connect to IDE via HTTP SSE

            </system-out>
        </testcase>
        <testcase classname="src/ide/ide-client.test.ts" name="IdeClient &gt; connect &gt; should be disconnected if no config is found" time="0.000975075">
            <system-err>
[ERROR] [IDEClient] Failed to connect to IDE companion extension in VS Code. Please ensure the extension is running. To install the extension, run /ide install.

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="src/ide/ide-installer.test.ts" timestamp="2025-10-02T21:38:30.462Z" hostname="uby" tests="10" failures="0" errors="0" skipped="0" time="0.014849521">
        <testcase classname="src/ide/ide-installer.test.ts" name="ide-installer &gt; getIdeInstaller &gt; returns a VsCodeInstaller for &quot;&apos;vscode&apos;&quot;" time="0.004233718">
        </testcase>
        <testcase classname="src/ide/ide-installer.test.ts" name="ide-installer &gt; getIdeInstaller &gt; returns a VsCodeInstaller for &quot;&apos;firebasestudio&apos;&quot;" time="0.001454563">
        </testcase>
        <testcase classname="src/ide/ide-installer.test.ts" name="ide-installer &gt; VsCodeInstaller &gt; install &gt; identifies the path to code cli on platform: &apos;win32&apos;" time="0.001886162">
        </testcase>
        <testcase classname="src/ide/ide-installer.test.ts" name="ide-installer &gt; VsCodeInstaller &gt; install &gt; identifies the path to code cli on platform: &apos;darwin&apos;" time="0.000649693">
        </testcase>
        <testcase classname="src/ide/ide-installer.test.ts" name="ide-installer &gt; VsCodeInstaller &gt; install &gt; identifies the path to code cli on platform: &apos;linux&apos;" time="0.000581356">
        </testcase>
        <testcase classname="src/ide/ide-installer.test.ts" name="ide-installer &gt; VsCodeInstaller &gt; install &gt; installs the extension using code cli" time="0.001463048">
        </testcase>
        <testcase classname="src/ide/ide-installer.test.ts" name="ide-installer &gt; VsCodeInstaller &gt; install &gt; returns that the cli was installed successfully" time="0.000745229">
        </testcase>
        <testcase classname="src/ide/ide-installer.test.ts" name="ide-installer &gt; VsCodeInstaller &gt; install &gt; returns that the cli was installed successfully" time="0.000291239">
        </testcase>
        <testcase classname="src/ide/ide-installer.test.ts" name="ide-installer &gt; VsCodeInstaller &gt; install &gt; should return a failure message if &apos;vscode&apos; is not installed" time="0.001399191">
        </testcase>
        <testcase classname="src/ide/ide-installer.test.ts" name="ide-installer &gt; VsCodeInstaller &gt; install &gt; should return a failure message if &apos;firebasestudio&apos; is not installed" time="0.000387988">
        </testcase>
    </testsuite>
    <testsuite name="src/ide/ideContext.test.ts" timestamp="2025-10-02T21:38:30.463Z" hostname="uby" tests="16" failures="0" errors="0" skipped="0" time="0.009784134">
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; createIdeContextStore &gt; should return undefined initially for ide context" time="0.001484138">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; createIdeContextStore &gt; should set and retrieve the ide context" time="0.000725453">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; createIdeContextStore &gt; should update the ide context when called multiple times" time="0.000174994">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; createIdeContextStore &gt; should handle empty string for file path" time="0.000120784">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; createIdeContextStore &gt; should notify subscribers when ide context changes" time="0.002689509">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; createIdeContextStore &gt; should stop notifying a subscriber after unsubscribe" time="0.000325873">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; createIdeContextStore &gt; should clear the ide context" time="0.000171718">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; FileSchema &gt; should validate a file with only required fields" time="0.00119386">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; FileSchema &gt; should validate a file with all fields" time="0.000285639">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; FileSchema &gt; should fail validation if path is missing" time="0.000430176">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; FileSchema &gt; should fail validation if timestamp is missing" time="0.000114282">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; IdeContextSchema &gt; should validate an empty context" time="0.000110785">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; IdeContextSchema &gt; should validate a context with an empty workspaceState" time="0.000066663">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; IdeContextSchema &gt; should validate a context with an empty openFiles array" time="0.000182868">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; IdeContextSchema &gt; should validate a context with a valid file" time="0.000083775">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; IdeContextSchema &gt; should fail validation with an invalid file" time="0.000059691">
        </testcase>
    </testsuite>
    <testsuite name="src/ide/process-utils.test.ts" timestamp="2025-10-02T21:38:30.463Z" hostname="uby" tests="7" failures="0" errors="0" skipped="0" time="0.011503947">
        <testcase classname="src/ide/process-utils.test.ts" name="getIdeProcessInfo &gt; on Unix &gt; should traverse up to find the shell and return grandparent process info" time="0.003362946">
        </testcase>
        <testcase classname="src/ide/process-utils.test.ts" name="getIdeProcessInfo &gt; on Unix &gt; should return parent process info if grandparent lookup fails" time="0.005174169">
            <system-out>
Failed to get process info for pid 800: Error: ps failed
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/ide/process-utils.test.ts:57:32
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

            </system-out>
        </testcase>
        <testcase classname="src/ide/process-utils.test.ts" name="getIdeProcessInfo &gt; on Windows &gt; should traverse up and find the great-grandchild of the root process" time="0.000407886">
        </testcase>
        <testcase classname="src/ide/process-utils.test.ts" name="getIdeProcessInfo &gt; on Windows &gt; should handle non-existent process gracefully" time="0.00011895">
        </testcase>
        <testcase classname="src/ide/process-utils.test.ts" name="getIdeProcessInfo &gt; on Windows &gt; should handle malformed JSON output gracefully" time="0.000830547">
            <system-out>
Failed to get process info for pid 1000: SyntaxError: Unexpected token &apos;j&apos;, &quot;{&quot;invalid&quot;:json}&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at getProcessInfo [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/ide/process-utils.ts:46:16[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at getIdeProcessInfoForWindows [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/ide/process-utils.ts:136:29[90m)[39m

            </system-out>
        </testcase>
        <testcase classname="src/ide/process-utils.test.ts" name="getIdeProcessInfo &gt; on Windows &gt; should handle PowerShell errors without crashing the process chain" time="0.000215249">
        </testcase>
        <testcase classname="src/ide/process-utils.test.ts" name="getIdeProcessInfo &gt; on Windows &gt; should handle partial JSON data with defaults" time="0.000096569">
        </testcase>
    </testsuite>
    <testsuite name="src/mcp/google-auth-provider.test.ts" timestamp="2025-10-02T21:38:30.464Z" hostname="uby" tests="8" failures="0" errors="0" skipped="0" time="0.009493134">
        <testcase classname="src/mcp/google-auth-provider.test.ts" name="GoogleCredentialProvider &gt; should throw an error if no scopes are provided" time="0.001921487">
        </testcase>
        <testcase classname="src/mcp/google-auth-provider.test.ts" name="GoogleCredentialProvider &gt; should use scopes from the config if provided" time="0.002248282">
        </testcase>
        <testcase classname="src/mcp/google-auth-provider.test.ts" name="GoogleCredentialProvider &gt; should throw an error for a non-allowlisted host" time="0.000227671">
        </testcase>
        <testcase classname="src/mcp/google-auth-provider.test.ts" name="GoogleCredentialProvider &gt; should allow luci.app" time="0.000535792">
        </testcase>
        <testcase classname="src/mcp/google-auth-provider.test.ts" name="GoogleCredentialProvider &gt; should allow sub.luci.app" time="0.000373561">
        </testcase>
        <testcase classname="src/mcp/google-auth-provider.test.ts" name="GoogleCredentialProvider &gt; should not allow googleapis.com without a subdomain" time="0.000134148">
        </testcase>
        <testcase classname="src/mcp/google-auth-provider.test.ts" name="GoogleCredentialProvider &gt; with provider instance &gt; should return credentials" time="0.001193179">
        </testcase>
        <testcase classname="src/mcp/google-auth-provider.test.ts" name="GoogleCredentialProvider &gt; with provider instance &gt; should return undefined if access token is not available" time="0.001318441">
            <system-err>
Failed to get access token from Google ADC

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="src/mcp/oauth-provider.test.ts" timestamp="2025-10-02T21:38:30.464Z" hostname="uby" tests="19" failures="0" errors="0" skipped="0" time="0.146703726">
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; authenticate &gt; should perform complete OAuth flow with PKCE" time="0.019474354">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; authenticate &gt; should handle OAuth discovery when no authorization URL provided" time="0.014580814">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; authenticate &gt; should perform dynamic client registration when no client ID provided" time="0.012996221">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; authenticate &gt; should handle OAuth callback errors" time="0.01289361">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; authenticate &gt; should handle state mismatch in callback" time="0.012011397">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; authenticate &gt; should handle token exchange failure" time="0.011183645">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; authenticate &gt; should handle callback timeout" time="0.00111823">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; refreshAccessToken &gt; should refresh token successfully" time="0.001210972">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; refreshAccessToken &gt; should include client secret in refresh request when available" time="0.000708342">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; refreshAccessToken &gt; should handle refresh token failure" time="0.001841439">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; getValidToken &gt; should return valid token when not expired" time="0.001941555">
            <system-out>
Getting valid token for server: test-server

Found token for server: test-server, expired: false
Returning valid token for server: test-server

            </system-out>
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; getValidToken &gt; should refresh expired token and return new token" time="0.000978772">
            <system-out>
Getting valid token for server: test-server

Found token for server: test-server, expired: true

            </system-out>
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; getValidToken &gt; should return null when no credentials exist" time="0.000641678">
            <system-out>
Getting valid token for server: test-server

No credentials found for server: test-server

            </system-out>
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; getValidToken &gt; should handle refresh failure and remove invalid token" time="0.000999581">
            <system-out>
Getting valid token for server: test-server

Found token for server: test-server, expired: true

            </system-out>
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; getValidToken &gt; should return null for token without refresh capability" time="0.000644914">
            <system-out>
Getting valid token for server: test-server

Found token for server: test-server, expired: true

            </system-out>
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; PKCE parameter generation &gt; should generate valid PKCE parameters" time="0.012945927">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; Authorization URL building &gt; should build correct authorization URL with all parameters" time="0.012811589">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; Authorization URL building &gt; should correctly append parameters to an authorization URL that already has query params" time="0.012598213">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; Authorization URL building &gt; should correctly append parameters to a URL with a fragment" time="0.012668333">
        </testcase>
    </testsuite>
    <testsuite name="src/mcp/oauth-token-storage.test.ts" timestamp="2025-10-02T21:38:30.465Z" hostname="uby" tests="21" failures="0" errors="0" skipped="0" time="0.016681824">
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; loadTokens &gt; should return empty map when token file does not exist" time="0.004244518">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; loadTokens &gt; should load tokens from file successfully" time="0.00196051">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; loadTokens &gt; should handle corrupted token file gracefully" time="0.001615781">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; loadTokens &gt; should handle file read errors other than ENOENT" time="0.000514944">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; saveToken &gt; should save token with restricted permissions" time="0.000908322">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; saveToken &gt; should update existing token for same server" time="0.00078298">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; saveToken &gt; should handle write errors gracefully" time="0.001700749">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; getToken &gt; should return token for existing server" time="0.0003025">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; getToken &gt; should return null for non-existent server" time="0.000225688">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; getToken &gt; should return null when no tokens file exists" time="0.000187817">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; removeToken &gt; should remove token for specific server" time="0.000391815">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; removeToken &gt; should remove token file when no tokens remain" time="0.000221129">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; removeToken &gt; should handle removal of non-existent token gracefully" time="0.000146732">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; removeToken &gt; should handle file operation errors gracefully" time="0.000283535">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; isTokenExpired &gt; should return false for token without expiry" time="0.000195862">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; isTokenExpired &gt; should return false for valid token" time="0.00015096">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; isTokenExpired &gt; should return true for expired token" time="0.000258549">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; isTokenExpired &gt; should return true for token expiring within buffer time" time="0.000137805">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; clearAllTokens &gt; should remove token file successfully" time="0.000336103">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; clearAllTokens &gt; should handle non-existent file gracefully" time="0.000215569">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; clearAllTokens &gt; should handle other file errors gracefully" time="0.000295076">
        </testcase>
    </testsuite>
    <testsuite name="src/mcp/oauth-utils.test.ts" timestamp="2025-10-02T21:38:30.465Z" hostname="uby" tests="21" failures="0" errors="0" skipped="0" time="0.009780837">
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; buildWellKnownUrls &gt; should build standard root-based URLs by default" time="0.00197192">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; buildWellKnownUrls &gt; should build path-based URLs when includePathSuffix is true" time="0.000386245">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; buildWellKnownUrls &gt; should handle root path correctly" time="0.000270772">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; buildWellKnownUrls &gt; should handle trailing slash in path" time="0.000150308">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; fetchProtectedResourceMetadata &gt; should fetch protected resource metadata successfully" time="0.001025418">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; fetchProtectedResourceMetadata &gt; should return null when fetch fails" time="0.000246697">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; fetchAuthorizationServerMetadata &gt; should fetch authorization server metadata successfully" time="0.00022651">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; fetchAuthorizationServerMetadata &gt; should return null when fetch fails" time="0.000174403">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; discoverAuthorizationServerMetadata &gt; should handle URLs without path components correctly" time="0.000452337">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; discoverAuthorizationServerMetadata &gt; should handle URLs with path components correctly" time="0.000271973">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; metadataToOAuthConfig &gt; should convert metadata to OAuth config" time="0.00090782">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; metadataToOAuthConfig &gt; should handle empty scopes" time="0.000482944">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; parseWWWAuthenticateHeader &gt; should parse resource metadata URI from WWW-Authenticate header" time="0.000189611">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; parseWWWAuthenticateHeader &gt; should return null when no resource metadata URI is found" time="0.000139678">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; extractBaseUrl &gt; should extract base URL from MCP server URL" time="0.000128237">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; extractBaseUrl &gt; should handle URLs with ports" time="0.000112107">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; isSSEEndpoint &gt; should return true for SSE endpoints" time="0.000190433">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; isSSEEndpoint &gt; should return true for non-MCP endpoints" time="0.000180875">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; isSSEEndpoint &gt; should return false for MCP endpoints" time="0.000169324">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; buildResourceParameter &gt; should build resource parameter from endpoint URL" time="0.000182839">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; buildResourceParameter &gt; should handle URLs with ports" time="0.000166218">
        </testcase>
    </testsuite>
    <testsuite name="src/qwen/qwenContentGenerator.test.ts" timestamp="2025-10-02T21:38:30.466Z" hostname="uby" tests="44" failures="0" errors="0" skipped="0" time="0.196197665">
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Core Content Generation Methods &gt; should generate content with valid token" time="0.002236551">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Core Content Generation Methods &gt; should generate content stream with valid token" time="0.000746231">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Core Content Generation Methods &gt; should count tokens without requiring authentication" time="0.000322016">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Core Content Generation Methods &gt; should embed content with valid token" time="0.000833644">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Token Management and Refresh Logic &gt; should refresh token on auth error and retry" time="0.000485789">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Token Management and Refresh Logic &gt; should refresh token on auth error and retry for content stream" time="0.000598939">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Token Management and Refresh Logic &gt; should handle token refresh failure" time="0.008178391">
            <system-err>
Failed to get token from shared manager: Error: Failed to obtain valid Qwen access token. Please re-authenticate.
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.test.ts:532:9
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Token Management and Refresh Logic &gt; should update endpoint when token is refreshed" time="0.00059385">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Endpoint URL Normalization &gt; should use default endpoint when no custom endpoint provided" time="0.000385012">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Endpoint URL Normalization &gt; should normalize hostname-only endpoints by adding https protocol" time="0.000289275">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Endpoint URL Normalization &gt; should preserve existing protocol in endpoint URLs" time="0.000388339">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Endpoint URL Normalization &gt; should not duplicate /v1 suffix if already present" time="0.000387568">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Client State Management &gt; should set dynamic credentials during operations" time="0.000270551">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Client State Management &gt; should set credentials even when operation throws" time="0.000515064">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Error Handling and Retry Logic &gt; should retry once on authentication errors" time="0.000668297">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Error Handling and Retry Logic &gt; should not retry non-authentication errors" time="0.000691711">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Error Handling and Retry Logic &gt; should handle error response from token refresh" time="0.001336454">
            <system-err>
Failed to get token from shared manager: Error: Failed to obtain valid Qwen access token. Please re-authenticate.
    at SharedTokenManager.getValidCredentials [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.test.ts:175:19[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at QwenContentGenerator.getValidToken [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.ts:91:27[90m)[39m
    at attemptOperation [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.ts:130:35[90m)[39m
    at QwenContentGenerator.executeWithCredentialManagement [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.ts:141:14[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.test.ts:908:7
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Token State Management &gt; should cache and return current token" time="0.000381467">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Token State Management &gt; should clear token on clearToken()" time="0.000250233">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Token State Management &gt; should handle concurrent token refresh requests" time="0.153024217">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Error Logging Suppression &gt; should suppress logging for authentication errors" time="0.000703282">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Error Logging Suppression &gt; should not suppress logging for non-auth errors" time="0.000478936">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Integration Tests &gt; should handle complete workflow: get token, use it, refresh on auth error, retry" time="0.000757172">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; SharedTokenManager Integration &gt; should use SharedTokenManager to get valid credentials" time="0.001258761">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; SharedTokenManager Integration &gt; should handle SharedTokenManager errors gracefully" time="0.001400553">
            <system-err>
Failed to get token from shared manager: Error: Token manager error
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.test.ts:1154:30
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; SharedTokenManager Integration &gt; should handle missing access token from credentials" time="0.000968082">
            <system-err>
Failed to get token from shared manager: Error: No access token available
    at QwenContentGenerator.getValidToken [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.ts:96:15[90m)[39m
    at attemptOperation [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.ts:130:35[90m)[39m
    at QwenContentGenerator.executeWithCredentialManagement [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.ts:141:14[90m)[39m

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; getCurrentEndpoint Method &gt; should handle URLs with custom ports" time="0.000617413">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; getCurrentEndpoint Method &gt; should handle URLs with existing paths" time="0.000526305">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; getCurrentEndpoint Method &gt; should handle undefined resource URL" time="0.000446878">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; getCurrentEndpoint Method &gt; should handle empty resource URL" time="0.000451807">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; isAuthError Method Enhanced &gt; should identify auth errors by numeric status codes" time="0.000576196">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; isAuthError Method Enhanced &gt; should identify auth errors by message content variations" time="0.000713161">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; isAuthError Method Enhanced &gt; should not identify non-auth errors" time="0.000733608">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; isAuthError Method Enhanced &gt; should handle complex error objects" time="0.000640536">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Stream Error Handling &gt; should set credentials when stream generation fails" time="0.001136635">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Stream Error Handling &gt; should set credentials for successful streams" time="0.000961871">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Token and Endpoint Management &gt; should get current token from SharedTokenManager" time="0.000660292">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Token and Endpoint Management &gt; should return null when no credentials available" time="0.000589051">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Token and Endpoint Management &gt; should return null when credentials have no access token" time="0.000709744">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Token and Endpoint Management &gt; should clear token through SharedTokenManager" time="0.001607736">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Constructor and Initialization &gt; should initialize with configured base URL when provided" time="0.000808507">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Constructor and Initialization &gt; should get SharedTokenManager instance" time="0.000708642">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Edge Cases and Error Conditions &gt; should handle token retrieval with warning when SharedTokenManager fails" time="0.002313453">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Edge Cases and Error Conditions &gt; should handle method types with token failure (except countTokens)" time="0.002076594">
            <system-err>
Failed to get token from shared manager: Error: Token error
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.test.ts:1658:30
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

Failed to get token from shared manager: Error: Token error
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.test.ts:1658:30
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

Failed to get token from shared manager: Error: Token error
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.test.ts:1658:30
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="src/qwen/qwenOAuth2.test.ts" timestamp="2025-10-02T21:38:30.467Z" hostname="uby" tests="82" failures="0" errors="0" skipped="0" time="2.09262054">
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="PKCE Code Generation &gt; generateCodeVerifier &gt; should generate a code verifier with correct length" time="0.001116246">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="PKCE Code Generation &gt; generateCodeVerifier &gt; should generate different verifiers on subsequent calls" time="0.000791546">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="PKCE Code Generation &gt; generateCodeChallenge &gt; should generate code challenge from verifier" time="0.000488654">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="PKCE Code Generation &gt; generatePKCEPair &gt; should generate valid PKCE pair" time="0.000238993">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Type Guards &gt; isDeviceAuthorizationSuccess &gt; should return true for successful authorization response" time="0.00014059">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Type Guards &gt; isDeviceAuthorizationSuccess &gt; should return false for error response" time="0.000089977">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Type Guards &gt; isDeviceTokenPending &gt; should return true for pending response" time="0.000112748">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Type Guards &gt; isDeviceTokenPending &gt; should return false for success response" time="0.000078896">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Type Guards &gt; isDeviceTokenPending &gt; should return false for error response" time="0.00005956">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Type Guards &gt; isDeviceTokenSuccess &gt; should return true for successful token response" time="0.00005905">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Type Guards &gt; isDeviceTokenSuccess &gt; should return false for pending response" time="0.000033111">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Type Guards &gt; isDeviceTokenSuccess &gt; should return false for error response" time="0.000050925">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Type Guards &gt; isDeviceTokenSuccess &gt; should return false for null access token" time="0.000038882">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Type Guards &gt; isDeviceTokenSuccess &gt; should return false for empty access token" time="0.00003773">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Type Guards &gt; isErrorResponse &gt; should return true for error responses" time="0.000059751">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Type Guards &gt; isErrorResponse &gt; should return false for successful responses" time="0.000033773">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; requestDeviceAuthorization &gt; should successfully request device authorization" time="0.001969355">
            <system-out>
Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; requestDeviceAuthorization &gt; should handle error response" time="0.001375547">
            <system-out>
Device authorization result: {
  error: [32m&apos;INVALID_REQUEST&apos;[39m,
  error_description: [32m&apos;The request parameters are invalid&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; refreshAccessToken &gt; should successfully refresh access token" time="0.000490639">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; refreshAccessToken &gt; should handle refresh error" time="0.00030248">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; refreshAccessToken &gt; should successfully refresh access token and update credentials" time="0.000663538">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; refreshAccessToken &gt; should use new refresh token if provided in response" time="0.000158704">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; getAccessToken &gt; should return access token if valid and not expired" time="0.000200471">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; getAccessToken &gt; should refresh token if access token is expired" time="0.000166959">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; getAccessToken &gt; should return undefined if no access token and no refresh token" time="0.007354355">
            <system-err>
Failed to get access token from shared manager: Error: No credentials available
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:530:30
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; pollDeviceToken &gt; should successfully poll for device token" time="0.000518409">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; pollDeviceToken &gt; should return pending status when authorization is pending" time="0.000247268">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; pollDeviceToken &gt; should handle HTTP error responses" time="0.000411632">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; pollDeviceToken &gt; should include status code in error for better handling" time="0.000247638">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; pollDeviceToken &gt; should handle authorization_pending with HTTP 400 according to RFC 8628" time="0.000186054">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; pollDeviceToken &gt; should handle slow_down with HTTP 429 according to RFC 8628" time="0.00017843">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; refreshAccessToken error handling &gt; should throw error if no refresh token available" time="0.000288645">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; refreshAccessToken error handling &gt; should handle 400 status as expired refresh token" time="0.001025368">
            <system-out>
Cached Qwen credentials cleared successfully.

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; refreshAccessToken error handling &gt; should handle other HTTP error statuses" time="0.00032399">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; credentials management &gt; should set and get credentials correctly" time="0.000172179">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; credentials management &gt; should handle empty credentials" time="0.000146091">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="getQwenOAuthClient &gt; should load cached credentials if available" time="0.001019498">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="getQwenOAuthClient &gt; should handle cached credentials refresh failure" time="0.002314425">
            <system-out>
Shared token manager failed, attempting device flow: Error: Token refresh failed
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:807:28
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  error: [32m&apos;invalid_request&apos;[39m,
  error_description: [32m&apos;Invalid request parameters&apos;[39m
}

            </system-out>
            <system-err>
Failed to get access token from shared manager: Error: Token refresh failed
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:807:28
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization flow failed: Device authorization failed: invalid_request - Invalid request parameters

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="CredentialsClearRequiredError &gt; should create error with correct name and message" time="0.000498723">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="CredentialsClearRequiredError &gt; should work without originalError" time="0.000154236">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="clearQwenCredentials &gt; should successfully clear credentials file" time="0.000513481">
            <system-out>
Cached Qwen credentials cleared successfully.

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="clearQwenCredentials &gt; should handle file not found error gracefully" time="0.000346932">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="clearQwenCredentials &gt; should handle other file system errors gracefully" time="0.000541833">
            <system-err>
Warning: Failed to clear cached Qwen credentials: Error: Permission denied
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:886:29
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client - Additional Error Scenarios &gt; requestDeviceAuthorization HTTP errors &gt; should handle HTTP error response with non-ok status" time="0.0005944">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="getQwenOAuthClient - Enhanced Error Scenarios &gt; should handle generic refresh token errors" time="0.001606574">
            <system-out>
Shared token manager failed, attempting device flow: Error: Refresh failed
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:966:28
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  error: [32m&apos;invalid_request&apos;[39m,
  error_description: [32m&apos;Invalid request parameters&apos;[39m
}

            </system-out>
            <system-err>
Failed to get access token from shared manager: Error: Refresh failed
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:966:28
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization flow failed: Device authorization failed: invalid_request - Invalid request parameters

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="getQwenOAuthClient - Enhanced Error Scenarios &gt; should handle different authentication failure reasons - timeout" time="2.008343246">
            <system-out>
Shared token manager failed, attempting device flow: Error: No credentials
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:1001:28
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m0.1[39m
}

Waiting for authorization...

polling for token...

            </system-out>
            <system-err>

Authorization timeout, please restart the process.

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="getQwenOAuthClient - Enhanced Error Scenarios &gt; should handle authentication failure reason - rate limit" time="0.002190866">
            <system-out>
Shared token manager failed, attempting device flow: Error: No credentials
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:1050:28
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}

Waiting for authorization...

polling for token...


Too many requests. The server is rate limiting our requests. Please select a different authentication method or try again later.

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="getQwenOAuthClient - Enhanced Error Scenarios &gt; should handle authentication failure reason - error" time="0.001401645">
            <system-out>
Shared token manager failed, attempting device flow: Error: No credentials
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:1101:28
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  error: [32m&apos;invalid_request&apos;[39m,
  error_description: [32m&apos;Invalid request parameters&apos;[39m
}

            </system-out>
            <system-err>
Device authorization flow failed: Device authorization failed: invalid_request - Invalid request parameters

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="authWithQwenDeviceFlow - Comprehensive Testing &gt; should handle device authorization error response" time="0.003069322">
            <system-out>
Shared token manager failed, attempting device flow: Error: No credentials
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:1160:28
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  error: [32m&apos;invalid_client&apos;[39m,
  error_description: [32m&apos;Client authentication failed&apos;[39m
}

            </system-out>
            <system-err>
Device authorization flow failed: Device authorization failed: invalid_client - Client authentication failed

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="authWithQwenDeviceFlow - Comprehensive Testing &gt; should handle successful authentication flow" time="0.000736243">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="authWithQwenDeviceFlow - Comprehensive Testing &gt; should handle 401 error during token polling" time="0.001419568">
            <system-out>
Shared token manager failed, attempting device flow: Error: No credentials
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:1234:28
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}

Waiting for authorization...

polling for token...

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="authWithQwenDeviceFlow - Comprehensive Testing &gt; should handle token polling with browser launch suppressed" time="0.001686783">
            <system-out>
Shared token manager failed, attempting device flow: Error: No credentials
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:1282:28
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}


=== Qwen OAuth Device Authorization ===
Please visit the following URL in your browser to authorize:

https://chat.qwen.ai/device?code=TEST123

Waiting for authorization to complete...

Waiting for authorization...

polling for token...

Authentication successful! Access token obtained.

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Browser Launch and Error Handling &gt; should handle browser launch failure gracefully" time="0.001809911">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Browser Launch and Error Handling &gt; should handle browser child process error gracefully" time="0.002028255">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Event Emitter Integration &gt; should export qwenOAuth2Events as EventEmitter" time="0.000263107">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Event Emitter Integration &gt; should define correct event enum values" time="0.000205601">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Utility Functions &gt; objectToUrlEncoded &gt; should encode object properties to URL-encoded format" time="0.00029157">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Utility Functions &gt; objectToUrlEncoded &gt; should handle special characters" time="0.000157421">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Utility Functions &gt; objectToUrlEncoded &gt; should handle empty object" time="0.000078055">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Utility Functions &gt; getQwenCachedCredentialPath &gt; should return correct path to cached credentials" time="0.004819021">
            <system-out>
Cached Qwen credentials cleared successfully.

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Credential Caching Functions &gt; cacheQwenCredentials &gt; should create directory and write credentials to file" time="0.00041057">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Credential Caching Functions &gt; loadCachedQwenCredentials &gt; should load and validate cached credentials successfully" time="0.001950842">
            <system-out>
Shared token manager failed, attempting device flow: Error: No cached creds
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:1593:30
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}


=== Qwen OAuth Device Authorization ===
Please visit the following URL in your browser to authorize:

https://chat.qwen.ai/device?code=TEST123

Waiting for authorization to complete...

Waiting for authorization...

polling for token...

Authentication successful! Access token obtained.

            </system-out>
            <system-err>
Failed to get access token from shared manager: Error: No cached creds
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:1593:30
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Credential Caching Functions &gt; loadCachedQwenCredentials &gt; should handle invalid cached credentials gracefully" time="0.001454913">
            <system-out>
Shared token manager failed, attempting device flow: Error: No cached creds
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:1654:30
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}


=== Qwen OAuth Device Authorization ===
Please visit the following URL in your browser to authorize:

https://chat.qwen.ai/device?code=TEST123

Waiting for authorization to complete...

Waiting for authorization...

polling for token...

Authentication successful! Access token obtained.

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Credential Caching Functions &gt; loadCachedQwenCredentials &gt; should handle file access errors" time="0.000993469">
            <system-out>
Shared token manager failed, attempting device flow: Error: No cached creds
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:1712:30
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  error: [32m&apos;invalid_request&apos;[39m,
  error_description: [32m&apos;Invalid request parameters&apos;[39m
}

            </system-out>
            <system-err>
Device authorization flow failed: Device authorization failed: invalid_request - Invalid request parameters

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; QwenOAuth2Client getAccessToken enhanced scenarios &gt; should return undefined when SharedTokenManager fails (no fallback)" time="0.002063">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; QwenOAuth2Client getAccessToken enhanced scenarios &gt; should return undefined when both manager and cache fail" time="0.000440105">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; QwenOAuth2Client getAccessToken enhanced scenarios &gt; should handle missing credentials gracefully" time="0.000262977">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; Enhanced requestDeviceAuthorization scenarios &gt; should include x-request-id header" time="0.001331004">
            <system-out>
Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; Enhanced requestDeviceAuthorization scenarios &gt; should include correct Content-Type and Accept headers" time="0.000637811">
            <system-out>
Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; Enhanced requestDeviceAuthorization scenarios &gt; should send correct form data" time="0.000931455">
            <system-out>
Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; Enhanced pollDeviceToken scenarios &gt; should handle JSON parsing error during error response" time="0.000520193">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; Enhanced pollDeviceToken scenarios &gt; should include status code in thrown errors" time="0.000510625">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; Enhanced pollDeviceToken scenarios &gt; should handle authorization_pending with correct status" time="0.00030805">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; Enhanced refreshAccessToken scenarios &gt; should call clearQwenCredentials on 400 error" time="0.0006156">
            <system-out>
Cached Qwen credentials cleared successfully.

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; Enhanced refreshAccessToken scenarios &gt; should throw CredentialsClearRequiredError on 400 error" time="0.001579905">
            <system-out>
Cached Qwen credentials cleared successfully.

Cached Qwen credentials cleared successfully.

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; Enhanced refreshAccessToken scenarios &gt; should preserve existing refresh token when new one not provided" time="0.000309713">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; Enhanced refreshAccessToken scenarios &gt; should include resource_url when provided in response" time="0.000218835">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="SharedTokenManager Integration in QwenOAuth2Client &gt; should use SharedTokenManager instance in constructor" time="0.000112268">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="SharedTokenManager Integration in QwenOAuth2Client &gt; should handle TokenManagerError types correctly in getQwenOAuthClient" time="0.017777983">
            <system-out>
Shared token manager failed, attempting device flow: TokenManagerError: NO_REFRESH_TOKEN
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:2155:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}


=== Qwen OAuth Device Authorization ===
Please visit the following URL in your browser to authorize:

https://chat.qwen.ai/device?code=TEST123

Waiting for authorization to complete...

Waiting for authorization...

polling for token...

Authentication successful! Access token obtained.

Shared token manager failed, attempting device flow: TokenManagerError: REFRESH_FAILED
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:2155:26
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}


=== Qwen OAuth Device Authorization ===
Please visit the following URL in your browser to authorize:

https://chat.qwen.ai/device?code=TEST123

Waiting for authorization to complete...

Waiting for authorization...

polling for token...

Authentication successful! Access token obtained.

Shared token manager failed, attempting device flow: TokenManagerError: NETWORK_ERROR
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:2155:26
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}


=== Qwen OAuth Device Authorization ===
Please visit the following URL in your browser to authorize:

https://chat.qwen.ai/device?code=TEST123

Waiting for authorization to complete...

Waiting for authorization...

polling for token...

Authentication successful! Access token obtained.

Shared token manager failed, attempting device flow: TokenManagerError: REFRESH_FAILED
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:2155:26
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}


=== Qwen OAuth Device Authorization ===
Please visit the following URL in your browser to authorize:

https://chat.qwen.ai/device?code=TEST123

Waiting for authorization to complete...

Waiting for authorization...

polling for token...

Authentication successful! Access token obtained.

            </system-out>
            <system-err>
Token manager error: NO_REFRESH_TOKEN

Token manager error: REFRESH_FAILED

Token manager error: NETWORK_ERROR

Token manager error: REFRESH_FAILED

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Constants and Configuration &gt; should have correct OAuth endpoints" time="0.00054057">
            <system-out>
Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Constants and Configuration &gt; should use correct client ID in requests" time="0.000379132">
            <system-out>
Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Constants and Configuration &gt; should use correct default scope" time="0.000347944">
            <system-out>
Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="src/qwen/sharedTokenManager.test.ts" timestamp="2025-10-02T21:38:30.471Z" hostname="uby" tests="31" failures="0" errors="0" skipped="0" time="0.265404941">
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Singleton Pattern &gt; should return the same instance when called multiple times" time="0.001975647">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Singleton Pattern &gt; should create a new instance after reset" time="0.000913441">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; getValidCredentials &gt; should return valid cached credentials without refresh" time="0.000806723">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; getValidCredentials &gt; should refresh expired credentials" time="0.001457708">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; getValidCredentials &gt; should force refresh when forceRefresh is true" time="0.000411782">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; getValidCredentials &gt; should throw TokenManagerError when refresh token is missing" time="0.001445917">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; getValidCredentials &gt; should throw TokenManagerError when refresh fails" time="0.000477804">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; getValidCredentials &gt; should handle network errors during refresh" time="0.00058299">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; getValidCredentials &gt; should wait for ongoing refresh and return same result" time="0.001074189">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; getValidCredentials &gt; should reload credentials from file when file is modified" time="0.000990464">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Cache Management &gt; should clear cache" time="0.0003723">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Cache Management &gt; should return current credentials from cache" time="0.00023773">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Cache Management &gt; should return null when no credentials are cached" time="0.000104804">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Refresh Status &gt; should return false when no refresh is in progress" time="0.00020514">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Refresh Status &gt; should return true when refresh is in progress" time="0.000880651">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Debug Info &gt; should return complete debug information" time="0.000735492">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Debug Info &gt; should indicate expired credentials in debug info" time="0.000159866">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Debug Info &gt; should indicate no credentials in debug info" time="0.000088133">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Error Handling &gt; should create TokenManagerError with correct type and message" time="0.000225518">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Error Handling &gt; should handle file access errors gracefully" time="0.000343246">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Error Handling &gt; should handle missing file gracefully" time="0.000297932">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Error Handling &gt; should handle lock timeout scenarios" time="0.239122543">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Error Handling &gt; should handle refresh response without access token" time="0.001298895">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; File System Operations &gt; should handle file reload failures gracefully" time="0.000780024">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; File System Operations &gt; should handle invalid JSON in credentials file" time="0.000756601">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; File System Operations &gt; should handle directory creation during save" time="0.002098405">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Lock File Management &gt; should clean up lock file during process cleanup" time="0.000423404">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Lock File Management &gt; should handle stale lock cleanup" time="0.001729963">
            <system-err>
Removed stale lock file: /home/user/.qwen/oauth_creds.lock (age: 1759441103088ms)

            </system-err>
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; CredentialsClearRequiredError handling &gt; should clear memory cache when CredentialsClearRequiredError is thrown during refresh" time="0.001769786">
            <system-out>
SharedTokenManager: Clearing memory cache due to credentials clear requirement

            </system-out>
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; CredentialsClearRequiredError handling &gt; should convert CredentialsClearRequiredError to TokenManagerError" time="0.000825879">
            <system-out>
SharedTokenManager: Clearing memory cache due to credentials clear requirement

            </system-out>
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; CredentialsClearRequiredError handling &gt; should properly clean up timeout when file operation completes before timeout" time="0.000765858">
        </testcase>
    </testsuite>
    <testsuite name="src/services/chatRecordingService.test.ts" timestamp="2025-10-02T21:38:30.472Z" hostname="uby" tests="10" failures="0" errors="0" skipped="0" time="0.015231799">
        <testcase classname="src/services/chatRecordingService.test.ts" name="ChatRecordingService &gt; initialize &gt; should create a new session if none is provided" time="0.005080806">
        </testcase>
        <testcase classname="src/services/chatRecordingService.test.ts" name="ChatRecordingService &gt; initialize &gt; should resume from an existing session if provided" time="0.001709014">
        </testcase>
        <testcase classname="src/services/chatRecordingService.test.ts" name="ChatRecordingService &gt; recordMessage &gt; should record a new message" time="0.002042983">
        </testcase>
        <testcase classname="src/services/chatRecordingService.test.ts" name="ChatRecordingService &gt; recordMessage &gt; should append to the last message if append is true and types match" time="0.001287083">
        </testcase>
        <testcase classname="src/services/chatRecordingService.test.ts" name="ChatRecordingService &gt; recordThought &gt; should queue a thought" time="0.000861345">
        </testcase>
        <testcase classname="src/services/chatRecordingService.test.ts" name="ChatRecordingService &gt; recordMessageTokens &gt; should update the last message with token info" time="0.000703332">
        </testcase>
        <testcase classname="src/services/chatRecordingService.test.ts" name="ChatRecordingService &gt; recordMessageTokens &gt; should queue token info if the last message already has tokens" time="0.000441738">
        </testcase>
        <testcase classname="src/services/chatRecordingService.test.ts" name="ChatRecordingService &gt; recordToolCalls &gt; should add new tool calls to the last message" time="0.000629315">
        </testcase>
        <testcase classname="src/services/chatRecordingService.test.ts" name="ChatRecordingService &gt; recordToolCalls &gt; should create a new message if the last message is not from gemini" time="0.000584552">
        </testcase>
        <testcase classname="src/services/chatRecordingService.test.ts" name="ChatRecordingService &gt; deleteSession &gt; should delete the session file" time="0.000453549">
        </testcase>
    </testsuite>
    <testsuite name="src/services/fileDiscoveryService.test.ts" timestamp="2025-10-02T21:38:30.472Z" hostname="uby" tests="13" failures="0" errors="0" skipped="0" time="0.033706672">
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; initialization &gt; should initialize git ignore parser by default in a git repo" time="0.005593776">
        </testcase>
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; initialization &gt; should not load git repo patterns when not in a git repo" time="0.00142591">
        </testcase>
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; initialization &gt; should load .qwenignore patterns even when not in a git repo" time="0.002324173">
        </testcase>
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; filterFiles &gt; should filter out git-ignored and gemini-ignored files by default" time="0.003815174">
        </testcase>
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; filterFiles &gt; should not filter files when respectGitIgnore is false" time="0.002853823">
        </testcase>
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; filterFiles &gt; should not filter files when respectGeminiIgnore is false" time="0.001762733">
        </testcase>
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; filterFiles &gt; should handle empty file list" time="0.001688706">
        </testcase>
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; shouldGitIgnoreFile &amp; shouldGeminiIgnoreFile &gt; should return true for git-ignored files" time="0.003152106">
        </testcase>
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; shouldGitIgnoreFile &amp; shouldGeminiIgnoreFile &gt; should return false for non-git-ignored files" time="0.00184188">
        </testcase>
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; shouldGitIgnoreFile &amp; shouldGeminiIgnoreFile &gt; should return true for gemini-ignored files" time="0.002572502">
        </testcase>
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; shouldGitIgnoreFile &amp; shouldGeminiIgnoreFile &gt; should return false for non-gemini-ignored files" time="0.001959217">
        </testcase>
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; edge cases &gt; should handle relative project root paths" time="0.001608818">
        </testcase>
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; edge cases &gt; should handle filterFiles with undefined options" time="0.001577481">
        </testcase>
    </testsuite>
    <testsuite name="src/services/fileSystemService.test.ts" timestamp="2025-10-02T21:38:30.473Z" hostname="uby" tests="3" failures="0" errors="0" skipped="0" time="0.008394631">
        <testcase classname="src/services/fileSystemService.test.ts" name="StandardFileSystemService &gt; readTextFile &gt; should read file content using fs" time="0.004147568">
        </testcase>
        <testcase classname="src/services/fileSystemService.test.ts" name="StandardFileSystemService &gt; readTextFile &gt; should propagate fs.readFile errors" time="0.001764928">
        </testcase>
        <testcase classname="src/services/fileSystemService.test.ts" name="StandardFileSystemService &gt; writeTextFile &gt; should write file content using fs" time="0.000528128">
        </testcase>
    </testsuite>
    <testsuite name="src/services/gitService.test.ts" timestamp="2025-10-02T21:38:30.473Z" hostname="uby" tests="14" failures="0" errors="0" skipped="0" time="0.043752961">
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; constructor &gt; should successfully create an instance" time="0.004743692">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; verifyGitAvailability &gt; should resolve true if git --version command succeeds" time="0.004245911">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; verifyGitAvailability &gt; should resolve false if git --version command fails" time="0.004582804">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; initialize &gt; should throw an error if Git is not available" time="0.001451528">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; initialize &gt; should call setupShadowGitRepository if Git is available" time="0.001228735">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; setupShadowGitRepository &gt; should create history and repository directories" time="0.002643363">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; setupShadowGitRepository &gt; should create a .gitconfig file with the correct content" time="0.005573388">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; setupShadowGitRepository &gt; should initialize git repo in historyDir if not already initialized" time="0.003907173">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; setupShadowGitRepository &gt; should not initialize git repo if already initialized" time="0.001639776">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; setupShadowGitRepository &gt; should copy .gitignore from projectRoot if it exists" time="0.00222542">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; setupShadowGitRepository &gt; should not create a .gitignore in shadow repo if project .gitignore does not exist" time="0.001824719">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; setupShadowGitRepository &gt; should throw an error if reading projectRoot .gitignore fails with other errors" time="0.003324355">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; setupShadowGitRepository &gt; should make an initial commit if no commits exist in history repo" time="0.00229012">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; setupShadowGitRepository &gt; should not make an initial commit if commits already exist" time="0.002510568">
        </testcase>
    </testsuite>
    <testsuite name="src/services/loopDetectionService.test.ts" timestamp="2025-10-02T21:38:30.473Z" hostname="uby" tests="35" failures="0" errors="0" skipped="0" time="0.240391432">
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Tool Call Loop Detection &gt; should not detect a loop for fewer than TOOL_CALL_LOOP_THRESHOLD identical calls" time="0.002439447">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Tool Call Loop Detection &gt; should detect a loop on the TOOL_CALL_LOOP_THRESHOLD-th identical call" time="0.000881592">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Tool Call Loop Detection &gt; should detect a loop on subsequent identical calls" time="0.000364895">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Tool Call Loop Detection &gt; should not detect a loop for different tool calls" time="0.000428894">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Tool Call Loop Detection &gt; should not reset tool call counter for other event types" time="0.000548816">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection &gt; should not detect a loop for random content" time="0.168374034">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection &gt; should detect a loop when a chunk of content repeats consecutively" time="0.001854213">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection &gt; should not detect a loop if repetitions are very far apart" time="0.01214796">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should not detect a loop when repetitive content is inside a code block" time="0.000485248">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should not detect loops when content transitions into a code block" time="0.000850374">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should skip loop detection when already inside a code block (this.inCodeBlock)" time="0.000185033">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should correctly track inCodeBlock state with multiple fence transitions" time="0.000117818">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should detect a loop when repetitive content is outside a code block" time="0.000619537">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should handle content with multiple code blocks and no loops" time="0.000068888">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should handle content with mixed code blocks and looping text" time="0.000578832">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should not detect a loop for a long code block with some repeating tokens" time="0.000191695">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should reset tracking when a code fence is found" time="0.000566208">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should reset tracking when a table is detected" time="0.001169997">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should reset tracking when a list item is detected" time="0.001096509">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should reset tracking when a heading is detected" time="0.001254202">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should reset tracking when a blockquote is detected" time="0.001214388">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should reset tracking for various list item formats" time="0.00678422">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should reset tracking for various table formats" time="0.005673654">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should reset tracking for various heading levels" time="0.010299297">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Edge Cases &gt; should handle empty content" time="0.000208085">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Divider Content Detection &gt; should not detect a loop for repeating divider-like content" time="0.000320133">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Divider Content Detection &gt; should not detect a loop for repeating complex box-drawing dividers" time="0.00042132">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Reset Functionality &gt; tool call should reset content count" time="0.000297571">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; General Behavior &gt; should return false for unhandled event types" time="0.000330913">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService LLM Checks &gt; should not trigger LLM check before LLM_CHECK_AFTER_TURNS" time="0.000595092">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService LLM Checks &gt; should trigger LLM check on the 30th turn" time="0.000549838">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService LLM Checks &gt; should detect a cognitive loop when confidence is high" time="0.003947388">
            <system-err>
Repetitive actions

            </system-err>
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService LLM Checks &gt; should not detect a loop when confidence is low" time="0.00039397">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService LLM Checks &gt; should adjust the check interval based on confidence" time="0.000299174">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService LLM Checks &gt; should handle errors from generateJson gracefully" time="0.012624452">
            <system-out>
Error: API error
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/services/loopDetectionService.test.ts:718:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="src/services/shellExecutionService.test.ts" timestamp="2025-10-02T21:38:30.474Z" hostname="uby" tests="30" failures="0" errors="0" skipped="0" time="0.046465132">
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService &gt; Successful Execution &gt; should execute a command and capture output" time="0.011875185">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService &gt; Successful Execution &gt; should strip ANSI codes from output" time="0.00304628">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService &gt; Successful Execution &gt; should correctly decode multi-byte characters split across chunks" time="0.003367935">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService &gt; Successful Execution &gt; should handle commands with no output" time="0.00109105">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService &gt; Failed Execution &gt; should capture a non-zero exit code" time="0.002174646">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService &gt; Failed Execution &gt; should capture a termination signal" time="0.000792457">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService &gt; Failed Execution &gt; should handle a synchronous spawn error" time="0.00082631">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService &gt; Aborting Commands &gt; should abort a running process and set the aborted flag" time="0.001133098">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService &gt; Binary Output &gt; should detect binary output and switch to progress events" time="0.001173723">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService &gt; Binary Output &gt; should not emit data events after binary is detected" time="0.002427694">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService &gt; Platform-Specific Behavior &gt; should use cmd.exe on Windows" time="0.001232371">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService &gt; Platform-Specific Behavior &gt; should use bash on Linux" time="0.000852859">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Successful Execution &gt; should execute a command and capture stdout and stderr" time="0.002022965">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Successful Execution &gt; should strip ANSI codes from output" time="0.000730763">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Successful Execution &gt; should correctly decode multi-byte characters split across chunks" time="0.000526535">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Successful Execution &gt; should handle commands with no output" time="0.000347524">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Failed Execution &gt; should capture a non-zero exit code and format output correctly" time="0.00035625">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Failed Execution &gt; should capture a termination signal" time="0.000315314">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Failed Execution &gt; should handle a spawn error" time="0.000455995">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Failed Execution &gt; handles errors that do not fire the exit event" time="0.001826882">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Aborting Commands &gt; on &apos;linux&apos; &gt; should abort a running process and set the aborted flag" time="0.001060914">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Aborting Commands &gt; on &apos;win32&apos; &gt; should abort a running process and set the aborted flag" time="0.000385994">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Aborting Commands &gt; should gracefully attempt SIGKILL on linux if SIGTERM fails" time="0.002219098">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Binary Output &gt; should detect binary output and switch to progress events" time="0.000841908">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Binary Output &gt; should not emit data events after binary is detected" time="0.000693173">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Platform-Specific Behavior &gt; should use cmd.exe on Windows" time="0.000595052">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Platform-Specific Behavior &gt; should use bash and detached process group on Linux" time="0.000477845">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService execution method selection &gt; should use node-pty when shouldUseNodePty is true and pty is available" time="0.000908391">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService execution method selection &gt; should use child_process when shouldUseNodePty is false" time="0.000394681">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService execution method selection &gt; should fall back to child_process if pty is not available even if shouldUseNodePty is true" time="0.000378891">
        </testcase>
    </testsuite>
    <testsuite name="src/telemetry/loggers.test.ts" timestamp="2025-10-02T21:38:30.477Z" hostname="uby" tests="15" failures="0" errors="0" skipped="0" time="0.038657046">
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logChatCompression &gt; logs the chat compression event to QwenLogger" time="0.025681424">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logChatCompression &gt; records the chat compression event to OTEL" time="0.001659843">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logCliConfiguration &gt; should log the cli configuration" time="0.000856345">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logUserPrompt &gt; should log a user prompt" time="0.001065682">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logUserPrompt &gt; should not log prompt if disabled" time="0.000543997">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logApiResponse &gt; should log an API response with all fields" time="0.001329011">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logApiResponse &gt; should log an API response with an error" time="0.000473136">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logApiRequest &gt; should log an API request with request_text" time="0.000448079">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logApiRequest &gt; should log an API request without request_text" time="0.000348274">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logFlashFallback &gt; should log flash fallback event" time="0.000538106">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logToolCall &gt; should log a tool call with all fields" time="0.000995353">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logToolCall &gt; should log a tool call with a reject decision" time="0.00104823">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logToolCall &gt; should log a tool call with a modify decision" time="0.000699786">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logToolCall &gt; should log a tool call without a decision" time="0.000625338">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logToolCall &gt; should log a failed tool call with an error" time="0.000524902">
        </testcase>
    </testsuite>
    <testsuite name="src/telemetry/metrics.test.ts" timestamp="2025-10-02T21:38:30.477Z" hostname="uby" tests="13" failures="0" errors="0" skipped="0" time="0.123864102">
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordChatCompressionMetrics &gt; does not record metrics if not initialized" time="0.024656347">
        </testcase>
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordChatCompressionMetrics &gt; records token compression with the correct attributes" time="0.008825529">
        </testcase>
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordTokenUsageMetrics &gt; should not record metrics if not initialized" time="0.008284878">
        </testcase>
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordTokenUsageMetrics &gt; should record token usage with the correct attributes" time="0.008511598">
        </testcase>
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordTokenUsageMetrics &gt; should record token usage for different types" time="0.005414194">
        </testcase>
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordTokenUsageMetrics &gt; should handle different models" time="0.003086534">
        </testcase>
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordFileOperationMetric &gt; should not record metrics if not initialized" time="0.010906992">
        </testcase>
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordFileOperationMetric &gt; should record file creation with all attributes" time="0.008848642">
        </testcase>
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordFileOperationMetric &gt; should record file read with minimal attributes" time="0.017781579">
        </testcase>
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordFileOperationMetric &gt; should record file update with some attributes" time="0.005320821">
        </testcase>
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordFileOperationMetric &gt; should include diffStat when provided" time="0.004506172">
        </testcase>
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordFileOperationMetric &gt; should not include diffStat attributes when diffStat is not provided" time="0.00485594">
        </testcase>
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordFileOperationMetric &gt; should handle diffStat with all zero values" time="0.011136597">
        </testcase>
    </testsuite>
    <testsuite name="src/telemetry/sdk.test.ts" timestamp="2025-10-02T21:38:30.478Z" hostname="uby" tests="4" failures="0" errors="0" skipped="0" time="0.012809173">
        <testcase classname="src/telemetry/sdk.test.ts" name="Telemetry SDK &gt; should use gRPC exporters when protocol is grpc" time="0.006085897">
        </testcase>
        <testcase classname="src/telemetry/sdk.test.ts" name="Telemetry SDK &gt; should use HTTP exporters when protocol is http" time="0.002054884">
        </testcase>
        <testcase classname="src/telemetry/sdk.test.ts" name="Telemetry SDK &gt; should parse gRPC endpoint correctly" time="0.002513894">
        </testcase>
        <testcase classname="src/telemetry/sdk.test.ts" name="Telemetry SDK &gt; should parse HTTP endpoint correctly" time="0.001154748">
        </testcase>
    </testsuite>
    <testsuite name="src/telemetry/telemetry-utils.test.ts" timestamp="2025-10-02T21:38:30.478Z" hostname="uby" tests="6" failures="0" errors="0" skipped="0" time="0.002950321">
        <testcase classname="src/telemetry/telemetry-utils.test.ts" name="getProgrammingLanguage &gt; should return the programming language when file_path is present" time="0.001261325">
        </testcase>
        <testcase classname="src/telemetry/telemetry-utils.test.ts" name="getProgrammingLanguage &gt; should return the programming language when absolute_path is present" time="0.000155097">
        </testcase>
        <testcase classname="src/telemetry/telemetry-utils.test.ts" name="getProgrammingLanguage &gt; should return the programming language when path is present" time="0.000079587">
        </testcase>
        <testcase classname="src/telemetry/telemetry-utils.test.ts" name="getProgrammingLanguage &gt; should return undefined when no file path is present" time="0.000087632">
        </testcase>
        <testcase classname="src/telemetry/telemetry-utils.test.ts" name="getProgrammingLanguage &gt; should handle unknown file extensions gracefully" time="0.000069709">
        </testcase>
        <testcase classname="src/telemetry/telemetry-utils.test.ts" name="getProgrammingLanguage &gt; should handle files with no extension" time="0.000074979">
        </testcase>
    </testsuite>
    <testsuite name="src/telemetry/telemetry.test.ts" timestamp="2025-10-02T21:38:30.478Z" hostname="uby" tests="2" failures="0" errors="0" skipped="0" time="0.009244044">
        <testcase classname="src/telemetry/telemetry.test.ts" name="telemetry &gt; should initialize the telemetry service" time="0.006047326">
        </testcase>
        <testcase classname="src/telemetry/telemetry.test.ts" name="telemetry &gt; should shutdown the telemetry service" time="0.00215545">
        </testcase>
    </testsuite>
    <testsuite name="src/telemetry/uiTelemetry.test.ts" timestamp="2025-10-02T21:38:30.478Z" hostname="uby" tests="19" failures="0" errors="0" skipped="0" time="0.037785584">
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; should have correct initial metrics" time="0.001619999">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; should emit an update event when an event is added" time="0.001208007">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; API Response Event Processing &gt; should process a single ApiResponseEvent" time="0.00021094">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; API Response Event Processing &gt; should aggregate multiple ApiResponseEvents for the same model" time="0.000214247">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; API Response Event Processing &gt; should handle ApiResponseEvents for different models" time="0.000221971">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; API Error Event Processing &gt; should process a single ApiErrorEvent" time="0.000207815">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; API Error Event Processing &gt; should aggregate ApiErrorEvents and ApiResponseEvents" time="0.000131914">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; Tool Call Event Processing &gt; should process a single successful ToolCallEvent" time="0.024111478">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; Tool Call Event Processing &gt; should process a single failed ToolCallEvent" time="0.000738838">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; Tool Call Event Processing &gt; should process a ToolCallEvent with modify decision" time="0.001307791">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; Tool Call Event Processing &gt; should process a ToolCallEvent without a decision" time="0.00112916">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; Tool Call Event Processing &gt; should aggregate multiple ToolCallEvents for the same tool" time="0.001185014">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; Tool Call Event Processing &gt; should handle ToolCallEvents for different tools" time="0.000970527">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; resetLastPromptTokenCount &gt; should reset the last prompt token count to 0" time="0.000163583">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; resetLastPromptTokenCount &gt; should emit an update event when resetLastPromptTokenCount is called" time="0.000218725">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; resetLastPromptTokenCount &gt; should not affect other metrics when resetLastPromptTokenCount is called" time="0.000109112">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; resetLastPromptTokenCount &gt; should work correctly when called multiple times" time="0.000144357">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; Tool Call Event with Line Count Metadata &gt; should aggregate valid line count metadata" time="0.000850044">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; Tool Call Event with Line Count Metadata &gt; should ignore null/undefined values in line count metadata" time="0.001618867">
        </testcase>
    </testsuite>
    <testsuite name="src/subagents/builtin-agents.test.ts" timestamp="2025-10-02T21:38:30.479Z" hostname="uby" tests="8" failures="0" errors="0" skipped="0" time="0.006341039">
        <testcase classname="src/subagents/builtin-agents.test.ts" name="BuiltinAgentRegistry &gt; getBuiltinAgents &gt; should return array of builtin agents with correct properties" time="0.002596677">
        </testcase>
        <testcase classname="src/subagents/builtin-agents.test.ts" name="BuiltinAgentRegistry &gt; getBuiltinAgents &gt; should include general-purpose agent" time="0.000328849">
        </testcase>
        <testcase classname="src/subagents/builtin-agents.test.ts" name="BuiltinAgentRegistry &gt; getBuiltinAgent &gt; should return correct agent for valid name" time="0.000235246">
        </testcase>
        <testcase classname="src/subagents/builtin-agents.test.ts" name="BuiltinAgentRegistry &gt; getBuiltinAgent &gt; should return null for invalid name" time="0.00014592">
        </testcase>
        <testcase classname="src/subagents/builtin-agents.test.ts" name="BuiltinAgentRegistry &gt; isBuiltinAgent &gt; should return true for valid builtin agent names" time="0.000184492">
        </testcase>
        <testcase classname="src/subagents/builtin-agents.test.ts" name="BuiltinAgentRegistry &gt; isBuiltinAgent &gt; should return false for invalid names" time="0.000109443">
        </testcase>
        <testcase classname="src/subagents/builtin-agents.test.ts" name="BuiltinAgentRegistry &gt; getBuiltinAgentNames &gt; should return array of agent names" time="0.000760598">
        </testcase>
        <testcase classname="src/subagents/builtin-agents.test.ts" name="BuiltinAgentRegistry &gt; consistency &gt; should maintain consistency across all methods" time="0.000409648">
        </testcase>
    </testsuite>
    <testsuite name="src/subagents/subagent-manager.test.ts" timestamp="2025-10-02T21:38:30.479Z" hostname="uby" tests="52" failures="0" errors="0" skipped="0" time="0.099235035">
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; parseSubagentContent &gt; should parse valid markdown content" time="0.029332905">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
            <system-err>
Error accessing installation ID file, generating ephemeral ID: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getInstallationIdPath [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:40:30[90m)[39m
    at InstallationManager.getInstallationIdPath [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/installationManager.ts:14:20[90m)[39m
    at InstallationManager.readInstallationIdFromFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/installationManager.ts:18:37[90m)[39m
    at InstallationManager.getInstallationId [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/installationManager.ts:42:33[90m)[39m
    at QwenLogger.generateUserId [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/qwen-logger/qwen-logger.ts:123:53[90m)[39m
    at new QwenLogger [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/qwen-logger/qwen-logger.ts:114:24[90m)[39m
    at QwenLogger.getInstance [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/qwen-logger/qwen-logger.ts:131:29[90m)[39m
    at logCliConfiguration [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/loggers.ts:85:14[90m)[39m {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-err>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; parseSubagentContent &gt; should parse content with tools" time="0.0025388">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; parseSubagentContent &gt; should parse content with model config" time="0.001704686">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; parseSubagentContent &gt; should parse content with run config" time="0.001465403">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; parseSubagentContent &gt; should handle numeric name and description values" time="0.001389141">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; parseSubagentContent &gt; should handle boolean name and description values" time="0.001408388">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; parseSubagentContent &gt; should determine level from file path" time="0.00122642">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; parseSubagentContent &gt; should throw error for invalid frontmatter format" time="0.001409279">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; parseSubagentContent &gt; should throw error for missing name" time="0.00122597">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; parseSubagentContent &gt; should throw error for missing description" time="0.001210681">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; parseSubagentContent &gt; should not warn when filename matches subagent name" time="0.001575858">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; serializeSubagent &gt; should serialize basic configuration" time="0.001656186">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; serializeSubagent &gt; should serialize configuration with tools" time="0.001154177">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; serializeSubagent &gt; should serialize configuration with model config" time="0.001091391">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; serializeSubagent &gt; should not include empty optional fields" time="0.000989182">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; createSubagent &gt; should create subagent successfully" time="0.002717581">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; createSubagent &gt; should throw error if file already exists and overwrite is false" time="0.001887635">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; createSubagent &gt; should overwrite file when overwrite is true" time="0.000840687">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; createSubagent &gt; should use custom path when provided" time="0.001145109">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; createSubagent &gt; should throw error on file write failure" time="0.001049112">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; loadSubagent &gt; should load subagent from project level first" time="0.001147424">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; loadSubagent &gt; should fall back to user level if project level fails" time="0.001023926">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; loadSubagent &gt; should return null if not found at either level" time="0.000878346">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; loadSubagent &gt; should load subagent even when filename does not match name" time="0.006315862">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; loadSubagent &gt; should search user level when filename mismatch at project level" time="0.001717359">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; loadSubagent &gt; should handle specific level search with filename mismatch" time="0.001190684">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; updateSubagent &gt; should update existing subagent" time="0.001296831">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; updateSubagent &gt; should throw error if subagent not found" time="0.001265202">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; updateSubagent &gt; should throw error on write failure" time="0.001047059">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; deleteSubagent &gt; should delete subagent from specified level" time="0.000846948">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; deleteSubagent &gt; should delete from both levels if no level specified" time="0.000692572">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; deleteSubagent &gt; should throw error if subagent not found" time="0.000709243">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; deleteSubagent &gt; should succeed if deleted from at least one level" time="0.0008101">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; deleteSubagent &gt; should delete subagent with mismatched filename" time="0.000593719">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; deleteSubagent &gt; should handle deletion when multiple files exist but only one matches" time="0.000581116">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; listSubagents &gt; should list subagents from both levels" time="0.001164315">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; listSubagents &gt; should prioritize project level over user level" time="0.000732907">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; listSubagents &gt; should filter by level" time="0.000797607">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; listSubagents &gt; should sort by name" time="0.000792738">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; listSubagents &gt; should handle empty directories" time="0.00073439">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; listSubagents &gt; should handle directory read errors" time="0.000832712">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; findSubagentByName &gt; should find existing subagent" time="0.000873547">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; findSubagentByName &gt; should return null for non-existent subagent" time="0.000744288">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; isNameAvailable &gt; should return true for available names" time="0.00084254">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; isNameAvailable &gt; should return false for existing names" time="0.001174604">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; isNameAvailable &gt; should check specific level when provided" time="0.002322951">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; Runtime Configuration Methods &gt; convertToRuntimeConfig &gt; should convert basic configuration" time="0.001642271">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; Runtime Configuration Methods &gt; convertToRuntimeConfig &gt; should include tool configuration when tools are specified" time="0.00151227">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; Runtime Configuration Methods &gt; convertToRuntimeConfig &gt; should transform display names to tool names in tool configuration" time="0.001505317">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
            <system-err>
Tool &quot;unknown_tool&quot; not found in tool registry, preserving as-is

            </system-err>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; Runtime Configuration Methods &gt; convertToRuntimeConfig &gt; should merge custom model and run configurations" time="0.001467006">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; Runtime Configuration Methods &gt; mergeConfigurations &gt; should merge basic properties" time="0.001241248">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; Runtime Configuration Methods &gt; mergeConfigurations &gt; should merge nested configurations" time="0.001173322">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="src/subagents/subagent-statistics.test.ts" timestamp="2025-10-02T21:38:30.482Z" hostname="uby" tests="29" failures="0" errors="0" skipped="0" time="0.017451638">
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; basic statistics tracking &gt; should track execution time" time="0.001738048">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; basic statistics tracking &gt; should track rounds" time="0.000215839">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; basic statistics tracking &gt; should track tool calls" time="0.000333668">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; basic statistics tracking &gt; should track tokens" time="0.000220879">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; tool usage statistics &gt; should track individual tool usage" time="0.000862737">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; formatCompact &gt; should format basic execution summary" time="0.009436651">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; formatCompact &gt; should handle zero tool calls" time="0.000256225">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; formatCompact &gt; should show zero tokens when no tokens recorded" time="0.000122737">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; formatDetailed &gt; should include quality assessment" time="0.000476603">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; formatDetailed &gt; should include speed assessment" time="0.000146601">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; formatDetailed &gt; should show top tools" time="0.000116255">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; formatDetailed &gt; should include performance insights" time="0.000071202">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; quality categories &gt; should categorize excellent execution" time="0.000071072">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; quality categories &gt; should categorize good execution" time="0.000066834">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; quality categories &gt; should categorize poor execution" time="0.000046206">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; speed categories &gt; should categorize fast completion" time="0.000046195">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; speed categories &gt; should categorize good speed" time="0.000040795">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; speed categories &gt; should categorize moderate duration" time="0.000038231">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; speed categories &gt; should categorize long execution" time="0.000039824">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; performance tips &gt; should suggest reviewing low success rate" time="0.000050083">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; performance tips &gt; should suggest breaking down long tasks" time="0.000110194">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; performance tips &gt; should suggest optimizing high token usage" time="0.000047308">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; performance tips &gt; should identify high token usage per call" time="0.000045695">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; performance tips &gt; should identify network failures" time="0.000042689">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; performance tips &gt; should identify slow tools" time="0.000042719">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; duration formatting &gt; should format milliseconds" time="0.000036849">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; duration formatting &gt; should format seconds" time="0.000036457">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; duration formatting &gt; should format minutes and seconds" time="0.000030637">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; duration formatting &gt; should format hours and minutes" time="0.000029134">
        </testcase>
    </testsuite>
    <testsuite name="src/subagents/subagent.test.ts" timestamp="2025-10-02T21:38:30.483Z" hostname="uby" tests="16" failures="0" errors="0" skipped="0" time="0.08033202">
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; ContextState &gt; should set and get values correctly" time="0.001479179">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; ContextState &gt; should return undefined for missing keys" time="0.000112969">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; create (Tool Validation) &gt; should create a SubAgentScope successfully with minimal config" time="0.021464848">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; create (Tool Validation) &gt; should not block creation when a tool may require confirmation" time="0.002228285">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; create (Tool Validation) &gt; should succeed if tools do not require confirmation" time="0.001633284">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; create (Tool Validation) &gt; should allow creation regardless of tool parameter requirements" time="0.001886523">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; runNonInteractive - Initialization and Prompting &gt; should correctly template the system prompt and initialize GeminiChat" time="0.012405957">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; runNonInteractive - Initialization and Prompting &gt; should use initialMessages instead of systemPrompt if provided" time="0.002937028">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; runNonInteractive - Initialization and Prompting &gt; should throw an error if template variables are missing" time="0.003649577">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; runNonInteractive - Initialization and Prompting &gt; should validate that systemPrompt and initialMessages are mutually exclusive" time="0.00226863">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; runNonInteractive - Execution and Tool Use &gt; should terminate with GOAL if no outputs are expected and model stops" time="0.002362343">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; runNonInteractive - Execution and Tool Use &gt; should terminate with GOAL when model provides final text" time="0.00191754">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; runNonInteractive - Execution and Tool Use &gt; should execute external tools and provide the response to the model" time="0.005529387">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; runNonInteractive - Termination and Recovery &gt; should terminate with MAX_TURNS if the limit is reached" time="0.003035309">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; runNonInteractive - Termination and Recovery &gt; should terminate with TIMEOUT if the time limit is reached during an LLM call" time="0.00666541">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; runNonInteractive - Termination and Recovery &gt; should terminate with ERROR if the model call throws" time="0.009059603">
            <system-err>
Error during subagent execution: Error: API Failure
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent.test.ts:694:49
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="src/subagents/types.test.ts" timestamp="2025-10-02T21:38:30.483Z" hostname="uby" tests="3" failures="0" errors="0" skipped="0" time="0.002928692">
        <testcase classname="src/subagents/types.test.ts" name="SubagentError &gt; should create error with message and code" time="0.001407465">
        </testcase>
        <testcase classname="src/subagents/types.test.ts" name="SubagentError &gt; should create error with subagent name" time="0.000154035">
        </testcase>
        <testcase classname="src/subagents/types.test.ts" name="SubagentError &gt; should have correct error codes" time="0.000178801">
        </testcase>
    </testsuite>
    <testsuite name="src/subagents/validation.test.ts" timestamp="2025-10-02T21:38:30.483Z" hostname="uby" tests="37" failures="0" errors="0" skipped="0" time="0.012345606">
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateName &gt; should accept valid names" time="0.002787731">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateName &gt; should reject empty or whitespace names" time="0.000775666">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateName &gt; should reject names that are too short" time="0.000175435">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateName &gt; should reject names that are too long" time="0.00010276">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateName &gt; should reject names with invalid characters" time="0.000211452">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateName &gt; should reject names starting with special characters" time="0.000192175">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateName &gt; should reject names ending with special characters" time="0.000172559">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateName &gt; should reject reserved names" time="0.000369114">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateName &gt; should warn about naming conventions" time="0.000120684">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateName &gt; should warn about mixed separators" time="0.000195432">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateSystemPrompt &gt; should accept valid system prompts" time="0.000346211">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateSystemPrompt &gt; should reject empty prompts" time="0.000225056">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateSystemPrompt &gt; should reject prompts that are too short" time="0.000103191">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateSystemPrompt &gt; should reject prompts that are too long" time="0.000065301">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateSystemPrompt &gt; should warn about long prompts" time="0.000104253">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateTools &gt; should accept valid tool arrays" time="0.000173832">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateTools &gt; should reject non-array inputs" time="0.000134499">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateTools &gt; should warn about empty arrays" time="0.000157481">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateTools &gt; should warn about duplicate tools" time="0.000114041">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateTools &gt; should reject non-string tool names" time="0.000098151">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateTools &gt; should reject empty tool names" time="0.000119411">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateModelConfig &gt; should accept valid model configurations" time="0.000336974">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateModelConfig &gt; should reject invalid model names" time="0.000146431">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateModelConfig &gt; should reject invalid temperature values" time="0.000306207">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateModelConfig &gt; should warn about high temperature" time="0.00007032">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateModelConfig &gt; should reject invalid top_p values" time="0.000076131">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateRunConfig &gt; should accept valid run configurations" time="0.000273677">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateRunConfig &gt; should reject invalid max_time_minutes" time="0.000162841">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateRunConfig &gt; should warn about very long execution times" time="0.000103431">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateRunConfig &gt; should reject invalid max_turns" time="0.000102099">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateRunConfig &gt; should warn about high turn limits" time="0.00006476">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateConfig &gt; should accept valid configurations" time="0.000202174">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateConfig &gt; should collect errors from all validation steps" time="0.000107869">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateConfig &gt; should collect warnings from all validation steps" time="0.000067976">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateOrThrow &gt; should not throw for valid configurations" time="0.000511437">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateOrThrow &gt; should throw SubagentError for invalid configurations" time="0.000269889">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateOrThrow &gt; should include subagent name in error" time="0.000167671">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/diffOptions.test.ts" timestamp="2025-10-02T21:38:30.484Z" hostname="uby" tests="9" failures="0" errors="0" skipped="0" time="0.00661157">
        <testcase classname="src/tools/diffOptions.test.ts" name="getDiffStat &gt; should return 0 for all stats when there are no changes" time="0.002829077">
        </testcase>
        <testcase classname="src/tools/diffOptions.test.ts" name="getDiffStat &gt; should correctly report AI additions" time="0.000773833">
        </testcase>
        <testcase classname="src/tools/diffOptions.test.ts" name="getDiffStat &gt; should correctly report AI removals" time="0.000266273">
        </testcase>
        <testcase classname="src/tools/diffOptions.test.ts" name="getDiffStat &gt; should correctly report AI modifications" time="0.000346702">
        </testcase>
        <testcase classname="src/tools/diffOptions.test.ts" name="getDiffStat &gt; should correctly report user additions" time="0.000216611">
        </testcase>
        <testcase classname="src/tools/diffOptions.test.ts" name="getDiffStat &gt; should correctly report user removals" time="0.000152232">
        </testcase>
        <testcase classname="src/tools/diffOptions.test.ts" name="getDiffStat &gt; should correctly report user modifications" time="0.000141502">
        </testcase>
        <testcase classname="src/tools/diffOptions.test.ts" name="getDiffStat &gt; should handle complex changes from both AI and user" time="0.000221199">
        </testcase>
        <testcase classname="src/tools/diffOptions.test.ts" name="getDiffStat &gt; should report a single line modification as one addition and one removal" time="0.000185744">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/edit.test.ts" timestamp="2025-10-02T21:38:30.485Z" hostname="uby" tests="42" failures="0" errors="0" skipped="1" time="0.150525681">
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; applyReplacement &gt; should return newString if isNewFile is true" time="0.002201806">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; applyReplacement &gt; should return newString if currentContent is null and oldString is empty (defensive)" time="0.000641919">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; applyReplacement &gt; should return empty string if currentContent is null and oldString is not empty (defensive)" time="0.000490257">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; applyReplacement &gt; should replace oldString with newString in currentContent" time="0.000398097">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; applyReplacement &gt; should return currentContent if oldString is empty and not a new file" time="0.000420639">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; validateToolParams &gt; should return null for valid params" time="0.022812724">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; validateToolParams &gt; should return error for relative path" time="0.001703765">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; validateToolParams &gt; should return error for path outside root" time="0.001862999">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; shouldConfirmExecute &gt; should throw an error if params are invalid" time="0.002801706">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; shouldConfirmExecute &gt; should request confirmation for valid edit" time="0.004264084">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; shouldConfirmExecute &gt; should return false if old_string is not found" time="0.003120727">
            <system-out>
Error: Failed to edit, could not find the string to replace.

            </system-out>
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; shouldConfirmExecute &gt; should return false if multiple occurrences of old_string are found" time="0.003363617">
            <system-out>
Error: Failed to edit, expected 1 occurrence but found 2.

            </system-out>
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; shouldConfirmExecute &gt; should request confirmation for creating a new file (empty old_string)" time="0.003021083">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; shouldConfirmExecute &gt; should use corrected params from ensureCorrectEdit for diff generation" time="0">
            <skipped/>
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should throw error if file path is not absolute" time="0.002269862">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should throw error if file path is empty" time="0.003962746">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should edit an existing file and return diff with fileName" time="0.004583446">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should create a new file if old_string is empty and file does not exist, and return created message" time="0.002847742">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should return error if old_string is not found in file" time="0.003659936">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should return error if multiple occurrences of old_string are found" time="0.002856488">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should successfully replace multiple occurrences when expected_replacements specified" time="0.004642926">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should return error if expected_replacements does not match actual occurrences" time="0.004057522">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should return error if trying to create a file that already exists (empty old_string)" time="0.003306912">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should include modification message when proposed content is modified" time="0.003909638">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should not include modification message when proposed content is not modified" time="0.003655678">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should not include modification message when modified_by_user is not provided" time="0.002717952">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should return error if old_string and new_string are identical" time="0.002450927">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should return EDIT_NO_CHANGE error if replacement results in identical content" time="0.003124064">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; Error Scenarios &gt; should return FILE_NOT_FOUND error" time="0.002600935">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; Error Scenarios &gt; should return ATTEMPT_TO_CREATE_EXISTING_FILE error" time="0.002613509">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; Error Scenarios &gt; should return NO_OCCURRENCE_FOUND error" time="0.007444021">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; Error Scenarios &gt; should return EXPECTED_OCCURRENCE_MISMATCH error" time="0.003330065">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; Error Scenarios &gt; should return NO_CHANGE error" time="0.002820201">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; Error Scenarios &gt; should throw INVALID_PARAMETERS error for relative path" time="0.002318994">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; Error Scenarios &gt; should return FILE_WRITE_FAILURE on write error" time="0.002823708">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; getDescription &gt; should return &quot;No file changes to...&quot; if old_string and new_string are the same" time="0.002385586">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; getDescription &gt; should return a snippet of old and new strings if they are different" time="0.001943668">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; getDescription &gt; should handle very short strings correctly in the description" time="0.002050085">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; getDescription &gt; should truncate long strings in the description" time="0.002086252">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; workspace boundary validation &gt; should validate paths are within workspace root" time="0.003204062">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; workspace boundary validation &gt; should reject paths outside workspace root" time="0.003795366">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; IDE mode &gt; should call ideClient.openDiff and update params on confirmation" time="0.013485435">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/exitPlanMode.test.ts" timestamp="2025-10-02T21:38:30.486Z" hostname="uby" tests="17" failures="0" errors="0" skipped="0" time="0.008454662">
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; constructor and metadata &gt; should have correct tool name" time="0.002116639">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; constructor and metadata &gt; should have correct display name" time="0.000195392">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; constructor and metadata &gt; should have correct kind" time="0.0001243">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; constructor and metadata &gt; should have correct schema" time="0.000887423">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; validateToolParams &gt; should accept valid parameters" time="0.000207905">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; validateToolParams &gt; should reject missing plan parameter" time="0.000136051">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; validateToolParams &gt; should reject empty plan parameter" time="0.00010249">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; validateToolParams &gt; should reject whitespace-only plan parameter" time="0.000092442">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; validateToolParams &gt; should reject non-string plan parameter" time="0.000102991">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; tool execution &gt; should execute successfully through tool interface after approval" time="0.001600944">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; tool execution &gt; should request confirmation with plan details" time="0.000277003">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; tool execution &gt; should remain in plan mode when confirmation is rejected" time="0.000278396">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; tool execution &gt; should have correct description" time="0.000130612">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; tool execution &gt; should handle execution errors gracefully" time="0.0005943">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; tool execution &gt; should return empty tool locations" time="0.000156008">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; tool description &gt; should contain usage guidelines" time="0.000176617">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; tool description &gt; should contain examples" time="0.000078175">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/glob.test.ts" timestamp="2025-10-02T21:38:30.486Z" hostname="uby" tests="34" failures="0" errors="0" skipped="0" time="1.607219066">
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should find files matching a simple pattern in the root" time="0.111409254">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should find files case-sensitively when case_sensitive is true" time="0.058358039">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should find files case-insensitively by default (pattern: *.TXT)" time="0.060021409">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should find files case-insensitively when case_sensitive is false (pattern: *.TXT)" time="0.056194474">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should find files using a pattern that includes a subdirectory" time="0.055782331">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should find files in a specified relative path (relative to rootDir)" time="0.05636506">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should find files using a deep globstar pattern (e.g., **/*.log)" time="0.066910803">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should return &quot;No files found&quot; message when pattern matches nothing" time="0.060597004">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should find files with special characters in the name" time="0.057728904">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should find files with special characters like [] and () in the path" time="0.059080236">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should correctly sort files by modification time (newest first)" time="0.056434569">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should return a PATH_NOT_IN_WORKSPACE error if path is outside workspace" time="0.054067967">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should return a GLOB_EXECUTION_ERROR on glob failure" time="0.060725172">
            <system-err>
GlobLogic execute Error: Glob failed Error: Glob failed
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/tools/glob.test.ts:229:46
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

            </system-err>
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; validateToolParams &gt; should return null for valid parameters (pattern only)" time="0.054612014">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; validateToolParams &gt; should return null for valid parameters (pattern and path)" time="0.055860185">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; validateToolParams &gt; should return null for valid parameters (pattern, path, and case_sensitive)" time="0.055146784">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; validateToolParams &gt; should return error if pattern is missing (schema validation)" time="0.05484211">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; validateToolParams &gt; should return error if pattern is an empty string" time="0.054611243">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; validateToolParams &gt; should return error if pattern is only whitespace" time="0.060539689">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; validateToolParams &gt; should pass if path is provided but is not a string (type coercion)" time="0.056628277">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; validateToolParams &gt; should pass if case_sensitive is provided but is not a boolean (type coercion)" time="0.055891873">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; validateToolParams &gt; should return error if search path resolves outside the tool&apos;s root directory" time="0.05445323">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; validateToolParams &gt; should return error if specified search path does not exist" time="0.05689976">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; validateToolParams &gt; should return error if specified search path is a file, not a directory" time="0.05627907">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; workspace boundary validation &gt; should validate search paths are within workspace boundaries" time="0.054514714">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; workspace boundary validation &gt; should provide clear error messages when path is outside workspace" time="0.05645151">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; workspace boundary validation &gt; should work with paths in workspace subdirectories" time="0.054984564">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="sortFileEntries &gt; should sort a mix of recent and older files correctly" time="0.008081392">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="sortFileEntries &gt; should sort only recent files by mtime descending" time="0.000224015">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="sortFileEntries &gt; should sort only older files alphabetically by path" time="0.000106848">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="sortFileEntries &gt; should handle an empty array" time="0.000061874">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="sortFileEntries &gt; should correctly sort files when mtimes are identical for older files" time="0.000082243">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="sortFileEntries &gt; should correctly sort files when mtimes are identical for recent files (maintaining mtime sort)" time="0.000330883">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="sortFileEntries &gt; should use recencyThresholdMs parameter correctly" time="0.000234013">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/grep.test.ts" timestamp="2025-10-02T21:38:30.487Z" hostname="uby" tests="25" failures="1" errors="0" skipped="0" time="0.178575731">
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; validateToolParams &gt; should return null for valid params (pattern only)" time="0.032341405">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; validateToolParams &gt; should return null for valid params (pattern and path)" time="0.003317652">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; validateToolParams &gt; should return null for valid params (pattern, path, and include)" time="0.002766402">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; validateToolParams &gt; should return error if pattern is missing" time="0.004545044">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; validateToolParams &gt; should return error for invalid regex pattern" time="0.004686186">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; validateToolParams &gt; should return error if path does not exist" time="0.00358662">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; validateToolParams &gt; should return error if path is a file, not a directory" time="0.005382955">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; execute &gt; should find matches for a simple pattern in all files" time="0.016201514">
            <system-out>
GrepLogic: Falling back to JavaScript grep implementation.

            </system-out>
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; execute &gt; should find matches in a specific path" time="0.010236932">
            <system-out>
GrepLogic: Falling back to JavaScript grep implementation.

            </system-out>
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; execute &gt; should find matches with an include glob" time="0.007773211">
            <system-out>
GrepLogic: Falling back to JavaScript grep implementation.

            </system-out>
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; execute &gt; should find matches with an include glob and path" time="0.009368574">
            <system-out>
GrepLogic: Falling back to JavaScript grep implementation.

            </system-out>
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; execute &gt; should return &quot;No matches found&quot; when pattern does not exist" time="0.00519634">
            <system-out>
GrepLogic: Falling back to JavaScript grep implementation.

            </system-out>
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; execute &gt; should handle regex special characters correctly" time="0.005634892">
            <system-out>
GrepLogic: Falling back to JavaScript grep implementation.

            </system-out>
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; execute &gt; should be case-insensitive by default (JS fallback)" time="0.00683272">
            <system-out>
GrepLogic: Falling back to JavaScript grep implementation.

            </system-out>
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; execute &gt; should throw an error if params are invalid" time="0.0055961">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; execute &gt; should return a GREP_EXECUTION_ERROR on failure" time="0.007677734">
            <system-out>
GrepLogic: Falling back to JavaScript grep implementation.

            </system-out>
            <system-err>
GrepLogic: Error in performGrepSearch (Strategy: javascript fallback): filesIterator is not async iterable

Error during GrepLogic execution: TypeError: filesIterator is not async iterable

            </system-err>
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; multi-directory workspace &gt; should search across all workspace directories when no path is specified" time="0.012010556">
            <system-out>
GrepLogic: Falling back to JavaScript grep implementation.

GrepLogic: Falling back to JavaScript grep implementation.

            </system-out>
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; multi-directory workspace &gt; should search only specified path within workspace directories" time="0.009749911">
            <system-out>
GrepLogic: Falling back to JavaScript grep implementation.

            </system-out>
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; getDescription &gt; should generate correct description with pattern only" time="0.003136076">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; getDescription &gt; should generate correct description with pattern and include" time="0.005100552">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; getDescription &gt; should generate correct description with pattern and path" time="0.003471778">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; getDescription &gt; should indicate searching across all workspace directories when no path specified" time="0.003339974">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; getDescription &gt; should generate correct description with pattern, include, and path" time="0.003161332">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; getDescription &gt; should use ./ for root path in description" time="0.003079511">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="Result limiting" time="0.002182881">
            <failure message="No test found in suite Result limiting" type="Error">
Error: No test found in suite Result limiting
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="src/tools/ls.test.ts" timestamp="2025-10-02T21:38:30.489Z" hostname="uby" tests="22" failures="0" errors="0" skipped="0" time="0.098144447">
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; parameter validation &gt; should accept valid absolute paths within workspace" time="0.032007316">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; parameter validation &gt; should reject relative paths" time="0.005117985">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; parameter validation &gt; should reject paths outside workspace with clear error message" time="0.002999313">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; parameter validation &gt; should accept paths in secondary workspace directory" time="0.002860746">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; execute &gt; should list files in a directory" time="0.004009182">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; execute &gt; should list files from secondary workspace directory" time="0.003129103">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; execute &gt; should handle empty directories" time="0.002838225">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; execute &gt; should respect ignore patterns" time="0.003142408">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; execute &gt; should respect gitignore patterns" time="0.002738539">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; execute &gt; should respect geminiignore patterns" time="0.002675884">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; execute &gt; should handle non-directory paths" time="0.002062288">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; execute &gt; should handle non-existent paths" time="0.002831933">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; execute &gt; should sort directories first, then files alphabetically" time="0.010407849">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; execute &gt; should handle permission errors gracefully" time="0.002313062">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; execute &gt; should throw for invalid params at build time" time="0.002260765">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; execute &gt; should handle errors accessing individual files during listing" time="0.003766633">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; getDescription &gt; should return shortened relative path" time="0.001804601">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; getDescription &gt; should handle paths in secondary workspace" time="0.001801556">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; workspace boundary validation &gt; should accept paths in primary workspace directory" time="0.001801154">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; workspace boundary validation &gt; should accept paths in secondary workspace directory" time="0.002062398">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; workspace boundary validation &gt; should reject paths outside all workspace directories" time="0.001627092">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; workspace boundary validation &gt; should list files from secondary workspace directory" time="0.002087164">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/mcp-client-manager.test.ts" timestamp="2025-10-02T21:38:30.489Z" hostname="uby" tests="1" failures="0" errors="0" skipped="0" time="0.002277637">
        <testcase classname="src/tools/mcp-client-manager.test.ts" name="McpClientManager &gt; should discover tools from all servers" time="0.001488586">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/mcp-client.test.ts" timestamp="2025-10-02T21:38:30.489Z" hostname="uby" tests="42" failures="0" errors="0" skipped="0" time="0.024353396">
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; McpClient &gt; should discover tools" time="0.0046241">
            <system-err>
Error discovering prompts from test-server: mcpClient.getServerCapabilities is not a function

            </system-err>
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; McpClient &gt; should skip tools if a parameter is missing a type" time="0.003236732">
            <system-err>
Error discovering prompts from test-server: mcpClient.getServerCapabilities is not a function

            </system-err>
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; McpClient &gt; should handle errors when discovering prompts" time="0.003328752">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; appendMcpServerCommand &gt; should do nothing if no MCP servers or command are configured" time="0.000609298">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; appendMcpServerCommand &gt; should discover tools via mcpServerCommand" time="0.000973662">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; appendMcpServerCommand &gt; should handle error if mcpServerCommand parsing fails" time="0.000399059">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; createTransport &gt; should connect via httpUrl &gt; without headers" time="0.000437349">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; createTransport &gt; should connect via httpUrl &gt; with headers" time="0.000392326">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; createTransport &gt; should connect via url &gt; without headers" time="0.000387708">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; createTransport &gt; should connect via url &gt; with headers" time="0.00033504">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; createTransport &gt; should connect via command" time="0.00154994">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; createTransport &gt; useGoogleCredentialProvider &gt; should use GoogleCredentialProvider when specified" time="0.00064805">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; createTransport &gt; useGoogleCredentialProvider &gt; should use GoogleCredentialProvider with SSE transport" time="0.000349247">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; createTransport &gt; useGoogleCredentialProvider &gt; should throw an error if no URL is provided with GoogleCredentialProvider" time="0.000436137">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; isEnabled &gt; should return true if no include or exclude lists are provided" time="0.000352843">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; isEnabled &gt; should return false if the tool is in the exclude list" time="0.000307399">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; isEnabled &gt; should return true if the tool is in the include list" time="0.000231358">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; isEnabled &gt; should return true if the tool is in the include list with parentheses" time="0.000191374">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; isEnabled &gt; should return false if the include list exists but does not contain the tool" time="0.000160427">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; isEnabled &gt; should return false if the tool is in both the include and exclude lists" time="0.000159375">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; isEnabled &gt; should return false if the function declaration has no name" time="0.000294495">
            <system-err>
Discovered a function declaration without a name from MCP server &apos;myServer&apos;. Skipping.

            </system-err>
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return true for a valid schema with anyOf" time="0.000175825">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return false for an invalid schema with anyOf" time="0.000137064">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return true for a valid schema with allOf" time="0.000186515">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return false for an invalid schema with allOf" time="0.000115323">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return true for a valid schema with oneOf" time="0.000110164">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return false for an invalid schema with oneOf" time="0.000107819">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return true for a valid schema with nested subschemas" time="0.0004702">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return false for an invalid schema with nested subschemas" time="0.000121795">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return true for a schema with a type and subschemas" time="0.000112939">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return false for a schema with no type and no subschemas" time="0.000106006">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return true for a valid schema" time="0.00010758">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return false if a parameter is missing a type" time="0.000101147">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return false if a nested parameter is missing a type" time="0.000108581">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return false if an array item is missing a type" time="0.000117468">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return true for a schema with no properties" time="0.00018373">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return true for a schema with an empty properties object" time="0.000134659">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasNetworkTransport &gt; should return true if only url is provided" time="0.000136874">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasNetworkTransport &gt; should return true if only httpUrl is provided" time="0.00010803">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasNetworkTransport &gt; should return true if both url and httpUrl are provided" time="0.000114191">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasNetworkTransport &gt; should return false if neither url nor httpUrl is provided" time="0.000123899">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasNetworkTransport &gt; should return false for an empty config object" time="0.000186556">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/mcp-tool.test.ts" timestamp="2025-10-02T21:38:30.491Z" hostname="uby" tests="33" failures="0" errors="0" skipped="0" time="0.044319019">
        <testcase classname="src/tools/mcp-tool.test.ts" name="generateValidName &gt; should return a valid name for a simple function" time="0.001106989">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="generateValidName &gt; should replace invalid characters with underscores" time="0.000144968">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="generateValidName &gt; should truncate long names" time="0.000096589">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="generateValidName &gt; should handle names with only invalid characters" time="0.000078736">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="generateValidName &gt; should handle names that are exactly 63 characters long" time="0.000070441">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="generateValidName &gt; should handle names that are exactly 64 characters long" time="0.000051706">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="generateValidName &gt; should handle names that are longer than 64 characters" time="0.000049392">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; constructor &gt; should set properties correctly" time="0.033384024">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; constructor &gt; should accept and store a custom timeout" time="0.000244703">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should call mcpTool.callTool with correct parameters and format display output" time="0.001834085">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should handle empty result from getStringifiedResultForDisplay" time="0.000320132">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should propagate rejection if mcpTool.callTool rejects" time="0.000894717">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should return a structured error if MCP tool reports an error" time="0.000475821">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should return a structured error if MCP tool reports an error" time="0.000158173">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should consider a ToolResult with isError ${description} to be a success" time="0.000236258">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should consider a ToolResult with isError ${description} to be a success" time="0.000120653">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should handle a simple text response correctly" time="0.000283135">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should handle an AudioBlock response" time="0.000240886">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should handle a ResourceLinkBlock response" time="0.000182057">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should handle an embedded text ResourceBlock response" time="0.000197516">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should handle an embedded binary ResourceBlock response" time="0.000197236">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should handle a mix of content block types" time="0.000201282">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should ignore unknown content block types" time="0.000159576">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should handle a complex mix of content block types" time="0.00017833">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; shouldConfirmExecute &gt; should return false if trust is true" time="0.000499414">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; shouldConfirmExecute &gt; should return false if server is allowlisted" time="0.000175525">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; shouldConfirmExecute &gt; should return false if tool is allowlisted" time="0.000093022">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; shouldConfirmExecute &gt; should return confirmation details if not trusted and not allowlisted" time="0.000285749">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; shouldConfirmExecute &gt; should add server to allowlist on ProceedAlwaysServer" time="0.000192927">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; shouldConfirmExecute &gt; should add tool to allowlist on ProceedAlwaysTool" time="0.000122416">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; shouldConfirmExecute &gt; should handle Cancel confirmation outcome" time="0.000098322">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; shouldConfirmExecute &gt; should handle ProceedOnce confirmation outcome" time="0.000091149">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; DiscoveredMCPToolInvocation &gt; should return the stringified params from getDescription" time="0.000131293">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/memoryTool.test.ts" timestamp="2025-10-02T21:38:30.492Z" hostname="uby" tests="29" failures="0" errors="0" skipped="0" time="0.03878853">
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; setGeminiMdFilename &gt; should update currentGeminiMdFilename when a valid new name is provided" time="0.001391075">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; setGeminiMdFilename &gt; should not update currentGeminiMdFilename if the new name is empty or whitespace" time="0.000141953">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; setGeminiMdFilename &gt; should handle an array of filenames" time="0.000676131">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; performAddMemoryEntry (static method) &gt; should create section and save a fact if file does not exist" time="0.001513412">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; performAddMemoryEntry (static method) &gt; should create section and save a fact if file is empty" time="0.000258258">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; performAddMemoryEntry (static method) &gt; should add a fact to an existing section" time="0.000158774">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; performAddMemoryEntry (static method) &gt; should add a fact to an existing empty section" time="0.000114062">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; performAddMemoryEntry (static method) &gt; should add a fact when other ## sections exist and preserve spacing" time="0.000104463">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; performAddMemoryEntry (static method) &gt; should correctly trim and add a fact that starts with a dash" time="0.000134379">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; performAddMemoryEntry (static method) &gt; should handle error from fsAdapter.writeFile" time="0.005621697">
            <system-err>
[MemoryTool] Error adding memory entry to /mock/home/.qwen/QWEN.md: Error: Disk full
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/tools/memoryTool.test.ts:185:49
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

            </system-err>
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; execute (instance method) &gt; should have correct name, displayName, description, and schema" time="0.000585855">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; execute (instance method) &gt; should call performAddMemoryEntry with correct parameters and return success for global scope" time="0.01955354">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; execute (instance method) &gt; should call performAddMemoryEntry with correct parameters and return success for project scope" time="0.000728499">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; execute (instance method) &gt; should return an error if fact is empty" time="0.000417714">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; execute (instance method) &gt; should handle errors from performAddMemoryEntry" time="0.000497622">
            <system-err>
[MemoryTool] Error executing save_memory for fact &quot;This will fail&quot; in global: [MemoryTool] Failed to add memory entry: Disk full

            </system-err>
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; execute (instance method) &gt; should return error when executing without scope parameter" time="0.000325893">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; shouldConfirmExecute &gt; should return confirmation details when memory file is not allowlisted for global scope" time="0.001362753">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; shouldConfirmExecute &gt; should return confirmation details when memory file is not allowlisted for project scope" time="0.000655985">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; shouldConfirmExecute &gt; should return false when memory file is already allowlisted for global scope" time="0.000369595">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; shouldConfirmExecute &gt; should return false when memory file is already allowlisted for project scope" time="0.000391675">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; shouldConfirmExecute &gt; should add memory file to allowlist when ProceedAlways is confirmed for global scope" time="0.000371829">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; shouldConfirmExecute &gt; should add memory file to allowlist when ProceedAlways is confirmed for project scope" time="0.000202255">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; shouldConfirmExecute &gt; should not add memory file to allowlist when other outcomes are confirmed" time="0.000239573">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; shouldConfirmExecute &gt; should handle existing memory file with content for global scope" time="0.000353845">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; shouldConfirmExecute &gt; should prompt for scope selection when scope is not specified" time="0.000343055">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; shouldConfirmExecute &gt; should show correct file paths in scope selection prompt" time="0.000381646">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; getDescription &gt; should return correct description for global scope" time="0.000175395">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; getDescription &gt; should return correct description for project scope" time="0.000094875">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; getDescription &gt; should show choice prompt when scope is not specified" time="0.000087081">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/modifiable-tool.test.ts" timestamp="2025-10-02T21:38:30.492Z" hostname="uby" tests="11" failures="0" errors="0" skipped="0" time="0.026279322">
        <testcase classname="src/tools/modifiable-tool.test.ts" name="modifyWithEditor &gt; successful modification &gt; should successfully modify content with VSCode editor" time="0.008313962">
        </testcase>
        <testcase classname="src/tools/modifiable-tool.test.ts" name="modifyWithEditor &gt; successful modification &gt; should create temp directory if it does not exist" time="0.005176052">
        </testcase>
        <testcase classname="src/tools/modifiable-tool.test.ts" name="modifyWithEditor &gt; successful modification &gt; should not create temp directory if it already exists" time="0.002614189">
        </testcase>
        <testcase classname="src/tools/modifiable-tool.test.ts" name="modifyWithEditor &gt; should handle missing old temp file gracefully" time="0.001697032">
            <system-err>
Error deleting temp diff file: /tmp/qwen-code-tool-modify-diffs/qwen-code-modify-test-old-1759441104658.txt

            </system-err>
        </testcase>
        <testcase classname="src/tools/modifiable-tool.test.ts" name="modifyWithEditor &gt; should handle missing new temp file gracefully" time="0.00118292">
            <system-err>
Error deleting temp diff file: /tmp/qwen-code-tool-modify-diffs/qwen-code-modify-test-new-1759441104659.txt

            </system-err>
        </testcase>
        <testcase classname="src/tools/modifiable-tool.test.ts" name="modifyWithEditor &gt; should clean up temp files even if editor fails" time="0.001770989">
        </testcase>
        <testcase classname="src/tools/modifiable-tool.test.ts" name="modifyWithEditor &gt; should handle temp file cleanup errors gracefully" time="0.002103214">
        </testcase>
        <testcase classname="src/tools/modifiable-tool.test.ts" name="modifyWithEditor &gt; should create temp files with correct naming with extension" time="0.001031891">
        </testcase>
        <testcase classname="src/tools/modifiable-tool.test.ts" name="modifyWithEditor &gt; should create temp files with correct naming without extension" time="0.000868287">
        </testcase>
        <testcase classname="src/tools/modifiable-tool.test.ts" name="isModifiableTool &gt; should return true for objects with getModifyContext method" time="0.00014084">
        </testcase>
        <testcase classname="src/tools/modifiable-tool.test.ts" name="isModifiableTool &gt; should return false for objects without getModifyContext method" time="0.000051255">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/read-file.test.ts" timestamp="2025-10-02T21:38:30.493Z" hostname="uby" tests="25" failures="0" errors="0" skipped="0" time="0.176102462">
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; build &gt; should return an invocation for valid params (absolute path within root)" time="0.040148538">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; build &gt; should throw error if file path is relative" time="0.003208701">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; build &gt; should throw error if path is outside root" time="0.002391507">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; build &gt; should throw error if path is empty" time="0.002050707">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; build &gt; should throw error if offset is negative" time="0.002100559">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; build &gt; should throw error if limit is zero or negative" time="0.001965829">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; getDescription &gt; should return relative path without limit/offset" time="0.003215953">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; getDescription &gt; should return shortened path when file path is deep" time="0.002832584">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; getDescription &gt; should handle non-normalized file paths correctly" time="0.005082249">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; getDescription &gt; should return . if path is the root directory" time="0.003150313">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; should return error if file does not exist" time="0.003952467">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; should return success result for a text file" time="0.008525644">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; should return error if path is a directory" time="0.003395396">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; should return error for a file that is too large" time="0.053256765">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; should handle text file with lines exceeding maximum length" time="0.003915549">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; should handle image file and return appropriate content" time="0.002789485">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; should handle PDF file and return appropriate content" time="0.003038034">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; should handle binary file and skip content" time="0.003363396">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; should handle SVG file as text" time="0.00328998">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; should handle large SVG file" time="0.003872088">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; should handle empty file" time="0.002692404">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; should support offset and limit for text files" time="0.00315449">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; with .qwenignore &gt; should throw error if path is ignored by a .qwenignore pattern" time="0.003201998">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; with .qwenignore &gt; should throw error if file is in an ignored directory" time="0.003965111">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; with .qwenignore &gt; should allow reading non-ignored files" time="0.005356256">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/read-many-files.test.ts" timestamp="2025-10-02T21:38:30.494Z" hostname="uby" tests="31" failures="0" errors="0" skipped="0" time="0.286419283">
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; build &gt; should return an invocation for valid relative paths within root" time="0.027815295">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; build &gt; should return an invocation for valid glob patterns within root" time="0.003623328">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; build &gt; should return an invocation for paths trying to escape the root (e.g., ../) as execute handles this" time="0.002546936">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; build &gt; should return an invocation for absolute paths as execute handles this" time="0.003081545">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; build &gt; should throw error if paths array is empty" time="0.004509218">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; build &gt; should return an invocation for valid exclude and include patterns" time="0.003897525">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; build &gt; should throw error if paths array contains an empty string" time="0.003182743">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; build &gt; should coerce non-string elements in include array" time="0.000513801">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; build &gt; should throw error if exclude array contains non-string elements" time="0.003058011">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should read a single specified file" time="0.014629855">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should read multiple specified files" time="0.008370086">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should handle glob patterns" time="0.008520625">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should respect exclude patterns" time="0.007160647">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should handle nonexistent specific files gracefully" time="0.006156097">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should use default excludes" time="0.012334415">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should NOT use default excludes if useDefaultExcludes is false" time="0.004880956">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should include images as inlineData parts if explicitly requested by extension" time="0.005448356">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should include images as inlineData parts if explicitly requested by name" time="0.005426006">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should skip PDF files if not explicitly requested by extension or name" time="0.011399654">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should include PDF files as inlineData parts if explicitly requested by extension" time="0.007734158">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should include PDF files as inlineData parts if explicitly requested by name" time="0.007938807">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should return error if path is ignored by a .qwenignore pattern" time="0.008256435">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should read files from multiple workspace directories" time="0.008405902">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should add a warning for truncated files" time="0.008322297">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should read files with special characters like [] and () in the path" time="0.007411531">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should read files with special characters in the name" time="0.005339555">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; Error handling &gt; should return an INVALID_TOOL_PARAMS error if no paths are provided" time="0.003136036">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; Error handling &gt; should return a READ_MANY_FILES_SEARCH_ERROR on glob failure" time="0.005174971">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; Batch Processing &gt; should process files in parallel" time="0.021289293">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; Batch Processing &gt; should handle batch processing errors gracefully" time="0.006870289">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; Batch Processing &gt; should execute file operations concurrently" time="0.057854838">
            <system-out>
Execution order: [
  [32m&apos;start:file1.txt&apos;[39m,
  [32m&apos;start:file2.txt&apos;[39m,
  [32m&apos;start:file3.txt&apos;[39m,
  [32m&apos;end:file1.txt&apos;[39m,
  [32m&apos;end:file2.txt&apos;[39m,
  [32m&apos;end:file3.txt&apos;[39m
]

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="src/tools/ripGrep.test.ts" timestamp="2025-10-02T21:38:30.495Z" hostname="uby" tests="36" failures="0" errors="0" skipped="0" time="0.351815984">
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; validateToolParams &gt; should return null for valid params (pattern only)" time="0.033203741">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; validateToolParams &gt; should return null for valid params (pattern and path)" time="0.00493672">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; validateToolParams &gt; should return null for valid params (pattern, path, and include)" time="0.00464534">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; validateToolParams &gt; should return error if pattern is missing" time="0.003453614">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; validateToolParams &gt; should return null for what would be an invalid regex pattern" time="0.0037">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; validateToolParams &gt; should return error if path does not exist" time="0.003587772">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; validateToolParams &gt; should return error if path is a file, not a directory" time="0.004701514">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; execute &gt; should find matches for a simple pattern in all files" time="0.007836277">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; execute &gt; should find matches in a specific path" time="0.010778966">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; execute &gt; should find matches with an include glob" time="0.006317084">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; execute &gt; should find matches with an include glob and path" time="0.007330281">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; execute &gt; should return &quot;No matches found&quot; when pattern does not exist" time="0.020182063">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; execute &gt; should return an error from ripgrep for invalid regex pattern" time="0.009166661">
            <system-err>
GrepLogic: ripgrep failed: ripgrep exited with code 2: 

Error during GrepLogic execution: Error: ripgrep exited with code 2: 

            </system-err>
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; execute &gt; should handle regex special characters correctly" time="0.01370911">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; execute &gt; should be case-insensitive by default (JS fallback)" time="0.007363262">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; execute &gt; should throw an error if params are invalid" time="0.005274194">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; multi-directory workspace &gt; should search across all workspace directories when no path is specified" time="0.016685651">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; multi-directory workspace &gt; should search only specified path within workspace directories" time="0.012714429">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; abort signal handling &gt; should handle AbortSignal during search" time="0.015259811">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; abort signal handling &gt; should abort streaming search when signal is triggered" time="0.029613665">
            <system-err>
GrepLogic: ripgrep failed: ripgrep exited with code null: 

Error during GrepLogic execution: Error: ripgrep exited with code null: 

            </system-err>
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; error handling and edge cases &gt; should handle workspace boundary violations" time="0.004188395">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; error handling and edge cases &gt; should handle empty directories gracefully" time="0.009041428">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; error handling and edge cases &gt; should handle empty files correctly" time="0.01541068">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; error handling and edge cases &gt; should handle special characters in file names" time="0.019243476">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; error handling and edge cases &gt; should handle deeply nested directories" time="0.011084501">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; regex pattern validation &gt; should handle complex regex patterns" time="0.007608105">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; regex pattern validation &gt; should handle case sensitivity correctly in JS fallback" time="0.007182948">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; regex pattern validation &gt; should handle escaped regex special characters" time="0.007683915">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; include pattern filtering &gt; should handle multiple file extensions in include pattern" time="0.015314822">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; include pattern filtering &gt; should handle directory patterns in include" time="0.00823231">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; getDescription &gt; should generate correct description with pattern only" time="0.00408896">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; getDescription &gt; should generate correct description with pattern and include" time="0.004216776">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; getDescription &gt; should generate correct description with pattern and path" time="0.004291054">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; getDescription &gt; should indicate searching across all workspace directories when no path specified" time="0.003989445">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; getDescription &gt; should generate correct description with pattern, include, and path" time="0.003669454">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; getDescription &gt; should use ./ for root path in description" time="0.003498106">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/shell.test.ts" timestamp="2025-10-02T21:38:30.496Z" hostname="uby" tests="37" failures="0" errors="0" skipped="0" time="0.118651682">
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; isCommandAllowed &gt; should allow a command if no restrictions are provided" time="0.003747999">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; isCommandAllowed &gt; should block a command with command substitution using $()" time="0.001110336">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; build &gt; should return an invocation for a valid command" time="0.021769091">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; build &gt; should throw an error for an empty command" time="0.003857111">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; build &gt; should throw an error for a non-existent directory" time="0.002862169">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; build &gt; should include background indicator in description when is_background is true" time="0.002864453">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; build &gt; should not include background indicator in description when is_background is false" time="0.002021783">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; should wrap command on linux and parse pgrep output" time="0.007467415">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; should add ampersand to command when is_background is true and command does not end with &amp;" time="0.00242039">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; should not add extra ampersand when is_background is true and command already ends with &amp;" time="0.002224539">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; should not add ampersand when is_background is false" time="0.002286403">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; should not wrap command on windows" time="0.002738309">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; should format error messages correctly" time="0.001866155">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; should return a SHELL_EXECUTE_ERROR for a command failure" time="0.001892334">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; should throw an error for invalid parameters" time="0.001783041">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; should throw an error for invalid directory" time="0.001881103">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; should summarize output when configured" time="0.003609221">
            <system-err>
missing pgrep output

            </system-err>
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; should clean up the temp file on synchronous execution error" time="0.002958667">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; Streaming to `updateOutput` &gt; should throttle text output updates" time="0.004590889">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; Streaming to `updateOutput` &gt; should immediately show binary detection message and throttle progress" time="0.002732119">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; addCoAuthorToGitCommit &gt; should add co-author to git commit with double quotes" time="0.00312782">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; addCoAuthorToGitCommit &gt; should add co-author to git commit with single quotes" time="0.003227074">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; addCoAuthorToGitCommit &gt; should handle git commit with additional flags" time="0.0025329">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; addCoAuthorToGitCommit &gt; should not modify non-git commands" time="0.002554529">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; addCoAuthorToGitCommit &gt; should not modify git commands without -m flag" time="0.002881164">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; addCoAuthorToGitCommit &gt; should handle git commit with escaped quotes in message" time="0.003076475">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; addCoAuthorToGitCommit &gt; should not add co-author when disabled in config" time="0.003403501">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; addCoAuthorToGitCommit &gt; should use custom name and email from config" time="0.00322513">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; shouldConfirmExecute &gt; should not request confirmation for read-only commands" time="0.002855837">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; shouldConfirmExecute &gt; should request confirmation for a new command and whitelist it on &quot;Always&quot;" time="0.002650347">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; shouldConfirmExecute &gt; should throw an error if validation fails" time="0.002024408">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; getDescription &gt; should return the windows description when on windows" time="0.001384323">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; getDescription &gt; should return the non-windows description when not on windows" time="0.000768222">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="validateToolParams &gt; should return null for valid directory" time="0.001273468">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="validateToolParams &gt; should return error for directory outside workspace" time="0.001231701">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="build &gt; should return an invocation for valid directory" time="0.001259031">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="build &gt; should throw an error for directory outside workspace" time="0.00151778">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/task.test.ts" timestamp="2025-10-02T21:38:30.497Z" hostname="uby" tests="21" failures="0" errors="0" skipped="0" time="0.01695035">
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; initialization &gt; should initialize with correct name and properties" time="0.00291163">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; initialization &gt; should load available subagents during initialization" time="0.00065907">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; initialization &gt; should update description with available subagents" time="0.000428694">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; initialization &gt; should handle empty subagents list gracefully" time="0.000286992">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; initialization &gt; should handle subagent loading errors gracefully" time="0.002045938">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; schema generation &gt; should generate schema with subagent names as enum" time="0.000682955">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; schema generation &gt; should generate schema without enum when no subagents available" time="0.000444423">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; validateToolParams &gt; should validate valid parameters" time="0.000352973">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; validateToolParams &gt; should reject empty description" time="0.000365847">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; validateToolParams &gt; should reject empty prompt" time="0.00031907">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; validateToolParams &gt; should reject empty subagent_type" time="0.000319732">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; validateToolParams &gt; should reject non-existent subagent" time="0.000269539">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; refreshSubagents &gt; should refresh available subagents and update description" time="0.000328358">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; TaskToolInvocation &gt; should execute subagent successfully" time="0.001691902">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; TaskToolInvocation &gt; should handle subagent not found error" time="0.000616321">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; TaskToolInvocation &gt; should handle execution errors gracefully" time="0.00146394">
            <system-err>
[TaskTool] Error running subagent: Creation failed

            </system-err>
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; TaskToolInvocation &gt; should execute subagent without live output callback" time="0.000621811">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; TaskToolInvocation &gt; should set context variables correctly" time="0.000399179">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; TaskToolInvocation &gt; should return structured display object" time="0.000657488">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; TaskToolInvocation &gt; should not require confirmation" time="0.000441357">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; TaskToolInvocation &gt; should provide correct description" time="0.000331784">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/todoWrite.test.ts" timestamp="2025-10-02T21:38:30.498Z" hostname="uby" tests="17" failures="0" errors="0" skipped="0" time="0.028122493">
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; validateToolParams &gt; should validate correct parameters" time="0.003595857">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; validateToolParams &gt; should accept empty todos array" time="0.001431861">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; validateToolParams &gt; should accept single todo" time="0.001171409">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; validateToolParams &gt; should reject todos with empty content" time="0.000876733">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; validateToolParams &gt; should reject todos with empty id" time="0.001236058">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; validateToolParams &gt; should reject todos with invalid status" time="0.000494195">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; validateToolParams &gt; should reject todos with duplicate IDs" time="0.000285358">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; execute &gt; should create new todos file when none exists" time="0.003948751">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; execute &gt; should replace todos with new ones" time="0.001572331">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; execute &gt; should handle file write errors" time="0.001752765">
            <system-err>
[TodoWriteTool] Error executing todo_write: Write failed

            </system-err>
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; execute &gt; should handle empty todos array" time="0.002850969">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; tool properties &gt; should have correct tool name" time="0.000513811">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; tool properties &gt; should have correct display name" time="0.000251626">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; tool properties &gt; should have correct kind" time="0.000244302">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; tool properties &gt; should have schema with required properties" time="0.000841327">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; getDescription &gt; should return &quot;Create todos&quot; when no todos file exists" time="0.000439504">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; getDescription &gt; should return &quot;Update todos&quot; when todos file exists" time="0.004372165">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/tool-registry.test.ts" timestamp="2025-10-02T21:38:30.498Z" hostname="uby" tests="9" failures="0" errors="0" skipped="0" time="0.075679286">
        <testcase classname="src/tools/tool-registry.test.ts" name="ToolRegistry &gt; registerTool &gt; should register a new tool" time="0.034101122">
            <system-err>
Error accessing installation ID file, generating ephemeral ID: TypeError: Cannot read properties of undefined (reading &apos;trim&apos;)
    at InstallationManager.readInstallationIdFromFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/installationManager.ts:21:50[90m)[39m
    at InstallationManager.getInstallationId [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/installationManager.ts:42:33[90m)[39m
    at QwenLogger.generateUserId [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/qwen-logger/qwen-logger.ts:123:53[90m)[39m
    at new QwenLogger [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/qwen-logger/qwen-logger.ts:114:24[90m)[39m
    at QwenLogger.getInstance [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/qwen-logger/qwen-logger.ts:131:29[90m)[39m
    at logCliConfiguration [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/loggers.ts:85:14[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:452:5[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/tools/tool-registry.test.ts:120:14
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20

            </system-err>
        </testcase>
        <testcase classname="src/tools/tool-registry.test.ts" name="ToolRegistry &gt; getAllTools &gt; should return all registered tools sorted alphabetically by displayName" time="0.003521089">
        </testcase>
        <testcase classname="src/tools/tool-registry.test.ts" name="ToolRegistry &gt; getAllToolNames &gt; should return all registered tool names" time="0.00185291">
        </testcase>
        <testcase classname="src/tools/tool-registry.test.ts" name="ToolRegistry &gt; getToolsByServer &gt; should return an empty array if no tools match the server name" time="0.001403158">
        </testcase>
        <testcase classname="src/tools/tool-registry.test.ts" name="ToolRegistry &gt; getToolsByServer &gt; should return only tools matching the server name, sorted by name" time="0.002655135">
        </testcase>
        <testcase classname="src/tools/tool-registry.test.ts" name="ToolRegistry &gt; discoverTools &gt; should will preserve tool parametersJsonSchema during discovery from command" time="0.003278299">
        </testcase>
        <testcase classname="src/tools/tool-registry.test.ts" name="ToolRegistry &gt; discoverTools &gt; should return a DISCOVERED_TOOL_EXECUTION_ERROR on tool failure" time="0.022504493">
        </testcase>
        <testcase classname="src/tools/tool-registry.test.ts" name="ToolRegistry &gt; discoverTools &gt; should discover tools using MCP servers defined in getMcpServers" time="0.002346214">
        </testcase>
        <testcase classname="src/tools/tool-registry.test.ts" name="ToolRegistry &gt; DiscoveredToolInvocation &gt; should return the stringified params from getDescription" time="0.00236075">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/tools.test.ts" timestamp="2025-10-02T21:38:30.498Z" hostname="uby" tests="11" failures="0" errors="0" skipped="0" time="0.010157856">
        <testcase classname="src/tools/tools.test.ts" name="DeclarativeTool &gt; validateBuildAndExecute &gt; should return INVALID_TOOL_PARAMS error if build fails" time="0.00590908">
        </testcase>
        <testcase classname="src/tools/tools.test.ts" name="DeclarativeTool &gt; validateBuildAndExecute &gt; should return EXECUTION_FAILED error if execute fails" time="0.001136364">
        </testcase>
        <testcase classname="src/tools/tools.test.ts" name="DeclarativeTool &gt; validateBuildAndExecute &gt; should return the result of execute on success" time="0.000443532">
        </testcase>
        <testcase classname="src/tools/tools.test.ts" name="hasCycleInSchema &gt; should detect a simple direct cycle" time="0.000431709">
        </testcase>
        <testcase classname="src/tools/tools.test.ts" name="hasCycleInSchema &gt; should detect a cycle from object properties referencing parent properties" time="0.000154657">
        </testcase>
        <testcase classname="src/tools/tools.test.ts" name="hasCycleInSchema &gt; should detect a cycle from array items referencing parent properties" time="0.000107829">
        </testcase>
        <testcase classname="src/tools/tools.test.ts" name="hasCycleInSchema &gt; should detect a cycle between sibling properties" time="0.000185784">
        </testcase>
        <testcase classname="src/tools/tools.test.ts" name="hasCycleInSchema &gt; should not detect a cycle in a valid schema" time="0.000108942">
        </testcase>
        <testcase classname="src/tools/tools.test.ts" name="hasCycleInSchema &gt; should handle non-cyclic sibling refs" time="0.000094285">
        </testcase>
        <testcase classname="src/tools/tools.test.ts" name="hasCycleInSchema &gt; should handle nested but not cyclic refs" time="0.000082453">
        </testcase>
        <testcase classname="src/tools/tools.test.ts" name="hasCycleInSchema &gt; should return false for an empty schema" time="0.000055523">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/web-fetch.test.ts" timestamp="2025-10-02T21:38:30.499Z" hostname="uby" tests="7" failures="0" errors="0" skipped="0" time="0.053596664">
        <testcase classname="src/tools/web-fetch.test.ts" name="WebFetchTool &gt; execute &gt; should throw validation error when url parameter is missing" time="0.025257069">
        </testcase>
        <testcase classname="src/tools/web-fetch.test.ts" name="WebFetchTool &gt; execute &gt; should return WEB_FETCH_FALLBACK_FAILED on fetch failure" time="0.006022049">
            <system-out>
[WebFetchTool] Private IP detected for https://private.ip, using direct fetch
[WebFetchTool] Fetching content from: https://private.ip

            </system-out>
            <system-err>
[WebFetchTool] Error during fetch for https://private.ip: fetch failed Error: fetch failed
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/tools/web-fetch.test.ts:55:9
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

            </system-err>
        </testcase>
        <testcase classname="src/tools/web-fetch.test.ts" name="WebFetchTool &gt; execute &gt; should return WEB_FETCH_FALLBACK_FAILED on API processing failure" time="0.010883128">
            <system-out>
[WebFetchTool] Public URL detected for https://public.ip, using direct fetch
[WebFetchTool] Fetching content from: https://public.ip

[WebFetchTool] Successfully fetched content from https://public.ip

[WebFetchTool] Converted HTML to text (12 characters)
[WebFetchTool] Processing content with prompt: &quot;summarize this&quot;

            </system-out>
            <system-err>
[WebFetchTool] Error during fetch for https://public.ip: API error Error: API error
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/tools/web-fetch.test.ts:70:45
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

            </system-err>
        </testcase>
        <testcase classname="src/tools/web-fetch.test.ts" name="WebFetchTool &gt; shouldConfirmExecute &gt; should return confirmation details with the correct prompt and urls" time="0.003539833">
        </testcase>
        <testcase classname="src/tools/web-fetch.test.ts" name="WebFetchTool &gt; shouldConfirmExecute &gt; should return github urls as-is in confirmation details" time="0.001478828">
        </testcase>
        <testcase classname="src/tools/web-fetch.test.ts" name="WebFetchTool &gt; shouldConfirmExecute &gt; should return false if approval mode is AUTO_EDIT" time="0.001628865">
        </testcase>
        <testcase classname="src/tools/web-fetch.test.ts" name="WebFetchTool &gt; shouldConfirmExecute &gt; should call setApprovalMode when onConfirm is called with ProceedAlways" time="0.002318492">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/web-search.test.ts" timestamp="2025-10-02T21:38:30.499Z" hostname="uby" tests="8" failures="0" errors="0" skipped="0" time="0.065193264">
        <testcase classname="src/tools/web-search.test.ts" name="WebSearchTool &gt; build &gt; should return an invocation for a valid query" time="0.034893719">
        </testcase>
        <testcase classname="src/tools/web-search.test.ts" name="WebSearchTool &gt; build &gt; should throw an error for an empty query" time="0.007068126">
        </testcase>
        <testcase classname="src/tools/web-search.test.ts" name="WebSearchTool &gt; build &gt; should throw an error for a query with only whitespace" time="0.003435861">
        </testcase>
        <testcase classname="src/tools/web-search.test.ts" name="WebSearchTool &gt; getDescription &gt; should return a description of the search" time="0.003156804">
        </testcase>
        <testcase classname="src/tools/web-search.test.ts" name="WebSearchTool &gt; execute &gt; should return search results for a successful query" time="0.002353527">
        </testcase>
        <testcase classname="src/tools/web-search.test.ts" name="WebSearchTool &gt; execute &gt; should handle no search results found" time="0.001937207">
        </testcase>
        <testcase classname="src/tools/web-search.test.ts" name="WebSearchTool &gt; execute &gt; should handle API errors gracefully" time="0.006680618">
            <system-err>
Error during web search for query &quot;error query&quot;: API Failure Error: API Failure
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/tools/web-search.test.ts:123:39
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

            </system-err>
        </testcase>
        <testcase classname="src/tools/web-search.test.ts" name="WebSearchTool &gt; execute &gt; should correctly format results with sources" time="0.004007419">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/write-file.test.ts" timestamp="2025-10-02T21:38:30.499Z" hostname="uby" tests="25" failures="0" errors="0" skipped="0" time="0.077860354">
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; build &gt; should return an invocation for a valid absolute path within root" time="0.025523993">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; build &gt; should throw an error for a relative path" time="0.001764297">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; build &gt; should throw an error for a path outside root" time="0.001693555">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; build &gt; should throw an error if path is a directory" time="0.002498966">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; build &gt; should coerce null content into an empty string" time="0.000765688">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; build &gt; should throw error if the file_path is empty" time="0.001455625">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; getCorrectedFileContent &gt; should return proposed content unchanged for a new file" time="0.001262417">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; getCorrectedFileContent &gt; should return proposed content unchanged for an existing file" time="0.001202536">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; getCorrectedFileContent &gt; should return error if reading an existing file fails (e.g. permissions)" time="0.001712691">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; shouldConfirmExecute &gt; should return false if _getCorrectedFileContent returns an error" time="0.002901832">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; shouldConfirmExecute &gt; should request confirmation with diff for a new file" time="0.00373289">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; shouldConfirmExecute &gt; should request confirmation with diff for an existing file" time="0.002692505">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; execute &gt; should return error if _getCorrectedFileContent returns an error during execute" time="0.002077546">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; execute &gt; should write a new file and return diff" time="0.002896242">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; execute &gt; should overwrite an existing file and return diff" time="0.002311199">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; execute &gt; should create directory if it does not exist" time="0.001800293">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; execute &gt; should include modification message when proposed content is modified" time="0.002462198">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; execute &gt; should not include modification message when proposed content is not modified" time="0.002715928">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; execute &gt; should not include modification message when modified_by_user is not provided" time="0.002158817">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; workspace boundary validation &gt; should validate paths are within workspace root" time="0.002084699">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; workspace boundary validation &gt; should reject paths outside workspace root" time="0.001493455">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; specific error types for write failures &gt; should return PERMISSION_DENIED error when write fails with EACCES" time="0.001726166">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; specific error types for write failures &gt; should return NO_SPACE_LEFT error when write fails with ENOSPC" time="0.001616002">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; specific error types for write failures &gt; should return TARGET_IS_DIRECTORY error when write fails with EISDIR" time="0.002268049">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; specific error types for write failures &gt; should return FILE_WRITE_FAILURE for generic write errors" time="0.003013329">
        </testcase>
    </testsuite>
    <testsuite name="src/core/__tests__/openaiTimeoutHandling.test.ts" timestamp="2025-10-02T21:38:30.500Z" hostname="uby" tests="12" failures="0" errors="0" skipped="0" time="0.019862531">
        <testcase classname="src/core/__tests__/openaiTimeoutHandling.test.ts" name="OpenAIContentGenerator Timeout Handling &gt; timeout error identification through actual requests &gt; should handle various timeout error formats correctly" time="0.007644643">
            <system-err>
OpenAI API Error: Request timeout after 0s. Try reducing input length or increasing timeout in config.

OpenAI API Error: Request timeout after 0s. Try reducing input length or increasing timeout in config.

OpenAI API Error: Request timeout after 0s. Try reducing input length or increasing timeout in config.

OpenAI API Error: Request timeout after 0s. Try reducing input length or increasing timeout in config.

OpenAI API Error: Request timeout after 0s. Try reducing input length or increasing timeout in config.

OpenAI API Error: Request timeout after 0s. Try reducing input length or increasing timeout in config.

OpenAI API Error: Request timeout after 0s. Try reducing input length or increasing timeout in config.

OpenAI API Error: Request timeout after 0s. Try reducing input length or increasing timeout in config.

            </system-err>
        </testcase>
        <testcase classname="src/core/__tests__/openaiTimeoutHandling.test.ts" name="OpenAIContentGenerator Timeout Handling &gt; timeout error identification through actual requests &gt; should handle non-timeout errors without timeout messaging" time="0.002984716">
            <system-err>
OpenAI API Error: Invalid API key

OpenAI API Error: Rate limit exceeded

OpenAI API Error: Model not found

OpenAI API Error: Auth error

OpenAI API Error: API error

            </system-err>
        </testcase>
        <testcase classname="src/core/__tests__/openaiTimeoutHandling.test.ts" name="OpenAIContentGenerator Timeout Handling &gt; generateContent timeout handling &gt; should handle timeout errors with helpful message" time="0.001816833">
            <system-err>
OpenAI API Error: Request timeout after 0s. Try reducing input length or increasing timeout in config.

            </system-err>
        </testcase>
        <testcase classname="src/core/__tests__/openaiTimeoutHandling.test.ts" name="OpenAIContentGenerator Timeout Handling &gt; generateContent timeout handling &gt; should handle non-timeout errors normally" time="0.000814077">
            <system-err>
OpenAI API Error: Invalid API key

            </system-err>
        </testcase>
        <testcase classname="src/core/__tests__/openaiTimeoutHandling.test.ts" name="OpenAIContentGenerator Timeout Handling &gt; generateContent timeout handling &gt; should include troubleshooting tips for timeout errors" time="0.000757803">
            <system-err>
OpenAI API Error: Request timeout after 0s. Try reducing input length or increasing timeout in config.

            </system-err>
        </testcase>
        <testcase classname="src/core/__tests__/openaiTimeoutHandling.test.ts" name="OpenAIContentGenerator Timeout Handling &gt; generateContentStream timeout handling &gt; should handle streaming timeout errors" time="0.000654041">
            <system-err>
OpenAI API Streaming Error: Streaming request timeout after 0s. Try reducing input length or increasing timeout in config.

            </system-err>
        </testcase>
        <testcase classname="src/core/__tests__/openaiTimeoutHandling.test.ts" name="OpenAIContentGenerator Timeout Handling &gt; generateContentStream timeout handling &gt; should include streaming-specific troubleshooting tips" time="0.000552213">
            <system-err>
OpenAI API Streaming Error: Streaming request timeout after 0s. Try reducing input length or increasing timeout in config.

            </system-err>
        </testcase>
        <testcase classname="src/core/__tests__/openaiTimeoutHandling.test.ts" name="OpenAIContentGenerator Timeout Handling &gt; timeout configuration &gt; should use default timeout configuration" time="0.000512328">
        </testcase>
        <testcase classname="src/core/__tests__/openaiTimeoutHandling.test.ts" name="OpenAIContentGenerator Timeout Handling &gt; timeout configuration &gt; should use custom timeout from config" time="0.000523039">
        </testcase>
        <testcase classname="src/core/__tests__/openaiTimeoutHandling.test.ts" name="OpenAIContentGenerator Timeout Handling &gt; timeout configuration &gt; should handle missing timeout config gracefully" time="0.000548015">
        </testcase>
        <testcase classname="src/core/__tests__/openaiTimeoutHandling.test.ts" name="OpenAIContentGenerator Timeout Handling &gt; token estimation on timeout &gt; should surface a clear timeout error when request times out" time="0.000880991">
            <system-err>
OpenAI API Error: Request timeout after 0s. Try reducing input length or increasing timeout in config.

            </system-err>
        </testcase>
        <testcase classname="src/core/__tests__/openaiTimeoutHandling.test.ts" name="OpenAIContentGenerator Timeout Handling &gt; token estimation on timeout &gt; should fall back to character-based estimation if countTokens fails" time="0.000726645">
            <system-err>
OpenAI API Error: Request timeout after 0s. Try reducing input length or increasing timeout in config.

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="src/utils/bfsFileSearch.test.ts" timestamp="2025-10-02T21:38:30.501Z" hostname="uby" tests="11" failures="0" errors="0" skipped="0" time="0.035811008">
        <testcase classname="src/utils/bfsFileSearch.test.ts" name="bfsFileSearch &gt; should find a file in the root directory" time="0.006893282">
        </testcase>
        <testcase classname="src/utils/bfsFileSearch.test.ts" name="bfsFileSearch &gt; should find a file in a nested directory" time="0.003106902">
        </testcase>
        <testcase classname="src/utils/bfsFileSearch.test.ts" name="bfsFileSearch &gt; should find multiple files with the same name" time="0.002675953">
        </testcase>
        <testcase classname="src/utils/bfsFileSearch.test.ts" name="bfsFileSearch &gt; should return an empty array if no file is found" time="0.000526154">
        </testcase>
        <testcase classname="src/utils/bfsFileSearch.test.ts" name="bfsFileSearch &gt; should ignore directories specified in ignoreDirs" time="0.000600642">
        </testcase>
        <testcase classname="src/utils/bfsFileSearch.test.ts" name="bfsFileSearch &gt; should respect the maxDirs limit and not find the file" time="0.000471824">
        </testcase>
        <testcase classname="src/utils/bfsFileSearch.test.ts" name="bfsFileSearch &gt; should respect the maxDirs limit and find the file" time="0.001672987">
        </testcase>
        <testcase classname="src/utils/bfsFileSearch.test.ts" name="bfsFileSearch &gt; with FileDiscoveryService &gt; should ignore gitignored files" time="0.003209161">
        </testcase>
        <testcase classname="src/utils/bfsFileSearch.test.ts" name="bfsFileSearch &gt; with FileDiscoveryService &gt; should ignore geminiignored files" time="0.003182101">
        </testcase>
        <testcase classname="src/utils/bfsFileSearch.test.ts" name="bfsFileSearch &gt; with FileDiscoveryService &gt; should not ignore files if respect flags are false" time="0.001372882">
        </testcase>
        <testcase classname="src/utils/bfsFileSearch.test.ts" name="bfsFileSearch &gt; should find all files in a complex directory structure" time="0.010719115">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/editor.test.ts" timestamp="2025-10-02T21:38:30.501Z" hostname="uby" tests="108" failures="0" errors="0" skipped="0" time="0.031115675">
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; vscode &gt; should return true if first command &quot;code&quot; exists on non-windows" time="0.003644097">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; vscode &gt; should return false if none of the commands exist on non-windows" time="0.000326204">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; vscode &gt; should return true if first command &quot;code.cmd&quot; exists on windows" time="0.000317067">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; vscode &gt; should return false if none of the commands exist on windows" time="0.000177929">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; vscodium &gt; should return true if first command &quot;codium&quot; exists on non-windows" time="0.000218254">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; vscodium &gt; should return false if none of the commands exist on non-windows" time="0.000100987">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; vscodium &gt; should return true if first command &quot;codium.cmd&quot; exists on windows" time="0.000133167">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; vscodium &gt; should return false if none of the commands exist on windows" time="0.000090157">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; windsurf &gt; should return true if first command &quot;windsurf&quot; exists on non-windows" time="0.000153924">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; windsurf &gt; should return false if none of the commands exist on non-windows" time="0.00008135">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; windsurf &gt; should return true if first command &quot;windsurf&quot; exists on windows" time="0.000451396">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; windsurf &gt; should return false if none of the commands exist on windows" time="0.000123198">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; cursor &gt; should return true if first command &quot;cursor&quot; exists on non-windows" time="0.000126484">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; cursor &gt; should return false if none of the commands exist on non-windows" time="0.000083255">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; cursor &gt; should return true if first command &quot;cursor&quot; exists on windows" time="0.000106317">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; cursor &gt; should return false if none of the commands exist on windows" time="0.000089937">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; vim &gt; should return true if first command &quot;vim&quot; exists on non-windows" time="0.000144437">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; vim &gt; should return false if none of the commands exist on non-windows" time="0.000091068">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; vim &gt; should return true if first command &quot;vim&quot; exists on windows" time="0.00016207">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; vim &gt; should return false if none of the commands exist on windows" time="0.000118309">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; neovim &gt; should return true if first command &quot;nvim&quot; exists on non-windows" time="0.000135932">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; neovim &gt; should return false if none of the commands exist on non-windows" time="0.000088002">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; neovim &gt; should return true if first command &quot;nvim&quot; exists on windows" time="0.000099424">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; neovim &gt; should return false if none of the commands exist on windows" time="0.00008644">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; zed &gt; should return true if first command &quot;zed&quot; exists on non-windows" time="0.000107859">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; zed &gt; should return true if first command doesn&apos;t exist but second command &quot;zeditor&quot; exists on non-windows" time="0.000220769">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; zed &gt; should return false if none of the commands exist on non-windows" time="0.000083325">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; zed &gt; should return true if first command &quot;zed&quot; exists on windows" time="0.000108501">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; zed &gt; should return false if none of the commands exist on windows" time="0.000077554">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; emacs &gt; should return true if first command &quot;emacs&quot; exists on non-windows" time="0.000119611">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; emacs &gt; should return false if none of the commands exist on non-windows" time="0.000077273">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; emacs &gt; should return true if first command &quot;emacs.exe&quot; exists on windows" time="0.000130622">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; emacs &gt; should return false if none of the commands exist on windows" time="0.000092351">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should use first command &quot;code&quot; when it exists on non-windows" time="0.000253679">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should fall back to last command &quot;code&quot; when none exist on non-windows" time="0.000092351">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should use first command &quot;code.cmd&quot; when it exists on windows" time="0.000070871">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should fall back to last command &quot;code.cmd&quot; when none exist on windows" time="0.000092631">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should use first command &quot;codium&quot; when it exists on non-windows" time="0.000083164">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should fall back to last command &quot;codium&quot; when none exist on non-windows" time="0.000087162">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should use first command &quot;codium.cmd&quot; when it exists on windows" time="0.000072604">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should fall back to last command &quot;codium.cmd&quot; when none exist on windows" time="0.000081441">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should use first command &quot;windsurf&quot; when it exists on non-windows" time="0.000068677">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should fall back to last command &quot;windsurf&quot; when none exist on non-windows" time="0.000059921">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should use first command &quot;windsurf&quot; when it exists on windows" time="0.000057577">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should fall back to last command &quot;windsurf&quot; when none exist on windows" time="0.000054992">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should use first command &quot;cursor&quot; when it exists on non-windows" time="0.000058077">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should fall back to last command &quot;cursor&quot; when none exist on non-windows" time="0.000051996">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should use first command &quot;cursor&quot; when it exists on windows" time="0.000065992">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should fall back to last command &quot;cursor&quot; when none exist on windows" time="0.000060412">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should use first command &quot;zed&quot; when it exists on non-windows" time="0.000107378">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should use second command &quot;zeditor&quot; when first doesn&apos;t exist on non-windows" time="0.000179201">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should fall back to last command &quot;zeditor&quot; when none exist on non-windows" time="0.000112308">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should use first command &quot;zed&quot; when it exists on windows" time="0.000124611">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should fall back to last command &quot;zed&quot; when none exist on windows" time="0.000073526">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should return the correct command for vim" time="0.000186204">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should return the correct command for neovim" time="0.000086861">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should return the correct command for emacs" time="0.000110093">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should return null for an unsupported editor" time="0.000069278">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should call spawn for vscode" time="0.001157333">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should reject if spawn for vscode fails" time="0.001117077">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should reject if vscode exits with non-zero code" time="0.000316797">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should call spawn for vscodium" time="0.000269318">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should reject if spawn for vscodium fails" time="0.00018897">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should reject if vscodium exits with non-zero code" time="0.001285641">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should call spawn for windsurf" time="0.000429756">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should reject if spawn for windsurf fails" time="0.000551662">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should reject if windsurf exits with non-zero code" time="0.000197837">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should call spawn for cursor" time="0.000221209">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should reject if spawn for cursor fails" time="0.000173842">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should reject if cursor exits with non-zero code" time="0.000628804">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should call spawn for zed" time="0.000341602">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should reject if spawn for zed fails" time="0.000179463">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should reject if zed exits with non-zero code" time="0.000208206">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should call execSync for vim on non-windows" time="0.00037259">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should call execSync for vim on windows" time="0.000247308">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should call execSync for neovim on non-windows" time="0.000139669">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should call execSync for neovim on windows" time="0.000121745">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should call execSync for emacs on non-windows" time="0.000142724">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should call execSync for emacs on windows" time="0.000161129">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should log an error if diff command is not available" time="0.0003129">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; onEditorClose callback &gt; should call onEditorClose for execSync editors" time="0.000166749">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; onEditorClose callback &gt; should call onEditorClose for execSync editors when an error is thrown" time="0.006973199">
            <system-err>
Error in onEditorClose callback: Error: test error
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/editor.test.ts:437:17
    at mockCall (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/spy[24m/dist/index.js:96:15)
    at spy (file:///home/atmandk/LowCal-dev/node_modules/[4mtinyspy[24m/dist/index.js:47:103)
    at Module.openDiff [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/editor.ts:211:11[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/editor.test.ts:440:9
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)

            </system-err>
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; onEditorClose callback &gt; should not call onEditorClose for spawn editors" time="0.000481381">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should allow vim in sandbox mode" time="0.000211361">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should allow vim when not in sandbox mode" time="0.000084697">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should allow emacs in sandbox mode" time="0.000089165">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should allow emacs when not in sandbox mode" time="0.000069799">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should allow neovim in sandbox mode" time="0.000085618">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should allow neovim when not in sandbox mode" time="0.000073446">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should not allow vscode in sandbox mode" time="0.000081461">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should allow vscode when not in sandbox mode" time="0.000068898">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should not allow vscodium in sandbox mode" time="0.000060643">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should allow vscodium when not in sandbox mode" time="0.000052408">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should not allow windsurf in sandbox mode" time="0.000054241">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should allow windsurf when not in sandbox mode" time="0.000050584">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should not allow cursor in sandbox mode" time="0.000055021">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should allow cursor when not in sandbox mode" time="0.000050253">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should not allow zed in sandbox mode" time="0.000053188">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should allow zed when not in sandbox mode" time="0.000066864">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; isEditorAvailable &gt; should return false for undefined editor" time="0.000101027">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; isEditorAvailable &gt; should return false for empty string editor" time="0.000069879">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; isEditorAvailable &gt; should return false for invalid editor type" time="0.000065722">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; isEditorAvailable &gt; should return true for vscode when installed and not in sandbox mode" time="0.000104724">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; isEditorAvailable &gt; should return false for vscode when not installed and not in sandbox mode" time="0.000118269">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; isEditorAvailable &gt; should return false for vscode when installed and in sandbox mode" time="0.000090488">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; isEditorAvailable &gt; should return true for vim when installed and in sandbox mode" time="0.000093503">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; isEditorAvailable &gt; should return true for emacs when installed and in sandbox mode" time="0.00008072">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; isEditorAvailable &gt; should return true for neovim when installed and in sandbox mode" time="0.000076852">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/environmentContext.test.ts" timestamp="2025-10-02T21:38:30.504Z" hostname="uby" tests="8" failures="0" errors="0" skipped="0" time="0.026490713">
        <testcase classname="src/utils/environmentContext.test.ts" name="getDirectoryContextString &gt; should return context string for a single directory" time="0.002081093">
        </testcase>
        <testcase classname="src/utils/environmentContext.test.ts" name="getDirectoryContextString &gt; should return context string for multiple directories" time="0.000353464">
        </testcase>
        <testcase classname="src/utils/environmentContext.test.ts" name="getEnvironmentContext &gt; should return basic environment context for a single directory" time="0.013516594">
        </testcase>
        <testcase classname="src/utils/environmentContext.test.ts" name="getEnvironmentContext &gt; should return basic environment context for multiple directories" time="0.001084017">
        </testcase>
        <testcase classname="src/utils/environmentContext.test.ts" name="getEnvironmentContext &gt; should include full file context when getFullContext is true" time="0.00117767">
        </testcase>
        <testcase classname="src/utils/environmentContext.test.ts" name="getEnvironmentContext &gt; should handle read_many_files returning no content" time="0.001300778">
            <system-err>
Full context requested, but read_many_files returned no content.

            </system-err>
        </testcase>
        <testcase classname="src/utils/environmentContext.test.ts" name="getEnvironmentContext &gt; should handle read_many_files tool not being found" time="0.000633292">
            <system-err>
Full context requested, but read_many_files tool not found.

            </system-err>
        </testcase>
        <testcase classname="src/utils/environmentContext.test.ts" name="getEnvironmentContext &gt; should handle errors when reading full file context" time="0.005267231">
            <system-err>
Error reading full file context: Error: Read error
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/environmentContext.test.ts:205:44
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="src/utils/errorParsing.test.ts" timestamp="2025-10-02T21:38:30.505Z" hostname="uby" tests="21" failures="0" errors="0" skipped="0" time="0.004489792">
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a valid API error JSON" time="0.001293735">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a 429 API error with the default message" time="0.000261434">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a 429 API error with the personal message" time="0.000163663">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a 429 API error with the vertex message" time="0.00008667">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should return the original message if it is not a JSON error" time="0.000050734">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should return the original message for malformed JSON" time="0.00005908">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should handle JSON that does not match the ApiError structure" time="0.000074217">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a nested API error" time="0.000151831">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a StructuredError" time="0.00011903">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a 429 StructuredError with the vertex message" time="0.00006491">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should handle an unknown error type" time="0.000041407">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a 429 API error with Pro quota exceeded message for Google auth (Free tier)" time="0.000131243">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a regular 429 API error with standard message for Google auth" time="0.000132004">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a 429 API error with generic quota exceeded message for Google auth" time="0.000104934">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should prioritize Pro quota message over generic quota message for Google auth" time="0.000073926">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a 429 API error with Pro quota exceeded message for Google auth (Standard tier)" time="0.000103211">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a 429 API error with Pro quota exceeded message for Google auth (Legacy tier)" time="0.000072584">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should handle different Gemini 2.5 version strings in Pro quota exceeded errors" time="0.000111246">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should not match non-Pro models with similar version strings" time="0.000109052">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a generic quota exceeded message for Google auth (Standard tier)" time="0.000092622">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a regular 429 API error with standard message for Google auth (Standard tier)" time="0.000064921">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/errorReporting.test.ts" timestamp="2025-10-02T21:38:30.505Z" hostname="uby" tests="6" failures="0" errors="0" skipped="0" time="0.043570503">
        <testcase classname="src/utils/errorReporting.test.ts" name="reportError &gt; should generate a report and log the path" time="0.012507265">
        </testcase>
        <testcase classname="src/utils/errorReporting.test.ts" name="reportError &gt; should handle errors that are plain objects with a message property" time="0.003224721">
        </testcase>
        <testcase classname="src/utils/errorReporting.test.ts" name="reportError &gt; should handle string errors" time="0.002416995">
        </testcase>
        <testcase classname="src/utils/errorReporting.test.ts" name="reportError &gt; should log fallback message if writing report fails" time="0.007447548">
        </testcase>
        <testcase classname="src/utils/errorReporting.test.ts" name="reportError &gt; should handle stringification failure of report content (e.g. BigInt in context)" time="0.003801769">
        </testcase>
        <testcase classname="src/utils/errorReporting.test.ts" name="reportError &gt; should generate a report without context if context is not provided" time="0.01272079">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/fileUtils.test.ts" timestamp="2025-10-02T21:38:30.506Z" hostname="uby" tests="40" failures="0" errors="0" skipped="0" time="0.053046326">
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; isWithinRoot &gt; should return true for paths directly within the root" time="0.002460515">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; isWithinRoot &gt; should return true for the root path itself" time="0.000499034">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; isWithinRoot &gt; should return false for paths outside the root" time="0.000402044">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; isWithinRoot &gt; should return false for paths that only partially match the root prefix" time="0.000330362">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; isWithinRoot &gt; should handle paths with trailing slashes correctly" time="0.000396605">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; isWithinRoot &gt; should handle different path separators (POSIX vs Windows)" time="0.00056209">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; isWithinRoot &gt; should return false for a root path that is a sub-path of the path to check" time="0.000404319">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; isBinaryFile &gt; should return false for an empty file" time="0.0015022">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; isBinaryFile &gt; should return false for a typical text file" time="0.00128592">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; isBinaryFile &gt; should return true for a file with many null bytes" time="0.000725343">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; isBinaryFile &gt; should return true for a file with high percentage of non-printable ASCII" time="0.000773723">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; isBinaryFile &gt; should return false if file access fails (e.g., ENOENT)" time="0.002026451">
            <system-err>
Failed to check if file is binary: /tmp/fileUtils-test-2JX2ay/binaryCheck.tmp ENOENT: no such file or directory, open &apos;/tmp/fileUtils-test-2JX2ay/binaryCheck.tmp&apos;

            </system-err>
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; detectFileType &gt; should detect typescript type by extension (ts, mts, cts, tsx)" time="0.001918622">
            <system-err>
Failed to check if file is binary: component.tsx ENOENT: no such file or directory, open &apos;component.tsx&apos;

            </system-err>
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; detectFileType &gt; should detect image type by extension (png)" time="0.000638933">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; detectFileType &gt; should detect image type by extension (jpeg)" time="0.000521686">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; detectFileType &gt; should detect svg type by extension" time="0.00080996">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; detectFileType &gt; should detect pdf type by extension" time="0.00077246">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; detectFileType &gt; should detect audio type by extension" time="0.000450925">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; detectFileType &gt; should detect video type by extension" time="0.00041068">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; detectFileType &gt; should detect known binary extensions as binary (e.g. .zip)" time="0.000406462">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; detectFileType &gt; should detect known binary extensions as binary (e.g. .exe)" time="0.000585314">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; detectFileType &gt; should use isBinaryFile for unknown extensions and detect as binary" time="0.002968836">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; detectFileType &gt; should default to text if mime type is unknown and content is not binary" time="0.001056546">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should read a text file successfully" time="0.001702902">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should handle file not found" time="0.000547263">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should handle read errors for text files" time="0.000900938">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should handle read errors for image/pdf files" time="0.000543166">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should process an image file" time="0.000790904">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should process a PDF file" time="0.001392107">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should read an SVG file as text when under 1MB" time="0.000703032">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should skip binary files" time="0.000563263">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should handle path being a directory" time="0.000432009">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should paginate text files correctly (offset and limit)" time="0.001185756">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should identify truncation when reading the end of a file" time="0.000647819">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should handle limit exceeding file length" time="0.0005507">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should truncate long lines in text files" time="0.000705205">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should truncate when line count exceeds the limit" time="0.000516707">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should truncate when a line length exceeds the character limit" time="0.000762311">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should truncate both line count and line length when both exceed limits" time="0.000685138">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should return an error if the file size exceeds 20MB" time="0.016504596">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/flashFallback.integration.test.ts" timestamp="2025-10-02T21:38:30.507Z" hostname="uby" tests="4" failures="0" errors="0" skipped="0" time="0.172591782">
        <testcase classname="src/utils/flashFallback.integration.test.ts" name="Flash Fallback Integration &gt; should automatically accept fallback" time="0.02648919">
            <system-out>
Invalid JSON in log file /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json. Backing up and starting fresh. SyntaxError: &quot;undefined&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Logger._readLogFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:91:31[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:155:19[90m)[39m

Backed up corrupted log file to /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json.invalid_json.1759441105198.bak

            </system-out>
            <system-err>
Error accessing installation ID file, generating ephemeral ID: TypeError: Cannot read properties of undefined (reading &apos;trim&apos;)
    at InstallationManager.readInstallationIdFromFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/installationManager.ts:21:50[90m)[39m
    at InstallationManager.getInstallationId [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/installationManager.ts:42:33[90m)[39m
    at QwenLogger.generateUserId [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/qwen-logger/qwen-logger.ts:123:53[90m)[39m
    at new QwenLogger [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/qwen-logger/qwen-logger.ts:114:24[90m)[39m
    at QwenLogger.getInstance [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/qwen-logger/qwen-logger.ts:131:29[90m)[39m
    at logCliConfiguration [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/loggers.ts:85:14[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:452:5[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/flashFallback.integration.test.ts:33:14
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20

            </system-err>
        </testcase>
        <testcase classname="src/utils/flashFallback.integration.test.ts" name="Flash Fallback Integration &gt; should trigger fallback after 2 consecutive 429 errors for OAuth users" time="0.006896147">
            <system-out>
Invalid JSON in log file /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json. Backing up and starting fresh. SyntaxError: &quot;undefined&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Logger._readLogFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:91:31[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:155:19[90m)[39m

Backed up corrupted log file to /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json.invalid_json.1759441105200.bak

            </system-out>
            <system-err>
Attempt 1 failed with status 429. Retrying with backoff... Error: Rate limit exceeded (simulated)
    at Module.createSimulated429Error [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/testUtils.ts:59:17[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/flashFallback.integration.test.ts:69:30
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8) {
  status: [33m429[39m
}

            </system-err>
        </testcase>
        <testcase classname="src/utils/flashFallback.integration.test.ts" name="Flash Fallback Integration &gt; should not trigger fallback for API key users" time="0.13690767">
            <system-out>
Invalid JSON in log file /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json. Backing up and starting fresh. SyntaxError: &quot;undefined&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Logger._readLogFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:91:31[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:155:19[90m)[39m

Backed up corrupted log file to /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json.invalid_json.1759441105206.bak

            </system-out>
            <system-err>
Attempt 1 failed with status 429. Retrying with backoff... Error: Rate limit exceeded (simulated)
    at Module.createSimulated429Error [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/testUtils.ts:59:17[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/flashFallback.integration.test.ts:109:51
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8) {
  status: [33m429[39m
}

Attempt 2 failed with status 429. Retrying with backoff... Error: Rate limit exceeded (simulated)
    at Module.createSimulated429Error [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/testUtils.ts:59:17[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/flashFallback.integration.test.ts:109:51
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8) {
  status: [33m429[39m
}

Attempt 3 failed with status 429. Retrying with backoff... Error: Rate limit exceeded (simulated)
    at Module.createSimulated429Error [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/testUtils.ts:59:17[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/flashFallback.integration.test.ts:109:51
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8) {
  status: [33m429[39m
}

Attempt 4 failed with status 429. Retrying with backoff... Error: Rate limit exceeded (simulated)
    at Module.createSimulated429Error [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/testUtils.ts:59:17[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/flashFallback.integration.test.ts:109:51
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8) {
  status: [33m429[39m
}

            </system-err>
        </testcase>
        <testcase classname="src/utils/flashFallback.integration.test.ts" name="Flash Fallback Integration &gt; should properly disable simulation state after fallback" time="0.000952603">
            <system-out>
Invalid JSON in log file /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json. Backing up and starting fresh. SyntaxError: &quot;undefined&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Logger._readLogFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:91:31[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:155:19[90m)[39m

Backed up corrupted log file to /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json.invalid_json.1759441105343.bak

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="src/utils/generateContentResponseUtilities.test.ts" timestamp="2025-10-02T21:38:30.507Z" hostname="uby" tests="29" failures="0" errors="0" skipped="0" time="0.00975511">
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getResponseTextFromParts &gt; should return undefined for no parts" time="0.001134349">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getResponseTextFromParts &gt; should extract text from a single text part" time="0.000253449">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getResponseTextFromParts &gt; should concatenate text from multiple text parts" time="0.000104072">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getResponseTextFromParts &gt; should ignore function call parts" time="0.002217485">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getResponseTextFromParts &gt; should return undefined if only function call parts exist" time="0.00017833">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCalls &gt; should return undefined for no candidates" time="0.00023725">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCalls &gt; should return undefined for empty candidates array" time="0.000095396">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCalls &gt; should return undefined for no parts" time="0.000230967">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCalls &gt; should extract a single function call" time="0.000768804">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCalls &gt; should extract multiple function calls" time="0.000228623">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCalls &gt; should ignore text parts" time="0.000114703">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCalls &gt; should return undefined if only text parts exist" time="0.000100726">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCallsFromParts &gt; should return undefined for no parts" time="0.0001242">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCallsFromParts &gt; should extract a single function call" time="0.000162461">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCallsFromParts &gt; should extract multiple function calls" time="0.00012424">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCallsFromParts &gt; should ignore text parts" time="0.000164234">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCallsFromParts &gt; should return undefined if only text parts exist" time="0.000081851">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCallsAsJson &gt; should return JSON string of function calls" time="0.000193658">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCallsAsJson &gt; should return undefined if no function calls" time="0.000109723">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCallsFromPartsAsJson &gt; should return JSON string of function calls from parts" time="0.000211671">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCallsFromPartsAsJson &gt; should return undefined if no function calls in parts" time="0.000097852">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getStructuredResponse &gt; should return only text if only text exists" time="0.000245544">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getStructuredResponse &gt; should return only function call JSON if only function calls exist" time="0.000145619">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getStructuredResponse &gt; should return text and function call JSON if both exist" time="0.000113219">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getStructuredResponse &gt; should return undefined if neither text nor function calls exist" time="0.000106797">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getStructuredResponseFromParts &gt; should return only text if only text exists in parts" time="0.000141562">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getStructuredResponseFromParts &gt; should return only function call JSON if only function calls exist in parts" time="0.000148174">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getStructuredResponseFromParts &gt; should return text and function call JSON if both exist in parts" time="0.000089817">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getStructuredResponseFromParts &gt; should return undefined if neither text nor function calls exist in parts" time="0.000109092">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/getFolderStructure.test.ts" timestamp="2025-10-02T21:38:30.508Z" hostname="uby" tests="15" failures="2" errors="0" skipped="0" time="0.054649784">
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; should return basic folder structure" time="0.006857715">
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; should handle an empty folder" time="0.000604279">
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; should ignore folders specified in ignoredFolders (default)" time="0.008548376">
            <failure message="expected &apos;Showing up to 20 items (files + folde…&apos; to be &apos;Showing up to 20 items (files + folde…&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;Showing up to 20 items (files + folde…&apos; to be &apos;Showing up to 20 items (files + folde…&apos; // Object.is equality

- Expected
+ Received

@@ -1,6 +1,6 @@
- Showing up to 20 items (files + folders). Folders or files indicated with ... contain more items not shown, were ignored, or the display limit (20 items) was reached.
+ Showing up to 20 items (files + folders). Folders or files indicated with ... contain more items not shown, were ignored, or the display limit (20 items) was reached. Truncated directories to inspect further: node_modules. Consider running /list_directory &lt;path&gt; or /glob for deeper listings.

  /tmp/folder-structure-test-ksH4K2/
  ├───.hiddenfile
  ├───file1.txt
  ├───emptyFolder/

 ❯ src/utils/getFolderStructure.test.ts:82:30
            </failure>
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; should ignore folders specified in custom ignoredFolders" time="0.004446532">
            <failure message="expected &apos;Showing up to 20 items (files + folde…&apos; to be &apos;Showing up to 20 items (files + folde…&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;Showing up to 20 items (files + folde…&apos; to be &apos;Showing up to 20 items (files + folde…&apos; // Object.is equality

- Expected
+ Received

@@ -1,6 +1,6 @@
- Showing up to 20 items (files + folders). Folders or files indicated with ... contain more items not shown, were ignored, or the display limit (20 items) was reached.
+ Showing up to 20 items (files + folders). Folders or files indicated with ... contain more items not shown, were ignored, or the display limit (20 items) was reached. Truncated directories to inspect further: node_modules, subfolderA. Consider running /list_directory &lt;path&gt; or /glob for deeper listings.

  /tmp/folder-structure-test-CtRBrF/
  ├───.hiddenfile
  ├───file1.txt
  ├───emptyFolder/

 ❯ src/utils/getFolderStructure.test.ts:120:30
            </failure>
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; should filter files by fileIncludePattern" time="0.005549423">
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; should handle maxItems truncation for files within a folder" time="0.004173767">
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; should handle maxItems truncation for subfolders" time="0.002817185">
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; should handle maxItems that only allows the root folder itself" time="0.001320935">
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; should handle non-existent directory" time="0.002046639">
            <system-err>
Warning: Could not read directory /tmp/folder-structure-test-JGyVij/non-existent: ENOENT: no such file or directory, scandir &apos;/tmp/folder-structure-test-JGyVij/non-existent&apos;

            </system-err>
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; should handle deep folder structure within limits" time="0.001105947">
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; should truncate deep folder structure if maxItems is small" time="0.001151652">
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; with gitignore &gt; should ignore files and folders specified in .gitignore" time="0.004531389">
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; with gitignore &gt; should not ignore files if respectGitIgnore is false" time="0.00150744">
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; with geminiignore &gt; should ignore geminiignore files by default" time="0.005907938">
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; with geminiignore &gt; should not ignore files if respectGeminiIgnore is false" time="0.002194362">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/gitIgnoreParser.test.ts" timestamp="2025-10-02T21:38:30.509Z" hostname="uby" tests="18" failures="0" errors="0" skipped="0" time="0.03360843">
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; initialization &gt; should initialize without errors when no .gitignore exists" time="0.005372506">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; initialization &gt; should load .gitignore patterns when file exists" time="0.004389086">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; initialization &gt; should handle git exclude file" time="0.005155384">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; initialization &gt; should handle custom patterns file name" time="0.001073798">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; initialization &gt; should initialize without errors when no .qwenignore exists" time="0.000544889">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; isIgnored &gt; should always ignore .git directory" time="0.001154016">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; isIgnored &gt; should ignore files matching patterns" time="0.001126545">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; isIgnored &gt; should ignore files with path-specific patterns" time="0.00069661">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; isIgnored &gt; should handle negation patterns" time="0.000899084">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; isIgnored &gt; should not ignore files that do not match patterns" time="0.001030207">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; isIgnored &gt; should handle absolute paths correctly" time="0.00085348">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; isIgnored &gt; should handle paths outside project root by not ignoring them" time="0.001166981">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; isIgnored &gt; should handle relative paths correctly" time="0.002327348">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; isIgnored &gt; should normalize path separators on Windows" time="0.001502632">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; isIgnored &gt; should handle root path &quot;/&quot; without throwing error" time="0.001263209">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; isIgnored &gt; should handle absolute-like paths without throwing error" time="0.001478978">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; isIgnored &gt; should handle paths that start with forward slash" time="0.001124963">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; getIgnoredPatterns &gt; should return the raw patterns added" time="0.001039525">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/ignorePatterns.test.ts" timestamp="2025-10-02T21:38:30.510Z" hostname="uby" tests="28" failures="0" errors="0" skipped="0" time="0.011897316">
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; getCoreIgnorePatterns &gt; should return basic ignore patterns" time="0.002407607">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; getDefaultExcludePatterns &gt; should return comprehensive patterns by default" time="0.000841939">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; getDefaultExcludePatterns &gt; should respect includeDefaults option" time="0.000352383">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; getDefaultExcludePatterns &gt; should include custom patterns" time="0.000230176">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; getDefaultExcludePatterns &gt; should include runtime patterns" time="0.000225798">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; getDefaultExcludePatterns &gt; should respect includeDynamicPatterns option" time="0.000185443">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; getReadManyFilesExcludes &gt; should provide legacy compatibility" time="0.000176517">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; getGlobExcludes &gt; should return core patterns for glob operations" time="0.000306497">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; getGlobExcludes &gt; should include additional excludes" time="0.00018899">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; with Config &gt; should use config custom excludes when available" time="0.000492682">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; with Config &gt; should handle config without getCustomExcludes method" time="0.00169617">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; with Config &gt; should include config custom excludes in glob patterns" time="0.000288434">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; buildExcludePatterns &gt; should be an alias for getDefaultExcludePatterns" time="0.000877975">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="BINARY_EXTENSIONS &gt; should include common binary file extensions" time="0.000216982">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="BINARY_EXTENSIONS &gt; should include additional binary extensions" time="0.000096168">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="BINARY_EXTENSIONS &gt; should include media file extensions" time="0.000145008">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="BINARY_EXTENSIONS &gt; should be sorted" time="0.000114231">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="BINARY_EXTENSIONS &gt; should not contain invalid extensions from brace patterns" time="0.000485078">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="extractExtensionsFromPatterns &gt; should extract simple extensions" time="0.000135421">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="extractExtensionsFromPatterns &gt; should handle brace expansion patterns" time="0.000186105">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="extractExtensionsFromPatterns &gt; should combine simple and brace expansion patterns" time="0.000105446">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="extractExtensionsFromPatterns &gt; should handle empty brace expansion" time="0.00007019">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="extractExtensionsFromPatterns &gt; should ignore invalid patterns" time="0.000052016">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="extractExtensionsFromPatterns &gt; should remove duplicates and sort results" time="0.0000592">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="extractExtensionsFromPatterns &gt; should handle complex brace patterns with multiple extensions" time="0.000049181">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="extractExtensionsFromPatterns &gt; should handle compound extensions correctly using path.extname" time="0.000044061">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="extractExtensionsFromPatterns &gt; should handle dotfiles correctly" time="0.000072604">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="extractExtensionsFromPatterns &gt; should handle edge cases with path.extname" time="0.000044662">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/installationManager.test.ts" timestamp="2025-10-02T21:38:30.510Z" hostname="uby" tests="4" failures="0" errors="0" skipped="0" time="0.007910846">
        <testcase classname="src/utils/installationManager.test.ts" name="InstallationManager &gt; getInstallationId &gt; should create and write a new installation ID if one does not exist" time="0.002785206">
        </testcase>
        <testcase classname="src/utils/installationManager.test.ts" name="InstallationManager &gt; getInstallationId &gt; should read an existing installation ID from a file" time="0.001811774">
        </testcase>
        <testcase classname="src/utils/installationManager.test.ts" name="InstallationManager &gt; getInstallationId &gt; should return the same ID on subsequent calls" time="0.000618245">
        </testcase>
        <testcase classname="src/utils/installationManager.test.ts" name="InstallationManager &gt; getInstallationId &gt; should handle read errors and return a fallback ID" time="0.001046708">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/memoryDiscovery.test.ts" timestamp="2025-10-02T21:38:30.511Z" hostname="uby" tests="14" failures="0" errors="0" skipped="0" time="0.092042961">
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should return empty memory and count if no context files are found" time="0.005959123">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should load only the global context file if present and others are not (default filename)" time="0.012626856">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should load only the global custom context file if present and filename is changed" time="0.00721678">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should load context files by upward traversal with custom filename" time="0.009944009">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should load context files by downward traversal with custom filename" time="0.003747217">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should load ORIGINAL_GEMINI_MD_FILENAME files by upward traversal from CWD to project root" time="0.002777813">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should load ORIGINAL_GEMINI_MD_FILENAME files by downward traversal from CWD" time="0.00345151">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should load and correctly order global, upward, and downward ORIGINAL_GEMINI_MD_FILENAME files" time="0.004323905">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should ignore specified directories during downward scan" time="0.004586631">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should respect the maxDirs parameter during downward scan" time="0.018481225">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should load extension context file paths" time="0.005728726">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should load memory from included directories" time="0.002997049">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should handle multiple directories and files in parallel correctly" time="0.005036674">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should preserve order and prevent duplicates when processing multiple directories" time="0.003627676">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/memoryImportProcessor.test.ts" timestamp="2025-10-02T21:38:30.511Z" hostname="uby" tests="23" failures="0" errors="0" skipped="0" time="0.029649641">
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should process basic md file imports" time="0.014768271">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should import non-md files just like md files" time="0.000978512">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should handle circular imports" time="0.000584472">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should handle file not found errors" time="0.000708442">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should respect max depth limit" time="0.000607405">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should handle nested imports recursively" time="0.000691681">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should handle absolute paths in imports" time="0.000360678">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should handle multiple imports in same content" time="0.000741974">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should ignore imports inside code blocks" time="0.00093455">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should ignore imports inside inline code" time="0.000730373">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should handle nested tokens and non-unique content correctly" time="0.000445265">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should allow imports from parent and subdirectories within project root" time="0.000375295">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should reject imports outside project root" time="0.000209949">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should build import tree structure" time="0.001601344">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should produce flat output in Claude-style with unique files in order" time="0.0011399">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should not duplicate files in flat output if imported multiple times" time="0.000483535">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should handle nested imports in flat output" time="0.00034025">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; validateImportPath &gt; should reject URLs" time="0.000261505">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; validateImportPath &gt; should allow paths within allowed directories" time="0.000252006">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; validateImportPath &gt; should reject paths outside allowed directories" time="0.00032424">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; validateImportPath &gt; should handle multiple allowed directories" time="0.000430337">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; validateImportPath &gt; should handle relative paths correctly" time="0.000463769">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; validateImportPath &gt; should handle absolute paths correctly" time="0.000544087">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/nextSpeakerChecker.test.ts" timestamp="2025-10-02T21:38:30.512Z" hostname="uby" tests="10" failures="0" errors="0" skipped="0" time="0.036132452">
        <testcase classname="src/utils/nextSpeakerChecker.test.ts" name="checkNextSpeaker &gt; should return null if history is empty" time="0.005032277">
        </testcase>
        <testcase classname="src/utils/nextSpeakerChecker.test.ts" name="checkNextSpeaker &gt; should return null if the last speaker was the user" time="0.003145103">
        </testcase>
        <testcase classname="src/utils/nextSpeakerChecker.test.ts" name="checkNextSpeaker &gt; should return { next_speaker: &apos;model&apos; } when model intends to continue" time="0.003925147">
        </testcase>
        <testcase classname="src/utils/nextSpeakerChecker.test.ts" name="checkNextSpeaker &gt; should return { next_speaker: &apos;user&apos; } when model asks a question" time="0.003644447">
        </testcase>
        <testcase classname="src/utils/nextSpeakerChecker.test.ts" name="checkNextSpeaker &gt; should return { next_speaker: &apos;user&apos; } when model makes a statement" time="0.003253794">
        </testcase>
        <testcase classname="src/utils/nextSpeakerChecker.test.ts" name="checkNextSpeaker &gt; should return null if geminiClient.generateJson throws an error" time="0.00404583">
        </testcase>
        <testcase classname="src/utils/nextSpeakerChecker.test.ts" name="checkNextSpeaker &gt; should return null if geminiClient.generateJson returns invalid JSON (missing next_speaker)" time="0.002718823">
        </testcase>
        <testcase classname="src/utils/nextSpeakerChecker.test.ts" name="checkNextSpeaker &gt; should return null if geminiClient.generateJson returns a non-string next_speaker" time="0.002765379">
        </testcase>
        <testcase classname="src/utils/nextSpeakerChecker.test.ts" name="checkNextSpeaker &gt; should return null if geminiClient.generateJson returns an invalid next_speaker string value" time="0.00300346">
        </testcase>
        <testcase classname="src/utils/nextSpeakerChecker.test.ts" name="checkNextSpeaker &gt; should call generateJson with DEFAULT_QWEN_FLASH_MODEL" time="0.003081906">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/partUtils.test.ts" timestamp="2025-10-02T21:38:30.512Z" hostname="uby" tests="37" failures="0" errors="0" skipped="0" time="0.006816199">
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (default behavior) &gt; should return empty string for undefined or null" time="0.001146232">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (default behavior) &gt; should return string input unchanged" time="0.000112569">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (default behavior) &gt; should concatenate strings from an array" time="0.000080529">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (default behavior) &gt; should return text property when provided a text part" time="0.000063127">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (default behavior) &gt; should return empty string for non-text parts" time="0.000088484">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should return empty string for undefined or null" time="0.000097361">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should return string input unchanged" time="0.000057696">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should join parts if the value is an array" time="0.000068126">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should return the text property if the part is an object with text" time="0.000436518">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should return descriptive string for videoMetadata part" time="0.000091238">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should return descriptive string for thought part" time="0.000062085">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should return descriptive string for codeExecutionResult part" time="0.000062827">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should return descriptive string for executableCode part" time="0.000071132">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should return descriptive string for fileData part" time="0.000068597">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should return descriptive string for functionCall part" time="0.000060462">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should return descriptive string for functionResponse part" time="0.000072584">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should return descriptive string for inlineData part" time="0.000058819">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should return an empty string for an unknown part type" time="0.00005913">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should handle complex nested arrays with various part types" time="0.000072184">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; getResponseText &gt; should return null when no candidates exist" time="0.000183389">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; getResponseText &gt; should return concatenated text from first candidate" time="0.000072184">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; getResponseText &gt; should ignore parts without text" time="0.000040295">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; getResponseText &gt; should return null when candidate has no parts" time="0.000032009">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; getResponseText &gt; should return null if the first candidate has no content property" time="0.000039013">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; flatMapTextParts &gt; should return an empty array for empty input" time="0.000479218">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; flatMapTextParts &gt; should transform a simple string input" time="0.000151561">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; flatMapTextParts &gt; should transform a single text part object" time="0.000076221">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; flatMapTextParts &gt; should transform an array of text parts and flatten the result" time="0.000123709">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; flatMapTextParts &gt; should pass through non-text parts unmodified" time="0.000101338">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; flatMapTextParts &gt; should handle a mix of text and non-text parts in an array" time="0.000992558">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; flatMapTextParts &gt; should handle a transform that returns an empty array" time="0.000096629">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; appendToLastTextPart &gt; should append to an empty prompt" time="0.0001082">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; appendToLastTextPart &gt; should append to a prompt with a string as the last part" time="0.000049572">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; appendToLastTextPart &gt; should append to a prompt with a text part object as the last part" time="0.000040375">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; appendToLastTextPart &gt; should append a new text part if the last part is not a text part" time="0.000042759">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; appendToLastTextPart &gt; should not append anything if the text to append is empty" time="0.000030576">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; appendToLastTextPart &gt; should use a custom separator" time="0.000031728">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/pathReader.test.ts" timestamp="2025-10-02T21:38:30.513Z" hostname="uby" tests="16" failures="0" errors="0" skipped="0" time="0.065329205">
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; should read a text file from the CWD" time="0.00842112">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; should read a file from a secondary workspace directory" time="0.001046107">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; should prioritize CWD when file exists in both CWD and secondary dir" time="0.000736924">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; should read an image file and return it as inlineData (Part object)" time="0.002334563">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; should read a generic binary file and return an info string" time="0.00089108">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; should read a file from an absolute path if within workspace" time="0.001329311">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; Directory Expansion &gt; should expand a directory and read the content of its files" time="0.007361178">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; Directory Expansion &gt; should recursively expand a directory and read all nested files" time="0.002423697">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; Directory Expansion &gt; should handle mixed content and include files from subdirectories" time="0.002146885">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; Directory Expansion &gt; should handle an empty directory" time="0.001772902">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; File Ignoring &gt; should return an empty array for an ignored file" time="0.001925344">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; File Ignoring &gt; should not read ignored files when expanding a directory" time="0.001961681">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; should throw an error for an absolute path outside the workspace" time="0.001733269">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; should throw an error if a relative path is not found anywhere" time="0.00068042">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; should return an error string if reading a file with no permissions" time="0.001968975">
            <system-err>
Failed to check if file is binary: /test/cwd/unreadable.txt EACCES, permission denied &apos;/test/cwd/unreadable.txt&apos;

            </system-err>
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; should return an error string for files exceeding the size limit" time="0.026806968">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/paths.test.ts" timestamp="2025-10-02T21:38:30.514Z" hostname="uby" tests="55" failures="0" errors="0" skipped="0" time="0.009935253">
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape spaces" time="0.001606254">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape tabs" time="0.000209719">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape parentheses" time="0.000111557">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape square brackets" time="0.00008646">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape curly braces" time="0.000089165">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape semicolons" time="0.00007537">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape ampersands" time="0.00007583">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape pipes" time="0.0000702">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape asterisks" time="0.000082183">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape question marks" time="0.000062676">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape dollar signs" time="0.000058228">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape backticks" time="0.000069248">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape single quotes" time="0.000071192">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape double quotes" time="0.000058879">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape hash symbols" time="0.000057627">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape exclamation marks" time="0.000062676">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape tildes" time="0.00005394">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape less than and greater than signs" time="0.000197436">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should handle multiple special characters" time="0.000118099">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should not double-escape already escaped characters" time="0.000088213">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should handle escaped backslashes correctly" time="0.000117838">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should handle complex escaped backslash scenarios" time="0.000090468">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should handle paths without special characters" time="0.000078595">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should handle complex real-world examples" time="0.000093653">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should handle empty strings" time="0.000049472">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should handle paths with only special characters" time="0.000045574">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="unescapePath &gt; should unescape spaces" time="0.000155117">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="unescapePath &gt; should unescape tabs" time="0.000059009">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="unescapePath &gt; should unescape parentheses" time="0.000386034">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="unescapePath &gt; should unescape square brackets" time="0.000138136">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="unescapePath &gt; should unescape curly braces" time="0.00005975">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="unescapePath &gt; should unescape multiple special characters" time="0.000051205">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="unescapePath &gt; should handle paths without escaped characters" time="0.000076631">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="unescapePath &gt; should handle all special characters" time="0.000047408">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="unescapePath &gt; should be the inverse of escapePath" time="0.000182227">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="unescapePath &gt; should handle empty strings" time="0.00005409">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="unescapePath &gt; should not affect backslashes not followed by special characters" time="0.000069549">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="unescapePath &gt; should handle escaped backslashes in unescaping" time="0.000087192">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath &gt; should return true for a direct subpath" time="0.000146542">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath &gt; should return true for the same path" time="0.00007022">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath &gt; should return false for a parent path" time="0.000063658">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath &gt; should return false for a completely different path" time="0.0000592">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath &gt; should handle relative paths" time="0.000154606">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath &gt; should handle paths with .." time="0.00009723">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath &gt; should handle root paths" time="0.000094495">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath &gt; should handle trailing slashes" time="0.000102931">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath on Windows &gt; should return true for a direct subpath on Windows" time="0.000166909">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath on Windows &gt; should return true for the same path on Windows" time="0.000080559">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath on Windows &gt; should return false for a parent path on Windows" time="0.000091229">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath on Windows &gt; should return false for a different drive on Windows" time="0.000190864">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath on Windows &gt; should be case-insensitive for drive letters on Windows" time="0.000085799">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath on Windows &gt; should be case-insensitive for path components on Windows" time="0.000284888">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath on Windows &gt; should handle mixed slashes on Windows" time="0.000131333">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath on Windows &gt; should handle trailing slashes on Windows" time="0.000085198">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath on Windows &gt; should handle relative paths correctly on Windows" time="0.000429355">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/quotaErrorDetection.test.ts" timestamp="2025-10-02T21:38:30.515Z" hostname="uby" tests="27" failures="0" errors="0" skipped="0" time="0.006327003">
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenQuotaExceededError &gt; should detect insufficient_quota error message" time="0.00156626">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenQuotaExceededError &gt; should detect free allocated quota exceeded error message" time="0.000179512">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenQuotaExceededError &gt; should detect quota exceeded error message" time="0.000091429">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenQuotaExceededError &gt; should detect quota exceeded in string error" time="0.000066183">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenQuotaExceededError &gt; should detect quota exceeded in structured error" time="0.000082834">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenQuotaExceededError &gt; should detect quota exceeded in API error" time="0.000106758">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenQuotaExceededError &gt; should not detect throttling errors as quota exceeded" time="0.000077474">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenQuotaExceededError &gt; should not detect unrelated errors" time="0.000071562">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenThrottlingError &gt; should detect throttling error with 429 status" time="0.000564695">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenThrottlingError &gt; should detect requests throttling triggered with 429 status" time="0.00009719">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenThrottlingError &gt; should detect rate limit error with 429 status" time="0.000075429">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenThrottlingError &gt; should detect too many requests with 429 status" time="0.000068878">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenThrottlingError &gt; should detect throttling in string error" time="0.000058248">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenThrottlingError &gt; should detect throttling in structured error with 429" time="0.000054551">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenThrottlingError &gt; should detect throttling in API error with 429" time="0.000073716">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenThrottlingError &gt; should not detect throttling without 429 status in structured error" time="0.000064209">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenThrottlingError &gt; should not detect quota exceeded as throttling" time="0.000065682">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenThrottlingError &gt; should not detect unrelated errors as throttling" time="0.000056945">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isProQuotaExceededError &gt; should detect Gemini Pro quota exceeded error" time="0.000176246">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isProQuotaExceededError &gt; should detect Gemini preview Pro quota exceeded error" time="0.000085318">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isProQuotaExceededError &gt; should not detect non-Pro quota errors" time="0.000077514">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isGenericQuotaExceededError &gt; should detect generic quota exceeded error" time="0.000434294">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isGenericQuotaExceededError &gt; should not detect non-quota errors" time="0.00012978">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; type guards &gt; isApiError &gt; should detect valid API error" time="0.000100847">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; type guards &gt; isApiError &gt; should not detect invalid API error" time="0.000082973">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; type guards &gt; isStructuredError &gt; should detect valid structured error" time="0.000088224">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; type guards &gt; isStructuredError &gt; should not detect invalid structured error" time="0.000074758">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/retry.test.ts" timestamp="2025-10-02T21:38:30.516Z" hostname="uby" tests="20" failures="0" errors="0" skipped="0" time="0.027768859">
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; should return the result on the first attempt if successful" time="0.004088108">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; should retry and succeed if failures are within maxAttempts" time="0.007066202">
            <system-err>
Attempt 1 failed with status 500. Retrying with backoff... Error: Simulated error attempt 1
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:24:32
    at mockCall (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/spy[24m/dist/index.js:96:15)
    at spy (file:///home/atmandk/LowCal-dev/node_modules/[4mtinyspy[24m/dist/index.js:47:103)
    at retryWithBackoff [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.ts:184:20[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:63:21
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10) {
  status: [33m500[39m
}

Attempt 2 failed with status 500. Retrying with backoff... Error: Simulated error attempt 2
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:24:32
    at mockCall (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/spy[24m/dist/index.js:96:15)
    at spy (file:///home/atmandk/LowCal-dev/node_modules/[4mtinyspy[24m/dist/index.js:47:103)
    at retryWithBackoff [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.ts:184:20[90m)[39m {
  status: [33m500[39m
}

            </system-err>
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; should throw an error if all attempts fail" time="0.002064762">
            <system-err>
Attempt 1 failed with status 500. Retrying with backoff... Error: Simulated error attempt 1
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:24:32
    at mockCall (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/spy[24m/dist/index.js:96:15)
    at spy (file:///home/atmandk/LowCal-dev/node_modules/[4mtinyspy[24m/dist/index.js:47:103)
    at retryWithBackoff [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.ts:184:20[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:79:21
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10) {
  status: [33m500[39m
}

Attempt 2 failed with status 500. Retrying with backoff... Error: Simulated error attempt 2
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:24:32
    at mockCall (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/spy[24m/dist/index.js:96:15)
    at spy (file:///home/atmandk/LowCal-dev/node_modules/[4mtinyspy[24m/dist/index.js:47:103)
    at retryWithBackoff [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.ts:184:20[90m)[39m {
  status: [33m500[39m
}

            </system-err>
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; should not retry if shouldRetry returns false" time="0.000663768">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; should use default shouldRetry if not provided, retrying on 429" time="0.000568102">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; should use default shouldRetry if not provided, not retrying on 400" time="0.000472204">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; should respect maxDelayMs" time="0.001889488">
            <system-err>
Attempt 1 failed with status 500. Retrying with backoff... Error: Simulated error attempt 1
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:24:32
    at mockCall (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/spy[24m/dist/index.js:96:15)
    at spy (file:///home/atmandk/LowCal-dev/node_modules/[4mtinyspy[24m/dist/index.js:47:103)
    at retryWithBackoff [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.ts:184:20[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:162:21
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10) {
  status: [33m500[39m
}

Attempt 2 failed with status 500. Retrying with backoff... Error: Simulated error attempt 2
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:24:32
    at mockCall (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/spy[24m/dist/index.js:96:15)
    at spy (file:///home/atmandk/LowCal-dev/node_modules/[4mtinyspy[24m/dist/index.js:47:103)
    at retryWithBackoff [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.ts:184:20[90m)[39m {
  status: [33m500[39m
}

Attempt 3 failed with status 500. Retrying with backoff... Error: Simulated error attempt 3
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:24:32
    at mockCall (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/spy[24m/dist/index.js:96:15)
    at spy (file:///home/atmandk/LowCal-dev/node_modules/[4mtinyspy[24m/dist/index.js:47:103)
    at retryWithBackoff [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.ts:184:20[90m)[39m {
  status: [33m500[39m
}

            </system-err>
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; should handle jitter correctly, ensuring varied delays" time="0.001744459">
            <system-err>
Attempt 1 failed with status 500. Retrying with backoff... Error: Simulated error attempt 1
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:24:32
    at mockCall (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/spy[24m/dist/index.js:96:15)
    at spy (file:///home/atmandk/LowCal-dev/node_modules/[4mtinyspy[24m/dist/index.js:47:103)
    at retryWithBackoff [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.ts:184:20[90m)[39m
    at runRetry [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:191:7[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:198:22
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;) {
  status: [33m500[39m
}

Attempt 1 failed with status 500. Retrying with backoff... Error: Simulated error attempt 1
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:24:32
    at mockCall (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/spy[24m/dist/index.js:96:15)
    at spy (file:///home/atmandk/LowCal-dev/node_modules/[4mtinyspy[24m/dist/index.js:47:103)
    at retryWithBackoff [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.ts:184:20[90m)[39m
    at runRetry [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:191:7[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:213:22
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20 {
  status: [33m500[39m
}

            </system-err>
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; Flash model fallback for OAuth users &gt; should trigger fallback for OAuth personal users after persistent 429 errors" time="0.001320535">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; Flash model fallback for OAuth users &gt; should NOT trigger fallback for API key users" time="0.000595112">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; Flash model fallback for OAuth users &gt; should reset attempt counter and continue after successful fallback" time="0.000431569">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; Flash model fallback for OAuth users &gt; should continue with original error if fallback is rejected" time="0.00123713">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; Flash model fallback for OAuth users &gt; should handle mixed error types (only count consecutive 429s)" time="0.000917789">
            <system-err>
Attempt 1 failed with status 500. Retrying with backoff... Error: Server error
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:378:36
    at mockCall (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/spy[24m/dist/index.js:96:15)
    at spy (file:///home/atmandk/LowCal-dev/node_modules/[4mtinyspy[24m/dist/index.js:47:103)
    at retryWithBackoff [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.ts:184:20[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:389:23
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10) {
  status: [33m500[39m
}

            </system-err>
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; Qwen OAuth 429 error handling &gt; should retry for Qwen OAuth 429 errors that are throttling-related" time="0.000489887">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; Qwen OAuth 429 error handling &gt; should throw immediately for Qwen OAuth with insufficient_quota message" time="0.000371227">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; Qwen OAuth 429 error handling &gt; should throw immediately for Qwen OAuth with free allocated quota exceeded message" time="0.000315794">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; Qwen OAuth 429 error handling &gt; should retry for Qwen OAuth with throttling message" time="0.000368703">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; Qwen OAuth 429 error handling &gt; should retry for Qwen OAuth with throttling error" time="0.000504985">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; Qwen OAuth 429 error handling &gt; should throw immediately for Qwen OAuth with quota message" time="0.000370796">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; Qwen OAuth 429 error handling &gt; should retry normal errors for Qwen OAuth (not quota-related)" time="0.000851727">
            <system-err>
Attempt 1 failed with status 500. Retrying with backoff... Error: Network error
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:550:38
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8) {
  status: [33m500[39m
}

Attempt 2 failed with status 500. Retrying with backoff... Error: Network error
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:550:38
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8) {
  status: [33m500[39m
}

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="src/utils/safeJsonParse.test.ts" timestamp="2025-10-02T21:38:30.517Z" hostname="uby" tests="14" failures="0" errors="0" skipped="0" time="0.005572537">
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; valid JSON parsing &gt; should parse valid JSON correctly" time="0.00131809">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; valid JSON parsing &gt; should parse valid JSON arrays" time="0.000154286">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; valid JSON parsing &gt; should parse valid JSON with nested objects" time="0.000115844">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; malformed JSON with jsonrepair fallback &gt; should handle malformed JSON with single quotes" time="0.000968774">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; malformed JSON with jsonrepair fallback &gt; should handle malformed JSON with unquoted keys" time="0.000328749">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; malformed JSON with jsonrepair fallback &gt; should handle malformed JSON with trailing commas" time="0.000245164">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; malformed JSON with jsonrepair fallback &gt; should handle malformed JSON with comments" time="0.000294075">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; fallback behavior &gt; should return fallback value for empty string" time="0.000112197">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; fallback behavior &gt; should return fallback value for null input" time="0.000100406">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; fallback behavior &gt; should return fallback value for undefined input" time="0.000093183">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; fallback behavior &gt; should return empty object as default fallback" time="0.00020525">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; fallback behavior &gt; should return custom fallback when parsing fails" time="0.000159735">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; type safety &gt; should preserve generic type when parsing valid JSON" time="0.000257427">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; type safety &gt; should return fallback type when parsing fails" time="0.00015108">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/safeJsonStringify.test.ts" timestamp="2025-10-02T21:38:30.517Z" hostname="uby" tests="8" failures="0" errors="0" skipped="0" time="0.003457521">
        <testcase classname="src/utils/safeJsonStringify.test.ts" name="safeJsonStringify &gt; should stringify normal objects without issues" time="0.001314254">
        </testcase>
        <testcase classname="src/utils/safeJsonStringify.test.ts" name="safeJsonStringify &gt; should handle circular references by replacing them with [Circular]" time="0.000154156">
        </testcase>
        <testcase classname="src/utils/safeJsonStringify.test.ts" name="safeJsonStringify &gt; should handle complex circular structures like HttpsProxyAgent" time="0.000236357">
        </testcase>
        <testcase classname="src/utils/safeJsonStringify.test.ts" name="safeJsonStringify &gt; should respect the space parameter for formatting" time="0.000085549">
        </testcase>
        <testcase classname="src/utils/safeJsonStringify.test.ts" name="safeJsonStringify &gt; should handle circular references with formatting" time="0.000076842">
        </testcase>
        <testcase classname="src/utils/safeJsonStringify.test.ts" name="safeJsonStringify &gt; should handle arrays with circular references" time="0.000080459">
        </testcase>
        <testcase classname="src/utils/safeJsonStringify.test.ts" name="safeJsonStringify &gt; should handle null and undefined values" time="0.000100036">
        </testcase>
        <testcase classname="src/utils/safeJsonStringify.test.ts" name="safeJsonStringify &gt; should handle primitive values" time="0.000117608">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/secure-browser-launcher.test.ts" timestamp="2025-10-02T21:38:30.518Z" hostname="uby" tests="14" failures="0" errors="0" skipped="0" time="0.013031335">
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; URL validation &gt; should allow valid HTTP URLs" time="0.004746858">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; URL validation &gt; should allow valid HTTPS URLs" time="0.001129461">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; URL validation &gt; should reject non-HTTP(S) protocols" time="0.001601725">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; URL validation &gt; should reject invalid URLs" time="0.000264249">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; URL validation &gt; should reject URLs with control characters" time="0.000236067">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; Command injection prevention &gt; should prevent PowerShell command injection on Windows" time="0.000366268">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; Command injection prevention &gt; should handle URLs with special shell characters safely" time="0.000935381">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; Command injection prevention &gt; should properly escape single quotes in URLs on Windows" time="0.000234945">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; Platform-specific behavior &gt; should use correct command on macOS" time="0.000337535">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; Platform-specific behavior &gt; should use PowerShell on Windows" time="0.000613947">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; Platform-specific behavior &gt; should use xdg-open on Linux" time="0.000280489">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; Platform-specific behavior &gt; should throw on unsupported platforms" time="0.00017783">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; Error handling &gt; should handle browser launch failures gracefully" time="0.000312368">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; Error handling &gt; should try fallback browsers on Linux" time="0.000360928">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/shell-utils.test.ts" timestamp="2025-10-02T21:38:30.518Z" hostname="uby" tests="51" failures="0" errors="0" skipped="0" time="0.010645108">
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; should allow a command if no restrictions are provided" time="0.001673638">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; should allow a command if it is in the global allowlist" time="0.000223273">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; should block a command if it is not in a strict global allowlist" time="0.000152282">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; should block a command if it is in the blocked list" time="0.000142874">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; should prioritize the blocklist over the allowlist" time="0.00009715">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; should allow any command when a wildcard is in coreTools" time="0.000073225">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; should block any command when a wildcard is in excludeTools" time="0.000086881">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; should block a command on the blocklist even with a wildcard allow" time="0.000082403">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; should allow a chained command if all parts are on the global allowlist" time="0.000127827">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; should block a chained command if any part is blocked" time="0.000133377">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; command substitution &gt; should block command substitution using `$(...)`" time="0.000200601">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; command substitution &gt; should block command substitution using `&lt;(...)`" time="0.000108431">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; command substitution &gt; should block command substitution using backticks" time="0.000101799">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; command substitution &gt; should allow substitution-like patterns inside single quotes" time="0.000139469">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="checkCommandPermissions &gt; in &quot;Default Allow&quot; mode (no sessionAllowlist) &gt; should return a detailed success object for an allowed command" time="0.000693274">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="checkCommandPermissions &gt; in &quot;Default Allow&quot; mode (no sessionAllowlist) &gt; should return a detailed failure object for a blocked command" time="0.000184722">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="checkCommandPermissions &gt; in &quot;Default Allow&quot; mode (no sessionAllowlist) &gt; should return a detailed failure object for a command not on a strict allowlist" time="0.000143436">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="checkCommandPermissions &gt; in &quot;Default Deny&quot; mode (with sessionAllowlist) &gt; should allow a command on the sessionAllowlist" time="0.000331674">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="checkCommandPermissions &gt; in &quot;Default Deny&quot; mode (with sessionAllowlist) &gt; should block a command not on the sessionAllowlist or global allowlist" time="0.000264049">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="checkCommandPermissions &gt; in &quot;Default Deny&quot; mode (with sessionAllowlist) &gt; should allow a command on the global allowlist even if not on the session allowlist" time="0.000093593">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="checkCommandPermissions &gt; in &quot;Default Deny&quot; mode (with sessionAllowlist) &gt; should allow a chained command if parts are on different allowlists" time="0.000090257">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="checkCommandPermissions &gt; in &quot;Default Deny&quot; mode (with sessionAllowlist) &gt; should block a command on the sessionAllowlist if it is also globally blocked" time="0.000079027">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="checkCommandPermissions &gt; in &quot;Default Deny&quot; mode (with sessionAllowlist) &gt; should block a chained command if one part is not on any allowlist" time="0.000094255">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="getCommandRoots &gt; should return a single command" time="0.000197746">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="getCommandRoots &gt; should handle paths and return the binary name" time="0.000118409">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="getCommandRoots &gt; should return an empty array for an empty string" time="0.000053669">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="getCommandRoots &gt; should handle a mix of operators" time="0.000062426">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="getCommandRoots &gt; should correctly parse a chained command with quotes" time="0.000054871">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="stripShellWrapper &gt; should strip sh -c with quotes" time="0.000135711">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="stripShellWrapper &gt; should strip bash -c with extra whitespace" time="0.000084356">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="stripShellWrapper &gt; should strip zsh -c without quotes" time="0.000048029">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="stripShellWrapper &gt; should strip cmd.exe /c" time="0.000036809">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="stripShellWrapper &gt; should not strip anything if no wrapper is present" time="0.000035626">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="escapeShellArg &gt; POSIX (bash) &gt; should use shell-quote for escaping" time="0.001055625">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="escapeShellArg &gt; POSIX (bash) &gt; should handle empty strings" time="0.000191024">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="escapeShellArg &gt; Windows &gt; when shell is cmd.exe &gt; should wrap simple arguments in double quotes" time="0.000073386">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="escapeShellArg &gt; Windows &gt; when shell is cmd.exe &gt; should escape internal double quotes by doubling them" time="0.000053268">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="escapeShellArg &gt; Windows &gt; when shell is cmd.exe &gt; should handle empty strings" time="0.000041547">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="escapeShellArg &gt; Windows &gt; when shell is PowerShell &gt; should wrap simple arguments in single quotes" time="0.000046626">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="escapeShellArg &gt; Windows &gt; when shell is PowerShell &gt; should escape internal single quotes by doubling them" time="0.00003788">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="escapeShellArg &gt; Windows &gt; when shell is PowerShell &gt; should handle double quotes without escaping them" time="0.000038461">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="escapeShellArg &gt; Windows &gt; when shell is PowerShell &gt; should handle empty strings" time="0.000035246">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="getShellConfiguration &gt; should return bash configuration on Linux" time="0.000176306">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="getShellConfiguration &gt; should return bash configuration on macOS (darwin)" time="0.000082332">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="getShellConfiguration &gt; on Windows &gt; should return cmd.exe configuration by default" time="0.000114061">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="getShellConfiguration &gt; on Windows &gt; should respect ComSpec for cmd.exe" time="0.000098052">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="getShellConfiguration &gt; on Windows &gt; should return PowerShell configuration if ComSpec points to powershell.exe" time="0.000077583">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="getShellConfiguration &gt; on Windows &gt; should return PowerShell configuration if ComSpec points to pwsh.exe" time="0.000075049">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="getShellConfiguration &gt; on Windows &gt; should be case-insensitive when checking ComSpec" time="0.0000703">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandNeedPermission &gt; returns false for read-only commands" time="0.000355047">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandNeedPermission &gt; returns true for mutating commands with reason" time="0.000276522">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/shellReadOnlyChecker.test.ts" timestamp="2025-10-02T21:38:30.520Z" hostname="uby" tests="9" failures="0" errors="0" skipped="0" time="0.002963777">
        <testcase classname="src/utils/shellReadOnlyChecker.test.ts" name="evaluateShellCommandReadOnly &gt; allows simple read-only command" time="0.001414979">
        </testcase>
        <testcase classname="src/utils/shellReadOnlyChecker.test.ts" name="evaluateShellCommandReadOnly &gt; rejects mutating commands like rm" time="0.00017305">
        </testcase>
        <testcase classname="src/utils/shellReadOnlyChecker.test.ts" name="evaluateShellCommandReadOnly &gt; rejects redirection output" time="0.000090368">
        </testcase>
        <testcase classname="src/utils/shellReadOnlyChecker.test.ts" name="evaluateShellCommandReadOnly &gt; rejects command substitution" time="0.000052477">
        </testcase>
        <testcase classname="src/utils/shellReadOnlyChecker.test.ts" name="evaluateShellCommandReadOnly &gt; allows git status but rejects git commit" time="0.000146261">
        </testcase>
        <testcase classname="src/utils/shellReadOnlyChecker.test.ts" name="evaluateShellCommandReadOnly &gt; rejects find with exec" time="0.000116987">
        </testcase>
        <testcase classname="src/utils/shellReadOnlyChecker.test.ts" name="evaluateShellCommandReadOnly &gt; rejects sed in-place" time="0.000087923">
        </testcase>
        <testcase classname="src/utils/shellReadOnlyChecker.test.ts" name="evaluateShellCommandReadOnly &gt; rejects empty command" time="0.000040204">
        </testcase>
        <testcase classname="src/utils/shellReadOnlyChecker.test.ts" name="evaluateShellCommandReadOnly &gt; respects environment prefix followed by allowed command" time="0.000047037">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/subagentGenerator.test.ts" timestamp="2025-10-02T21:38:30.520Z" hostname="uby" tests="9" failures="0" errors="0" skipped="0" time="0.040850707">
        <testcase classname="src/utils/subagentGenerator.test.ts" name="subagentGenerator &gt; should throw error for empty user description" time="0.006332083">
        </testcase>
        <testcase classname="src/utils/subagentGenerator.test.ts" name="subagentGenerator &gt; should successfully generate content with valid LLM response" time="0.003390908">
        </testcase>
        <testcase classname="src/utils/subagentGenerator.test.ts" name="subagentGenerator &gt; should throw error when LLM response is missing required fields" time="0.003218618">
        </testcase>
        <testcase classname="src/utils/subagentGenerator.test.ts" name="subagentGenerator &gt; should throw error when LLM response has empty fields" time="0.003109046">
        </testcase>
        <testcase classname="src/utils/subagentGenerator.test.ts" name="subagentGenerator &gt; should throw error when generateJson throws an error" time="0.00350039">
        </testcase>
        <testcase classname="src/utils/subagentGenerator.test.ts" name="subagentGenerator &gt; should call generateJson with correct schema and model" time="0.005561626">
        </testcase>
        <testcase classname="src/utils/subagentGenerator.test.ts" name="subagentGenerator &gt; should include user description in the prompt" time="0.005292107">
        </testcase>
        <testcase classname="src/utils/subagentGenerator.test.ts" name="subagentGenerator &gt; should throw error for null response from generateJson" time="0.004081015">
        </testcase>
        <testcase classname="src/utils/subagentGenerator.test.ts" name="subagentGenerator &gt; should throw error for undefined response from generateJson" time="0.004734375">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/summarizer.test.ts" timestamp="2025-10-02T21:38:30.520Z" hostname="uby" tests="8" failures="0" errors="0" skipped="0" time="0.024294597">
        <testcase classname="src/utils/summarizer.test.ts" name="summarizers &gt; summarizeToolOutput &gt; should return original text if it is shorter than maxLength" time="0.005156075">
        </testcase>
        <testcase classname="src/utils/summarizer.test.ts" name="summarizers &gt; summarizeToolOutput &gt; should return original text if it is empty" time="0.002269232">
        </testcase>
        <testcase classname="src/utils/summarizer.test.ts" name="summarizers &gt; summarizeToolOutput &gt; should call generateContent if text is longer than maxLength" time="0.002418407">
        </testcase>
        <testcase classname="src/utils/summarizer.test.ts" name="summarizers &gt; summarizeToolOutput &gt; should return original text if generateContent throws an error" time="0.003275664">
        </testcase>
        <testcase classname="src/utils/summarizer.test.ts" name="summarizers &gt; summarizeToolOutput &gt; should construct the correct prompt for summarization" time="0.002333249">
        </testcase>
        <testcase classname="src/utils/summarizer.test.ts" name="summarizers &gt; llmSummarizer &gt; should summarize tool output using summarizeToolOutput" time="0.002215422">
        </testcase>
        <testcase classname="src/utils/summarizer.test.ts" name="summarizers &gt; llmSummarizer &gt; should handle different llmContent types" time="0.002872277">
        </testcase>
        <testcase classname="src/utils/summarizer.test.ts" name="summarizers &gt; defaultSummarizer &gt; should stringify the llmContent" time="0.002404822">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/systemEncoding.test.ts" timestamp="2025-10-02T21:38:30.521Z" hostname="uby" tests="38" failures="0" errors="0" skipped="0" time="0.017813519">
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; windowsCodePageToEncoding &gt; should map common Windows code pages correctly" time="0.001835208">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; windowsCodePageToEncoding &gt; should return null for unmapped code pages and warn" time="0.001720976">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; windowsCodePageToEncoding &gt; should handle all Windows-specific code pages" time="0.000379803">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; detectEncodingFromBuffer &gt; should detect encoding using chardet successfully" time="0.001130072">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; detectEncodingFromBuffer &gt; should handle chardet returning mixed case encoding" time="0.000225267">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; detectEncodingFromBuffer &gt; should return null when chardet fails" time="0.001190634">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; detectEncodingFromBuffer &gt; should return null when chardet returns null" time="0.000216721">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; detectEncodingFromBuffer &gt; should return null when chardet returns non-string" time="0.000117597">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Windows &gt; should parse Windows chcp output correctly" time="0.000682142">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Windows &gt; should handle different chcp output formats" time="0.000268046">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Windows &gt; should handle chcp output with extra whitespace" time="0.000182618">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Windows &gt; should return null when chcp command fails" time="0.000543666">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Windows &gt; should return null when chcp output cannot be parsed" time="0.000215398">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Windows &gt; should return null when code page is not a number" time="0.000180844">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Windows &gt; should return null when code page maps to null" time="0.000218856">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Unix-like &gt; should parse locale from LC_ALL environment variable" time="0.000257016">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Unix-like &gt; should parse locale from LC_CTYPE when LC_ALL is not set" time="0.000219306">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Unix-like &gt; should parse locale from LANG when LC_ALL and LC_CTYPE are not set" time="0.000224505">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Unix-like &gt; should handle locale charmap command when environment variables are empty" time="0.000595382">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Unix-like &gt; should handle locale charmap with mixed case" time="0.000212323">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Unix-like &gt; should return null when locale charmap fails" time="0.000241046">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Unix-like &gt; should handle locale without encoding (no dot)" time="0.000322147">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Unix-like &gt; should handle empty locale environment variables" time="0.000194189">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Unix-like &gt; should return locale as-is when locale format has no dot" time="0.000154095">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Unix-like &gt; should prioritize LC_ALL over other environment variables" time="0.000191405">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Unix-like &gt; should prioritize LC_CTYPE over LANG" time="0.000156049">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getEncodingForBuffer &gt; should use cached system encoding on subsequent calls" time="0.000271944">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getEncodingForBuffer &gt; should fall back to buffer detection when system encoding fails" time="0.000367651">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getEncodingForBuffer &gt; should fall back to utf-8 when both system and buffer detection fail" time="0.000284357">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getEncodingForBuffer &gt; should not cache buffer detection results" time="0.000342384">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getEncodingForBuffer &gt; should handle Windows system encoding" time="0.000220087">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getEncodingForBuffer &gt; should cache null system encoding result" time="0.000302871">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; Cross-platform behavior &gt; should work correctly on macOS" time="0.000186015">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; Cross-platform behavior &gt; should work correctly on other Unix-like systems" time="0.000355278">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; Cross-platform behavior &gt; should handle unknown platforms as Unix-like" time="0.000203306">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; Edge cases and error handling &gt; should handle empty buffer gracefully" time="0.000137144">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; Edge cases and error handling &gt; should handle very large buffers" time="0.000379703">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; Edge cases and error handling &gt; should handle Unicode content" time="0.000152572">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/tool-utils.test.ts" timestamp="2025-10-02T21:38:30.522Z" hostname="uby" tests="7" failures="0" errors="0" skipped="0" time="0.002312912">
        <testcase classname="src/utils/tool-utils.test.ts" name="doesToolInvocationMatch &gt; should not match a partial command prefix" time="0.001013867">
        </testcase>
        <testcase classname="src/utils/tool-utils.test.ts" name="doesToolInvocationMatch &gt; should match an exact command" time="0.000126254">
        </testcase>
        <testcase classname="src/utils/tool-utils.test.ts" name="doesToolInvocationMatch &gt; should match a command that is a prefix" time="0.000071542">
        </testcase>
        <testcase classname="src/utils/tool-utils.test.ts" name="doesToolInvocationMatch &gt; for non-shell tools &gt; should match by tool name" time="0.000059099">
        </testcase>
        <testcase classname="src/utils/tool-utils.test.ts" name="doesToolInvocationMatch &gt; for non-shell tools &gt; should match by tool class name" time="0.000049892">
        </testcase>
        <testcase classname="src/utils/tool-utils.test.ts" name="doesToolInvocationMatch &gt; for non-shell tools &gt; should not match if neither name is in the patterns" time="0.000035636">
        </testcase>
        <testcase classname="src/utils/tool-utils.test.ts" name="doesToolInvocationMatch &gt; for non-shell tools &gt; should match by tool name when passed as a string" time="0.000034013">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/userAccountManager.test.ts" timestamp="2025-10-02T21:38:30.522Z" hostname="uby" tests="23" failures="0" errors="0" skipped="0" time="0.0279263">
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; cacheGoogleAccount &gt; should create directory and write initial account file" time="0.004249247">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; cacheGoogleAccount &gt; should update active account and move previous to old" time="0.001736054">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; cacheGoogleAccount &gt; should not add a duplicate to the old list" time="0.001154898">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; cacheGoogleAccount &gt; should handle corrupted JSON by starting fresh" time="0.002622926">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; cacheGoogleAccount &gt; should handle valid JSON with incorrect schema by starting fresh" time="0.001953657">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getCachedGoogleAccount &gt; should return the active account if file exists and is valid" time="0.000498042">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getCachedGoogleAccount &gt; should return null if file does not exist" time="0.000358404">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getCachedGoogleAccount &gt; should return null if file is empty" time="0.000601784">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getCachedGoogleAccount &gt; should return null and log if file is corrupted" time="0.000805601">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getCachedGoogleAccount &gt; should return null if active key is missing" time="0.000391926">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; clearCachedGoogleAccount &gt; should set active to null and move it to old" time="0.003664304">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; clearCachedGoogleAccount &gt; should handle empty file gracefully" time="0.001889368">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; clearCachedGoogleAccount &gt; should handle corrupted JSON by creating a fresh file" time="0.00118808">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; clearCachedGoogleAccount &gt; should be idempotent if active account is already null" time="0.001770558">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; clearCachedGoogleAccount &gt; should not add a duplicate to the old list" time="0.000690247">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getLifetimeGoogleAccounts &gt; should return 0 if the file does not exist" time="0.000325863">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getLifetimeGoogleAccounts &gt; should return 0 if the file is empty" time="0.000314152">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getLifetimeGoogleAccounts &gt; should return 0 if the file is corrupted" time="0.00039941">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getLifetimeGoogleAccounts &gt; should return 1 if there is only an active account" time="0.000349568">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getLifetimeGoogleAccounts &gt; should correctly count old accounts when active is null" time="0.000344007">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getLifetimeGoogleAccounts &gt; should correctly count both active and old accounts" time="0.000274679">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getLifetimeGoogleAccounts &gt; should handle valid JSON with incorrect schema by returning 0" time="0.000393678">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getLifetimeGoogleAccounts &gt; should not double count if active account is also in old list" time="0.000228884">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/workspaceContext.test.ts" timestamp="2025-10-02T21:38:30.523Z" hostname="uby" tests="34" failures="0" errors="0" skipped="0" time="0.029467363">
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; initialization &gt; should initialize with a single directory (cwd)" time="0.003031562">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; initialization &gt; should validate and resolve directories to absolute paths" time="0.000434875">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; initialization &gt; should handle empty initialization" time="0.000876533">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; adding directories &gt; should add valid directories" time="0.000456846">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; adding directories &gt; should resolve relative paths to absolute" time="0.00034564">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; adding directories &gt; should prevent duplicate directories" time="0.000348796">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; adding directories &gt; should handle symbolic links correctly" time="0.000396705">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; should accept paths within workspace directories" time="0.000570656">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; should accept non-existent paths within workspace directories" time="0.000541753">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; should reject paths outside workspace" time="0.000361539">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; should reject non-existent paths outside workspace" time="0.000379893">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; should handle nested directories correctly" time="0.000611803">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; should handle edge cases (root, parent references)" time="0.000473927">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; should handle non-existent paths correctly" time="0.000465973">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; with symbolic link &gt; in the workspace &gt; should accept dir paths" time="0.000514443">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; with symbolic link &gt; in the workspace &gt; should accept non-existent paths" time="0.000470511">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; with symbolic link &gt; in the workspace &gt; should accept non-existent deep paths" time="0.000698212">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; with symbolic link &gt; outside the workspace &gt; should reject dir paths" time="0.000451276">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; with symbolic link &gt; outside the workspace &gt; should reject non-existent paths" time="0.000478015">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; with symbolic link &gt; outside the workspace &gt; should reject non-existent deep paths" time="0.000487643">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; with symbolic link &gt; outside the workspace &gt; should reject partially non-existent deep paths" time="0.000636198">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; with symbolic link &gt; should reject symbolic file links outside the workspace" time="0.000737024">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; with symbolic link &gt; should reject non-existent symbolic file links outside the workspace" time="0.000449993">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; with symbolic link &gt; should handle circular symlinks gracefully" time="0.000481952">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; onDirectoriesChanged &gt; should call listener when adding a directory" time="0.001348346">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; onDirectoriesChanged &gt; should not call listener when adding a duplicate directory" time="0.000687363">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; onDirectoriesChanged &gt; should call listener when setting different directories" time="0.000553295">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; onDirectoriesChanged &gt; should not call listener when setting same directories" time="0.000403026">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; onDirectoriesChanged &gt; should support multiple listeners" time="0.000413856">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; onDirectoriesChanged &gt; should allow unsubscribing a listener" time="0.000355769">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; onDirectoriesChanged &gt; should not fail if a listener throws an error" time="0.006161137">
            <system-err>
Error in WorkspaceContext listener: Error: test error
    at errorListener [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/workspaceContext.test.ts:350:15[90m)[39m
    at WorkspaceContext.notifyDirectoriesChanged [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/workspaceContext.ts:53:9[90m)[39m
    at WorkspaceContext.addDirectory [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/workspaceContext.ts:73:12[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/workspaceContext.test.ts:357:26
    at Proxy.assertThrows (file:///home/atmandk/LowCal-dev/node_modules/[4mchai[24m/chai.js:2723:5)
    at Proxy.methodWrapper (file:///home/atmandk/LowCal-dev/node_modules/[4mchai[24m/chai.js:1618:25)
    at Proxy.&lt;anonymous&gt; (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/expect[24m/dist/index.js:1088:12)
    at Proxy.overwritingMethodWrapper (file:///home/atmandk/LowCal-dev/node_modules/[4mchai[24m/chai.js:1670:33)
    at Proxy.&lt;anonymous&gt; (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/expect[24m/dist/index.js:1420:16)
    at Proxy.&lt;anonymous&gt; (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/expect[24m/dist/index.js:1029:14)

            </system-err>
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; getDirectories &gt; should return a copy of directories array" time="0.000825899">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with optional directories &gt; should skip a missing optional directory and log a warning" time="0.001347033">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with optional directories &gt; should include an existing optional directory" time="0.000667115">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/yaml-parser.test.ts" timestamp="2025-10-02T21:38:30.524Z" hostname="uby" tests="18" failures="0" errors="0" skipped="0" time="0.011655738">
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; parse &gt; should parse simple key-value pairs" time="0.001973683">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; parse &gt; should parse arrays" time="0.000274688">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; parse &gt; should parse nested objects" time="0.000198768">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; should stringify simple objects" time="0.000546571">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; should stringify arrays" time="0.00012406">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; should stringify nested objects" time="0.000104083">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; string escaping security &gt; should properly escape strings with quotes" time="0.000096559">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; string escaping security &gt; should properly escape strings with backslashes" time="0.000100927">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; string escaping security &gt; should properly escape strings with backslash-quote sequences" time="0.00009165">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; string escaping security &gt; should handle complex escaping scenarios" time="0.000207914">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; string escaping security &gt; should maintain round-trip integrity for escaped strings" time="0.000690879">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; string escaping security &gt; should not quote strings that do not need quoting" time="0.000211251">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; string escaping security &gt; should quote strings with colons" time="0.000085759">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; string escaping security &gt; should quote strings with hash symbols" time="0.000092872">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; string escaping security &gt; should quote strings with leading/trailing whitespace" time="0.000074017">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; numeric string handling &gt; should parse unquoted numeric values as numbers" time="0.000190743">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; numeric string handling &gt; should parse quoted numeric values as strings" time="0.000149326">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; numeric string handling &gt; should handle mixed numeric and string values" time="0.000149597">
        </testcase>
    </testsuite>
    <testsuite name="src/core/openaiContentGenerator/converter.test.ts" timestamp="2025-10-02T21:38:30.525Z" hostname="uby" tests="3" failures="0" errors="0" skipped="0" time="0.002900309">
        <testcase classname="src/core/openaiContentGenerator/converter.test.ts" name="OpenAIContentConverter &gt; resetStreamingToolCalls &gt; should clear streaming tool calls accumulator" time="0.001535593">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/converter.test.ts" name="OpenAIContentConverter &gt; resetStreamingToolCalls &gt; should be safe to call multiple times" time="0.000142514">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/converter.test.ts" name="OpenAIContentConverter &gt; resetStreamingToolCalls &gt; should be safe to call on empty accumulator" time="0.000066713">
        </testcase>
    </testsuite>
    <testsuite name="src/core/openaiContentGenerator/errorHandler.test.ts" timestamp="2025-10-02T21:38:30.525Z" hostname="uby" tests="38" failures="0" errors="0" skipped="0" time="0.018222876">
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; constructor &gt; should create instance with default shouldSuppressLogging function" time="0.002324083">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; constructor &gt; should create instance with custom shouldSuppressLogging function" time="0.000281701">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; handle method &gt; should throw the original error for non-timeout errors" time="0.002282836">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; handle method &gt; should log error message for non-timeout errors" time="0.001672166">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; handle method &gt; should log streaming error message for streaming requests" time="0.00045356">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; handle method &gt; should throw enhanced error message for timeout errors" time="0.000421711">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; handle method &gt; should not log error when suppression is enabled" time="0.001251056">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; handle method &gt; should handle string errors" time="0.000325693">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; handle method &gt; should handle null/undefined errors" time="0.000315184">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; shouldSuppressErrorLogging method &gt; should return false by default" time="0.000331523">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; shouldSuppressErrorLogging method &gt; should use custom suppression function" time="0.000305385">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should detect timeout error: timeout in message" time="0.000305165">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should detect timeout error: timed out in message" time="0.001740712">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should detect timeout error: connection timeout" time="0.000354657">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should detect timeout error: request timeout" time="0.000171848">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should detect timeout error: read timeout" time="0.000133006">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should detect timeout error: etimedout" time="0.000093463">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should detect timeout error: esockettimedout" time="0.000139999">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should detect timeout error: deadline exceeded" time="0.000092151">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should detect timeout error: ETIMEDOUT code" time="0.000092321">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should detect timeout error: ESOCKETTIMEDOUT code" time="0.000087882">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should detect timeout error: timeout type" time="0.000068176">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should not detect non-timeout errors as timeout" time="0.000232149">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should handle case-insensitive timeout detection" time="0.000137144">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; error message building &gt; should build timeout error message for non-streaming requests" time="0.00015653">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; error message building &gt; should build timeout error message for streaming requests" time="0.000305145">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; error message building &gt; should use original error message for non-timeout errors" time="0.000270681">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; error message building &gt; should handle non-Error objects" time="0.000192246">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; error message building &gt; should convert non-Error objects to strings for timeout errors" time="0.000182197">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; error message building &gt; should handle different duration values correctly" time="0.000146331">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; troubleshooting tips generation &gt; should provide general troubleshooting tips for non-streaming requests" time="0.000207925">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; troubleshooting tips generation &gt; should provide streaming-specific troubleshooting tips for streaming requests" time="0.000144918">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; ErrorHandler interface compliance &gt; should implement ErrorHandler interface correctly" time="0.000169814">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; edge cases &gt; should handle zero duration" time="0.000145259">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; edge cases &gt; should handle negative duration" time="0.00012955">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; edge cases &gt; should handle very large duration" time="0.000128107">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; edge cases &gt; should handle empty error message" time="0.000150979">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; edge cases &gt; should handle error with only whitespace message" time="0.000093483">
        </testcase>
    </testsuite>
    <testsuite name="src/core/openaiContentGenerator/openaiContentGenerator.test.ts" timestamp="2025-10-02T21:38:30.526Z" hostname="uby" tests="8" failures="0" errors="0" skipped="0" time="0.00796173">
        <testcase classname="src/core/openaiContentGenerator/openaiContentGenerator.test.ts" name="OpenAIContentGenerator (Refactored) &gt; constructor &gt; should initialize with basic configuration" time="0.002162534">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/openaiContentGenerator.test.ts" name="OpenAIContentGenerator (Refactored) &gt; generateContent &gt; should delegate to pipeline.execute" time="0.000516116">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/openaiContentGenerator.test.ts" name="OpenAIContentGenerator (Refactored) &gt; generateContentStream &gt; should delegate to pipeline.executeStream" time="0.00032454">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/openaiContentGenerator.test.ts" name="OpenAIContentGenerator (Refactored) &gt; countTokens &gt; should count tokens using tiktoken" time="0.001026751">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/openaiContentGenerator.test.ts" name="OpenAIContentGenerator (Refactored) &gt; countTokens &gt; should fall back to character approximation if tiktoken fails" time="0.000844694">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/openaiContentGenerator.test.ts" name="OpenAIContentGenerator (Refactored) &gt; embedContent &gt; should delegate to pipeline.client.embeddings.create" time="0.000336964">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/openaiContentGenerator.test.ts" name="OpenAIContentGenerator (Refactored) &gt; shouldSuppressErrorLogging &gt; should return false by default" time="0.000717018">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/openaiContentGenerator.test.ts" name="OpenAIContentGenerator (Refactored) &gt; shouldSuppressErrorLogging &gt; should allow subclasses to override error suppression behavior" time="0.000623404">
        </testcase>
    </testsuite>
    <testsuite name="src/core/openaiContentGenerator/pipeline.test.ts" timestamp="2025-10-02T21:38:30.526Z" hostname="uby" tests="17" failures="0" errors="0" skipped="0" time="0.033194604">
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; constructor &gt; should initialize with correct configuration" time="0.003503275">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; execute &gt; should successfully execute non-streaming request" time="0.003702334">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; execute &gt; should handle tools in request" time="0.001178322">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; execute &gt; should handle errors and log them" time="0.00284659">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; executeStream &gt; should successfully execute streaming request" time="0.002017805">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; executeStream &gt; should filter empty responses" time="0.001142255">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; executeStream &gt; should handle streaming errors and reset tool calls" time="0.002187078">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; executeStream &gt; should merge finishReason and usageMetadata from separate chunks" time="0.001151111">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; executeStream &gt; should handle ideal case where last chunk has both finishReason and usageMetadata" time="0.000720233">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; executeStream &gt; should handle providers that send zero usage in finish chunk (like modelscope)" time="0.000931565">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; executeStream &gt; should handle providers that send finishReason and valid usage in same chunk" time="0.000707119">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; buildRequest &gt; should build request with sampling parameters" time="0.000608236">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; buildRequest &gt; should use config sampling parameters when request parameters are not provided" time="0.000551962">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; buildRequest &gt; should allow provider to enhance request" time="0.000733588">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; createRequestContext &gt; should create context with correct properties for non-streaming request" time="0.004673562">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; createRequestContext &gt; should create context with correct properties for streaming request" time="0.002712091">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; createRequestContext &gt; should collect all OpenAI chunks for logging even when Gemini responses are filtered" time="0.001881774">
        </testcase>
    </testsuite>
    <testsuite name="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" timestamp="2025-10-02T21:38:30.527Z" hostname="uby" tests="51" failures="0" errors="0" skipped="0" time="0.018120156">
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Basic functionality &gt; should initialize with empty state" time="0.001745432">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Basic functionality &gt; should handle simple complete JSON in single chunk" time="0.000494155">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Basic functionality &gt; should accumulate chunks until complete JSON" time="0.000201803">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Basic functionality &gt; should handle empty chunks gracefully" time="0.000077032">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; JSON depth tracking &gt; should track nested objects correctly" time="0.000352903">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; JSON depth tracking &gt; should track nested arrays correctly" time="0.000651426">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; JSON depth tracking &gt; should handle mixed nested structures" time="0.000213816">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; String handling &gt; should handle strings with special characters" time="0.000100506">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; String handling &gt; should handle strings with braces and brackets" time="0.000339809">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; String handling &gt; should track string boundaries correctly across chunks" time="0.000204519">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; String handling &gt; should handle escaped quotes in strings" time="0.000158273">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; String handling &gt; should handle backslash escapes correctly" time="0.000156019">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Error handling and repair &gt; should return error for malformed JSON at depth 0" time="0.000288504">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Error handling and repair &gt; should auto-repair unclosed strings" time="0.001983122">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Error handling and repair &gt; should not attempt repair when still in nested structure" time="0.000137304">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Error handling and repair &gt; should handle repair failure gracefully" time="0.000093343">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Multiple tool calls &gt; should handle multiple tool calls with different indices" time="0.00013528">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Multiple tool calls &gt; should handle interleaved chunks from multiple tool calls" time="0.000106677">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Multiple tool calls &gt; should maintain separate state for each index" time="0.000083024">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Tool call metadata handling &gt; should store and retrieve tool call metadata" time="0.000048781">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Tool call metadata handling &gt; should handle metadata-only chunks" time="0.000057557">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Tool call metadata handling &gt; should update metadata incrementally" time="0.000113159">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Tool call metadata handling &gt; should detect new tool call with same index and reassign to new index" time="0.000173781">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Completed tool calls &gt; should return completed tool calls" time="0.000206973">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Completed tool calls &gt; should handle completed tool calls with repair" time="0.000211611">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Completed tool calls &gt; should use safeJsonParse as fallback for malformed JSON" time="0.000521235">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Completed tool calls &gt; should not return tool calls without function name" time="0.000143956">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Completed tool calls &gt; should not return tool calls with empty buffer" time="0.000076392">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Edge cases &gt; should handle very large JSON objects" time="0.000801664">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Edge cases &gt; should handle deeply nested structures" time="0.000908412">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Edge cases &gt; should handle JSON with unicode characters" time="0.000276312">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Edge cases &gt; should handle JSON with null and boolean values" time="0.000137685">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Edge cases &gt; should handle JSON with numbers" time="0.000107018">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Edge cases &gt; should handle whitespace-only chunks" time="0.000102029">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Edge cases &gt; should handle chunks with only structural characters" time="0.000109623">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Real-world streaming scenarios &gt; should handle typical OpenAI streaming pattern" time="0.000214888">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Real-world streaming scenarios &gt; should handle multiple concurrent tool calls streaming" time="0.000254682">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Real-world streaming scenarios &gt; should handle malformed streaming that gets repaired" time="0.000255513">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Tool call ID collision detection and mapping &gt; should handle tool call ID reuse correctly" time="0.000362681">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Tool call ID collision detection and mapping &gt; should detect index collision and find new index" time="0.00051846">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Tool call ID collision detection and mapping &gt; should handle continuation chunks without ID correctly" time="0.000157131">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Tool call ID collision detection and mapping &gt; should find most recent incomplete tool call for continuation chunks" time="0.000256626">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Index management and reset functionality &gt; should reset individual index correctly" time="0.000179181">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Index management and reset functionality &gt; should find next available index when all lower indices are occupied" time="0.000177189">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Index management and reset functionality &gt; should reuse incomplete index when available" time="0.000078996">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Repair functionality and flags &gt; should test repair functionality in getCompletedToolCalls" time="0.000176597">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Repair functionality and flags &gt; should not set repaired flag for normal parsing" time="0.001345421">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Repair functionality and flags &gt; should not attempt repair when still in nested structure" time="0.000136152">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Repair functionality and flags &gt; should handle repair failure gracefully" time="0.000123749">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Complex collision scenarios &gt; should handle rapid tool call switching at same index" time="0.000266193">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Complex collision scenarios &gt; should handle interleaved chunks from multiple tool calls with ID mapping" time="0.000255513">
        </testcase>
    </testsuite>
    <testsuite name="src/core/openaiContentGenerator/telemetryService.test.ts" timestamp="2025-10-02T21:38:30.528Z" hostname="uby" tests="33" failures="0" errors="0" skipped="0" time="0.01723081">
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; constructor &gt; should create instance with default OpenAI logging disabled" time="0.001872276">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; constructor &gt; should create instance with OpenAI logging enabled when specified" time="0.000415319">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logSuccess &gt; should log API response event with complete response data" time="0.003648034">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logSuccess &gt; should handle response without responseId" time="0.000618435">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logSuccess &gt; should handle response without usage metadata" time="0.000385233">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logSuccess &gt; should not log OpenAI interaction when logging is disabled" time="0.000324451">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logSuccess &gt; should log OpenAI interaction when logging is enabled" time="0.000416301">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logSuccess &gt; should not log OpenAI interaction when request or response is missing" time="0.000269489">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logError &gt; should log API error event with Error instance" time="0.000395552">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logError &gt; should handle error without requestID" time="0.000287131">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logError &gt; should handle non-Error objects" time="0.000212403">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logError &gt; should handle null/undefined errors" time="0.000236678">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logError &gt; should not log OpenAI interaction when logging is disabled" time="0.000200872">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logError &gt; should log OpenAI interaction when logging is enabled" time="0.000369064">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logError &gt; should not log OpenAI interaction when request is missing" time="0.000192977">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logStreamingSuccess &gt; should log streaming success with multiple responses" time="0.000339288">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logStreamingSuccess &gt; should handle empty responses array" time="0.000298853">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logStreamingSuccess &gt; should handle responses without usage metadata" time="0.000251265">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logStreamingSuccess &gt; should use the last response with usage metadata" time="0.000215109">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logStreamingSuccess &gt; should not log OpenAI interaction when logging is disabled" time="0.000179672">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logStreamingSuccess &gt; should log OpenAI interaction when logging is enabled" time="0.000742094">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logStreamingSuccess &gt; should not log OpenAI interaction when request or chunks are missing" time="0.000282734">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; RequestContext interface &gt; should have all required properties" time="0.000271673">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; RequestContext interface &gt; should support streaming context" time="0.000105415">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; combineOpenAIChunksForLogging &gt; should combine simple text chunks correctly" time="0.000307189">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; combineOpenAIChunksForLogging &gt; should combine tool call chunks correctly" time="0.000429475">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; combineOpenAIChunksForLogging &gt; should handle mixed content and tool calls" time="0.000330762">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; combineOpenAIChunksForLogging &gt; should handle chunks with no content or tool calls" time="0.000260873">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; combineOpenAIChunksForLogging &gt; should use default values when usage is missing" time="0.000236247">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; combineOpenAIChunksForLogging &gt; should use default finish_reason when missing" time="0.000370005">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; combineOpenAIChunksForLogging &gt; should filter out empty tool calls" time="0.00031863">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; integration with telemetry events &gt; should create ApiResponseEvent with correct structure" time="0.000397025">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; integration with telemetry events &gt; should create ApiErrorEvent with correct structure" time="0.000332455">
        </testcase>
    </testsuite>
    <testsuite name="src/mcp/token-storage/base-token-storage.test.ts" timestamp="2025-10-02T21:38:30.529Z" hostname="uby" tests="12" failures="0" errors="0" skipped="0" time="0.005690204">
        <testcase classname="src/mcp/token-storage/base-token-storage.test.ts" name="BaseTokenStorage &gt; validateCredentials &gt; should validate valid credentials" time="0.002060644">
        </testcase>
        <testcase classname="src/mcp/token-storage/base-token-storage.test.ts" name="BaseTokenStorage &gt; validateCredentials &gt; should throw for missing server name" time="0.000320173">
        </testcase>
        <testcase classname="src/mcp/token-storage/base-token-storage.test.ts" name="BaseTokenStorage &gt; validateCredentials &gt; should throw for missing token" time="0.000193648">
        </testcase>
        <testcase classname="src/mcp/token-storage/base-token-storage.test.ts" name="BaseTokenStorage &gt; validateCredentials &gt; should throw for missing access token" time="0.000174934">
        </testcase>
        <testcase classname="src/mcp/token-storage/base-token-storage.test.ts" name="BaseTokenStorage &gt; validateCredentials &gt; should throw for missing token type" time="0.000175165">
        </testcase>
        <testcase classname="src/mcp/token-storage/base-token-storage.test.ts" name="BaseTokenStorage &gt; isTokenExpired &gt; should return false for tokens without expiry" time="0.00024298">
        </testcase>
        <testcase classname="src/mcp/token-storage/base-token-storage.test.ts" name="BaseTokenStorage &gt; isTokenExpired &gt; should return false for valid tokens" time="0.000131523">
        </testcase>
        <testcase classname="src/mcp/token-storage/base-token-storage.test.ts" name="BaseTokenStorage &gt; isTokenExpired &gt; should return true for expired tokens" time="0.000103671">
        </testcase>
        <testcase classname="src/mcp/token-storage/base-token-storage.test.ts" name="BaseTokenStorage &gt; isTokenExpired &gt; should apply 5-minute buffer for expiry check" time="0.000478075">
        </testcase>
        <testcase classname="src/mcp/token-storage/base-token-storage.test.ts" name="BaseTokenStorage &gt; sanitizeServerName &gt; should keep valid characters" time="0.000185894">
        </testcase>
        <testcase classname="src/mcp/token-storage/base-token-storage.test.ts" name="BaseTokenStorage &gt; sanitizeServerName &gt; should replace invalid characters with underscore" time="0.000109363">
        </testcase>
        <testcase classname="src/mcp/token-storage/base-token-storage.test.ts" name="BaseTokenStorage &gt; sanitizeServerName &gt; should handle special characters" time="0.000101858">
        </testcase>
    </testsuite>
    <testsuite name="src/telemetry/clearcut-logger/clearcut-logger.test.ts" timestamp="2025-10-02T21:38:30.530Z" hostname="uby" tests="21" failures="0" errors="0" skipped="0" time="0.114445836">
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; getInstance &gt; returns an instance if usage statistics are enabled" time="0.011966685">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; getInstance &gt; returns an instance if usage statistics are enabled" time="0.015327586">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; getInstance &gt; is a singleton" time="0.002191106">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; createLogEvent &gt; logs the total number of google accounts" time="0.001886753">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; createLogEvent &gt; logs the current surface from a github action" time="0.001316417">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; createLogEvent &gt; logs default metadata" time="0.002262318">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; createLogEvent &gt; logs the current surface" time="0.001264932">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; createLogEvent &gt; logs the current surface as &apos;cursor&apos;, preempting vscode detection" time="0.001718581">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; createLogEvent &gt; logs the current surface as &apos;vscode&apos;, preempting vscode detection" time="0.000887343">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; createLogEvent &gt; logs the current surface as &apos;firebasestudio&apos;, preempting vscode detection" time="0.000759717">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; createLogEvent &gt; logs the current surface as &apos;devin&apos;, preempting vscode detection" time="0.000691881">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; createLogEvent &gt; logs the current surface as &apos;cloudshell&apos;, preempting vscode detection" time="0.00062125">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; logChatCompressionEvent &gt; logs an event with proper fields" time="0.000998579">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; enqueueLogEvent &gt; should add events to the queue" time="0.000620399">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; enqueueLogEvent &gt; should evict the oldest event when the queue is full" time="0.011763057">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; flushToClearcut &gt; allows for usage with a configured proxy agent" time="0.025018768">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; flushToClearcut &gt; should clear events on successful flush" time="0.006224573">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; flushToClearcut &gt; should handle a network error and requeue events" time="0.005417109">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; flushToClearcut &gt; should handle an HTTP error and requeue events" time="0.004842946">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; requeueFailedEvents logic &gt; should limit the number of requeued events to max_retry_events" time="0.003012267">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; requeueFailedEvents logic &gt; should not requeue more events than available space in the queue" time="0.011884863">
        </testcase>
    </testsuite>
    <testsuite name="src/telemetry/qwen-logger/qwen-logger.test.ts" timestamp="2025-10-02T21:38:30.530Z" hostname="uby" tests="16" failures="0" errors="0" skipped="0" time="0.019990389">
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; getInstance &gt; returns undefined when usage statistics are disabled" time="0.002476524">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; getInstance &gt; returns an instance when usage statistics are enabled" time="0.000737075">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; getInstance &gt; is a singleton" time="0.000323559">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; event queue management &gt; should handle event overflow gracefully" time="0.002586488">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; event queue management &gt; should handle enqueue errors gracefully" time="0.001163004">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; concurrent flush protection &gt; should handle concurrent flush requests" time="0.000704444">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; failed event retry mechanism &gt; should requeue failed events with size limits" time="0.001388701">
            <system-err>
QwenLogger: Dropping 50 events due to retry queue limit. Total events: 150, keeping: 100

            </system-err>
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; failed event retry mechanism &gt; should handle empty retry queue gracefully" time="0.000898052">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; event handlers &gt; should log IDE connection events" time="0.001408017">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; event handlers &gt; should log Kitty sequence overflow events" time="0.000762401">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; event handlers &gt; should flush start session events immediately" time="0.000819006">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; event handlers &gt; should flush end session events immediately" time="0.000666965">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; flush timing &gt; should not flush if interval has not passed" time="0.000462326">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; flush timing &gt; should flush when interval has passed" time="0.000760228">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; error handling &gt; should handle flush errors gracefully with debug mode" time="0.002796647">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; constants export &gt; should export test constants" time="0.00039416">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/filesearch/crawlCache.test.ts" timestamp="2025-10-02T21:38:30.531Z" hostname="uby" tests="9" failures="0" errors="0" skipped="0" time="0.011009772">
        <testcase classname="src/utils/filesearch/crawlCache.test.ts" name="CrawlCache &gt; getCacheKey &gt; should generate a consistent hash" time="0.001822233">
        </testcase>
        <testcase classname="src/utils/filesearch/crawlCache.test.ts" name="CrawlCache &gt; getCacheKey &gt; should generate a different hash for different directories" time="0.000716807">
        </testcase>
        <testcase classname="src/utils/filesearch/crawlCache.test.ts" name="CrawlCache &gt; getCacheKey &gt; should generate a different hash for different ignore content" time="0.000278415">
        </testcase>
        <testcase classname="src/utils/filesearch/crawlCache.test.ts" name="CrawlCache &gt; getCacheKey &gt; should generate a different hash for different maxDepth values" time="0.000251606">
        </testcase>
        <testcase classname="src/utils/filesearch/crawlCache.test.ts" name="CrawlCache &gt; in-memory cache operations &gt; should write and read data from the cache" time="0.000650013">
        </testcase>
        <testcase classname="src/utils/filesearch/crawlCache.test.ts" name="CrawlCache &gt; in-memory cache operations &gt; should return undefined for a nonexistent key" time="0.00016231">
        </testcase>
        <testcase classname="src/utils/filesearch/crawlCache.test.ts" name="CrawlCache &gt; in-memory cache operations &gt; should clear the cache" time="0.000132235">
        </testcase>
        <testcase classname="src/utils/filesearch/crawlCache.test.ts" name="CrawlCache &gt; in-memory cache operations &gt; should automatically evict a cache entry after its TTL expires" time="0.002295369">
        </testcase>
        <testcase classname="src/utils/filesearch/crawlCache.test.ts" name="CrawlCache &gt; in-memory cache operations &gt; should reset the timer when an entry is updated" time="0.003056859">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/filesearch/crawler.test.ts" timestamp="2025-10-02T21:38:30.531Z" hostname="uby" tests="18" failures="0" errors="0" skipped="0" time="0.051291017">
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; should use .qwenignore rules" time="0.01207264">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; should combine .gitignore and .qwenignore rules" time="0.0057795">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; should use ignoreDirs option" time="0.002556222">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; should handle negated directories" time="0.003027966">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; should handle root-level file negation" time="0.00123682">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; should handle directory negation with glob" time="0.001672978">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; should correctly handle negated patterns in .gitignore" time="0.0009723">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; should initialize correctly when ignore files are missing" time="0.000558945">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; should handle empty or commented-only ignore files" time="0.00068031">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; should always ignore the .git directory" time="0.001361841">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; with in-memory cache &gt; should hit the cache for subsequent crawls" time="0.00575276">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; with in-memory cache &gt; should miss the cache when ignore rules change" time="0.00206379">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; with in-memory cache &gt; should miss the cache after TTL expires" time="0.003662511">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; with in-memory cache &gt; should miss the cache when maxDepth changes" time="0.00251692">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; with maxDepth &gt; should only crawl top-level files when maxDepth is 0" time="0.001493004">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; with maxDepth &gt; should crawl one level deep when maxDepth is 1" time="0.00102639">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; with maxDepth &gt; should crawl two levels deep when maxDepth is 2" time="0.00080989">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; with maxDepth &gt; should perform a full recursive crawl when maxDepth is undefined" time="0.002636241">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/filesearch/fileSearch.test.ts" timestamp="2025-10-02T21:38:30.532Z" hostname="uby" tests="27" failures="0" errors="0" skipped="0" time="0.08401027">
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should use .qwenignore rules" time="0.011525457">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should combine .gitignore and .qwenignore rules" time="0.005731902">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should use ignoreDirs option" time="0.002598261">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should handle negated directories" time="0.003064113">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should filter results with a search pattern" time="0.00188491">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should handle root-level file negation" time="0.00147434">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should handle directory negation with glob" time="0.001913874">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should correctly handle negated patterns in .gitignore" time="0.001320154">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should initialize correctly when ignore files are missing" time="0.001581898">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should respect maxResults option in search" time="0.000966238">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should use fzf for fuzzy matching when pattern does not contain wildcards" time="0.002346283">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should not use fzf for fuzzy matching when disableFuzzySearch is true" time="0.001189622">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should use fzf for fuzzy matching when disableFuzzySearch is false" time="0.001505307">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should return empty array when no matches are found" time="0.001840357">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should throw AbortError when filter is aborted" time="0.004135937">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should throw an error if search is called before initialization" time="0.001300998">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should handle empty or commented-only ignore files" time="0.003578355">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should always ignore the .git directory" time="0.002968746">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should be cancellable via AbortSignal" time="0.010935355">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should leverage ResultCache for bestBaseQuery optimization" time="0.004622177">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should be case-insensitive by default" time="0.002953167">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should respect maxResults even when the cache returns an exact match" time="0.00217145">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should handle file paths with special characters that need escaping" time="0.001544921">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; DirectoryFileSearch &gt; should search for files in the current directory" time="0.001500698">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; DirectoryFileSearch &gt; should search for files in a subdirectory" time="0.002895481">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; DirectoryFileSearch &gt; should list all files in a directory" time="0.002480102">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; DirectoryFileSearch &gt; should respect ignore rules" time="0.002128561">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/filesearch/ignore.test.ts" timestamp="2025-10-02T21:38:30.533Z" hostname="uby" tests="12" failures="0" errors="0" skipped="0" time="0.014214515">
        <testcase classname="src/utils/filesearch/ignore.test.ts" name="Ignore &gt; getDirectoryFilter &gt; should ignore directories matching directory patterns" time="0.001935994">
        </testcase>
        <testcase classname="src/utils/filesearch/ignore.test.ts" name="Ignore &gt; getDirectoryFilter &gt; should not ignore directories with file patterns" time="0.000381486">
        </testcase>
        <testcase classname="src/utils/filesearch/ignore.test.ts" name="Ignore &gt; getFileFilter &gt; should not ignore files with directory patterns" time="0.000161259">
        </testcase>
        <testcase classname="src/utils/filesearch/ignore.test.ts" name="Ignore &gt; getFileFilter &gt; should ignore files matching file patterns" time="0.00027555">
        </testcase>
        <testcase classname="src/utils/filesearch/ignore.test.ts" name="Ignore &gt; should accumulate patterns across multiple add() calls" time="0.000223093">
        </testcase>
        <testcase classname="src/utils/filesearch/ignore.test.ts" name="Ignore &gt; should return a stable and consistent fingerprint" time="0.000607174">
        </testcase>
        <testcase classname="src/utils/filesearch/ignore.test.ts" name="loadIgnoreRules &gt; should load rules from .gitignore" time="0.002775779">
        </testcase>
        <testcase classname="src/utils/filesearch/ignore.test.ts" name="loadIgnoreRules &gt; should load rules from .qwenignore" time="0.001724904">
        </testcase>
        <testcase classname="src/utils/filesearch/ignore.test.ts" name="loadIgnoreRules &gt; should combine rules from .gitignore and .qwenignore" time="0.001827464">
        </testcase>
        <testcase classname="src/utils/filesearch/ignore.test.ts" name="loadIgnoreRules &gt; should add ignoreDirs" time="0.002113423">
        </testcase>
        <testcase classname="src/utils/filesearch/ignore.test.ts" name="loadIgnoreRules &gt; should handle missing ignore files gracefully" time="0.000527176">
        </testcase>
        <testcase classname="src/utils/filesearch/ignore.test.ts" name="loadIgnoreRules &gt; should always add .git to the ignore list" time="0.000384802">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/filesearch/result-cache.test.ts" timestamp="2025-10-02T21:38:30.533Z" hostname="uby" tests="3" failures="0" errors="0" skipped="0" time="0.004181972">
        <testcase classname="src/utils/filesearch/result-cache.test.ts" name="ResultCache basic usage" time="0.002175077">
        </testcase>
        <testcase classname="src/utils/filesearch/result-cache.test.ts" name="ResultCache cache hit/miss" time="0.000476903">
        </testcase>
        <testcase classname="src/utils/filesearch/result-cache.test.ts" name="ResultCache best base query" time="0.000301679">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/request-tokenizer/imageTokenizer.test.ts" timestamp="2025-10-02T21:38:30.533Z" hostname="uby" tests="9" failures="0" errors="0" skipped="0" time="0.013468254">
        <testcase classname="src/utils/request-tokenizer/imageTokenizer.test.ts" name="ImageTokenizer &gt; token calculation &gt; should calculate tokens based on image dimensions with reference logic" time="0.001265062">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/imageTokenizer.test.ts" name="ImageTokenizer &gt; token calculation &gt; should calculate tokens for larger images" time="0.000203817">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/imageTokenizer.test.ts" name="ImageTokenizer &gt; token calculation &gt; should enforce minimum tokens per image with scaling" time="0.000072855">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/imageTokenizer.test.ts" name="ImageTokenizer &gt; token calculation &gt; should handle very large images with scaling" time="0.000078455">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/imageTokenizer.test.ts" name="ImageTokenizer &gt; PNG dimension extraction &gt; should extract dimensions from valid PNG" time="0.000392526">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/imageTokenizer.test.ts" name="ImageTokenizer &gt; PNG dimension extraction &gt; should handle invalid PNG gracefully" time="0.005842447">
            <system-err>
Failed to extract image metadata: Error: Invalid PNG: buffer too short
    at ImageTokenizer.extractPngDimensions [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:131:13[90m)[39m
    at ImageTokenizer.extractDimensions [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:91:19[90m)[39m
    at ImageTokenizer.extractImageMetadata [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:59:37[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.test.ts:93:40
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)

            </system-err>
        </testcase>
        <testcase classname="src/utils/request-tokenizer/imageTokenizer.test.ts" name="ImageTokenizer &gt; batch processing &gt; should process multiple images serially" time="0.000870251">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/imageTokenizer.test.ts" name="ImageTokenizer &gt; batch processing &gt; should handle mixed valid and invalid images" time="0.000709574">
            <system-err>
Failed to extract image metadata: Error: Invalid PNG: buffer too short
    at ImageTokenizer.extractPngDimensions [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:131:13[90m)[39m
    at ImageTokenizer.extractDimensions [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:91:19[90m)[39m
    at ImageTokenizer.extractImageMetadata [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:59:37[90m)[39m
    at ImageTokenizer.calculateTokensBatch [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:320:37[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.test.ts:132:22
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

            </system-err>
        </testcase>
        <testcase classname="src/utils/request-tokenizer/imageTokenizer.test.ts" name="ImageTokenizer &gt; different image formats &gt; should handle different MIME types" time="0.002780918">
            <system-err>
Failed to extract image metadata: Error: Invalid JPEG signature
    at ImageTokenizer.extractJpegDimensions [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:159:13[90m)[39m
    at ImageTokenizer.extractDimensions [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:95:19[90m)[39m
    at ImageTokenizer.extractImageMetadata [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:59:37[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.test.ts:147:42
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Failed to extract image metadata: Error: Invalid WebP signature
    at ImageTokenizer.extractWebpDimensions [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:207:13[90m)[39m
    at ImageTokenizer.extractDimensions [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:99:19[90m)[39m
    at ImageTokenizer.extractImageMetadata [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:59:37[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.test.ts:147:42
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Unsupported image format: image/gif

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="src/utils/request-tokenizer/requestTokenizer.test.ts" timestamp="2025-10-02T21:38:30.533Z" hostname="uby" tests="12" failures="0" errors="0" skipped="0" time="0.520445201">
        <testcase classname="src/utils/request-tokenizer/requestTokenizer.test.ts" name="DefaultRequestTokenizer &gt; text token calculation &gt; should calculate tokens for simple text content" time="0.115659012">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/requestTokenizer.test.ts" name="DefaultRequestTokenizer &gt; text token calculation &gt; should handle multiple text parts" time="0.076710336">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/requestTokenizer.test.ts" name="DefaultRequestTokenizer &gt; text token calculation &gt; should handle string content" time="0.076586907">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/requestTokenizer.test.ts" name="DefaultRequestTokenizer &gt; image token calculation &gt; should calculate tokens for image content" time="0.001050635">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/requestTokenizer.test.ts" name="DefaultRequestTokenizer &gt; image token calculation &gt; should handle multiple images" time="0.000318169">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/requestTokenizer.test.ts" name="DefaultRequestTokenizer &gt; mixed content &gt; should handle text and image content together" time="0.088719398">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/requestTokenizer.test.ts" name="DefaultRequestTokenizer &gt; function content &gt; should handle function calls" time="0.07570263">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/requestTokenizer.test.ts" name="DefaultRequestTokenizer &gt; empty content &gt; should handle empty request" time="0.000398838">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/requestTokenizer.test.ts" name="DefaultRequestTokenizer &gt; empty content &gt; should handle undefined contents" time="0.000133327">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/requestTokenizer.test.ts" name="DefaultRequestTokenizer &gt; configuration &gt; should use custom text encoding" time="0.075566057">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/requestTokenizer.test.ts" name="DefaultRequestTokenizer &gt; configuration &gt; should process multiple images serially" time="0.000429656">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/requestTokenizer.test.ts" name="DefaultRequestTokenizer &gt; error handling &gt; should handle malformed image data gracefully" time="0.00711369">
            <system-err>
Failed to extract image metadata: Error: Invalid PNG: buffer too short
    at ImageTokenizer.extractPngDimensions [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:131:13[90m)[39m
    at ImageTokenizer.extractDimensions [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:91:19[90m)[39m
    at ImageTokenizer.extractImageMetadata [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:59:37[90m)[39m
    at ImageTokenizer.calculateTokensBatch [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:320:37[90m)[39m
    at DefaultRequestTokenizer.calculateImageTokens [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/requestTokenizer.ts:136:35[90m)[39m
    at DefaultRequestTokenizer.calculateTokens [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/requestTokenizer.ts:72:38[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/requestTokenizer.test.ts:287:22
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="src/utils/request-tokenizer/textTokenizer.test.ts" timestamp="2025-10-02T21:38:30.534Z" hostname="uby" tests="28" failures="0" errors="0" skipped="0" time="0.014496227">
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; constructor &gt; should create tokenizer with default encoding" time="0.00126982">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; constructor &gt; should create tokenizer with custom encoding" time="0.000192126">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokens &gt; should return 0 for empty text" time="0.000446597">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokens &gt; should return 0 for null/undefined text" time="0.000190643">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokens &gt; should calculate tokens using tiktoken when available" time="0.001831851">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokens &gt; should use fallback calculation when tiktoken fails to load" time="0.001293645">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokens &gt; should use fallback calculation when encoding fails" time="0.000409678">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokens &gt; should handle very long text" time="0.000225307">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokens &gt; should handle unicode characters" time="0.000183199">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokens &gt; should use custom encoding when specified" time="0.000187958">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokensBatch &gt; should process multiple texts and return token counts" time="0.000354236">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokensBatch &gt; should handle empty array" time="0.00012934">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokensBatch &gt; should handle array with empty strings" time="0.001040958">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokensBatch &gt; should use fallback calculation when tiktoken fails to load" time="0.000455212">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokensBatch &gt; should use fallback calculation when encoding fails during batch processing" time="0.000322186">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokensBatch &gt; should handle null and undefined values in batch" time="0.000195742">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; dispose &gt; should free tiktoken encoding when disposing" time="0.000635536">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; dispose &gt; should handle disposal when encoding is not initialized" time="0.00115614">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; dispose &gt; should handle disposal when encoding is null" time="0.000354687">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; dispose &gt; should handle errors during disposal gracefully" time="0.000544909">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; dispose &gt; should allow multiple calls to dispose" time="0.000256204">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; lazy initialization &gt; should not initialize tiktoken until first use" time="0.000237129">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; lazy initialization &gt; should initialize tiktoken on first calculateTokens call" time="0.000191123">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; lazy initialization &gt; should not reinitialize tiktoken on subsequent calls" time="0.00013524">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; lazy initialization &gt; should initialize tiktoken on first calculateTokensBatch call" time="0.000133206">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; edge cases &gt; should handle very short text" time="0.000363603">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; edge cases &gt; should handle text with only whitespace" time="0.000246646">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; edge cases &gt; should handle special characters and symbols" time="0.000172349">
        </testcase>
    </testsuite>
    <testsuite name="src/core/openaiContentGenerator/provider/dashscope.test.ts" timestamp="2025-10-02T21:38:30.535Z" hostname="uby" tests="33" failures="0" errors="0" skipped="0" time="0.013332333">
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; constructor &gt; should initialize with provided configs" time="0.001329721">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; isDashScopeProvider &gt; should return true for QWEN_OAUTH auth type" time="0.00028598">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; isDashScopeProvider &gt; should return true for DashScope domestic URL" time="0.000187828">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; isDashScopeProvider &gt; should return true for DashScope international URL" time="0.000193127">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; isDashScopeProvider &gt; should return false for non-DashScope configurations" time="0.000200721">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildHeaders &gt; should build DashScope-specific headers" time="0.000746702">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildHeaders &gt; should handle unknown CLI version" time="0.000194871">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildClient &gt; should create OpenAI client with DashScope configuration" time="0.00121507">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildClient &gt; should use default timeout and maxRetries when not provided" time="0.000397946">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildMetadata &gt; should build metadata with session and prompt IDs" time="0.000186916">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildMetadata &gt; should handle missing session ID" time="0.000159044">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildRequest &gt; should add cache control to system message only for non-streaming requests" time="0.000920625">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildRequest &gt; should add cache control to both system and last messages for streaming requests" time="0.000258939">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildRequest &gt; should include metadata in the request" time="0.000182588">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildRequest &gt; should preserve all original request parameters" time="0.000559936">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildRequest &gt; should skip cache control when disabled" time="0.000206322">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildRequest &gt; should handle messages with array content for streaming requests" time="0.000363624">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildRequest &gt; should handle empty messages array" time="0.00022661">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildRequest &gt; should handle messages without content for streaming requests" time="0.000234945">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildRequest &gt; should add cache control to last text item in mixed content for streaming requests" time="0.00032938">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildRequest &gt; should add empty text item with cache control if last item is not text for streaming requests" time="0.000293423">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; cache control edge cases &gt; should handle request with only system message" time="0.000450685">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; cache control edge cases &gt; should handle request without system message for streaming requests" time="0.000219607">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; cache control edge cases &gt; should handle empty content array for streaming requests" time="0.000171016">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; output token limits &gt; should limit max_tokens when it exceeds model limit for qwen3-coder-plus" time="0.000190783">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; output token limits &gt; should limit max_tokens when it exceeds model limit for qwen-vl-max-latest" time="0.00015662">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; output token limits &gt; should not modify max_tokens when it is within model limit" time="0.000103431">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; output token limits &gt; should not add max_tokens when not present in request" time="0.000154627">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; output token limits &gt; should handle null max_tokens parameter" time="0.000110925">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; output token limits &gt; should use default output limit for unknown models" time="0.000386656">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; output token limits &gt; should preserve other request parameters when limiting max_tokens" time="0.000652408">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; output token limits &gt; should work with vision models and output token limits" time="0.000383781">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; output token limits &gt; should handle streaming requests with output token limits" time="0.000287742">
        </testcase>
    </testsuite>
    <testsuite name="src/core/openaiContentGenerator/provider/default.test.ts" timestamp="2025-10-02T21:38:30.536Z" hostname="uby" tests="11" failures="0" errors="0" skipped="0" time="0.011360762">
        <testcase classname="src/core/openaiContentGenerator/provider/default.test.ts" name="DefaultOpenAICompatibleProvider &gt; constructor &gt; should initialize with provided configs" time="0.001694287">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/default.test.ts" name="DefaultOpenAICompatibleProvider &gt; buildHeaders &gt; should build headers with User-Agent" time="0.001049923">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/default.test.ts" name="DefaultOpenAICompatibleProvider &gt; buildHeaders &gt; should handle unknown CLI version" time="0.000191163">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/default.test.ts" name="DefaultOpenAICompatibleProvider &gt; buildClient &gt; should create OpenAI client with correct configuration" time="0.001610652">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/default.test.ts" name="DefaultOpenAICompatibleProvider &gt; buildClient &gt; should use default timeout and maxRetries when not provided" time="0.000594401">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/default.test.ts" name="DefaultOpenAICompatibleProvider &gt; buildClient &gt; should include custom headers from buildHeaders" time="0.00167486">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/default.test.ts" name="DefaultOpenAICompatibleProvider &gt; buildRequest &gt; should pass through all request parameters unchanged" time="0.000702971">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/default.test.ts" name="DefaultOpenAICompatibleProvider &gt; buildRequest &gt; should preserve all sampling parameters" time="0.000903452">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/default.test.ts" name="DefaultOpenAICompatibleProvider &gt; buildRequest &gt; should handle minimal request parameters" time="0.000479066">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/default.test.ts" name="DefaultOpenAICompatibleProvider &gt; buildRequest &gt; should handle streaming requests" time="0.000337896">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/default.test.ts" name="DefaultOpenAICompatibleProvider &gt; buildRequest &gt; should not modify the original request object" time="0.000244122">
        </testcase>
    </testsuite>
    <testsuite name="src/core/openaiContentGenerator/provider/lmstudio.test.ts" timestamp="2025-10-02T21:38:30.536Z" hostname="uby" tests="4" failures="0" errors="0" skipped="0" time="0.148276847">
        <testcase classname="src/core/openaiContentGenerator/provider/lmstudio.test.ts" name="LMStudioOpenAICompatibleProvider &gt; isLMStudioProvider &gt; should return true for LM Studio base URLs" time="0.002325876">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/lmstudio.test.ts" name="LMStudioOpenAICompatibleProvider &gt; isLMStudioProvider &gt; should return false for non-LM Studio base URLs" time="0.000337685">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/lmstudio.test.ts" name="LMStudioOpenAICompatibleProvider &gt; buildHeaders &gt; should remove User-Agent header for LM Studio compatibility" time="0.000500186">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/lmstudio.test.ts" name="LMStudioOpenAICompatibleProvider &gt; unloadModel &gt; should attempt to unload the model without throwing an error" time="0.139518202">
            <system-out>
LM Studio model unload request sent (result not guaranteed): NotFoundError: 404 Model &quot;test-model&quot; not found. Please specify a valid model.

Your models:

gpt-oss-120b
qwen3-coder-30b-a3b-instruct
deepseek/deepseek-r1-0528-qwen3-8b
mistralai/magistral-small-2509
text-embedding-nomic-embed-text-v1.5
openai/gpt-oss-20b
qwen/qwen3-4b-thinking-2507
nousresearch/hermes-4-70b
lumimaid_vision-v0.2-12b-pixtral
qwen2.5-vl-7b-instruct
qwen3-code-reasoning-4b
qwen3-coder-30b-a3b-instruct-480b-distill-v2
openai-gpt-oss-20b-abliterated-uncensored-neo-imatrix
cognitivecomputations_dolphin-mistral-24b-venice-edition
seed-oss-36b-instruct
seed-coder-8b-reasoning
glm-4.5-air
glm-4-32b-0414
qwen3-8b
qwen3-4b-instruct-2507
qwen3-32b
qwen3-30b-a3b-instruct-2507
qwen3-1.7b
phi-4-reasoning-plus
phi-4-mini-reasoning
mistral-7b-instruct-v0.3
llama-3.3-70b-instruct
gemma-3-4b-it
gemma-3-27b-it-qat
gemma-3-1b-it-qat
gemma-3-12b-it
devstral-small-2505
dolphin3.0-llama3.1-8b
    at APIError.generate (file:///home/atmandk/LowCal-dev/node_modules/[4mopenai[24m/src/core/error.ts:84:14)
    at OpenAI.makeStatusError (file:///home/atmandk/LowCal-dev/node_modules/[4mopenai[24m/src/client.ts:438:28)
    at OpenAI.makeRequest (file:///home/atmandk/LowCal-dev/node_modules/[4mopenai[24m/src/client.ts:661:24)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at LMStudioOpenAICompatibleProvider.unloadModel [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/openaiContentGenerator/provider/lmstudio.ts:51:7[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/core/openaiContentGenerator/provider/lmstudio.test.ts:75:7
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20 {
  status: [33m404[39m,
  headers: Headers {
    [32m&apos;x-powered-by&apos;[39m: [32m&apos;Express&apos;[39m,
    [32m&apos;content-type&apos;[39m: [32m&apos;text/html; charset=utf-8&apos;[39m,
    [32m&apos;content-length&apos;[39m: [32m&apos;1067&apos;[39m,
    etag: [32m&apos;W/&quot;42b-cZZi2iGeOuaTds4aK+SX/6lks9w&quot;&apos;[39m,
    date: [32m&apos;Thu, 02 Oct 2025 21:38:26 GMT&apos;[39m,
    connection: [32m&apos;keep-alive&apos;[39m,
    [32m&apos;keep-alive&apos;[39m: [32m&apos;timeout=5&apos;[39m
  },
  requestID: [1mnull[22m,
  error: {
    message: [32m&apos;Model &quot;test-model&quot; not found. Please specify a valid model.\n&apos;[39m +
      [32m&apos;\n&apos;[39m +
      [32m&apos;Your models:\n&apos;[39m +
      [32m&apos;\n&apos;[39m +
      [32m&apos;gpt-oss-120b\n&apos;[39m +
      [32m&apos;qwen3-coder-30b-a3b-instruct\n&apos;[39m +
      [32m&apos;deepseek/deepseek-r1-0528-qwen3-8b\n&apos;[39m +
      [32m&apos;mistralai/magistral-small-2509\n&apos;[39m +
      [32m&apos;text-embedding-nomic-embed-text-v1.5\n&apos;[39m +
      [32m&apos;openai/gpt-oss-20b\n&apos;[39m +
      [32m&apos;qwen/qwen3-4b-thinking-2507\n&apos;[39m +
      [32m&apos;nousresearch/hermes-4-70b\n&apos;[39m +
      [32m&apos;lumimaid_vision-v0.2-12b-pixtral\n&apos;[39m +
      [32m&apos;qwen2.5-vl-7b-instruct\n&apos;[39m +
      [32m&apos;qwen3-code-reasoning-4b\n&apos;[39m +
      [32m&apos;qwen3-coder-30b-a3b-instruct-480b-distill-v2\n&apos;[39m +
      [32m&apos;openai-gpt-oss-20b-abliterated-uncensored-neo-imatrix\n&apos;[39m +
      [32m&apos;cognitivecomputations_dolphin-mistral-24b-venice-edition\n&apos;[39m +
      [32m&apos;seed-oss-36b-instruct\n&apos;[39m +
      [32m&apos;seed-coder-8b-reasoning\n&apos;[39m +
      [32m&apos;glm-4.5-air\n&apos;[39m +
      [32m&apos;glm-4-32b-0414\n&apos;[39m +
      [32m&apos;qwen3-8b\n&apos;[39m +
      [32m&apos;qwen3-4b-instruct-2507\n&apos;[39m +
      [32m&apos;qwen3-32b\n&apos;[39m +
      [32m&apos;qwen3-30b-a3b-instruct-2507\n&apos;[39m +
      [32m&apos;qwen3-1.7b\n&apos;[39m +
      [32m&apos;phi-4-reasoning-plus\n&apos;[39m +
      [32m&apos;phi-4-mini-reasoning\n&apos;[39m +
      [32m&apos;mistral-7b-instruct-v0.3\n&apos;[39m +
      [32m&apos;llama-3.3-70b-instruct\n&apos;[39m +
      [32m&apos;gemma-3-4b-it\n&apos;[39m +
      [32m&apos;gemma-3-27b-it-qat\n&apos;[39m +
      [32m&apos;gemma-3-1b-it-qat\n&apos;[39m +
      [32m&apos;gemma-3-12b-it\n&apos;[39m +
      [32m&apos;devstral-small-2505\n&apos;[39m +
      [32m&apos;dolphin3.0-llama3.1-8b&apos;[39m,
    type: [32m&apos;invalid_request_error&apos;[39m,
    param: [32m&apos;model&apos;[39m,
    code: [32m&apos;model_not_found&apos;[39m
  },
  code: [32m&apos;model_not_found&apos;[39m,
  param: [32m&apos;model&apos;[39m,
  type: [32m&apos;invalid_request_error&apos;[39m
}

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="src/core/openaiContentGenerator/provider/openrouter.test.ts" timestamp="2025-10-02T21:38:30.536Z" hostname="uby" tests="12" failures="0" errors="0" skipped="0" time="0.009180266">
        <testcase classname="src/core/openaiContentGenerator/provider/openrouter.test.ts" name="OpenRouterOpenAICompatibleProvider &gt; constructor &gt; should extend DefaultOpenAICompatibleProvider" time="0.002365029">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/openrouter.test.ts" name="OpenRouterOpenAICompatibleProvider &gt; isOpenRouterProvider &gt; should return true for openrouter.ai URLs" time="0.000420058">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/openrouter.test.ts" name="OpenRouterOpenAICompatibleProvider &gt; isOpenRouterProvider &gt; should return false for non-openrouter URLs" time="0.000393508">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/openrouter.test.ts" name="OpenRouterOpenAICompatibleProvider &gt; isOpenRouterProvider &gt; should handle missing baseUrl gracefully" time="0.00011862">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/openrouter.test.ts" name="OpenRouterOpenAICompatibleProvider &gt; buildHeaders &gt; should include base headers from parent class" time="0.00029706">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/openrouter.test.ts" name="OpenRouterOpenAICompatibleProvider &gt; buildHeaders &gt; should add OpenRouter-specific headers" time="0.000755659">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/openrouter.test.ts" name="OpenRouterOpenAICompatibleProvider &gt; buildHeaders &gt; should override parent headers if there are conflicts" time="0.000411642">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/openrouter.test.ts" name="OpenRouterOpenAICompatibleProvider &gt; buildHeaders &gt; should handle unknown CLI version from parent" time="0.000508221">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/openrouter.test.ts" name="OpenRouterOpenAICompatibleProvider &gt; buildClient &gt; should inherit buildClient behavior from parent" time="0.000474108">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/openrouter.test.ts" name="OpenRouterOpenAICompatibleProvider &gt; buildRequest &gt; should inherit buildRequest behavior from parent" time="0.00119385">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/openrouter.test.ts" name="OpenRouterOpenAICompatibleProvider &gt; integration with parent class &gt; should properly call parent constructor" time="0.000643161">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/openrouter.test.ts" name="OpenRouterOpenAICompatibleProvider &gt; integration with parent class &gt; should maintain parent functionality while adding OpenRouter specifics" time="0.000213846">
        </testcase>
    </testsuite>
</testsuites>
