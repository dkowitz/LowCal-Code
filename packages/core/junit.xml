<?xml version="1.0" encoding="UTF-8" ?>
<testsuites name="vitest tests" tests="2624" failures="7" errors="0" time="16.666372641">
    <testsuite name="src/index.test.ts" timestamp="2025-10-05T22:46:17.142Z" hostname="uby" tests="1" failures="0" errors="0" skipped="0" time="0.002558969">
        <testcase classname="src/index.test.ts" name="placeholder tests &gt; should pass" time="0.001355836">
        </testcase>
    </testsuite>
    <testsuite name="src/code_assist/converter.test.ts" timestamp="2025-10-05T22:46:17.143Z" hostname="uby" tests="21" failures="0" errors="0" skipped="0" time="0.008077295">
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toCodeAssistRequest &gt; should convert a simple request with project" time="0.002322842">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toCodeAssistRequest &gt; should convert a request without a project" time="0.000193056">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toCodeAssistRequest &gt; should convert a request with sessionId" time="0.000098683">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toCodeAssistRequest &gt; should handle string content" time="0.000079187">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toCodeAssistRequest &gt; should handle Part[] content" time="0.000094825">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toCodeAssistRequest &gt; should handle system instructions" time="0.00016266">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toCodeAssistRequest &gt; should handle generation config" time="0.000159475">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toCodeAssistRequest &gt; should handle all generation config fields" time="0.000163632">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; fromCodeAssistResponse &gt; should convert a simple response" time="0.000252998">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; fromCodeAssistResponse &gt; should handle prompt feedback and usage metadata" time="0.000129329">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; fromCodeAssistResponse &gt; should handle automatic function calling history" time="0.000115434">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toContents &gt; should handle Content" time="0.000127115">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toContents &gt; should handle array of Contents" time="0.001252054">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toContents &gt; should handle Part" time="0.000147363">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toContents &gt; should handle array of Parts" time="0.000118269">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toContents &gt; should handle string" time="0.000109913">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toContents &gt; should handle array of strings" time="0.000297881">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toContents &gt; should convert thought parts to text parts for API compatibility" time="0.000316425">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toContents &gt; should combine text and thought for text parts with thoughts" time="0.000164424">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toContents &gt; should preserve non-thought properties while removing thought" time="0.000200341">
        </testcase>
        <testcase classname="src/code_assist/converter.test.ts" name="converter &gt; toContents &gt; should convert invalid text content to valid text part with thought" time="0.000082642">
        </testcase>
    </testsuite>
    <testsuite name="src/code_assist/oauth2.test.ts" timestamp="2025-10-05T22:46:17.146Z" hostname="uby" tests="15" failures="0" errors="0" skipped="0" time="0.076254989">
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; should perform a web login" time="0.013198349">
            <system-out>


Code Assist login required.
Attempting to open authentication page in your browser.
Otherwise navigate to:

https://example.com/auth



Waiting for authentication...

            </system-out>
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; should perform login with user code" time="0.004328088">
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; in Cloud Shell &gt; should attempt to load cached credentials first" time="0.004563904">
            <system-out>
Loaded cached credentials.

            </system-out>
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; in Cloud Shell &gt; should use Compute to get a client if no cached credentials exist" time="0.002183525">
            <system-out>
Attempting to authenticate via Cloud Shell VM&apos;s ADC.

Authentication successful.

            </system-out>
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; in Cloud Shell &gt; should not cache the credentials after fetching them via ADC" time="0.001793104">
            <system-out>
Attempting to authenticate via Cloud Shell VM&apos;s ADC.

Authentication successful.

            </system-out>
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; in Cloud Shell &gt; should return the Compute client on successful ADC authentication" time="0.001453025">
            <system-out>
Attempting to authenticate via Cloud Shell VM&apos;s ADC.

Authentication successful.

            </system-out>
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; in Cloud Shell &gt; should throw an error if ADC fails" time="0.002123534">
            <system-out>
Attempting to authenticate via Cloud Shell VM&apos;s ADC.

            </system-out>
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; credential loading order &gt; should prioritize default cached credentials over GOOGLE_APPLICATION_CREDENTIALS" time="0.002405395">
            <system-out>
Loaded cached credentials.

            </system-out>
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; credential loading order &gt; should fall back to GOOGLE_APPLICATION_CREDENTIALS if default cache is missing" time="0.003948126">
            <system-out>
Loaded cached credentials.

            </system-out>
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; with GCP environment variables &gt; should use GOOGLE_CLOUD_ACCESS_TOKEN when GOOGLE_GENAI_USE_GCA is true" time="0.002691274">
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; with GCP environment variables &gt; should not use GCP token if GOOGLE_CLOUD_ACCESS_TOKEN is not set" time="0.00564981">
            <system-out>
Loaded cached credentials.

            </system-out>
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; with GCP environment variables &gt; should not use GCP token if GOOGLE_GENAI_USE_GCA is not set" time="0.002964659">
            <system-out>
Loaded cached credentials.

            </system-out>
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; clearCachedCredentialFile &gt; should clear cached credentials and Google account" time="0.013706778">
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; clearCachedCredentialFile &gt; should handle Qwen module clearing gracefully" time="0.008910285">
            <system-err>
Failed to clear cached credentials: Error: ENOENT: no such file or directory, open &apos;/tmp/qwen-code-test-home-47J2Y3/.qwen/google_accounts.json&apos;
[90m    at open (node:internal/fs/promises:642:25)[39m
[90m    at Object.writeFile (node:internal/fs/promises:1249:14)[39m
    at UserAccountManager.clearCachedGoogleAccount [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/userAccountManager.ts:138:5[90m)[39m
    at Module.clearCachedCredentialFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/code_assist/oauth2.ts:395:5[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/code_assist/oauth2.test.ts:572:7
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20 {
  errno: [33m-2[39m,
  code: [32m&apos;ENOENT&apos;[39m,
  syscall: [32m&apos;open&apos;[39m,
  path: [32m&apos;/tmp/qwen-code-test-home-47J2Y3/.qwen/google_accounts.json&apos;[39m
}

            </system-err>
        </testcase>
        <testcase classname="src/code_assist/oauth2.test.ts" name="oauth2 &gt; clearCachedCredentialFile &gt; should clear the in-memory OAuth client cache" time="0.00423736">
            <system-out>
Loaded cached credentials.

Loaded cached credentials.

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="src/code_assist/server.test.ts" timestamp="2025-10-05T22:46:17.147Z" hostname="uby" tests="7" failures="0" errors="0" skipped="0" time="0.022215581">
        <testcase classname="src/code_assist/server.test.ts" name="CodeAssistServer &gt; should be able to be constructed" time="0.003694757">
        </testcase>
        <testcase classname="src/code_assist/server.test.ts" name="CodeAssistServer &gt; should call the generateContent endpoint" time="0.004125243">
        </testcase>
        <testcase classname="src/code_assist/server.test.ts" name="CodeAssistServer &gt; should call the generateContentStream endpoint" time="0.002907913">
        </testcase>
        <testcase classname="src/code_assist/server.test.ts" name="CodeAssistServer &gt; should call the onboardUser endpoint" time="0.002464414">
        </testcase>
        <testcase classname="src/code_assist/server.test.ts" name="CodeAssistServer &gt; should call the loadCodeAssist endpoint" time="0.00263528">
        </testcase>
        <testcase classname="src/code_assist/server.test.ts" name="CodeAssistServer &gt; should return 0 for countTokens" time="0.002312342">
        </testcase>
        <testcase classname="src/code_assist/server.test.ts" name="CodeAssistServer &gt; should throw an error for embedContent" time="0.00271641">
        </testcase>
    </testsuite>
    <testsuite name="src/code_assist/setup.test.ts" timestamp="2025-10-05T22:46:17.148Z" hostname="uby" tests="7" failures="0" errors="0" skipped="0" time="0.018166309">
        <testcase classname="src/code_assist/setup.test.ts" name="setupUser for existing user &gt; should use GOOGLE_CLOUD_PROJECT when set and project from server is undefined" time="0.005074697">
        </testcase>
        <testcase classname="src/code_assist/setup.test.ts" name="setupUser for existing user &gt; should ignore GOOGLE_CLOUD_PROJECT when project from server is set" time="0.002242303">
        </testcase>
        <testcase classname="src/code_assist/setup.test.ts" name="setupUser for existing user &gt; should throw ProjectIdRequiredError when no project ID is available" time="0.001426396">
        </testcase>
        <testcase classname="src/code_assist/setup.test.ts" name="setupUser for new user &gt; should use GOOGLE_CLOUD_PROJECT when set and onboard a new paid user" time="0.001719006">
        </testcase>
        <testcase classname="src/code_assist/setup.test.ts" name="setupUser for new user &gt; should onboard a new free user when GOOGLE_CLOUD_PROJECT is not set" time="0.003276915">
        </testcase>
        <testcase classname="src/code_assist/setup.test.ts" name="setupUser for new user &gt; should use GOOGLE_CLOUD_PROJECT when onboard response has no project ID" time="0.000738595">
        </testcase>
        <testcase classname="src/code_assist/setup.test.ts" name="setupUser for new user &gt; should throw ProjectIdRequiredError when no project ID is available" time="0.000518408">
        </testcase>
    </testsuite>
    <testsuite name="src/core/client.test.ts" timestamp="2025-10-05T22:46:17.148Z" hostname="uby" tests="70" failures="4" errors="0" skipped="1" time="1.026471447">
        <testcase classname="src/core/client.test.ts" name="findIndexAfterFraction &gt; should throw an error for non-positive numbers" time="0.002214121">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="findIndexAfterFraction &gt; should throw an error for a fraction greater than or equal to 1" time="0.000231959">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="findIndexAfterFraction &gt; should handle a fraction in the middle" time="0.000240294">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="findIndexAfterFraction &gt; should handle a fraction that results in the last index" time="0.0000978">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="findIndexAfterFraction &gt; should handle an empty history" time="0.00007534">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="findIndexAfterFraction &gt; should handle a history with only one item" time="0.000074628">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="findIndexAfterFraction &gt; should handle history with weird parts" time="0.000115684">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; generateEmbedding &gt; should call embedContent with correct parameters and return embeddings" time="0.020823339">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; generateEmbedding &gt; should return an empty array if an empty array is passed" time="0.007014411">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; generateEmbedding &gt; should throw an error if API response has no embeddings array" time="0.00827957">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; generateEmbedding &gt; should throw an error if API response has an empty embeddings array" time="0.010977675">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; generateEmbedding &gt; should throw an error if API returns a mismatched number of embeddings" time="0.006926891">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; generateEmbedding &gt; should throw an error if any embedding has nullish values" time="0.00835019">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; generateEmbedding &gt; should throw an error if any embedding has an empty values array" time="0.007903765">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; generateEmbedding &gt; should propagate errors from the API call" time="0.00862599">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; generateJson &gt; should call generateContent with the correct parameters" time="0.010905693">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; generateJson &gt; should allow overriding model and config" time="0">
            <skipped/>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; addHistory &gt; should call chat.addHistory with the provided content" time="0.009840584">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; resetChat &gt; should create a new chat session, clearing the old history" time="0.013822512">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; when compression inflates the token count &gt; uses the truncated history for compression" time="0.006180721">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; when compression inflates the token count &gt; allows compression to be forced/manual after a failure" time="0.027523059">
            <failure message="expected { originalTokenCount: 1000, …(2) } to deeply equal { compressionStatus: 1, …(3) }" type="AssertionError">
AssertionError: expected { originalTokenCount: 1000, …(2) } to deeply equal { compressionStatus: 1, …(3) }

- Expected
+ Received

  {
    &quot;compressionStatus&quot;: 1,
-   &quot;model&quot;: &quot;test-model&quot;,
    &quot;newTokenCount&quot;: 1000,
    &quot;originalTokenCount&quot;: 1000,
  }

 ❯ src/core/client.test.ts:614:24
            </failure>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; when compression inflates the token count &gt; yields the result even if the compression inflated the tokens" time="0.01587223">
            <failure message="expected { originalTokenCount: 1000, …(2) } to deeply equal { compressionStatus: 2, …(3) }" type="AssertionError">
AssertionError: expected { originalTokenCount: 1000, …(2) } to deeply equal { compressionStatus: 2, …(3) }

- Expected
+ Received

  {
    &quot;compressionStatus&quot;: 2,
-   &quot;model&quot;: &quot;test-model&quot;,
    &quot;newTokenCount&quot;: 5000,
    &quot;originalTokenCount&quot;: 1000,
  }

 ❯ src/core/client.test.ts:626:24
            </failure>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; when compression inflates the token count &gt; does not manipulate the source chat" time="0.009875219">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; when compression inflates the token count &gt; restores the history back to the original" time="0.008379303">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; when compression inflates the token count &gt; will not attempt to compress context after a failure" time="0.009863727">
            <failure message="expected { originalTokenCount: +0, …(2) } to deeply equal { compressionStatus: 4, …(3) }" type="AssertionError">
AssertionError: expected { originalTokenCount: +0, …(2) } to deeply equal { compressionStatus: 4, …(3) }

- Expected
+ Received

  {
    &quot;compressionStatus&quot;: 4,
-   &quot;model&quot;: &quot;test-model&quot;,
    &quot;newTokenCount&quot;: 0,
    &quot;originalTokenCount&quot;: 0,
  }

 ❯ src/core/client.test.ts:676:24
            </failure>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; attempts to compress with a maxOutputTokens set to the original token count" time="0.022227984">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; should not trigger summarization if token count is below threshold" time="0.009790792">
            <failure message="expected { originalTokenCount: 699, …(2) } to deeply equal { compressionStatus: 4, …(3) }" type="AssertionError">
AssertionError: expected { originalTokenCount: 699, …(2) } to deeply equal { compressionStatus: 4, …(3) }

- Expected
+ Received

  {
    &quot;compressionStatus&quot;: 4,
-   &quot;model&quot;: &quot;test-model&quot;,
    &quot;newTokenCount&quot;: 699,
    &quot;originalTokenCount&quot;: 699,
  }

 ❯ src/core/client.test.ts:729:22
            </failure>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; logs a telemetry event when compressing" time="0.008756501">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; should trigger summarization if token count is at threshold with contextPercentageThreshold setting" time="0.010575442">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; should not compress across a function call response" time="0.013066024">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; should always trigger summarization when force is true, regardless of token count" time="0.014962399">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; tryCompressChat &gt; should use current model from config for token counting after sendMessage" time="0.009180875">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; injects a plan mode reminder before user queries when approval mode is PLAN" time="0.013620519">
            <system-out>
[Agent] Starting new prompt: prompt-p...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; emits a compression event when the context was automatically compressed" time="0.012184535">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

[Agent] Model started responding...

[Agent] Model finished responding (1 chunks)

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; does not emit a compression event when the status is 2" time="0.009988006">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

[Agent] Model started responding...

[Agent] Model finished responding (1 chunks)

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; does not emit a compression event when the status is 4" time="0.022937025">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

[Agent] Model started responding...

[Agent] Model finished responding (1 chunks)

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; does not emit a compression event when the status is 3" time="0.008773432">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

[Agent] Model started responding...

[Agent] Model finished responding (1 chunks)

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; should include editor context when ideMode is enabled" time="0.016774046">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

[Agent] Model started responding...

[Agent] Model finished responding (1 chunks)

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; should not add context if ideMode is enabled but no open files" time="0.011237836">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

[Agent] Model started responding...

[Agent] Model finished responding (1 chunks)

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; should add context if ideMode is enabled and there is one active file" time="0.01721989">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

[Agent] Model started responding...

[Agent] Model finished responding (1 chunks)

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; should add context if ideMode is enabled and there are open files but no active file" time="0.027020981">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

[Agent] Model started responding...

[Agent] Model finished responding (1 chunks)

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; should return the turn instance after the stream is complete" time="0.022024769">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

[Agent] Model started responding...

[Agent] Model finished responding (1 chunks)

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; should stop infinite loop after MAX_TURNS when nextSpeaker always returns model" time="0.025787863">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

[Agent] Model started responding...

[Agent] Model finished responding (1 chunks)

[Agent] Turn 2 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 3 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 4 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 5 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 6 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 7 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 8 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 9 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 10 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 11 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 12 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 13 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 14 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 15 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 16 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 17 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 18 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 19 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 20 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 21 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 22 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 23 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 24 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 25 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 26 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 27 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 28 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 29 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 30 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 31 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 32 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 33 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 34 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 35 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 36 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 37 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 38 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 39 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 40 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 41 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 42 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 43 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 44 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 45 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 46 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 47 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 48 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 49 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 50 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 51 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 52 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 53 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 54 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 55 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 56 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 57 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 58 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 59 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 60 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 61 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 62 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 63 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 64 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 65 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 66 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 67 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 68 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 69 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 70 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 71 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 72 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 73 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 74 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 75 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 76 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 77 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 78 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 79 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 80 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 81 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 82 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 83 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 84 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 85 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 86 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 87 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 88 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 89 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 90 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 91 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 92 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 93 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 94 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 95 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 96 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 97 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 98 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 99 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 100 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 101 (model: test-model)

checkNextSpeaker called 100 times - infinite loop protection worked

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; should yield MaxSessionTurns and stop when session turn limit is reached" time="0.023814215">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

[Agent] Model started responding...

[Agent] Model finished responding (1 chunks)

[Agent] Turn 2 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 3 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 4 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 5 (model: test-model)

[Agent] Sending request to model...

[Agent] Starting new prompt: prompt-i...
[Agent] Turn 6 (model: test-model)

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; should respect MAX_TURNS limit even when turns parameter is set to a large value" time="0.032277605">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

[Agent] Model started responding...

[Agent] Model finished responding (1 chunks)

[Agent] Turn 2 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 3 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 4 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 5 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 6 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 7 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 8 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 9 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 10 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 11 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 12 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 13 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 14 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 15 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 16 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 17 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 18 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 19 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 20 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 21 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 22 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 23 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 24 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 25 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 26 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 27 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 28 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 29 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 30 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 31 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 32 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 33 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 34 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 35 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 36 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 37 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 38 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 39 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 40 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 41 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 42 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 43 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 44 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 45 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 46 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 47 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 48 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 49 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 50 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 51 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 52 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 53 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 54 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 55 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 56 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 57 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 58 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 59 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 60 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 61 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 62 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 63 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 64 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 65 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 66 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 67 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 68 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 69 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 70 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 71 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 72 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 73 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 74 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 75 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 76 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 77 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 78 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 79 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 80 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 81 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 82 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 83 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 84 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 85 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 86 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 87 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 88 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 89 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 90 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 91 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 92 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 93 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 94 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 95 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 96 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 97 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 98 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 99 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 100 (model: test-model)

[Agent] Sending request to model...

[Agent] Turn 101 (model: test-model)

Infinite loop protection working: checkNextSpeaker called 100 times, 1 events generated (properly bounded by MAX_TURNS)

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; Editor context delta &gt; &apos;sends delta when active file changes&apos;" time="0.025076438">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

[Agent] Model started responding...

[Agent] Model finished responding (1 chunks)

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; Editor context delta &gt; &apos;sends delta when cursor line changes&apos;" time="0.022767752">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; Editor context delta &gt; &apos;sends delta when cursor character cha…&apos;" time="0.012839185">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; Editor context delta &gt; &apos;sends delta when selected text changes&apos;" time="0.014222191">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; Editor context delta &gt; &apos;sends delta when selected text is add…&apos;" time="0.012852459">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; Editor context delta &gt; &apos;sends delta when selected text is rem…&apos;" time="0.029576654">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; Editor context delta &gt; &apos;does not send context when nothing ch…&apos;" time="0.014870018">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; Editor context delta &gt; sends full context when history is cleared, even if editor state is unchanged" time="0.018590323">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; IDE context with pending tool calls &gt; should NOT add IDE context when a tool call is pending" time="0.015642896">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

[Agent] Model started responding...

[Agent] Model finished responding (1 chunks)

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; IDE context with pending tool calls &gt; should add IDE context when no tool call is pending" time="0.012862598">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

[Agent] Model started responding...

[Agent] Model finished responding (1 chunks)

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; IDE context with pending tool calls &gt; should send the latest IDE context on the next message after a skipped context" time="0.013493284">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

[Agent] Model started responding...

[Agent] Model finished responding (1 chunks)

[Agent] Starting new prompt: prompt-i...
[Agent] Turn 2 (model: test-model)

[Agent] Sending request to model...

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; IDE context with pending tool calls &gt; should send a context DELTA on the next message after a skipped context" time="0.019385342">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

[Agent] Model started responding...

[Agent] Model finished responding (1 chunks)

[Agent] Starting new prompt: prompt-i...
[Agent] Turn 2 (model: test-model)

[Agent] Sending request to model...

[Agent] Starting new prompt: prompt-i...
[Agent] Turn 3 (model: test-model)

[Agent] Sending request to model...

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; should not call checkNextSpeaker when turn.run() yields an error" time="0.017856186">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

[Agent] Error occurred: test error

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; should not call checkNextSpeaker when turn.run() yields a value then an error" time="0.022972119">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

[Agent] Model started responding...

[Agent] Error occurred: test error

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; does not run loop checks when skipLoopDetection is true" time="0.022170007">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

[Agent] Model started responding...

[Agent] Model finished responding (2 chunks)

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; sendMessageStream &gt; runs loop checks when skipLoopDetection is false" time="0.02368646">
            <system-out>
[Agent] Starting new prompt: prompt-i...
[Agent] Turn 1 (model: test-model)

[Agent] Sending request to model...

[Agent] Model started responding...

[Agent] Model finished responding (2 chunks)

            </system-out>
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; generateContent &gt; should call generateContent with the correct parameters" time="0.015621737">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; generateContent &gt; should use current model from config for content generation" time="0.024638689">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; handleFlashFallback &gt; should use current model from config when checking for fallback" time="0.01595329">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; setHistory &gt; should strip thought signatures when stripThoughts is true" time="0.031173856">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; setHistory &gt; should not strip thought signatures when stripThoughts is false" time="0.01940055">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; initialize &gt; should accept extraHistory parameter and pass it to startChat" time="0.030811526">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; initialize &gt; should use empty array when no extraHistory is provided" time="0.01674316">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; reinitialize &gt; should reinitialize with preserved user history" time="0.016292367">
        </testcase>
        <testcase classname="src/core/client.test.ts" name="Gemini Client (client.ts) &gt; reinitialize &gt; should not throw error when chat is not initialized" time="0.026029309">
        </testcase>
    </testsuite>
    <testsuite name="src/core/contentGenerator.test.ts" timestamp="2025-10-05T22:46:17.158Z" hostname="uby" tests="10" failures="0" errors="0" skipped="0" time="0.015988264">
        <testcase classname="src/core/contentGenerator.test.ts" name="createContentGenerator &gt; should create a CodeAssistContentGenerator" time="0.002334925">
        </testcase>
        <testcase classname="src/core/contentGenerator.test.ts" name="createContentGenerator &gt; should create a GoogleGenAI content generator" time="0.002580138">
        </testcase>
        <testcase classname="src/core/contentGenerator.test.ts" name="createContentGenerator &gt; should create a GoogleGenAI content generator with client install id logging disabled" time="0.00040048">
        </testcase>
        <testcase classname="src/core/contentGenerator.test.ts" name="createContentGeneratorConfig &gt; should configure for Gemini using GEMINI_API_KEY when set" time="0.003686252">
        </testcase>
        <testcase classname="src/core/contentGenerator.test.ts" name="createContentGeneratorConfig &gt; should not configure for Gemini if GEMINI_API_KEY is empty" time="0.000926913">
        </testcase>
        <testcase classname="src/core/contentGenerator.test.ts" name="createContentGeneratorConfig &gt; should configure for Vertex AI using GOOGLE_API_KEY when set" time="0.001783896">
        </testcase>
        <testcase classname="src/core/contentGenerator.test.ts" name="createContentGeneratorConfig &gt; should configure for Vertex AI using GCP project and location when set" time="0.000588428">
        </testcase>
        <testcase classname="src/core/contentGenerator.test.ts" name="createContentGeneratorConfig &gt; should not configure for Vertex AI if required env vars are empty" time="0.000738334">
        </testcase>
        <testcase classname="src/core/contentGenerator.test.ts" name="createContentGeneratorConfig &gt; should retain the config model for OpenAI when OPENAI_MODEL is not set" time="0.000471271">
        </testcase>
        <testcase classname="src/core/contentGenerator.test.ts" name="createContentGeneratorConfig &gt; should prefer OPENAI_MODEL when provided" time="0.001036866">
        </testcase>
    </testsuite>
    <testsuite name="src/core/coreToolScheduler.test.ts" timestamp="2025-10-05T22:46:17.158Z" hostname="uby" tests="24" failures="0" errors="0" skipped="0" time="0.254353602">
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler &gt; should cancel a tool call if the signal is aborted before confirmation" time="0.030926749">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler &gt; plan mode enforcement &gt; returns plan reminder and skips execution for edit tools" time="0.002202941">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler &gt; plan mode enforcement &gt; allows read tools to execute in plan mode" time="0.012077478">
            <system-out>
[Tool] Starting: read_file (plan-2...)

[Tool] Completed: read_file in 1ms
[Tool] Success: read_file

            </system-out>
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler &gt; plan mode enforcement &gt; enforces shell command restrictions in plan mode" time="0.016610364">
            <system-out>
[Tool] Starting: run_shell_command (plan-she...)
[Tool] Args: {
  &quot;command&quot;: &quot;ls -la&quot;
}

[Tool] Completed: run_shell_command in 0ms
[Tool] Success: run_shell_command

            </system-out>
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler &gt; getToolSuggestion &gt; should suggest the top N closest tool names for a typo" time="0.000988597">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler with payload &gt; should update args and diff and execute tool when payload is provided" time="0.006560633">
            <system-out>
[Tool] Starting: mockModifiableTool (1...)
[Tool] Args: {
  &quot;newContent&quot;: &quot;final version&quot;
}

[Tool] Completed: mockModifiableTool in 0ms
[Tool] Success: mockModifiableTool

            </system-out>
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="convertToFunctionResponse &gt; should handle simple string llmContent" time="0.00040636">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="convertToFunctionResponse &gt; should handle llmContent as a single Part with text" time="0.000307127">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="convertToFunctionResponse &gt; should handle llmContent as a PartListUnion array with a single text Part" time="0.0006494">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="convertToFunctionResponse &gt; should handle llmContent with inlineData" time="0.000196313">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="convertToFunctionResponse &gt; should handle llmContent with fileData" time="0.000129789">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="convertToFunctionResponse &gt; should handle llmContent as an array of multiple Parts (text and inlineData)" time="0.000171797">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="convertToFunctionResponse &gt; should handle llmContent as an array with a single inlineData Part" time="0.000206882">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="convertToFunctionResponse &gt; should handle llmContent as a generic Part (not text, inlineData, or fileData)" time="0.000107198">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="convertToFunctionResponse &gt; should handle empty string llmContent" time="0.000082753">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="convertToFunctionResponse &gt; should handle llmContent as an empty array" time="0.000077924">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="convertToFunctionResponse &gt; should handle llmContent as a Part with undefined inlineData/fileData/text" time="0.000210259">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler edit cancellation &gt; should preserve diff when an edit is cancelled" time="0.002804231">
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler YOLO mode &gt; should execute tool requiring confirmation directly without waiting" time="0.003618416">
            <system-out>
[Tool] Starting: mockTool (1...)
[Tool] Args: {
  &quot;param&quot;: &quot;value&quot;
}

[Tool] Completed: mockTool in 0ms
[Tool] Success: mockTool

            </system-out>
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler cancellation during executing with live output &gt; sets status to cancelled and preserves last output" time="0.103876421">
            <system-out>
[Tool] Starting: stream-tool (1...)
[Tool] Args: {
  &quot;id&quot;: &quot;x&quot;
}

[Tool] Completed: stream-tool in 50ms
[Tool] Cancelled: stream-tool

            </system-out>
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler request queueing &gt; should queue a request if another is running" time="0.013247299">
            <system-out>
[Tool] Starting: mockTool (1...)
[Tool] Args: {
  &quot;a&quot;: 1
}

[Tool] Completed: mockTool in 11ms
[Tool] Success: mockTool

[Tool] Starting: mockTool (2...)
[Tool] Args: {
  &quot;b&quot;: 2
}

[Tool] Completed: mockTool in 1ms
[Tool] Success: mockTool

            </system-out>
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler request queueing &gt; should auto-approve a tool call if it is on the allowedTools list" time="0.002053765">
            <system-out>
[Tool] Starting: mockTool (1...)
[Tool] Args: {
  &quot;param&quot;: &quot;value&quot;
}

[Tool] Completed: mockTool in 0ms
[Tool] Success: mockTool

            </system-out>
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler request queueing &gt; should handle two synchronous calls to schedule" time="0.001444179">
            <system-out>
[Tool] Starting: mockTool (1...)
[Tool] Args: {
  &quot;a&quot;: 1
}

[Tool] Completed: mockTool in 0ms
[Tool] Success: mockTool

[Tool] Starting: mockTool (2...)
[Tool] Args: {
  &quot;b&quot;: 2
}

[Tool] Completed: mockTool in 0ms
[Tool] Success: mockTool

            </system-out>
        </testcase>
        <testcase classname="src/core/coreToolScheduler.test.ts" name="CoreToolScheduler request queueing &gt; should auto-approve remaining tool calls when first tool call is approved with ProceedAlways" time="0.052986582">
            <system-out>
[Tool] Starting: testApprovalTool (1...)
[Tool] Args: {
  &quot;id&quot;: &quot;first&quot;
}
[Tool] Starting: testApprovalTool (2...)
[Tool] Args: {
  &quot;id&quot;: &quot;second&quot;
}
[Tool] Starting: testApprovalTool (3...)
[Tool] Args: {
  &quot;id&quot;: &quot;third&quot;
}
[Tool] Completed: testApprovalTool in 1ms
[Tool] Success: testApprovalTool
[Tool] Completed: testApprovalTool in 0ms
[Tool] Success: testApprovalTool
[Tool] Completed: testApprovalTool in 0ms
[Tool] Success: testApprovalTool

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="src/core/geminiChat.test.ts" timestamp="2025-10-05T22:46:17.159Z" hostname="uby" tests="31" failures="0" errors="0" skipped="0" time="5.536399232">
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessage &gt; should retain the initial user message when an automatic function call occurs" time="0.003135664">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessage &gt; should throw an error when attempting to add a user turn after another user turn" time="0.001376123">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessage &gt; should preserve text parts that are in the same response as a thought" time="0.00037873">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessage &gt; should add a placeholder model turn when a tool call is followed by an empty model response" time="0.000491909">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessage &gt; should call generateContent with the correct parameters" time="0.00197001">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessageStream &gt; should succeed if a tool call is followed by an empty part" time="0.001938722">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessageStream &gt; should fail if the stream ends with an empty part and has no finishReason" time="1.503515411">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessageStream &gt; should succeed if the stream ends with an invalid part but has a finishReason and contained a valid part" time="0.00073593">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessageStream &gt; should not consolidate text into a part that also contains a functionCall" time="0.000491969">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessageStream &gt; should consolidate subsequent text chunks after receiving an empty text chunk" time="0.000444592">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessageStream &gt; should consolidate adjacent text parts that arrive in separate stream chunks" time="0.000435094">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessageStream &gt; should preserve text parts that stream in the same chunk as a thought" time="0.000364954">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessageStream &gt; should add a placeholder model turn when a tool call is followed by an empty stream response" time="0.000424745">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessageStream &gt; should call generateContentStream with the correct parameters" time="0.000479927">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; recordHistory &gt; should consolidate all consecutive model turns into a single turn" time="0.00031927">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; recordHistory &gt; should add a placeholder model turn when a tool call is followed by an empty response" time="0.000278474">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; recordHistory &gt; should add user input and a single model output to history" time="0.000271682">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; recordHistory &gt; should consolidate adjacent text parts from multiple content objects" time="0.000227872">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; recordHistory &gt; should add an empty placeholder turn if modelOutput is empty" time="0.000210619">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; recordHistory &gt; should preserve model outputs with undefined or empty parts arrays" time="0.00024374">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; recordHistory &gt; should not consolidate content with different roles" time="0.000254841">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; addHistory &gt; should add a new content item to the history" time="0.000251645">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; addHistory &gt; should add multiple items correctly" time="0.000253428">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessageStream with retries &gt; should yield a RETRY event when an invalid stream is encountered" time="0.501971287">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessageStream with retries &gt; should retry on invalid content, succeed, and report metrics" time="0.502859399">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; sendMessageStream with retries &gt; should fail after all retries on persistent invalid content and report metrics" time="1.503691709">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; should correctly retry and append to an existing history mid-conversation" time="0.501550231">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; concurrency control &gt; should queue a subsequent sendMessage call until the first one completes" time="0.001711944">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; should retry if the model returns a completely empty stream (no chunks)" time="0.500591429">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; should queue a subsequent sendMessageStream call until the first stream is fully consumed" time="0.000740789">
        </testcase>
        <testcase classname="src/core/geminiChat.test.ts" name="GeminiChat &gt; should discard valid partial content from a failed attempt upon retry" time="0.502893744">
        </testcase>
    </testsuite>
    <testsuite name="src/core/geminiRequest.test.ts" timestamp="2025-10-05T22:46:17.160Z" hostname="uby" tests="12" failures="0" errors="0" skipped="0" time="0.004501138">
        <testcase classname="src/core/geminiRequest.test.ts" name="partListUnionToString &gt; should return the string value if the input is a string" time="0.001514549">
        </testcase>
        <testcase classname="src/core/geminiRequest.test.ts" name="partListUnionToString &gt; should return a concatenated string if the input is an array of strings" time="0.000178359">
        </testcase>
        <testcase classname="src/core/geminiRequest.test.ts" name="partListUnionToString &gt; should handle videoMetadata" time="0.00009243">
        </testcase>
        <testcase classname="src/core/geminiRequest.test.ts" name="partListUnionToString &gt; should handle thought" time="0.000087552">
        </testcase>
        <testcase classname="src/core/geminiRequest.test.ts" name="partListUnionToString &gt; should handle codeExecutionResult" time="0.000086971">
        </testcase>
        <testcase classname="src/core/geminiRequest.test.ts" name="partListUnionToString &gt; should handle executableCode" time="0.000080459">
        </testcase>
        <testcase classname="src/core/geminiRequest.test.ts" name="partListUnionToString &gt; should handle fileData" time="0.000095918">
        </testcase>
        <testcase classname="src/core/geminiRequest.test.ts" name="partListUnionToString &gt; should handle functionCall" time="0.000085157">
        </testcase>
        <testcase classname="src/core/geminiRequest.test.ts" name="partListUnionToString &gt; should handle functionResponse" time="0.000093563">
        </testcase>
        <testcase classname="src/core/geminiRequest.test.ts" name="partListUnionToString &gt; should handle inlineData" time="0.000073005">
        </testcase>
        <testcase classname="src/core/geminiRequest.test.ts" name="partListUnionToString &gt; should handle text" time="0.000073917">
        </testcase>
        <testcase classname="src/core/geminiRequest.test.ts" name="partListUnionToString &gt; should return an empty string for an unknown part type" time="0.000089897">
        </testcase>
    </testsuite>
    <testsuite name="src/core/logger.test.ts" timestamp="2025-10-05T22:46:17.161Z" hostname="uby" tests="40" failures="0" errors="0" skipped="0" time="0.113465208">
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; initialize &gt; should create .gemini directory and an empty log file if none exist" time="0.013722036">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; initialize &gt; should load existing logs and set correct messageId for the current session" time="0.003388331">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; initialize &gt; should set messageId to 0 for a new session if log file exists but has no logs for current session" time="0.004869839">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; initialize &gt; should be idempotent" time="0.005761937">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; initialize &gt; should handle invalid JSON in log file by backing it up and starting fresh" time="0.00617986">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; initialize &gt; should handle non-array JSON in log file by backing it up and starting fresh" time="0.002125688">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; logMessage &gt; should append a message to the log file and update in-memory logs" time="0.003749759">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; logMessage &gt; should correctly increment messageId for subsequent messages in the same session" time="0.004121446">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; logMessage &gt; should handle logger not initialized" time="0.004023004">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; logMessage &gt; should simulate concurrent writes from different logger instances to the same file" time="0.006077861">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; logMessage &gt; should not throw, not increment messageId, and log error if writing to file fails" time="0.002617637">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; getPreviousUserMessages &gt; should retrieve all user messages from logs, sorted newest first" time="0.00317666">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; getPreviousUserMessages &gt; should return empty array if no user messages exist" time="0.001067142">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; getPreviousUserMessages &gt; should return empty array if logger not initialized" time="0.000929788">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; saveCheckpoint &gt; should save a checkpoint" time="0.000935038">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; saveCheckpoint &gt; should save a checkpoint" time="0.000784079">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; saveCheckpoint &gt; should save a checkpoint" time="0.000972207">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; saveCheckpoint &gt; should save a checkpoint" time="0.000862424">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; saveCheckpoint &gt; should not throw if logger is not initialized" time="0.001481137">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; loadCheckpoint &gt; should load from a checkpoint" time="0.003485401">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; loadCheckpoint &gt; should load from a checkpoint" time="0.001448416">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; loadCheckpoint &gt; should load from a checkpoint" time="0.001835282">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; loadCheckpoint &gt; should load from a checkpoint" time="0.001450671">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; loadCheckpoint &gt; should return an empty array if a tagged checkpoint file does not exist" time="0.001616467">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; loadCheckpoint &gt; should return an empty array if the checkpoint file does not exist" time="0.001812499">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; loadCheckpoint &gt; should return an empty array if the file contains invalid JSON" time="0.003145773">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; loadCheckpoint &gt; should return an empty array if logger is not initialized" time="0.002255087">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; deleteCheckpoint &gt; should delete the specified checkpoint file and return true" time="0.002601848">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; deleteCheckpoint &gt; should delete both new and old checkpoint files if they exist" time="0.002071858">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; deleteCheckpoint &gt; should return false if the checkpoint file does not exist" time="0.001158962">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; deleteCheckpoint &gt; should re-throw an error if file deletion fails for reasons other than not existing" time="0.002260417">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; deleteCheckpoint &gt; should return false if logger is not initialized" time="0.001068474">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; checkpointExists &gt; should return true if the checkpoint file exists" time="0.000913769">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; checkpointExists &gt; should return false if the checkpoint file does not exist" time="0.000806781">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; checkpointExists &gt; should throw an error if logger is not initialized" time="0.00191031">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; checkpointExists &gt; should re-throw an error if fs.access fails for reasons other than not existing" time="0.003363967">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; Backward compatibility &gt; should load from a checkpoint with a raw special character tag" time="0.002181982">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; close &gt; should reset logger state" time="0.002561213">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; Model Switch Logging &gt; should log model switch events correctly" time="0.001727242">
        </testcase>
        <testcase classname="src/core/logger.test.ts" name="Logger &gt; Model Switch Logging &gt; should handle multiple model switch events" time="0.004348075">
        </testcase>
    </testsuite>
    <testsuite name="src/core/nonInteractiveToolExecutor.test.ts" timestamp="2025-10-05T22:46:17.162Z" hostname="uby" tests="6" failures="0" errors="0" skipped="0" time="0.035182032">
        <testcase classname="src/core/nonInteractiveToolExecutor.test.ts" name="executeToolCall &gt; should execute a tool successfully" time="0.027985133">
            <system-out>
[Tool] Starting: testTool (call1...)
[Tool] Args: {
  &quot;param1&quot;: &quot;value1&quot;
}

[Tool] Completed: testTool in 1ms
[Tool] Success: testTool

            </system-out>
        </testcase>
        <testcase classname="src/core/nonInteractiveToolExecutor.test.ts" name="executeToolCall &gt; should return an error if tool is not found" time="0.000920952">
        </testcase>
        <testcase classname="src/core/nonInteractiveToolExecutor.test.ts" name="executeToolCall &gt; should return an error if tool validation fails" time="0.000538796">
        </testcase>
        <testcase classname="src/core/nonInteractiveToolExecutor.test.ts" name="executeToolCall &gt; should return an error if tool execution fails" time="0.001236755">
            <system-out>
[Tool] Starting: testTool (call4...)
[Tool] Args: {
  &quot;param1&quot;: &quot;value1&quot;
}

[Tool] Completed: testTool in 0ms
[Tool] Error: testTool - Execution failed

            </system-out>
        </testcase>
        <testcase classname="src/core/nonInteractiveToolExecutor.test.ts" name="executeToolCall &gt; should return an unhandled exception error if execution throws" time="0.001908376">
            <system-out>
[Tool] Starting: testTool (call5...)
[Tool] Args: {
  &quot;param1&quot;: &quot;value1&quot;
}

[Tool] Exception: testTool after 1ms - Something went very wrong

            </system-out>
        </testcase>
        <testcase classname="src/core/nonInteractiveToolExecutor.test.ts" name="executeToolCall &gt; should correctly format llmContent with inlineData" time="0.001444459">
            <system-out>
[Tool] Starting: testTool (call6...)

[Tool] Completed: testTool in 0ms
[Tool] Success: testTool

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="src/core/prompts.test.ts" timestamp="2025-10-05T22:46:17.163Z" hostname="uby" tests="40" failures="0" errors="0" skipped="0" time="0.020572976">
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; should return the base prompt when no userMemory is provided" time="0.004421401">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; should return the base prompt when userMemory is empty string" time="0.001052585">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; should return the base prompt when userMemory is whitespace only" time="0.000358562">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; should append userMemory with separator when provided" time="0.000470489">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; should include sandbox-specific instructions when SANDBOX env var is set" time="0.000279055">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; should include seatbelt-specific instructions when SANDBOX env var is &quot;sandbox-exec&quot;" time="0.000286109">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; should include non-sandbox instructions when SANDBOX env var is not set" time="0.000266592">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; should include git instructions when in a git repo" time="0.000221218">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; should not include git instructions when not in a git repo" time="0.000209587">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_SYSTEM_MD environment variable &gt; should use default prompt when GEMINI_SYSTEM_MD is &quot;false&quot;" time="0.000441927">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_SYSTEM_MD environment variable &gt; should use default prompt when GEMINI_SYSTEM_MD is &quot;0&quot;" time="0.000209237">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_SYSTEM_MD environment variable &gt; should throw error if GEMINI_SYSTEM_MD points to a non-existent file" time="0.000699453">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_SYSTEM_MD environment variable &gt; should read from default path when GEMINI_SYSTEM_MD is &quot;true&quot;" time="0.000961857">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_SYSTEM_MD environment variable &gt; should read from default path when GEMINI_SYSTEM_MD is &quot;1&quot;" time="0.000231097">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_SYSTEM_MD environment variable &gt; should read from custom path when GEMINI_SYSTEM_MD provides one, preserving case" time="0.000241937">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_SYSTEM_MD environment variable &gt; should expand tilde in custom path when GEMINI_SYSTEM_MD is set" time="0.000334518">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_WRITE_SYSTEM_MD environment variable &gt; should not write to file when GEMINI_WRITE_SYSTEM_MD is &quot;false&quot;" time="0.001245972">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_WRITE_SYSTEM_MD environment variable &gt; should not write to file when GEMINI_WRITE_SYSTEM_MD is &quot;0&quot;" time="0.000225256">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_WRITE_SYSTEM_MD environment variable &gt; should write to default path when GEMINI_WRITE_SYSTEM_MD is &quot;true&quot;" time="0.000989609">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_WRITE_SYSTEM_MD environment variable &gt; should write to default path when GEMINI_WRITE_SYSTEM_MD is &quot;1&quot;" time="0.000361729">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_WRITE_SYSTEM_MD environment variable &gt; should write to custom path when GEMINI_WRITE_SYSTEM_MD provides one" time="0.000324149">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_WRITE_SYSTEM_MD environment variable &gt; should expand tilde in custom path when GEMINI_WRITE_SYSTEM_MD is set" time="0.000393317">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Core System Prompt (prompts.ts) &gt; GEMINI_WRITE_SYSTEM_MD environment variable &gt; should expand tilde in custom path when GEMINI_WRITE_SYSTEM_MD is just ~" time="0.000247648">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="URL matching with trailing slash compatibility &gt; should match URLs with and without trailing slash" time="0.000823702">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="URL matching with trailing slash compatibility &gt; should not match when URLs are different" time="0.000210639">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Model-specific tool call formats &gt; should use XML format for qwen3-coder model" time="0.00047086">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Model-specific tool call formats &gt; should use JSON format for qwen-vl model" time="0.00060598">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Model-specific tool call formats &gt; should use bracket format for generic models" time="0.000516334">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Model-specific tool call formats &gt; should use bracket format when no model is specified" time="0.00033548">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Model-specific tool call formats &gt; should preserve model-specific formats with user memory" time="0.000240214">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="Model-specific tool call formats &gt; should preserve model-specific formats with sandbox environment" time="0.000241867">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="getCustomSystemPrompt &gt; should handle string custom instruction without user memory" time="0.000185172">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="getCustomSystemPrompt &gt; should handle string custom instruction with user memory" time="0.000078585">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="getCustomSystemPrompt &gt; should handle Content object with parts array and user memory" time="0.000092561">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="getSubagentSystemReminder &gt; should format single agent type correctly" time="0.000187387">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="getSubagentSystemReminder &gt; should join multiple agent types with commas" time="0.00006484">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="getSubagentSystemReminder &gt; should handle empty array" time="0.000063327">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="getPlanModeSystemReminder &gt; should return plan mode system reminder with proper structure" time="0.000136782">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="getPlanModeSystemReminder &gt; should include workflow instructions" time="0.000097601">
        </testcase>
        <testcase classname="src/core/prompts.test.ts" name="getPlanModeSystemReminder &gt; should be deterministic" time="0.000060612">
        </testcase>
    </testsuite>
    <testsuite name="src/core/tokenLimits.test.ts" timestamp="2025-10-05T22:46:17.164Z" hostname="uby" tests="61" failures="0" errors="0" skipped="0" time="0.007553879">
        <testcase classname="src/core/tokenLimits.test.ts" name="normalize &gt; should lowercase and trim the model string" time="0.001461671">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="normalize &gt; should strip provider prefixes" time="0.000267454">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="normalize &gt; should handle pipe and colon separators" time="0.000104893">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="normalize &gt; should collapse whitespace to a single hyphen" time="0.000070009">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="normalize &gt; should remove date and version suffixes" time="0.000104874">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="normalize &gt; should remove quantization and numeric suffixes" time="0.000092441">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="normalize &gt; should handle a combination of normalization rules" time="0.000036677">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="normalize &gt; should handle empty or null input" time="0.000087472">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="normalize &gt; should remove preview suffixes" time="0.000050583">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="normalize &gt; should remove version numbers with dots when they are at the end" time="0.000056344">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Google Gemini &gt; should return the correct limit for Gemini 1.5 Pro" time="0.000137083">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Google Gemini &gt; should return the correct limit for Gemini 1.5 Flash" time="0.000072774">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Google Gemini &gt; should return the correct limit for Gemini 2.5 Pro" time="0.000066222">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Google Gemini &gt; should return the correct limit for Gemini 2.5 Flash" time="0.000077714">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Google Gemini &gt; should return the correct limit for Gemini 2.0 Flash with image generation" time="0.000085709">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Google Gemini &gt; should return the correct limit for Gemini 2.0 Flash" time="0.000074788">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; OpenAI &gt; should return the correct limit for o3-mini" time="0.000077183">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; OpenAI &gt; should return the correct limit for o3 models" time="0.000057787">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; OpenAI &gt; should return the correct limit for o4-mini" time="0.000063117">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; OpenAI &gt; should return the correct limit for gpt-4o-mini" time="0.000092591">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; OpenAI &gt; should return the correct limit for gpt-4o" time="0.000078285">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; OpenAI &gt; should return the correct limit for gpt-4.1-mini" time="0.000049562">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; OpenAI &gt; should return the correct limit for gpt-4.1 models" time="0.000042659">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; OpenAI &gt; should return the correct limit for gpt-4" time="0.000076221">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Anthropic Claude &gt; should return the correct limit for Claude 3.5 Sonnet" time="0.000085458">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Anthropic Claude &gt; should return the correct limit for Claude 3.7 Sonnet" time="0.000070099">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Anthropic Claude &gt; should return the correct limit for Claude Sonnet 4" time="0.000070851">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Anthropic Claude &gt; should return the correct limit for Claude Opus 4" time="0.00007579">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Alibaba Qwen &gt; should return the correct limit for qwen3-coder commercial models" time="0.000172418">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Alibaba Qwen &gt; should return the correct limit for qwen3-coder open source models" time="0.000137634">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Alibaba Qwen &gt; should return the correct limit for qwen3 2507 variants" time="0.000067665">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Alibaba Qwen &gt; should return the correct limit for qwen2.5-1m" time="0.000089735">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Alibaba Qwen &gt; should return the correct limit for qwen2.5" time="0.000083875">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Alibaba Qwen &gt; should return the correct limit for qwen-plus" time="0.000087191">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Alibaba Qwen &gt; should return the correct limit for qwen-flash" time="0.000073826">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Alibaba Qwen &gt; should return the correct limit for qwen-turbo" time="0.000087401">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; ByteDance Seed-OSS &gt; should return the correct limit for seed-oss" time="0.000055422">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Zhipu GLM &gt; should return the correct limit for glm-4.5v" time="0.000056925">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Zhipu GLM &gt; should return the correct limit for glm-4.5-air" time="0.000061674">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Zhipu GLM &gt; should return the correct limit for glm-4.5" time="0.000050493">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Other models &gt; should return the correct limit for deepseek-r1" time="0.000049792">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Other models &gt; should return the correct limit for deepseek-v3" time="0.00007564">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Other models &gt; should return the correct limit for deepseek-v3.1" time="0.000056445">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Other models &gt; should return the correct limit for kimi-k2-instruct" time="0.000032339">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Other models &gt; should return the correct limit for gpt-oss" time="0.000029555">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Other models &gt; should return the correct limit for llama-4-scout" time="0.000032751">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; Other models &gt; should return the correct limit for mistral-large-2" time="0.000029615">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; should return the default token limit for an unknown model" time="0.000042508">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; should return the correct limit for a complex model string" time="0.000035476">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit &gt; should handle case-insensitive model names" time="0.000045154">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit with output type &gt; Qwen models with output limits &gt; should return the correct output limit for qwen3-coder-plus" time="0.000056795">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit with output type &gt; Qwen models with output limits &gt; should return the correct output limit for qwen-vl-max-latest" time="0.000038911">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit with output type &gt; Default output limits &gt; should return the default output limit for unknown models" time="0.000103902">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit with output type &gt; Default output limits &gt; should return the default output limit for models without specific output patterns" time="0.000053539">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit with output type &gt; Input vs Output limits comparison &gt; should return different limits for input vs output for qwen3-coder-plus" time="0.000040244">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit with output type &gt; Input vs Output limits comparison &gt; should return different limits for input vs output for qwen-vl-max-latest" time="0.000044072">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit with output type &gt; Input vs Output limits comparison &gt; should return same default limits for unknown models" time="0.000044923">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit with output type &gt; Backward compatibility &gt; should default to input type when no type is specified" time="0.000091178">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit with output type &gt; Backward compatibility &gt; should work with explicit input type" time="0.000095256">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit with output type &gt; Model normalization with output limits &gt; should handle normalized model names for output limits" time="0.000099354">
        </testcase>
        <testcase classname="src/core/tokenLimits.test.ts" name="tokenLimit with output type &gt; Model normalization with output limits &gt; should handle complex model strings for output limits" time="0.000074758">
        </testcase>
    </testsuite>
    <testsuite name="src/core/turn.test.ts" timestamp="2025-10-05T22:46:17.166Z" hostname="uby" tests="14" failures="0" errors="0" skipped="0" time="0.011352879">
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; constructor &gt; should initialize pendingToolCalls and debugResponses" time="0.001608462">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; run &gt; should yield content events for text parts" time="0.002918012">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; run &gt; should yield tool_call_request events for function calls" time="0.001008935">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; run &gt; should yield UserCancelled event if signal is aborted" time="0.000640634">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; run &gt; should yield Error event and report if sendMessageStream throws" time="0.000735028">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; run &gt; should handle function calls with undefined name or args" time="0.000932323">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; run &gt; should yield finished event when response has finish reason" time="0.000301918">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; run &gt; should yield finished event for MAX_TOKENS finish reason" time="0.00021688">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; run &gt; should yield finished event for SAFETY finish reason" time="0.000316986">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; run &gt; should not yield finished event when there is no finish reason" time="0.000229484">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; run &gt; should handle multiple responses with different finish reasons" time="0.000254109">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; run &gt; should not crash when cancelled request has malformed error" time="0.000435154">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; run &gt; should yield a Retry event when it receives one from the chat stream" time="0.00023806">
        </testcase>
        <testcase classname="src/core/turn.test.ts" name="Turn &gt; getDebugResponses &gt; should return collected debug responses" time="0.000209046">
        </testcase>
    </testsuite>
    <testsuite name="src/config/config.test.ts" timestamp="2025-10-05T22:46:17.167Z" hostname="uby" tests="48" failures="0" errors="0" skipped="0" time="0.076810085">
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; initialize &gt; should throw an error if checkpointing is enabled and GitService fails" time="0.006702706">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; initialize &gt; should not throw an error if checkpointing is disabled and GitService fails" time="0.004178621">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; initialize &gt; should throw an error if initialized more than once" time="0.004821159">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; refreshAuth &gt; should refresh auth and update config" time="0.002818018">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; refreshAuth &gt; should preserve conversation history when refreshing auth" time="0.00159659">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; refreshAuth &gt; should handle case when no existing client is initialized" time="0.00170981">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; refreshAuth &gt; should strip thoughts when switching from GenAI to Vertex" time="0.001106374">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; refreshAuth &gt; should not strip thoughts when switching from Vertex to GenAI" time="0.000886448">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; setModel &gt; updates fallback model when content generator config is unavailable" time="0.002306332">
            <system-out>
Logger not initialized or session ID missing. Cannot log message.

            </system-out>
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Config constructor should store userMemory correctly" time="0.000558862">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Config constructor should default userMemory to empty string if not provided" time="0.000495225">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Config constructor should call setGeminiMdFilename with contextFileName if provided" time="0.000501577">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Config constructor should not call setGeminiMdFilename if contextFileName is not provided" time="0.000377548">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; should set default file filtering settings when not provided" time="0.001149093">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; should set custom file filtering settings when provided" time="0.000501807">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; should initialize WorkspaceContext with includeDirectories" time="0.001200609">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Config constructor should set telemetry to true when provided as true" time="0.000418814">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Config constructor should set telemetry to false when provided as false" time="0.000352612">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Config constructor should default telemetry to default value if not provided" time="0.000271492">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; should have a getFileService method that returns FileDiscoveryService" time="0.00106585">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Usage Statistics &gt; defaults usage statistics to enabled if not specified" time="0.01735498">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Usage Statistics &gt; sets usage statistics based on the provided value (enabled: true)" time="0.00108234">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Usage Statistics &gt; sets usage statistics based on the provided value (enabled: false)" time="0.000694683">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Telemetry Settings &gt; should return default telemetry target if not provided" time="0.000624283">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Telemetry Settings &gt; should return provided OTLP endpoint" time="0.000564964">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Telemetry Settings &gt; should return default OTLP endpoint if not provided" time="0.000441896">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Telemetry Settings &gt; should return provided logPrompts setting" time="0.000365285">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Telemetry Settings &gt; should return default logPrompts setting (true) if not provided" time="0.000394939">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Telemetry Settings &gt; should return default logPrompts setting (true) if telemetry object is not provided" time="0.000317396">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Telemetry Settings &gt; should return default telemetry target if telemetry object is not provided" time="0.000315052">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Telemetry Settings &gt; should return default OTLP endpoint if telemetry object is not provided" time="0.000466041">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Telemetry Settings &gt; should return provided OTLP protocol" time="0.000345057">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Telemetry Settings &gt; should return default OTLP protocol if not provided" time="0.000247687">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; Telemetry Settings &gt; should return default OTLP protocol if telemetry object is not provided" time="0.000260401">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; UseRipgrep Configuration &gt; should default useRipgrep to false when not provided" time="0.000863505">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; UseRipgrep Configuration &gt; should set useRipgrep to true when provided as true" time="0.000672012">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; UseRipgrep Configuration &gt; should set useRipgrep to false when explicitly provided as false" time="0.000551288">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; UseRipgrep Configuration &gt; should default useRipgrep to false when undefined" time="0.000758822">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="Server Config (config.ts) &gt; createToolRegistry &gt; should register a tool if coreTools contains an argument-specific pattern" time="0.00691584">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="setApprovalMode with folder trust &gt; should throw an error when setting YOLO mode in an untrusted folder" time="0.000722014">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="setApprovalMode with folder trust &gt; should throw an error when setting AUTO_EDIT mode in an untrusted folder" time="0.000446455">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="setApprovalMode with folder trust &gt; should NOT throw an error when setting DEFAULT mode in an untrusted folder" time="0.000268216">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="setApprovalMode with folder trust &gt; should NOT throw an error when setting PLAN mode in an untrusted folder" time="0.000170334">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="setApprovalMode with folder trust &gt; should NOT throw an error when setting any mode in a trusted folder" time="0.000228823">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="setApprovalMode with folder trust &gt; should NOT throw an error when setting any mode if trustedFolder is undefined" time="0.000227911">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="setApprovalMode with folder trust &gt; Model Switch Logging &gt; should log model switch when setModel is called with different model" time="0.001830924">
            <system-out>
Logger not initialized or session ID missing. Cannot log message.

            </system-out>
        </testcase>
        <testcase classname="src/config/config.test.ts" name="setApprovalMode with folder trust &gt; Model Switch Logging &gt; should not log when setModel is called with same model" time="0.001571584">
        </testcase>
        <testcase classname="src/config/config.test.ts" name="setApprovalMode with folder trust &gt; Model Switch Logging &gt; should use default reason when no options provided" time="0.00215975">
            <system-out>
Logger not initialized or session ID missing. Cannot log message.

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="src/config/flashFallback.test.ts" timestamp="2025-10-05T22:46:17.169Z" hostname="uby" tests="6" failures="0" errors="0" skipped="0" time="0.031576469">
        <testcase classname="src/config/flashFallback.test.ts" name="Flash Model Fallback Configuration &gt; setModel &gt; should only mark as switched if contentGeneratorConfig exists" time="0.026736105">
            <system-out>
Invalid JSON in log file /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json. Backing up and starting fresh. SyntaxError: &quot;undefined&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Logger._readLogFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:91:31[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:155:19[90m)[39m

Backed up corrupted log file to /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json.invalid_json.1759704374166.bak
Logger not initialized or session ID missing. Cannot log message.

Invalid JSON in log file /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json. Backing up and starting fresh. SyntaxError: &quot;undefined&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Logger._readLogFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:91:31[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:155:19[90m)[39m

Backed up corrupted log file to /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json.invalid_json.1759704374168.bak

            </system-out>
            <system-err>
Error accessing installation ID file, generating ephemeral ID: TypeError: Cannot read properties of undefined (reading &apos;trim&apos;)
    at InstallationManager.readInstallationIdFromFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/installationManager.ts:21:50[90m)[39m
    at InstallationManager.getInstallationId [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/installationManager.ts:42:33[90m)[39m
    at QwenLogger.generateUserId [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/qwen-logger/qwen-logger.ts:123:53[90m)[39m
    at new QwenLogger [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/qwen-logger/qwen-logger.ts:114:24[90m)[39m
    at QwenLogger.getInstance [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/qwen-logger/qwen-logger.ts:131:29[90m)[39m
    at logCliConfiguration [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/loggers.ts:85:14[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:452:5[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/config/flashFallback.test.ts:22:14
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20

            </system-err>
        </testcase>
        <testcase classname="src/config/flashFallback.test.ts" name="Flash Model Fallback Configuration &gt; getModel &gt; should return contentGeneratorConfig model if available" time="0.000942311">
            <system-out>
Invalid JSON in log file /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json. Backing up and starting fresh. SyntaxError: &quot;undefined&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Logger._readLogFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:91:31[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:155:19[90m)[39m

Backed up corrupted log file to /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json.invalid_json.1759704374169.bak
Logger not initialized or session ID missing. Cannot log message.

            </system-out>
        </testcase>
        <testcase classname="src/config/flashFallback.test.ts" name="Flash Model Fallback Configuration &gt; getModel &gt; should fall back to initial model if contentGeneratorConfig is not available" time="0.001213563">
            <system-out>
Invalid JSON in log file /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json. Backing up and starting fresh. SyntaxError: &quot;undefined&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Logger._readLogFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:91:31[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:155:19[90m)[39m

Backed up corrupted log file to /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json.invalid_json.1759704374170.bak

Invalid JSON in log file /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json. Backing up and starting fresh. SyntaxError: &quot;undefined&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Logger._readLogFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:91:31[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:155:19[90m)[39m

Backed up corrupted log file to /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json.invalid_json.1759704374170.bak

            </system-out>
        </testcase>
        <testcase classname="src/config/flashFallback.test.ts" name="Flash Model Fallback Configuration &gt; isInFallbackMode &gt; should start as false for new session" time="0.000560706">
            <system-out>
Invalid JSON in log file /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json. Backing up and starting fresh. SyntaxError: &quot;undefined&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Logger._readLogFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:91:31[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:155:19[90m)[39m

Backed up corrupted log file to /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json.invalid_json.1759704374171.bak

            </system-out>
        </testcase>
        <testcase classname="src/config/flashFallback.test.ts" name="Flash Model Fallback Configuration &gt; isInFallbackMode &gt; should remain false if no model switch occurs" time="0.000464328">
            <system-out>
Invalid JSON in log file /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json. Backing up and starting fresh. SyntaxError: &quot;undefined&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Logger._readLogFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:91:31[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:155:19[90m)[39m

Backed up corrupted log file to /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json.invalid_json.1759704374171.bak

            </system-out>
        </testcase>
        <testcase classname="src/config/flashFallback.test.ts" name="Flash Model Fallback Configuration &gt; isInFallbackMode &gt; should persist switched state throughout session" time="0.000533957">
            <system-out>
Invalid JSON in log file /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json. Backing up and starting fresh. SyntaxError: &quot;undefined&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Logger._readLogFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:91:31[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:155:19[90m)[39m

Backed up corrupted log file to /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json.invalid_json.1759704374172.bak
Logger not initialized or session ID missing. Cannot log message.

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="src/config/storage.test.ts" timestamp="2025-10-05T22:46:17.169Z" hostname="uby" tests="5" failures="0" errors="0" skipped="0" time="0.003717609">
        <testcase classname="src/config/storage.test.ts" name="Storage – getGlobalSettingsPath &gt; returns path to ~/.qwen/settings.json" time="0.001588315">
        </testcase>
        <testcase classname="src/config/storage.test.ts" name="Storage – additional helpers &gt; getWorkspaceSettingsPath returns project/.qwen/settings.json" time="0.000296849">
        </testcase>
        <testcase classname="src/config/storage.test.ts" name="Storage – additional helpers &gt; getUserCommandsDir returns ~/.qwen/commands" time="0.000175114">
        </testcase>
        <testcase classname="src/config/storage.test.ts" name="Storage – additional helpers &gt; getProjectCommandsDir returns project/.qwen/commands" time="0.00011407">
        </testcase>
        <testcase classname="src/config/storage.test.ts" name="Storage – additional helpers &gt; getMcpOAuthTokensPath returns ~/.qwen/mcp-oauth-tokens.json" time="0.000096959">
        </testcase>
    </testsuite>
    <testsuite name="src/ide/detect-ide.test.ts" timestamp="2025-10-05T22:46:17.169Z" hostname="uby" tests="21" failures="0" errors="0" skipped="0" time="0.006505381">
        <testcase classname="src/ide/detect-ide.test.ts" name="detectIde &gt; should return undefined if TERM_PROGRAM is not vscode" time="0.001473323">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="detectIde &gt; should detect Devin" time="0.000536211">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="detectIde &gt; should detect Replit" time="0.000845552">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="detectIde &gt; should detect Cursor" time="0.000126714">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="detectIde &gt; should detect Codespaces" time="0.000101187">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="detectIde &gt; should detect Cloud Shell via EDITOR_IN_CLOUD_SHELL" time="0.000104263">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="detectIde &gt; should detect Cloud Shell via CLOUD_SHELL" time="0.000096789">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="detectIde &gt; should detect Trae" time="0.000106818">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="detectIde &gt; should detect Firebase Studio via MONOSPACE_ENV" time="0.000112909">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="detectIde &gt; should detect VSCode when no other IDE is detected and command includes &quot;code&quot;" time="0.000120423">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="detectIde &gt; should detect VSCodeFork when no other IDE is detected and command does not include &quot;code&quot;" time="0.000109212">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="detectIde &gt; should prioritize other IDEs over VSCode detection" time="0.000082152">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="getIdeInfo &gt; should return correct info for Devin" time="0.000620267">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="getIdeInfo &gt; should return correct info for Replit" time="0.000095396">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="getIdeInfo &gt; should return correct info for Cursor" time="0.000074027">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="getIdeInfo &gt; should return correct info for CloudShell" time="0.000055473">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="getIdeInfo &gt; should return correct info for Codespaces" time="0.000056605">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="getIdeInfo &gt; should return correct info for FirebaseStudio" time="0.000051956">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="getIdeInfo &gt; should return correct info for Trae" time="0.000063387">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="getIdeInfo &gt; should return correct info for VSCode" time="0.000069388">
        </testcase>
        <testcase classname="src/ide/detect-ide.test.ts" name="getIdeInfo &gt; should return correct info for VSCodeFork" time="0.000056765">
        </testcase>
    </testsuite>
    <testsuite name="src/ide/ide-client.test.ts" timestamp="2025-10-05T22:46:17.170Z" hostname="uby" tests="9" failures="0" errors="0" skipped="0" time="0.018781827">
        <testcase classname="src/ide/ide-client.test.ts" name="IdeClient &gt; connect &gt; should return invalid if QWEN_CODE_IDE_WORKSPACE_PATH is undefined" time="0.00303593">
        </testcase>
        <testcase classname="src/ide/ide-client.test.ts" name="IdeClient &gt; connect &gt; should return invalid if QWEN_CODE_IDE_WORKSPACE_PATH is empty" time="0.000593577">
        </testcase>
        <testcase classname="src/ide/ide-client.test.ts" name="IdeClient &gt; connect &gt; should connect using HTTP when port is provided in config file" time="0.005083183">
            <system-out>
[DEBUG] [IDEClient] Attempting to connect to IDE via HTTP SSE

            </system-out>
        </testcase>
        <testcase classname="src/ide/ide-client.test.ts" name="IdeClient &gt; connect &gt; should connect using stdio when stdio config is provided in file" time="0.00169397">
            <system-out>
[DEBUG] [IDEClient] Attempting to connect to IDE via stdio

            </system-out>
        </testcase>
        <testcase classname="src/ide/ide-client.test.ts" name="IdeClient &gt; connect &gt; should prioritize port over stdio when both are in config file" time="0.00136879">
            <system-out>
[DEBUG] [IDEClient] Attempting to connect to IDE via HTTP SSE

            </system-out>
        </testcase>
        <testcase classname="src/ide/ide-client.test.ts" name="IdeClient &gt; connect &gt; should connect using HTTP when port is provided in environment variables" time="0.001794607">
            <system-out>
[DEBUG] [IDEClient] Attempting to connect to IDE via HTTP SSE

            </system-out>
        </testcase>
        <testcase classname="src/ide/ide-client.test.ts" name="IdeClient &gt; connect &gt; should connect using stdio when stdio config is in environment variables" time="0.001472551">
            <system-out>
[DEBUG] [IDEClient] Attempting to connect to IDE via stdio

            </system-out>
        </testcase>
        <testcase classname="src/ide/ide-client.test.ts" name="IdeClient &gt; connect &gt; should prioritize file config over environment variables" time="0.00119607">
            <system-out>
[DEBUG] [IDEClient] Attempting to connect to IDE via HTTP SSE

            </system-out>
        </testcase>
        <testcase classname="src/ide/ide-client.test.ts" name="IdeClient &gt; connect &gt; should be disconnected if no config is found" time="0.001021457">
            <system-err>
[ERROR] [IDEClient] Failed to connect to IDE companion extension in VS Code. Please ensure the extension is running. To install the extension, run /ide install.

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="src/ide/ide-installer.test.ts" timestamp="2025-10-05T22:46:17.171Z" hostname="uby" tests="10" failures="0" errors="0" skipped="0" time="0.015309821">
        <testcase classname="src/ide/ide-installer.test.ts" name="ide-installer &gt; getIdeInstaller &gt; returns a VsCodeInstaller for &quot;&apos;vscode&apos;&quot;" time="0.004000282">
        </testcase>
        <testcase classname="src/ide/ide-installer.test.ts" name="ide-installer &gt; getIdeInstaller &gt; returns a VsCodeInstaller for &quot;&apos;firebasestudio&apos;&quot;" time="0.001264667">
        </testcase>
        <testcase classname="src/ide/ide-installer.test.ts" name="ide-installer &gt; VsCodeInstaller &gt; install &gt; identifies the path to code cli on platform: &apos;win32&apos;" time="0.002008442">
        </testcase>
        <testcase classname="src/ide/ide-installer.test.ts" name="ide-installer &gt; VsCodeInstaller &gt; install &gt; identifies the path to code cli on platform: &apos;darwin&apos;" time="0.001150586">
        </testcase>
        <testcase classname="src/ide/ide-installer.test.ts" name="ide-installer &gt; VsCodeInstaller &gt; install &gt; identifies the path to code cli on platform: &apos;linux&apos;" time="0.001020365">
        </testcase>
        <testcase classname="src/ide/ide-installer.test.ts" name="ide-installer &gt; VsCodeInstaller &gt; install &gt; installs the extension using code cli" time="0.001757878">
        </testcase>
        <testcase classname="src/ide/ide-installer.test.ts" name="ide-installer &gt; VsCodeInstaller &gt; install &gt; returns that the cli was installed successfully" time="0.000802442">
        </testcase>
        <testcase classname="src/ide/ide-installer.test.ts" name="ide-installer &gt; VsCodeInstaller &gt; install &gt; returns that the cli was installed successfully" time="0.000403185">
        </testcase>
        <testcase classname="src/ide/ide-installer.test.ts" name="ide-installer &gt; VsCodeInstaller &gt; install &gt; should return a failure message if &apos;vscode&apos; is not installed" time="0.000577347">
        </testcase>
        <testcase classname="src/ide/ide-installer.test.ts" name="ide-installer &gt; VsCodeInstaller &gt; install &gt; should return a failure message if &apos;firebasestudio&apos; is not installed" time="0.000455132">
        </testcase>
    </testsuite>
    <testsuite name="src/ide/ideContext.test.ts" timestamp="2025-10-05T22:46:17.171Z" hostname="uby" tests="16" failures="0" errors="0" skipped="0" time="0.009244943">
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; createIdeContextStore &gt; should return undefined initially for ide context" time="0.001366224">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; createIdeContextStore &gt; should set and retrieve the ide context" time="0.00069255">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; createIdeContextStore &gt; should update the ide context when called multiple times" time="0.000163552">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; createIdeContextStore &gt; should handle empty string for file path" time="0.000126374">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; createIdeContextStore &gt; should notify subscribers when ide context changes" time="0.002442483">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; createIdeContextStore &gt; should stop notifying a subscriber after unsubscribe" time="0.000196453">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; createIdeContextStore &gt; should clear the ide context" time="0.000093022">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; FileSchema &gt; should validate a file with only required fields" time="0.001156087">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; FileSchema &gt; should validate a file with all fields" time="0.00024357">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; FileSchema &gt; should fail validation if path is missing" time="0.000528887">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; FileSchema &gt; should fail validation if timestamp is missing" time="0.000144286">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; IdeContextSchema &gt; should validate an empty context" time="0.000115463">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; IdeContextSchema &gt; should validate a context with an empty workspaceState" time="0.000084195">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; IdeContextSchema &gt; should validate a context with an empty openFiles array" time="0.000251786">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; IdeContextSchema &gt; should validate a context with a valid file" time="0.00012963">
        </testcase>
        <testcase classname="src/ide/ideContext.test.ts" name="ideContext &gt; IdeContextSchema &gt; should fail validation with an invalid file" time="0.000098221">
        </testcase>
    </testsuite>
    <testsuite name="src/ide/process-utils.test.ts" timestamp="2025-10-05T22:46:17.172Z" hostname="uby" tests="7" failures="0" errors="0" skipped="0" time="0.010163792">
        <testcase classname="src/ide/process-utils.test.ts" name="getIdeProcessInfo &gt; on Unix &gt; should traverse up to find the shell and return grandparent process info" time="0.002392341">
        </testcase>
        <testcase classname="src/ide/process-utils.test.ts" name="getIdeProcessInfo &gt; on Unix &gt; should return parent process info if grandparent lookup fails" time="0.004826188">
            <system-out>
Failed to get process info for pid 800: Error: ps failed
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/ide/process-utils.test.ts:57:32
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

            </system-out>
        </testcase>
        <testcase classname="src/ide/process-utils.test.ts" name="getIdeProcessInfo &gt; on Windows &gt; should traverse up and find the great-grandchild of the root process" time="0.000383619">
        </testcase>
        <testcase classname="src/ide/process-utils.test.ts" name="getIdeProcessInfo &gt; on Windows &gt; should handle non-existent process gracefully" time="0.000134087">
        </testcase>
        <testcase classname="src/ide/process-utils.test.ts" name="getIdeProcessInfo &gt; on Windows &gt; should handle malformed JSON output gracefully" time="0.000816729">
            <system-out>
Failed to get process info for pid 1000: SyntaxError: Unexpected token &apos;j&apos;, &quot;{&quot;invalid&quot;:json}&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at getProcessInfo [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/ide/process-utils.ts:46:16[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at getIdeProcessInfoForWindows [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/ide/process-utils.ts:136:29[90m)[39m

            </system-out>
        </testcase>
        <testcase classname="src/ide/process-utils.test.ts" name="getIdeProcessInfo &gt; on Windows &gt; should handle PowerShell errors without crashing the process chain" time="0.000351951">
        </testcase>
        <testcase classname="src/ide/process-utils.test.ts" name="getIdeProcessInfo &gt; on Windows &gt; should handle partial JSON data with defaults" time="0.000139988">
        </testcase>
    </testsuite>
    <testsuite name="src/qwen/qwenContentGenerator.test.ts" timestamp="2025-10-05T22:46:17.172Z" hostname="uby" tests="44" failures="0" errors="0" skipped="0" time="0.204189726">
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Core Content Generation Methods &gt; should generate content with valid token" time="0.004047289">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Core Content Generation Methods &gt; should generate content stream with valid token" time="0.001234441">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Core Content Generation Methods &gt; should count tokens without requiring authentication" time="0.000534227">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Core Content Generation Methods &gt; should embed content with valid token" time="0.001151347">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Token Management and Refresh Logic &gt; should refresh token on auth error and retry" time="0.000593667">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Token Management and Refresh Logic &gt; should refresh token on auth error and retry for content stream" time="0.000938604">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Token Management and Refresh Logic &gt; should handle token refresh failure" time="0.009375725">
            <system-err>
Failed to get token from shared manager: Error: Failed to obtain valid Qwen access token. Please re-authenticate.
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.test.ts:532:9
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Token Management and Refresh Logic &gt; should update endpoint when token is refreshed" time="0.000559694">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Endpoint URL Normalization &gt; should use default endpoint when no custom endpoint provided" time="0.000686589">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Endpoint URL Normalization &gt; should normalize hostname-only endpoints by adding https protocol" time="0.000512397">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Endpoint URL Normalization &gt; should preserve existing protocol in endpoint URLs" time="0.000502538">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Endpoint URL Normalization &gt; should not duplicate /v1 suffix if already present" time="0.000447337">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Client State Management &gt; should set dynamic credentials during operations" time="0.000542242">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Client State Management &gt; should set credentials even when operation throws" time="0.000609546">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Error Handling and Retry Logic &gt; should retry once on authentication errors" time="0.001425945">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Error Handling and Retry Logic &gt; should not retry non-authentication errors" time="0.000881298">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Error Handling and Retry Logic &gt; should handle error response from token refresh" time="0.001974298">
            <system-err>
Failed to get token from shared manager: Error: Failed to obtain valid Qwen access token. Please re-authenticate.
    at SharedTokenManager.getValidCredentials [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.test.ts:175:19[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at QwenContentGenerator.getValidToken [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.ts:91:27[90m)[39m
    at attemptOperation [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.ts:130:35[90m)[39m
    at QwenContentGenerator.executeWithCredentialManagement [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.ts:141:14[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.test.ts:908:7
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Token State Management &gt; should cache and return current token" time="0.000897158">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Token State Management &gt; should clear token on clearToken()" time="0.000531522">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Token State Management &gt; should handle concurrent token refresh requests" time="0.151417059">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Error Logging Suppression &gt; should suppress logging for authentication errors" time="0.00087664">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Error Logging Suppression &gt; should not suppress logging for non-auth errors" time="0.000509201">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Integration Tests &gt; should handle complete workflow: get token, use it, refresh on auth error, retry" time="0.000733275">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; SharedTokenManager Integration &gt; should use SharedTokenManager to get valid credentials" time="0.001302216">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; SharedTokenManager Integration &gt; should handle SharedTokenManager errors gracefully" time="0.001606198">
            <system-err>
Failed to get token from shared manager: Error: Token manager error
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.test.ts:1154:30
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; SharedTokenManager Integration &gt; should handle missing access token from credentials" time="0.000826999">
            <system-err>
Failed to get token from shared manager: Error: No access token available
    at QwenContentGenerator.getValidToken [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.ts:96:15[90m)[39m
    at attemptOperation [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.ts:130:35[90m)[39m
    at QwenContentGenerator.executeWithCredentialManagement [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.ts:141:14[90m)[39m

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; getCurrentEndpoint Method &gt; should handle URLs with custom ports" time="0.000510563">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; getCurrentEndpoint Method &gt; should handle URLs with existing paths" time="0.000341501">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; getCurrentEndpoint Method &gt; should handle undefined resource URL" time="0.000352361">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; getCurrentEndpoint Method &gt; should handle empty resource URL" time="0.000424495">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; isAuthError Method Enhanced &gt; should identify auth errors by numeric status codes" time="0.000599198">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; isAuthError Method Enhanced &gt; should identify auth errors by message content variations" time="0.000815427">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; isAuthError Method Enhanced &gt; should not identify non-auth errors" time="0.000856673">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; isAuthError Method Enhanced &gt; should handle complex error objects" time="0.000670659">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Stream Error Handling &gt; should set credentials when stream generation fails" time="0.000933575">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Stream Error Handling &gt; should set credentials for successful streams" time="0.00095266">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Token and Endpoint Management &gt; should get current token from SharedTokenManager" time="0.000724709">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Token and Endpoint Management &gt; should return null when no credentials available" time="0.000639772">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Token and Endpoint Management &gt; should return null when credentials have no access token" time="0.000786673">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Token and Endpoint Management &gt; should clear token through SharedTokenManager" time="0.000739416">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Constructor and Initialization &gt; should initialize with configured base URL when provided" time="0.000670168">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Constructor and Initialization &gt; should get SharedTokenManager instance" time="0.000630094">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Edge Cases and Error Conditions &gt; should handle token retrieval with warning when SharedTokenManager fails" time="0.002457922">
        </testcase>
        <testcase classname="src/qwen/qwenContentGenerator.test.ts" name="QwenContentGenerator &gt; Edge Cases and Error Conditions &gt; should handle method types with token failure (except countTokens)" time="0.003859982">
            <system-err>
Failed to get token from shared manager: Error: Token error
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.test.ts:1658:30
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

Failed to get token from shared manager: Error: Token error
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.test.ts:1658:30
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

Failed to get token from shared manager: Error: Token error
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenContentGenerator.test.ts:1658:30
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="src/qwen/qwenOAuth2.test.ts" timestamp="2025-10-05T22:46:17.174Z" hostname="uby" tests="82" failures="0" errors="0" skipped="0" time="2.085168921">
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="PKCE Code Generation &gt; generateCodeVerifier &gt; should generate a code verifier with correct length" time="0.001251503">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="PKCE Code Generation &gt; generateCodeVerifier &gt; should generate different verifiers on subsequent calls" time="0.000801992">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="PKCE Code Generation &gt; generateCodeChallenge &gt; should generate code challenge from verifier" time="0.000559744">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="PKCE Code Generation &gt; generatePKCEPair &gt; should generate valid PKCE pair" time="0.000341571">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Type Guards &gt; isDeviceAuthorizationSuccess &gt; should return true for successful authorization response" time="0.000217782">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Type Guards &gt; isDeviceAuthorizationSuccess &gt; should return false for error response" time="0.000123398">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Type Guards &gt; isDeviceTokenPending &gt; should return true for pending response" time="0.000098943">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Type Guards &gt; isDeviceTokenPending &gt; should return false for success response" time="0.000113239">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Type Guards &gt; isDeviceTokenPending &gt; should return false for error response" time="0.000078906">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Type Guards &gt; isDeviceTokenSuccess &gt; should return true for successful token response" time="0.000128347">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Type Guards &gt; isDeviceTokenSuccess &gt; should return false for pending response" time="0.000223363">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Type Guards &gt; isDeviceTokenSuccess &gt; should return false for error response" time="0.00010784">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Type Guards &gt; isDeviceTokenSuccess &gt; should return false for null access token" time="0.000058578">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Type Guards &gt; isDeviceTokenSuccess &gt; should return false for empty access token" time="0.00003794">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Type Guards &gt; isErrorResponse &gt; should return true for error responses" time="0.000102209">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Type Guards &gt; isErrorResponse &gt; should return false for successful responses" time="0.000046055">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; requestDeviceAuthorization &gt; should successfully request device authorization" time="0.002053885">
            <system-out>
Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; requestDeviceAuthorization &gt; should handle error response" time="0.001791851">
            <system-out>
Device authorization result: {
  error: [32m&apos;INVALID_REQUEST&apos;[39m,
  error_description: [32m&apos;The request parameters are invalid&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; refreshAccessToken &gt; should successfully refresh access token" time="0.00051388">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; refreshAccessToken &gt; should handle refresh error" time="0.00035158">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; refreshAccessToken &gt; should successfully refresh access token and update credentials" time="0.000680508">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; refreshAccessToken &gt; should use new refresh token if provided in response" time="0.000207683">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; getAccessToken &gt; should return access token if valid and not expired" time="0.000170445">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; getAccessToken &gt; should refresh token if access token is expired" time="0.000172599">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; getAccessToken &gt; should return undefined if no access token and no refresh token" time="0.005902056">
            <system-err>
Failed to get access token from shared manager: Error: No credentials available
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:530:30
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; pollDeviceToken &gt; should successfully poll for device token" time="0.000403095">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; pollDeviceToken &gt; should return pending status when authorization is pending" time="0.00022168">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; pollDeviceToken &gt; should handle HTTP error responses" time="0.000358803">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; pollDeviceToken &gt; should include status code in error for better handling" time="0.00023302">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; pollDeviceToken &gt; should handle authorization_pending with HTTP 400 according to RFC 8628" time="0.000188628">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; pollDeviceToken &gt; should handle slow_down with HTTP 429 according to RFC 8628" time="0.000175534">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; refreshAccessToken error handling &gt; should throw error if no refresh token available" time="0.000300846">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; refreshAccessToken error handling &gt; should handle 400 status as expired refresh token" time="0.000689033">
            <system-out>
Cached Qwen credentials cleared successfully.

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; refreshAccessToken error handling &gt; should handle other HTTP error statuses" time="0.000272263">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; credentials management &gt; should set and get credentials correctly" time="0.000197405">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client &gt; credentials management &gt; should handle empty credentials" time="0.000159265">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="getQwenOAuthClient &gt; should load cached credentials if available" time="0.000999788">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="getQwenOAuthClient &gt; should handle cached credentials refresh failure" time="0.0022191">
            <system-out>
Shared token manager failed, attempting device flow: Error: Token refresh failed
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:807:28
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  error: [32m&apos;invalid_request&apos;[39m,
  error_description: [32m&apos;Invalid request parameters&apos;[39m
}

            </system-out>
            <system-err>
Failed to get access token from shared manager: Error: Token refresh failed
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:807:28
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization flow failed: Device authorization failed: invalid_request - Invalid request parameters

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="CredentialsClearRequiredError &gt; should create error with correct name and message" time="0.000328477">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="CredentialsClearRequiredError &gt; should work without originalError" time="0.000207424">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="clearQwenCredentials &gt; should successfully clear credentials file" time="0.000548624">
            <system-out>
Cached Qwen credentials cleared successfully.

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="clearQwenCredentials &gt; should handle file not found error gracefully" time="0.000251294">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="clearQwenCredentials &gt; should handle other file system errors gracefully" time="0.000447818">
            <system-err>
Warning: Failed to clear cached Qwen credentials: Error: Permission denied
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:886:29
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="QwenOAuth2Client - Additional Error Scenarios &gt; requestDeviceAuthorization HTTP errors &gt; should handle HTTP error response with non-ok status" time="0.000473625">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="getQwenOAuthClient - Enhanced Error Scenarios &gt; should handle generic refresh token errors" time="0.001996119">
            <system-out>
Shared token manager failed, attempting device flow: Error: Refresh failed
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:966:28
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  error: [32m&apos;invalid_request&apos;[39m,
  error_description: [32m&apos;Invalid request parameters&apos;[39m
}

            </system-out>
            <system-err>
Failed to get access token from shared manager: Error: Refresh failed
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:966:28
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization flow failed: Device authorization failed: invalid_request - Invalid request parameters

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="getQwenOAuthClient - Enhanced Error Scenarios &gt; should handle different authentication failure reasons - timeout" time="2.009932063">
            <system-out>
Shared token manager failed, attempting device flow: Error: No credentials
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:1001:28
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m0.1[39m
}

Waiting for authorization...

polling for token...

            </system-out>
            <system-err>

Authorization timeout, please restart the process.

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="getQwenOAuthClient - Enhanced Error Scenarios &gt; should handle authentication failure reason - rate limit" time="0.002197762">
            <system-out>
Shared token manager failed, attempting device flow: Error: No credentials
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:1050:28
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}

Waiting for authorization...

polling for token...


Too many requests. The server is rate limiting our requests. Please select a different authentication method or try again later.

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="getQwenOAuthClient - Enhanced Error Scenarios &gt; should handle authentication failure reason - error" time="0.001527583">
            <system-out>
Shared token manager failed, attempting device flow: Error: No credentials
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:1101:28
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  error: [32m&apos;invalid_request&apos;[39m,
  error_description: [32m&apos;Invalid request parameters&apos;[39m
}

            </system-out>
            <system-err>
Device authorization flow failed: Device authorization failed: invalid_request - Invalid request parameters

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="authWithQwenDeviceFlow - Comprehensive Testing &gt; should handle device authorization error response" time="0.002611616">
            <system-out>
Shared token manager failed, attempting device flow: Error: No credentials
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:1160:28
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  error: [32m&apos;invalid_client&apos;[39m,
  error_description: [32m&apos;Client authentication failed&apos;[39m
}

            </system-out>
            <system-err>
Device authorization flow failed: Device authorization failed: invalid_client - Client authentication failed

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="authWithQwenDeviceFlow - Comprehensive Testing &gt; should handle successful authentication flow" time="0.000547763">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="authWithQwenDeviceFlow - Comprehensive Testing &gt; should handle 401 error during token polling" time="0.001409555">
            <system-out>
Shared token manager failed, attempting device flow: Error: No credentials
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:1234:28
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}

Waiting for authorization...

polling for token...

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="authWithQwenDeviceFlow - Comprehensive Testing &gt; should handle token polling with browser launch suppressed" time="0.001740727">
            <system-out>
Shared token manager failed, attempting device flow: Error: No credentials
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:1282:28
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}


=== Qwen OAuth Device Authorization ===
Please visit the following URL in your browser to authorize:

https://chat.qwen.ai/device?code=TEST123

Waiting for authorization to complete...

Waiting for authorization...

polling for token...

Authentication successful! Access token obtained.

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Browser Launch and Error Handling &gt; should handle browser launch failure gracefully" time="0.009508019">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Browser Launch and Error Handling &gt; should handle browser child process error gracefully" time="0.002024582">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Event Emitter Integration &gt; should export qwenOAuth2Events as EventEmitter" time="0.000224234">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Event Emitter Integration &gt; should define correct event enum values" time="0.000195962">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Utility Functions &gt; objectToUrlEncoded &gt; should encode object properties to URL-encoded format" time="0.000334488">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Utility Functions &gt; objectToUrlEncoded &gt; should handle special characters" time="0.000187767">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Utility Functions &gt; objectToUrlEncoded &gt; should handle empty object" time="0.000110775">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Utility Functions &gt; getQwenCachedCredentialPath &gt; should return correct path to cached credentials" time="0.001173028">
            <system-out>
Cached Qwen credentials cleared successfully.

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Credential Caching Functions &gt; cacheQwenCredentials &gt; should create directory and write credentials to file" time="0.000316184">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Credential Caching Functions &gt; loadCachedQwenCredentials &gt; should load and validate cached credentials successfully" time="0.001902926">
            <system-out>
Shared token manager failed, attempting device flow: Error: No cached creds
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:1593:30
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}


=== Qwen OAuth Device Authorization ===
Please visit the following URL in your browser to authorize:

https://chat.qwen.ai/device?code=TEST123

Waiting for authorization to complete...

Waiting for authorization...

polling for token...

Authentication successful! Access token obtained.

            </system-out>
            <system-err>
Failed to get access token from shared manager: Error: No cached creds
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:1593:30
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Credential Caching Functions &gt; loadCachedQwenCredentials &gt; should handle invalid cached credentials gracefully" time="0.001297728">
            <system-out>
Shared token manager failed, attempting device flow: Error: No cached creds
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:1654:30
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}


=== Qwen OAuth Device Authorization ===
Please visit the following URL in your browser to authorize:

https://chat.qwen.ai/device?code=TEST123

Waiting for authorization to complete...

Waiting for authorization...

polling for token...

Authentication successful! Access token obtained.

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Credential Caching Functions &gt; loadCachedQwenCredentials &gt; should handle file access errors" time="0.001015086">
            <system-out>
Shared token manager failed, attempting device flow: Error: No cached creds
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:1712:30
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  error: [32m&apos;invalid_request&apos;[39m,
  error_description: [32m&apos;Invalid request parameters&apos;[39m
}

            </system-out>
            <system-err>
Device authorization flow failed: Device authorization failed: invalid_request - Invalid request parameters

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; QwenOAuth2Client getAccessToken enhanced scenarios &gt; should return undefined when SharedTokenManager fails (no fallback)" time="0.001997631">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; QwenOAuth2Client getAccessToken enhanced scenarios &gt; should return undefined when both manager and cache fail" time="0.000507036">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; QwenOAuth2Client getAccessToken enhanced scenarios &gt; should handle missing credentials gracefully" time="0.000408054">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; Enhanced requestDeviceAuthorization scenarios &gt; should include x-request-id header" time="0.001503538">
            <system-out>
Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; Enhanced requestDeviceAuthorization scenarios &gt; should include correct Content-Type and Accept headers" time="0.000919298">
            <system-out>
Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; Enhanced requestDeviceAuthorization scenarios &gt; should send correct form data" time="0.001031776">
            <system-out>
Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; Enhanced pollDeviceToken scenarios &gt; should handle JSON parsing error during error response" time="0.000588247">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; Enhanced pollDeviceToken scenarios &gt; should include status code in thrown errors" time="0.000631177">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; Enhanced pollDeviceToken scenarios &gt; should handle authorization_pending with correct status" time="0.000457766">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; Enhanced refreshAccessToken scenarios &gt; should call clearQwenCredentials on 400 error" time="0.000774892">
            <system-out>
Cached Qwen credentials cleared successfully.

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; Enhanced refreshAccessToken scenarios &gt; should throw CredentialsClearRequiredError on 400 error" time="0.001030104">
            <system-out>
Cached Qwen credentials cleared successfully.

Cached Qwen credentials cleared successfully.

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; Enhanced refreshAccessToken scenarios &gt; should preserve existing refresh token when new one not provided" time="0.000332154">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Enhanced Error Handling and Edge Cases &gt; Enhanced refreshAccessToken scenarios &gt; should include resource_url when provided in response" time="0.00027599">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="SharedTokenManager Integration in QwenOAuth2Client &gt; should use SharedTokenManager instance in constructor" time="0.000127195">
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="SharedTokenManager Integration in QwenOAuth2Client &gt; should handle TokenManagerError types correctly in getQwenOAuthClient" time="0.005004278">
            <system-out>
Shared token manager failed, attempting device flow: TokenManagerError: NO_REFRESH_TOKEN
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:2155:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}


=== Qwen OAuth Device Authorization ===
Please visit the following URL in your browser to authorize:

https://chat.qwen.ai/device?code=TEST123

Waiting for authorization to complete...

Waiting for authorization...

polling for token...

Authentication successful! Access token obtained.

Shared token manager failed, attempting device flow: TokenManagerError: REFRESH_FAILED
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:2155:26
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}


=== Qwen OAuth Device Authorization ===
Please visit the following URL in your browser to authorize:

https://chat.qwen.ai/device?code=TEST123

Waiting for authorization to complete...

Waiting for authorization...

polling for token...

Authentication successful! Access token obtained.

Shared token manager failed, attempting device flow: TokenManagerError: NETWORK_ERROR
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:2155:26
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}


=== Qwen OAuth Device Authorization ===
Please visit the following URL in your browser to authorize:

https://chat.qwen.ai/device?code=TEST123

Waiting for authorization to complete...

Waiting for authorization...

polling for token...

Authentication successful! Access token obtained.

Shared token manager failed, attempting device flow: TokenManagerError: REFRESH_FAILED
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/qwen/qwenOAuth2.test.ts:2155:26
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}


=== Qwen OAuth Device Authorization ===
Please visit the following URL in your browser to authorize:

https://chat.qwen.ai/device?code=TEST123

Waiting for authorization to complete...

Waiting for authorization...

polling for token...

Authentication successful! Access token obtained.

            </system-out>
            <system-err>
Token manager error: NO_REFRESH_TOKEN

Token manager error: REFRESH_FAILED

Token manager error: NETWORK_ERROR

Token manager error: REFRESH_FAILED

            </system-err>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Constants and Configuration &gt; should have correct OAuth endpoints" time="0.000500856">
            <system-out>
Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Constants and Configuration &gt; should use correct client ID in requests" time="0.000395251">
            <system-out>
Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/qwen/qwenOAuth2.test.ts" name="Constants and Configuration &gt; should use correct default scope" time="0.000405669">
            <system-out>
Device authorization result: {
  device_code: [32m&apos;test-device-code&apos;[39m,
  user_code: [32m&apos;TEST123&apos;[39m,
  verification_uri: [32m&apos;https://chat.qwen.ai/device&apos;[39m,
  verification_uri_complete: [32m&apos;https://chat.qwen.ai/device?code=TEST123&apos;[39m,
  expires_in: [33m1800[39m
}

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="src/qwen/sharedTokenManager.test.ts" timestamp="2025-10-05T22:46:17.178Z" hostname="uby" tests="31" failures="0" errors="0" skipped="0" time="0.263165997">
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Singleton Pattern &gt; should return the same instance when called multiple times" time="0.001459447">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Singleton Pattern &gt; should create a new instance after reset" time="0.000668886">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; getValidCredentials &gt; should return valid cached credentials without refresh" time="0.001367167">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; getValidCredentials &gt; should refresh expired credentials" time="0.001500463">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; getValidCredentials &gt; should force refresh when forceRefresh is true" time="0.000489594">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; getValidCredentials &gt; should throw TokenManagerError when refresh token is missing" time="0.001786311">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; getValidCredentials &gt; should throw TokenManagerError when refresh fails" time="0.000429614">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; getValidCredentials &gt; should handle network errors during refresh" time="0.000343776">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; getValidCredentials &gt; should wait for ongoing refresh and return same result" time="0.00061164">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; getValidCredentials &gt; should reload credentials from file when file is modified" time="0.000446805">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Cache Management &gt; should clear cache" time="0.000153263">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Cache Management &gt; should return current credentials from cache" time="0.00014087">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Cache Management &gt; should return null when no credentials are cached" time="0.000085448">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Refresh Status &gt; should return false when no refresh is in progress" time="0.000080879">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Refresh Status &gt; should return true when refresh is in progress" time="0.000551639">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Debug Info &gt; should return complete debug information" time="0.000616359">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Debug Info &gt; should indicate expired credentials in debug info" time="0.000151139">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Debug Info &gt; should indicate no credentials in debug info" time="0.000084366">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Error Handling &gt; should create TokenManagerError with correct type and message" time="0.000211742">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Error Handling &gt; should handle file access errors gracefully" time="0.000349466">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Error Handling &gt; should handle missing file gracefully" time="0.000309401">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Error Handling &gt; should handle lock timeout scenarios" time="0.239993236">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Error Handling &gt; should handle refresh response without access token" time="0.001186943">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; File System Operations &gt; should handle file reload failures gracefully" time="0.00056231">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; File System Operations &gt; should handle invalid JSON in credentials file" time="0.000455582">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; File System Operations &gt; should handle directory creation during save" time="0.001921751">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Lock File Management &gt; should clean up lock file during process cleanup" time="0.000667734">
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; Lock File Management &gt; should handle stale lock cleanup" time="0.001755584">
            <system-err>
Removed stale lock file: /home/user/.qwen/oauth_creds.lock (age: 1759704369825ms)

            </system-err>
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; CredentialsClearRequiredError handling &gt; should clear memory cache when CredentialsClearRequiredError is thrown during refresh" time="0.001275527">
            <system-out>
SharedTokenManager: Clearing memory cache due to credentials clear requirement

            </system-out>
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; CredentialsClearRequiredError handling &gt; should convert CredentialsClearRequiredError to TokenManagerError" time="0.000927804">
            <system-out>
SharedTokenManager: Clearing memory cache due to credentials clear requirement

            </system-out>
        </testcase>
        <testcase classname="src/qwen/sharedTokenManager.test.ts" name="SharedTokenManager &gt; CredentialsClearRequiredError handling &gt; should properly clean up timeout when file operation completes before timeout" time="0.00073609">
        </testcase>
    </testsuite>
    <testsuite name="src/mcp/google-auth-provider.test.ts" timestamp="2025-10-05T22:46:17.179Z" hostname="uby" tests="8" failures="0" errors="0" skipped="0" time="0.017042512">
        <testcase classname="src/mcp/google-auth-provider.test.ts" name="GoogleCredentialProvider &gt; should throw an error if no scopes are provided" time="0.002227216">
        </testcase>
        <testcase classname="src/mcp/google-auth-provider.test.ts" name="GoogleCredentialProvider &gt; should use scopes from the config if provided" time="0.003251769">
        </testcase>
        <testcase classname="src/mcp/google-auth-provider.test.ts" name="GoogleCredentialProvider &gt; should throw an error for a non-allowlisted host" time="0.000361498">
        </testcase>
        <testcase classname="src/mcp/google-auth-provider.test.ts" name="GoogleCredentialProvider &gt; should allow luci.app" time="0.001426526">
        </testcase>
        <testcase classname="src/mcp/google-auth-provider.test.ts" name="GoogleCredentialProvider &gt; should allow sub.luci.app" time="0.000951769">
        </testcase>
        <testcase classname="src/mcp/google-auth-provider.test.ts" name="GoogleCredentialProvider &gt; should not allow googleapis.com without a subdomain" time="0.000282031">
        </testcase>
        <testcase classname="src/mcp/google-auth-provider.test.ts" name="GoogleCredentialProvider &gt; with provider instance &gt; should return credentials" time="0.004266454">
        </testcase>
        <testcase classname="src/mcp/google-auth-provider.test.ts" name="GoogleCredentialProvider &gt; with provider instance &gt; should return undefined if access token is not available" time="0.002928281">
            <system-err>
Failed to get access token from Google ADC

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="src/mcp/oauth-provider.test.ts" timestamp="2025-10-05T22:46:17.180Z" hostname="uby" tests="19" failures="0" errors="0" skipped="0" time="0.140911115">
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; authenticate &gt; should perform complete OAuth flow with PKCE" time="0.017406465">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; authenticate &gt; should handle OAuth discovery when no authorization URL provided" time="0.012800874">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; authenticate &gt; should perform dynamic client registration when no client ID provided" time="0.012380127">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; authenticate &gt; should handle OAuth callback errors" time="0.012988511">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; authenticate &gt; should handle state mismatch in callback" time="0.012064734">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; authenticate &gt; should handle token exchange failure" time="0.01215983">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; authenticate &gt; should handle callback timeout" time="0.001409725">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; refreshAccessToken &gt; should refresh token successfully" time="0.001628459">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; refreshAccessToken &gt; should include client secret in refresh request when available" time="0.001569721">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; refreshAccessToken &gt; should handle refresh token failure" time="0.000767839">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; getValidToken &gt; should return valid token when not expired" time="0.001701374">
            <system-out>
Getting valid token for server: test-server

Found token for server: test-server, expired: false
Returning valid token for server: test-server

            </system-out>
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; getValidToken &gt; should refresh expired token and return new token" time="0.000753993">
            <system-out>
Getting valid token for server: test-server

Found token for server: test-server, expired: true

            </system-out>
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; getValidToken &gt; should return null when no credentials exist" time="0.000509882">
            <system-out>
Getting valid token for server: test-server

No credentials found for server: test-server

            </system-out>
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; getValidToken &gt; should handle refresh failure and remove invalid token" time="0.000706396">
            <system-out>
Getting valid token for server: test-server

Found token for server: test-server, expired: true

            </system-out>
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; getValidToken &gt; should return null for token without refresh capability" time="0.000655892">
            <system-out>
Getting valid token for server: test-server

Found token for server: test-server, expired: true

            </system-out>
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; PKCE parameter generation &gt; should generate valid PKCE parameters" time="0.012781018">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; Authorization URL building &gt; should build correct authorization URL with all parameters" time="0.012449786">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; Authorization URL building &gt; should correctly append parameters to an authorization URL that already has query params" time="0.01300431">
        </testcase>
        <testcase classname="src/mcp/oauth-provider.test.ts" name="MCPOAuthProvider &gt; Authorization URL building &gt; should correctly append parameters to a URL with a fragment" time="0.011305">
        </testcase>
    </testsuite>
    <testsuite name="src/mcp/oauth-token-storage.test.ts" timestamp="2025-10-05T22:46:17.181Z" hostname="uby" tests="21" failures="0" errors="0" skipped="0" time="0.010573829">
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; loadTokens &gt; should return empty map when token file does not exist" time="0.001685945">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; loadTokens &gt; should load tokens from file successfully" time="0.001173599">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; loadTokens &gt; should handle corrupted token file gracefully" time="0.000951699">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; loadTokens &gt; should handle file read errors other than ENOENT" time="0.000297089">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; saveToken &gt; should save token with restricted permissions" time="0.000548383">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; saveToken &gt; should update existing token for same server" time="0.000495186">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; saveToken &gt; should handle write errors gracefully" time="0.001108378">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; getToken &gt; should return token for existing server" time="0.000206451">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; getToken &gt; should return null for non-existent server" time="0.000150989">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; getToken &gt; should return null when no tokens file exists" time="0.000127055">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; removeToken &gt; should remove token for specific server" time="0.0002919">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; removeToken &gt; should remove token file when no tokens remain" time="0.000203777">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; removeToken &gt; should handle removal of non-existent token gracefully" time="0.00012449">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; removeToken &gt; should handle file operation errors gracefully" time="0.000184642">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; isTokenExpired &gt; should return false for token without expiry" time="0.000134389">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; isTokenExpired &gt; should return false for valid token" time="0.000149856">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; isTokenExpired &gt; should return true for expired token" time="0.000173581">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; isTokenExpired &gt; should return true for token expiring within buffer time" time="0.000110254">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; clearAllTokens &gt; should remove token file successfully" time="0.000276882">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; clearAllTokens &gt; should handle non-existent file gracefully" time="0.000188458">
        </testcase>
        <testcase classname="src/mcp/oauth-token-storage.test.ts" name="MCPOAuthTokenStorage &gt; clearAllTokens &gt; should handle other file errors gracefully" time="0.000601351">
        </testcase>
    </testsuite>
    <testsuite name="src/mcp/oauth-utils.test.ts" timestamp="2025-10-05T22:46:17.183Z" hostname="uby" tests="21" failures="0" errors="0" skipped="0" time="0.016089521">
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; buildWellKnownUrls &gt; should build standard root-based URLs by default" time="0.002220964">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; buildWellKnownUrls &gt; should build path-based URLs when includePathSuffix is true" time="0.000472183">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; buildWellKnownUrls &gt; should handle root path correctly" time="0.000381364">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; buildWellKnownUrls &gt; should handle trailing slash in path" time="0.000295295">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; fetchProtectedResourceMetadata &gt; should fetch protected resource metadata successfully" time="0.001415556">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; fetchProtectedResourceMetadata &gt; should return null when fetch fails" time="0.000323177">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; fetchAuthorizationServerMetadata &gt; should fetch authorization server metadata successfully" time="0.000364914">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; fetchAuthorizationServerMetadata &gt; should return null when fetch fails" time="0.00023849">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; discoverAuthorizationServerMetadata &gt; should handle URLs without path components correctly" time="0.000647536">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; discoverAuthorizationServerMetadata &gt; should handle URLs with path components correctly" time="0.000709932">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; metadataToOAuthConfig &gt; should convert metadata to OAuth config" time="0.00215404">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; metadataToOAuthConfig &gt; should handle empty scopes" time="0.00103911">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; parseWWWAuthenticateHeader &gt; should parse resource metadata URI from WWW-Authenticate header" time="0.000473054">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; parseWWWAuthenticateHeader &gt; should return null when no resource metadata URI is found" time="0.000353293">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; extractBaseUrl &gt; should extract base URL from MCP server URL" time="0.000544005">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; extractBaseUrl &gt; should handle URLs with ports" time="0.000334398">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; isSSEEndpoint &gt; should return true for SSE endpoints" time="0.000247698">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; isSSEEndpoint &gt; should return true for non-MCP endpoints" time="0.000406561">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; isSSEEndpoint &gt; should return false for MCP endpoints" time="0.000246786">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; buildResourceParameter &gt; should build resource parameter from endpoint URL" time="0.000227551">
        </testcase>
        <testcase classname="src/mcp/oauth-utils.test.ts" name="OAuthUtils &gt; buildResourceParameter &gt; should handle URLs with ports" time="0.000293072">
        </testcase>
    </testsuite>
    <testsuite name="src/services/chatRecordingService.test.ts" timestamp="2025-10-05T22:46:17.184Z" hostname="uby" tests="10" failures="0" errors="0" skipped="0" time="0.033604687">
        <testcase classname="src/services/chatRecordingService.test.ts" name="ChatRecordingService &gt; initialize &gt; should create a new session if none is provided" time="0.008602897">
        </testcase>
        <testcase classname="src/services/chatRecordingService.test.ts" name="ChatRecordingService &gt; initialize &gt; should resume from an existing session if provided" time="0.002623227">
        </testcase>
        <testcase classname="src/services/chatRecordingService.test.ts" name="ChatRecordingService &gt; recordMessage &gt; should record a new message" time="0.003196136">
        </testcase>
        <testcase classname="src/services/chatRecordingService.test.ts" name="ChatRecordingService &gt; recordMessage &gt; should append to the last message if append is true and types match" time="0.002495111">
        </testcase>
        <testcase classname="src/services/chatRecordingService.test.ts" name="ChatRecordingService &gt; recordThought &gt; should queue a thought" time="0.003854993">
        </testcase>
        <testcase classname="src/services/chatRecordingService.test.ts" name="ChatRecordingService &gt; recordMessageTokens &gt; should update the last message with token info" time="0.004637319">
        </testcase>
        <testcase classname="src/services/chatRecordingService.test.ts" name="ChatRecordingService &gt; recordMessageTokens &gt; should queue token info if the last message already has tokens" time="0.001979507">
        </testcase>
        <testcase classname="src/services/chatRecordingService.test.ts" name="ChatRecordingService &gt; recordToolCalls &gt; should add new tool calls to the last message" time="0.001538282">
        </testcase>
        <testcase classname="src/services/chatRecordingService.test.ts" name="ChatRecordingService &gt; recordToolCalls &gt; should create a new message if the last message is not from gemini" time="0.001344494">
        </testcase>
        <testcase classname="src/services/chatRecordingService.test.ts" name="ChatRecordingService &gt; deleteSession &gt; should delete the session file" time="0.001181573">
        </testcase>
    </testsuite>
    <testsuite name="src/services/fileDiscoveryService.test.ts" timestamp="2025-10-05T22:46:17.184Z" hostname="uby" tests="13" failures="0" errors="0" skipped="0" time="0.045548708">
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; initialization &gt; should initialize git ignore parser by default in a git repo" time="0.009688183">
        </testcase>
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; initialization &gt; should not load git repo patterns when not in a git repo" time="0.002627194">
        </testcase>
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; initialization &gt; should load .qwenignore patterns even when not in a git repo" time="0.006963417">
        </testcase>
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; filterFiles &gt; should filter out git-ignored and gemini-ignored files by default" time="0.003220361">
        </testcase>
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; filterFiles &gt; should not filter files when respectGitIgnore is false" time="0.002908204">
        </testcase>
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; filterFiles &gt; should not filter files when respectGeminiIgnore is false" time="0.003066507">
        </testcase>
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; filterFiles &gt; should handle empty file list" time="0.003224408">
        </testcase>
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; shouldGitIgnoreFile &amp; shouldGeminiIgnoreFile &gt; should return true for git-ignored files" time="0.001994926">
        </testcase>
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; shouldGitIgnoreFile &amp; shouldGeminiIgnoreFile &gt; should return false for non-git-ignored files" time="0.001987613">
        </testcase>
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; shouldGitIgnoreFile &amp; shouldGeminiIgnoreFile &gt; should return true for gemini-ignored files" time="0.001575792">
        </testcase>
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; shouldGitIgnoreFile &amp; shouldGeminiIgnoreFile &gt; should return false for non-gemini-ignored files" time="0.00171551">
        </testcase>
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; edge cases &gt; should handle relative project root paths" time="0.00236988">
        </testcase>
        <testcase classname="src/services/fileDiscoveryService.test.ts" name="FileDiscoveryService &gt; edge cases &gt; should handle filterFiles with undefined options" time="0.002417577">
        </testcase>
    </testsuite>
    <testsuite name="src/services/fileSystemService.test.ts" timestamp="2025-10-05T22:46:17.185Z" hostname="uby" tests="3" failures="0" errors="0" skipped="0" time="0.00729487">
        <testcase classname="src/services/fileSystemService.test.ts" name="StandardFileSystemService &gt; readTextFile &gt; should read file content using fs" time="0.003295139">
        </testcase>
        <testcase classname="src/services/fileSystemService.test.ts" name="StandardFileSystemService &gt; readTextFile &gt; should propagate fs.readFile errors" time="0.001339315">
        </testcase>
        <testcase classname="src/services/fileSystemService.test.ts" name="StandardFileSystemService &gt; writeTextFile &gt; should write file content using fs" time="0.000210389">
        </testcase>
    </testsuite>
    <testsuite name="src/services/gitService.test.ts" timestamp="2025-10-05T22:46:17.185Z" hostname="uby" tests="14" failures="0" errors="0" skipped="0" time="0.032061375">
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; constructor &gt; should successfully create an instance" time="0.004711446">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; verifyGitAvailability &gt; should resolve true if git --version command succeeds" time="0.002410063">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; verifyGitAvailability &gt; should resolve false if git --version command fails" time="0.001901774">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; initialize &gt; should throw an error if Git is not available" time="0.003417364">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; initialize &gt; should call setupShadowGitRepository if Git is available" time="0.00122882">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; setupShadowGitRepository &gt; should create history and repository directories" time="0.003165649">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; setupShadowGitRepository &gt; should create a .gitconfig file with the correct content" time="0.002080284">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; setupShadowGitRepository &gt; should initialize git repo in historyDir if not already initialized" time="0.002307975">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; setupShadowGitRepository &gt; should not initialize git repo if already initialized" time="0.001129287">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; setupShadowGitRepository &gt; should copy .gitignore from projectRoot if it exists" time="0.00121752">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; setupShadowGitRepository &gt; should not create a .gitignore in shadow repo if project .gitignore does not exist" time="0.000937633">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; setupShadowGitRepository &gt; should throw an error if reading projectRoot .gitignore fails with other errors" time="0.001541579">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; setupShadowGitRepository &gt; should make an initial commit if no commits exist in history repo" time="0.002602019">
        </testcase>
        <testcase classname="src/services/gitService.test.ts" name="GitService &gt; setupShadowGitRepository &gt; should not make an initial commit if commits already exist" time="0.001752088">
        </testcase>
    </testsuite>
    <testsuite name="src/services/loopDetectionService.test.ts" timestamp="2025-10-05T22:46:17.185Z" hostname="uby" tests="35" failures="0" errors="0" skipped="0" time="0.18430426">
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Tool Call Loop Detection &gt; should not detect a loop for fewer than TOOL_CALL_LOOP_THRESHOLD identical calls" time="0.002355253">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Tool Call Loop Detection &gt; should detect a loop on the TOOL_CALL_LOOP_THRESHOLD-th identical call" time="0.0007525">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Tool Call Loop Detection &gt; should detect a loop on subsequent identical calls" time="0.000206682">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Tool Call Loop Detection &gt; should not detect a loop for different tool calls" time="0.000230977">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Tool Call Loop Detection &gt; should not reset tool call counter for other event types" time="0.000178901">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection &gt; should not detect a loop for random content" time="0.109986871">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection &gt; should detect a loop when a chunk of content repeats consecutively" time="0.001775301">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection &gt; should not detect a loop if repetitions are very far apart" time="0.016204524">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should not detect a loop when repetitive content is inside a code block" time="0.00061143">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should not detect loops when content transitions into a code block" time="0.001009355">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should skip loop detection when already inside a code block (this.inCodeBlock)" time="0.000295026">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should correctly track inCodeBlock state with multiple fence transitions" time="0.000203245">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should detect a loop when repetitive content is outside a code block" time="0.001036626">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should handle content with multiple code blocks and no loops" time="0.000130752">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should handle content with mixed code blocks and looping text" time="0.001291917">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should not detect a loop for a long code block with some repeating tokens" time="0.000418453">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should reset tracking when a code fence is found" time="0.001011128">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should reset tracking when a table is detected" time="0.001852784">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should reset tracking when a list item is detected" time="0.001890824">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should reset tracking when a heading is detected" time="0.001843937">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should reset tracking when a blockquote is detected" time="0.001819322">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should reset tracking for various list item formats" time="0.009584961">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should reset tracking for various table formats" time="0.004638051">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Content Loop Detection with Code Blocks &gt; should reset tracking for various heading levels" time="0.006852833">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Edge Cases &gt; should handle empty content" time="0.000143365">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Divider Content Detection &gt; should not detect a loop for repeating divider-like content" time="0.000201974">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Divider Content Detection &gt; should not detect a loop for repeating complex box-drawing dividers" time="0.000288964">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; Reset Functionality &gt; tool call should reset content count" time="0.000176716">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService &gt; General Behavior &gt; should return false for unhandled event types" time="0.000063017">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService LLM Checks &gt; should not trigger LLM check before LLM_CHECK_AFTER_TURNS" time="0.000545458">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService LLM Checks &gt; should trigger LLM check on the 30th turn" time="0.000390932">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService LLM Checks &gt; should detect a cognitive loop when confidence is high" time="0.003142517">
            <system-err>
Repetitive actions

            </system-err>
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService LLM Checks &gt; should not detect a loop when confidence is low" time="0.004408095">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService LLM Checks &gt; should adjust the check interval based on confidence" time="0.002084351">
        </testcase>
        <testcase classname="src/services/loopDetectionService.test.ts" name="LoopDetectionService LLM Checks &gt; should handle errors from generateJson gracefully" time="0.004567269">
            <system-out>
Error: API error
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/services/loopDetectionService.test.ts:718:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="src/services/shellExecutionService.test.ts" timestamp="2025-10-05T22:46:17.186Z" hostname="uby" tests="30" failures="0" errors="0" skipped="0" time="0.055053842">
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService &gt; Successful Execution &gt; should execute a command and capture output" time="0.016605645">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService &gt; Successful Execution &gt; should strip ANSI codes from output" time="0.002993621">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService &gt; Successful Execution &gt; should correctly decode multi-byte characters split across chunks" time="0.003542556">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService &gt; Successful Execution &gt; should handle commands with no output" time="0.001373738">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService &gt; Failed Execution &gt; should capture a non-zero exit code" time="0.002707984">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService &gt; Failed Execution &gt; should capture a termination signal" time="0.001317374">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService &gt; Failed Execution &gt; should handle a synchronous spawn error" time="0.001607982">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService &gt; Aborting Commands &gt; should abort a running process and set the aborted flag" time="0.00130448">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService &gt; Binary Output &gt; should detect binary output and switch to progress events" time="0.001593745">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService &gt; Binary Output &gt; should not emit data events after binary is detected" time="0.002448164">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService &gt; Platform-Specific Behavior &gt; should use cmd.exe on Windows" time="0.001288531">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService &gt; Platform-Specific Behavior &gt; should use bash on Linux" time="0.001200007">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Successful Execution &gt; should execute a command and capture stdout and stderr" time="0.002590437">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Successful Execution &gt; should strip ANSI codes from output" time="0.000870509">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Successful Execution &gt; should correctly decode multi-byte characters split across chunks" time="0.000623732">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Successful Execution &gt; should handle commands with no output" time="0.000369092">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Failed Execution &gt; should capture a non-zero exit code and format output correctly" time="0.000479536">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Failed Execution &gt; should capture a termination signal" time="0.000344877">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Failed Execution &gt; should handle a spawn error" time="0.000393127">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Failed Execution &gt; handles errors that do not fire the exit event" time="0.000454721">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Aborting Commands &gt; on &apos;linux&apos; &gt; should abort a running process and set the aborted flag" time="0.000628562">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Aborting Commands &gt; on &apos;win32&apos; &gt; should abort a running process and set the aborted flag" time="0.001431204">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Aborting Commands &gt; should gracefully attempt SIGKILL on linux if SIGTERM fails" time="0.002569819">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Binary Output &gt; should detect binary output and switch to progress events" time="0.000726453">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Binary Output &gt; should not emit data events after binary is detected" time="0.000518408">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Platform-Specific Behavior &gt; should use cmd.exe on Windows" time="0.00055764">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService child_process fallback &gt; Platform-Specific Behavior &gt; should use bash and detached process group on Linux" time="0.000451574">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService execution method selection &gt; should use node-pty when shouldUseNodePty is true and pty is available" time="0.001161716">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService execution method selection &gt; should use child_process when shouldUseNodePty is false" time="0.000440364">
        </testcase>
        <testcase classname="src/services/shellExecutionService.test.ts" name="ShellExecutionService execution method selection &gt; should fall back to child_process if pty is not available even if shouldUseNodePty is true" time="0.000324399">
        </testcase>
    </testsuite>
    <testsuite name="src/subagents/builtin-agents.test.ts" timestamp="2025-10-05T22:46:17.187Z" hostname="uby" tests="8" failures="0" errors="0" skipped="0" time="0.006403583">
        <testcase classname="src/subagents/builtin-agents.test.ts" name="BuiltinAgentRegistry &gt; getBuiltinAgents &gt; should return array of builtin agents with correct properties" time="0.002427697">
        </testcase>
        <testcase classname="src/subagents/builtin-agents.test.ts" name="BuiltinAgentRegistry &gt; getBuiltinAgents &gt; should include general-purpose agent" time="0.000331051">
        </testcase>
        <testcase classname="src/subagents/builtin-agents.test.ts" name="BuiltinAgentRegistry &gt; getBuiltinAgent &gt; should return correct agent for valid name" time="0.000246736">
        </testcase>
        <testcase classname="src/subagents/builtin-agents.test.ts" name="BuiltinAgentRegistry &gt; getBuiltinAgent &gt; should return null for invalid name" time="0.00015702">
        </testcase>
        <testcase classname="src/subagents/builtin-agents.test.ts" name="BuiltinAgentRegistry &gt; isBuiltinAgent &gt; should return true for valid builtin agent names" time="0.000203596">
        </testcase>
        <testcase classname="src/subagents/builtin-agents.test.ts" name="BuiltinAgentRegistry &gt; isBuiltinAgent &gt; should return false for invalid names" time="0.000124219">
        </testcase>
        <testcase classname="src/subagents/builtin-agents.test.ts" name="BuiltinAgentRegistry &gt; getBuiltinAgentNames &gt; should return array of agent names" time="0.000780733">
        </testcase>
        <testcase classname="src/subagents/builtin-agents.test.ts" name="BuiltinAgentRegistry &gt; consistency &gt; should maintain consistency across all methods" time="0.000334788">
        </testcase>
    </testsuite>
    <testsuite name="src/subagents/subagent-manager.test.ts" timestamp="2025-10-05T22:46:17.188Z" hostname="uby" tests="52" failures="0" errors="0" skipped="0" time="0.112038432">
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; parseSubagentContent &gt; should parse valid markdown content" time="0.031217937">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
            <system-err>
Error accessing installation ID file, generating ephemeral ID: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getInstallationIdPath [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:40:30[90m)[39m
    at InstallationManager.getInstallationIdPath [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/installationManager.ts:14:20[90m)[39m
    at InstallationManager.readInstallationIdFromFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/installationManager.ts:18:37[90m)[39m
    at InstallationManager.getInstallationId [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/installationManager.ts:42:33[90m)[39m
    at QwenLogger.generateUserId [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/qwen-logger/qwen-logger.ts:123:53[90m)[39m
    at new QwenLogger [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/qwen-logger/qwen-logger.ts:114:24[90m)[39m
    at QwenLogger.getInstance [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/qwen-logger/qwen-logger.ts:131:29[90m)[39m
    at logCliConfiguration [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/loggers.ts:85:14[90m)[39m {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-err>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; parseSubagentContent &gt; should parse content with tools" time="0.003005193">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; parseSubagentContent &gt; should parse content with model config" time="0.002193714">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; parseSubagentContent &gt; should parse content with run config" time="0.001525068">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; parseSubagentContent &gt; should handle numeric name and description values" time="0.00117428">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; parseSubagentContent &gt; should handle boolean name and description values" time="0.002231734">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; parseSubagentContent &gt; should determine level from file path" time="0.001469295">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; parseSubagentContent &gt; should throw error for invalid frontmatter format" time="0.001548952">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; parseSubagentContent &gt; should throw error for missing name" time="0.001388756">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; parseSubagentContent &gt; should throw error for missing description" time="0.000892088">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; parseSubagentContent &gt; should not warn when filename matches subagent name" time="0.001350837">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; serializeSubagent &gt; should serialize basic configuration" time="0.00214302">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; serializeSubagent &gt; should serialize configuration with tools" time="0.001263054">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; serializeSubagent &gt; should serialize configuration with model config" time="0.00108789">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; serializeSubagent &gt; should not include empty optional fields" time="0.000929337">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; createSubagent &gt; should create subagent successfully" time="0.003401486">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; createSubagent &gt; should throw error if file already exists and overwrite is false" time="0.002081396">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; createSubagent &gt; should overwrite file when overwrite is true" time="0.001129768">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; createSubagent &gt; should use custom path when provided" time="0.001412961">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; createSubagent &gt; should throw error on file write failure" time="0.001432708">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; loadSubagent &gt; should load subagent from project level first" time="0.001649318">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; loadSubagent &gt; should fall back to user level if project level fails" time="0.001350766">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; loadSubagent &gt; should return null if not found at either level" time="0.002714316">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; loadSubagent &gt; should load subagent even when filename does not match name" time="0.008166891">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; loadSubagent &gt; should search user level when filename mismatch at project level" time="0.001566655">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; loadSubagent &gt; should handle specific level search with filename mismatch" time="0.001145677">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; updateSubagent &gt; should update existing subagent" time="0.001350124">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; updateSubagent &gt; should throw error if subagent not found" time="0.001453316">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; updateSubagent &gt; should throw error on write failure" time="0.00109304">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; deleteSubagent &gt; should delete subagent from specified level" time="0.0014828">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; deleteSubagent &gt; should delete from both levels if no level specified" time="0.001528464">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; deleteSubagent &gt; should throw error if subagent not found" time="0.00116334">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; deleteSubagent &gt; should succeed if deleted from at least one level" time="0.00227849">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; deleteSubagent &gt; should delete subagent with mismatched filename" time="0.000897088">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; deleteSubagent &gt; should handle deletion when multiple files exist but only one matches" time="0.000885406">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; listSubagents &gt; should list subagents from both levels" time="0.002349562">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; listSubagents &gt; should prioritize project level over user level" time="0.001123145">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; listSubagents &gt; should filter by level" time="0.001050822">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; listSubagents &gt; should sort by name" time="0.000982726">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; listSubagents &gt; should handle empty directories" time="0.001707295">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; listSubagents &gt; should handle directory read errors" time="0.001189317">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; findSubagentByName &gt; should find existing subagent" time="0.000749785">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; findSubagentByName &gt; should return null for non-existent subagent" time="0.000681399">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; isNameAvailable &gt; should return true for available names" time="0.000868255">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; isNameAvailable &gt; should return false for existing names" time="0.00082826">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; isNameAvailable &gt; should check specific level when provided" time="0.000888242">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; Runtime Configuration Methods &gt; convertToRuntimeConfig &gt; should convert basic configuration" time="0.000863425">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; Runtime Configuration Methods &gt; convertToRuntimeConfig &gt; should include tool configuration when tools are specified" time="0.001126932">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; Runtime Configuration Methods &gt; convertToRuntimeConfig &gt; should transform display names to tool names in tool configuration" time="0.000870909">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
            <system-err>
Tool &quot;unknown_tool&quot; not found in tool registry, preserving as-is

            </system-err>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; Runtime Configuration Methods &gt; convertToRuntimeConfig &gt; should merge custom model and run configurations" time="0.000761547">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; Runtime Configuration Methods &gt; mergeConfigurations &gt; should merge basic properties" time="0.000890145">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent-manager.test.ts" name="SubagentManager &gt; Runtime Configuration Methods &gt; mergeConfigurations &gt; should merge nested configurations" time="0.000842878">
            <system-out>
Failed to initialize logger: TypeError: The &quot;path&quot; argument must be of type string. Received undefined
[90m    at Proxy.join (node:path:1339:7)[39m
    at Storage.getGlobalGeminiDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:26:19[90m)[39m
    at Storage.getGlobalTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:56:30[90m)[39m
    at Storage.getProjectTempDir [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/storage.ts:65:29[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:144:33[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:440:17[90m)[39m
    at Module.makeFakeConfig [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/test-utils/config.ts:33:10[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent-manager.test.ts:58:18
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20 {
  code: [32m&apos;ERR_INVALID_ARG_TYPE&apos;[39m
}

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="src/subagents/subagent-statistics.test.ts" timestamp="2025-10-05T22:46:17.191Z" hostname="uby" tests="29" failures="0" errors="0" skipped="0" time="0.02399513">
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; basic statistics tracking &gt; should track execution time" time="0.001624322">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; basic statistics tracking &gt; should track rounds" time="0.000217552">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; basic statistics tracking &gt; should track tool calls" time="0.000771316">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; basic statistics tracking &gt; should track tokens" time="0.000230666">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; tool usage statistics &gt; should track individual tool usage" time="0.000812602">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; formatCompact &gt; should format basic execution summary" time="0.014824394">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; formatCompact &gt; should handle zero tool calls" time="0.000389309">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; formatCompact &gt; should show zero tokens when no tokens recorded" time="0.000220898">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; formatDetailed &gt; should include quality assessment" time="0.00070344">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; formatDetailed &gt; should include speed assessment" time="0.000197385">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; formatDetailed &gt; should show top tools" time="0.000209517">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; formatDetailed &gt; should include performance insights" time="0.000128808">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; quality categories &gt; should categorize excellent execution" time="0.000177938">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; quality categories &gt; should categorize good execution" time="0.000225707">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; quality categories &gt; should categorize poor execution" time="0.000106266">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; speed categories &gt; should categorize fast completion" time="0.000079868">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; speed categories &gt; should categorize good speed" time="0.000065981">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; speed categories &gt; should categorize moderate duration" time="0.000063878">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; speed categories &gt; should categorize long execution" time="0.00007061">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; performance tips &gt; should suggest reviewing low success rate" time="0.000123859">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; performance tips &gt; should suggest breaking down long tasks" time="0.000082502">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; performance tips &gt; should suggest optimizing high token usage" time="0.000074578">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; performance tips &gt; should identify high token usage per call" time="0.000078775">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; performance tips &gt; should identify network failures" time="0.00007609">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; performance tips &gt; should identify slow tools" time="0.000084045">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; duration formatting &gt; should format milliseconds" time="0.000076842">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; duration formatting &gt; should format seconds" time="0.00006518">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; duration formatting &gt; should format minutes and seconds" time="0.000084035">
        </testcase>
        <testcase classname="src/subagents/subagent-statistics.test.ts" name="SubagentStatistics &gt; duration formatting &gt; should format hours and minutes" time="0.000069097">
        </testcase>
    </testsuite>
    <testsuite name="src/subagents/subagent.test.ts" timestamp="2025-10-05T22:46:17.192Z" hostname="uby" tests="16" failures="0" errors="0" skipped="0" time="0.074849191">
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; ContextState &gt; should set and get values correctly" time="0.002212368">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; ContextState &gt; should return undefined for missing keys" time="0.000224354">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; create (Tool Validation) &gt; should create a SubAgentScope successfully with minimal config" time="0.030210535">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; create (Tool Validation) &gt; should not block creation when a tool may require confirmation" time="0.00231107">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; create (Tool Validation) &gt; should succeed if tools do not require confirmation" time="0.001802221">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; create (Tool Validation) &gt; should allow creation regardless of tool parameter requirements" time="0.001881747">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; runNonInteractive - Initialization and Prompting &gt; should correctly template the system prompt and initialize GeminiChat" time="0.008482505">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; runNonInteractive - Initialization and Prompting &gt; should use initialMessages instead of systemPrompt if provided" time="0.001769079">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; runNonInteractive - Initialization and Prompting &gt; should throw an error if template variables are missing" time="0.002578946">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; runNonInteractive - Initialization and Prompting &gt; should validate that systemPrompt and initialMessages are mutually exclusive" time="0.001360294">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; runNonInteractive - Execution and Tool Use &gt; should terminate with GOAL if no outputs are expected and model stops" time="0.001335148">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; runNonInteractive - Execution and Tool Use &gt; should terminate with GOAL when model provides final text" time="0.000976013">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; runNonInteractive - Execution and Tool Use &gt; should execute external tools and provide the response to the model" time="0.004133548">
            <system-out>
[Tool] Starting: list_files (call_1...)
[Tool] Args: {
  &quot;path&quot;: &quot;.&quot;
}

[Tool] Completed: list_files in 1ms
[Tool] Success: list_files

            </system-out>
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; runNonInteractive - Termination and Recovery &gt; should terminate with MAX_TURNS if the limit is reached" time="0.001895843">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; runNonInteractive - Termination and Recovery &gt; should terminate with TIMEOUT if the time limit is reached during an LLM call" time="0.004254843">
        </testcase>
        <testcase classname="src/subagents/subagent.test.ts" name="subagent.ts &gt; SubAgentScope &gt; runNonInteractive - Termination and Recovery &gt; should terminate with ERROR if the model call throws" time="0.007561854">
            <system-err>
Error during subagent execution: Error: API Failure
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/subagents/subagent.test.ts:694:49
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="src/subagents/types.test.ts" timestamp="2025-10-05T22:46:17.193Z" hostname="uby" tests="3" failures="0" errors="0" skipped="0" time="0.003195916">
        <testcase classname="src/subagents/types.test.ts" name="SubagentError &gt; should create error with message and code" time="0.00146646">
        </testcase>
        <testcase classname="src/subagents/types.test.ts" name="SubagentError &gt; should create error with subagent name" time="0.000190542">
        </testcase>
        <testcase classname="src/subagents/types.test.ts" name="SubagentError &gt; should have correct error codes" time="0.000204899">
        </testcase>
    </testsuite>
    <testsuite name="src/subagents/validation.test.ts" timestamp="2025-10-05T22:46:17.193Z" hostname="uby" tests="37" failures="0" errors="0" skipped="0" time="0.013705355">
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateName &gt; should accept valid names" time="0.002497835">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateName &gt; should reject empty or whitespace names" time="0.000664277">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateName &gt; should reject names that are too short" time="0.000374562">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateName &gt; should reject names that are too long" time="0.000263187">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateName &gt; should reject names with invalid characters" time="0.000346">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateName &gt; should reject names starting with special characters" time="0.000226338">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateName &gt; should reject names ending with special characters" time="0.000191204">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateName &gt; should reject reserved names" time="0.000438981">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateName &gt; should warn about naming conventions" time="0.000163963">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateName &gt; should warn about mixed separators" time="0.001538042">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateSystemPrompt &gt; should accept valid system prompts" time="0.000390491">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateSystemPrompt &gt; should reject empty prompts" time="0.000278525">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateSystemPrompt &gt; should reject prompts that are too short" time="0.00013527">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateSystemPrompt &gt; should reject prompts that are too long" time="0.000110515">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateSystemPrompt &gt; should warn about long prompts" time="0.000236307">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateTools &gt; should accept valid tool arrays" time="0.000251695">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateTools &gt; should reject non-array inputs" time="0.000143455">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateTools &gt; should warn about empty arrays" time="0.000148585">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateTools &gt; should warn about duplicate tools" time="0.000131193">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateTools &gt; should reject non-string tool names" time="0.000133276">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateTools &gt; should reject empty tool names" time="0.000073325">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateModelConfig &gt; should accept valid model configurations" time="0.000309522">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateModelConfig &gt; should reject invalid model names" time="0.000116576">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateModelConfig &gt; should reject invalid temperature values" time="0.000137073">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateModelConfig &gt; should warn about high temperature" time="0.000073616">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateModelConfig &gt; should reject invalid top_p values" time="0.000077312">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateRunConfig &gt; should accept valid run configurations" time="0.000248189">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateRunConfig &gt; should reject invalid max_time_minutes" time="0.000082783">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateRunConfig &gt; should warn about very long execution times" time="0.000084406">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateRunConfig &gt; should reject invalid max_turns" time="0.000120072">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateRunConfig &gt; should warn about high turn limits" time="0.000104593">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateConfig &gt; should accept valid configurations" time="0.000263788">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateConfig &gt; should collect errors from all validation steps" time="0.000169884">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateConfig &gt; should collect warnings from all validation steps" time="0.000119711">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateOrThrow &gt; should not throw for valid configurations" time="0.000689754">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateOrThrow &gt; should throw SubagentError for invalid configurations" time="0.000354114">
        </testcase>
        <testcase classname="src/subagents/validation.test.ts" name="SubagentValidator &gt; validateOrThrow &gt; should include subagent name in error" time="0.000223913">
        </testcase>
    </testsuite>
    <testsuite name="src/telemetry/loggers.test.ts" timestamp="2025-10-05T22:46:17.194Z" hostname="uby" tests="15" failures="0" errors="0" skipped="0" time="0.037105767">
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logChatCompression &gt; logs the chat compression event to QwenLogger" time="0.0258297">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logChatCompression &gt; records the chat compression event to OTEL" time="0.00152651">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logCliConfiguration &gt; should log the cli configuration" time="0.000689454">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logUserPrompt &gt; should log a user prompt" time="0.000553963">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logUserPrompt &gt; should not log prompt if disabled" time="0.000376736">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logApiResponse &gt; should log an API response with all fields" time="0.001559442">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logApiResponse &gt; should log an API response with an error" time="0.000507307">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logApiRequest &gt; should log an API request with request_text" time="0.000352171">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logApiRequest &gt; should log an API request without request_text" time="0.000347011">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logFlashFallback &gt; should log flash fallback event" time="0.000462264">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logToolCall &gt; should log a tool call with all fields" time="0.000976534">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logToolCall &gt; should log a tool call with a reject decision" time="0.000581124">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logToolCall &gt; should log a tool call with a modify decision" time="0.000467514">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logToolCall &gt; should log a tool call without a decision" time="0.00061679">
        </testcase>
        <testcase classname="src/telemetry/loggers.test.ts" name="loggers &gt; logToolCall &gt; should log a failed tool call with an error" time="0.000603926">
        </testcase>
    </testsuite>
    <testsuite name="src/telemetry/metrics.test.ts" timestamp="2025-10-05T22:46:17.195Z" hostname="uby" tests="13" failures="0" errors="0" skipped="0" time="0.07180164">
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordChatCompressionMetrics &gt; does not record metrics if not initialized" time="0.030542017">
        </testcase>
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordChatCompressionMetrics &gt; records token compression with the correct attributes" time="0.006206579">
        </testcase>
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordTokenUsageMetrics &gt; should not record metrics if not initialized" time="0.004133798">
        </testcase>
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordTokenUsageMetrics &gt; should record token usage with the correct attributes" time="0.003193441">
        </testcase>
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordTokenUsageMetrics &gt; should record token usage for different types" time="0.004056867">
        </testcase>
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordTokenUsageMetrics &gt; should handle different models" time="0.002441922">
        </testcase>
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordFileOperationMetric &gt; should not record metrics if not initialized" time="0.002817486">
        </testcase>
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordFileOperationMetric &gt; should record file creation with all attributes" time="0.002977132">
        </testcase>
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordFileOperationMetric &gt; should record file read with minimal attributes" time="0.003430259">
        </testcase>
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordFileOperationMetric &gt; should record file update with some attributes" time="0.002726408">
        </testcase>
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordFileOperationMetric &gt; should include diffStat when provided" time="0.003131466">
        </testcase>
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordFileOperationMetric &gt; should not include diffStat attributes when diffStat is not provided" time="0.002667179">
        </testcase>
        <testcase classname="src/telemetry/metrics.test.ts" name="Telemetry Metrics &gt; recordFileOperationMetric &gt; should handle diffStat with all zero values" time="0.001729516">
        </testcase>
    </testsuite>
    <testsuite name="src/telemetry/sdk.test.ts" timestamp="2025-10-05T22:46:17.195Z" hostname="uby" tests="4" failures="0" errors="0" skipped="0" time="0.015023261">
        <testcase classname="src/telemetry/sdk.test.ts" name="Telemetry SDK &gt; should use gRPC exporters when protocol is grpc" time="0.008620249">
        </testcase>
        <testcase classname="src/telemetry/sdk.test.ts" name="Telemetry SDK &gt; should use HTTP exporters when protocol is http" time="0.002244086">
        </testcase>
        <testcase classname="src/telemetry/sdk.test.ts" name="Telemetry SDK &gt; should parse gRPC endpoint correctly" time="0.002011697">
        </testcase>
        <testcase classname="src/telemetry/sdk.test.ts" name="Telemetry SDK &gt; should parse HTTP endpoint correctly" time="0.000800399">
        </testcase>
    </testsuite>
    <testsuite name="src/telemetry/telemetry-utils.test.ts" timestamp="2025-10-05T22:46:17.195Z" hostname="uby" tests="6" failures="0" errors="0" skipped="0" time="0.003758365">
        <testcase classname="src/telemetry/telemetry-utils.test.ts" name="getProgrammingLanguage &gt; should return the programming language when file_path is present" time="0.001354463">
        </testcase>
        <testcase classname="src/telemetry/telemetry-utils.test.ts" name="getProgrammingLanguage &gt; should return the programming language when absolute_path is present" time="0.0001676">
        </testcase>
        <testcase classname="src/telemetry/telemetry-utils.test.ts" name="getProgrammingLanguage &gt; should return the programming language when path is present" time="0.000091449">
        </testcase>
        <testcase classname="src/telemetry/telemetry-utils.test.ts" name="getProgrammingLanguage &gt; should return undefined when no file path is present" time="0.00040575">
        </testcase>
        <testcase classname="src/telemetry/telemetry-utils.test.ts" name="getProgrammingLanguage &gt; should handle unknown file extensions gracefully" time="0.000193347">
        </testcase>
        <testcase classname="src/telemetry/telemetry-utils.test.ts" name="getProgrammingLanguage &gt; should handle files with no extension" time="0.000101477">
        </testcase>
    </testsuite>
    <testsuite name="src/telemetry/telemetry.test.ts" timestamp="2025-10-05T22:46:17.196Z" hostname="uby" tests="2" failures="0" errors="0" skipped="0" time="0.010724197">
        <testcase classname="src/telemetry/telemetry.test.ts" name="telemetry &gt; should initialize the telemetry service" time="0.00692656">
        </testcase>
        <testcase classname="src/telemetry/telemetry.test.ts" name="telemetry &gt; should shutdown the telemetry service" time="0.002918934">
        </testcase>
    </testsuite>
    <testsuite name="src/telemetry/uiTelemetry.test.ts" timestamp="2025-10-05T22:46:17.196Z" hostname="uby" tests="19" failures="0" errors="0" skipped="0" time="0.044257983">
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; should have correct initial metrics" time="0.002404183">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; should emit an update event when an event is added" time="0.0012392">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; API Response Event Processing &gt; should process a single ApiResponseEvent" time="0.000253329">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; API Response Event Processing &gt; should aggregate multiple ApiResponseEvents for the same model" time="0.000187987">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; API Response Event Processing &gt; should handle ApiResponseEvents for different models" time="0.000185022">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; API Error Event Processing &gt; should process a single ApiErrorEvent" time="0.000198516">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; API Error Event Processing &gt; should aggregate ApiErrorEvents and ApiResponseEvents" time="0.000162069">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; Tool Call Event Processing &gt; should process a single successful ToolCallEvent" time="0.029031065">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; Tool Call Event Processing &gt; should process a single failed ToolCallEvent" time="0.000545968">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; Tool Call Event Processing &gt; should process a ToolCallEvent with modify decision" time="0.00096897">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; Tool Call Event Processing &gt; should process a ToolCallEvent without a decision" time="0.000936561">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; Tool Call Event Processing &gt; should aggregate multiple ToolCallEvents for the same tool" time="0.001261582">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; Tool Call Event Processing &gt; should handle ToolCallEvents for different tools" time="0.00110455">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; resetLastPromptTokenCount &gt; should reset the last prompt token count to 0" time="0.000200351">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; resetLastPromptTokenCount &gt; should emit an update event when resetLastPromptTokenCount is called" time="0.00030322">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; resetLastPromptTokenCount &gt; should not affect other metrics when resetLastPromptTokenCount is called" time="0.000166247">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; resetLastPromptTokenCount &gt; should work correctly when called multiple times" time="0.000251224">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; Tool Call Event with Line Count Metadata &gt; should aggregate valid line count metadata" time="0.001757588">
        </testcase>
        <testcase classname="src/telemetry/uiTelemetry.test.ts" name="UiTelemetryService &gt; Tool Call Event with Line Count Metadata &gt; should ignore null/undefined values in line count metadata" time="0.001204455">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/diffOptions.test.ts" timestamp="2025-10-05T22:46:17.197Z" hostname="uby" tests="9" failures="0" errors="0" skipped="0" time="0.006992522">
        <testcase classname="src/tools/diffOptions.test.ts" name="getDiffStat &gt; should return 0 for all stats when there are no changes" time="0.002652501">
        </testcase>
        <testcase classname="src/tools/diffOptions.test.ts" name="getDiffStat &gt; should correctly report AI additions" time="0.000633841">
        </testcase>
        <testcase classname="src/tools/diffOptions.test.ts" name="getDiffStat &gt; should correctly report AI removals" time="0.000169733">
        </testcase>
        <testcase classname="src/tools/diffOptions.test.ts" name="getDiffStat &gt; should correctly report AI modifications" time="0.000264699">
        </testcase>
        <testcase classname="src/tools/diffOptions.test.ts" name="getDiffStat &gt; should correctly report user additions" time="0.000681119">
        </testcase>
        <testcase classname="src/tools/diffOptions.test.ts" name="getDiffStat &gt; should correctly report user removals" time="0.00027053">
        </testcase>
        <testcase classname="src/tools/diffOptions.test.ts" name="getDiffStat &gt; should correctly report user modifications" time="0.000188178">
        </testcase>
        <testcase classname="src/tools/diffOptions.test.ts" name="getDiffStat &gt; should handle complex changes from both AI and user" time="0.000224575">
        </testcase>
        <testcase classname="src/tools/diffOptions.test.ts" name="getDiffStat &gt; should report a single line modification as one addition and one removal" time="0.000183309">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/edit.test.ts" timestamp="2025-10-05T22:46:17.197Z" hostname="uby" tests="42" failures="0" errors="0" skipped="1" time="0.162086255">
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; applyReplacement &gt; should return newString if isNewFile is true" time="0.002710759">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; applyReplacement &gt; should return newString if currentContent is null and oldString is empty (defensive)" time="0.000637839">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; applyReplacement &gt; should return empty string if currentContent is null and oldString is not empty (defensive)" time="0.000684565">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; applyReplacement &gt; should replace oldString with newString in currentContent" time="0.000497299">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; applyReplacement &gt; should return currentContent if oldString is empty and not a new file" time="0.000447086">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; validateToolParams &gt; should return null for valid params" time="0.027530583">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; validateToolParams &gt; should return error for relative path" time="0.001814733">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; validateToolParams &gt; should return error for path outside root" time="0.001954582">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; shouldConfirmExecute &gt; should throw an error if params are invalid" time="0.00263569">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; shouldConfirmExecute &gt; should request confirmation for valid edit" time="0.008570858">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; shouldConfirmExecute &gt; should return false if old_string is not found" time="0.004147624">
            <system-out>
Error: Failed to edit, could not find the string to replace.

            </system-out>
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; shouldConfirmExecute &gt; should return false if multiple occurrences of old_string are found" time="0.003480141">
            <system-out>
Error: Failed to edit, expected 1 occurrence but found 2.

            </system-out>
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; shouldConfirmExecute &gt; should request confirmation for creating a new file (empty old_string)" time="0.00388568">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; shouldConfirmExecute &gt; should use corrected params from ensureCorrectEdit for diff generation" time="0">
            <skipped/>
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should throw error if file path is not absolute" time="0.004066986">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should throw error if file path is empty" time="0.002782412">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should edit an existing file and return diff with fileName" time="0.006881275">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should create a new file if old_string is empty and file does not exist, and return created message" time="0.003965036">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should return error if old_string is not found in file" time="0.003464111">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should return error if multiple occurrences of old_string are found" time="0.003803499">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should successfully replace multiple occurrences when expected_replacements specified" time="0.00583369">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should return error if expected_replacements does not match actual occurrences" time="0.003165519">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should return error if trying to create a file that already exists (empty old_string)" time="0.002848344">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should include modification message when proposed content is modified" time="0.004700015">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should not include modification message when proposed content is not modified" time="0.003535182">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should not include modification message when modified_by_user is not provided" time="0.002993452">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should return error if old_string and new_string are identical" time="0.003051199">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; execute &gt; should return EDIT_NO_CHANGE error if replacement results in identical content" time="0.003101942">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; Error Scenarios &gt; should return FILE_NOT_FOUND error" time="0.002860115">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; Error Scenarios &gt; should return ATTEMPT_TO_CREATE_EXISTING_FILE error" time="0.003379425">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; Error Scenarios &gt; should return NO_OCCURRENCE_FOUND error" time="0.004146813">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; Error Scenarios &gt; should return EXPECTED_OCCURRENCE_MISMATCH error" time="0.003865733">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; Error Scenarios &gt; should return NO_CHANGE error" time="0.003575047">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; Error Scenarios &gt; should throw INVALID_PARAMETERS error for relative path" time="0.002437644">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; Error Scenarios &gt; should return FILE_WRITE_FAILURE on write error" time="0.002896122">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; getDescription &gt; should return &quot;No file changes to...&quot; if old_string and new_string are the same" time="0.002771191">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; getDescription &gt; should return a snippet of old and new strings if they are different" time="0.002130688">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; getDescription &gt; should handle very short strings correctly in the description" time="0.003013098">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; getDescription &gt; should truncate long strings in the description" time="0.003431381">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; workspace boundary validation &gt; should validate paths are within workspace root" time="0.003069111">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; workspace boundary validation &gt; should reject paths outside workspace root" time="0.002915367">
        </testcase>
        <testcase classname="src/tools/edit.test.ts" name="EditTool &gt; IDE mode &gt; should call ideClient.openDiff and update params on confirmation" time="0.005657234">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/exitPlanMode.test.ts" timestamp="2025-10-05T22:46:17.198Z" hostname="uby" tests="17" failures="0" errors="0" skipped="0" time="0.008705827">
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; constructor and metadata &gt; should have correct tool name" time="0.001690504">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; constructor and metadata &gt; should have correct display name" time="0.000178219">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; constructor and metadata &gt; should have correct kind" time="0.000098192">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; constructor and metadata &gt; should have correct schema" time="0.000688943">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; validateToolParams &gt; should accept valid parameters" time="0.000174803">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; validateToolParams &gt; should reject missing plan parameter" time="0.000089195">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; validateToolParams &gt; should reject empty plan parameter" time="0.000083354">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; validateToolParams &gt; should reject whitespace-only plan parameter" time="0.000107559">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; validateToolParams &gt; should reject non-string plan parameter" time="0.0000753">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; tool execution &gt; should execute successfully through tool interface after approval" time="0.00167745">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; tool execution &gt; should request confirmation with plan details" time="0.000395611">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; tool execution &gt; should remain in plan mode when confirmation is rejected" time="0.000578369">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; tool execution &gt; should have correct description" time="0.000350789">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; tool execution &gt; should handle execution errors gracefully" time="0.000783147">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; tool execution &gt; should return empty tool locations" time="0.000177037">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; tool description &gt; should contain usage guidelines" time="0.000204147">
        </testcase>
        <testcase classname="src/tools/exitPlanMode.test.ts" name="ExitPlanModeTool &gt; tool description &gt; should contain examples" time="0.000092872">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/glob.test.ts" timestamp="2025-10-05T22:46:17.199Z" hostname="uby" tests="34" failures="0" errors="0" skipped="0" time="1.583256021">
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should find files matching a simple pattern in the root" time="0.092366061">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should find files case-sensitively when case_sensitive is true" time="0.058848875">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should find files case-insensitively by default (pattern: *.TXT)" time="0.060257278">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should find files case-insensitively when case_sensitive is false (pattern: *.TXT)" time="0.056355308">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should find files using a pattern that includes a subdirectory" time="0.058507093">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should find files in a specified relative path (relative to rootDir)" time="0.056047769">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should find files using a deep globstar pattern (e.g., **/*.log)" time="0.057069287">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should return &quot;No files found&quot; message when pattern matches nothing" time="0.059079031">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should find files with special characters in the name" time="0.056170575">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should find files with special characters like [] and () in the path" time="0.061250964">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should correctly sort files by modification time (newest first)" time="0.057864496">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should return a PATH_NOT_IN_WORKSPACE error if path is outside workspace" time="0.0558048">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; execute &gt; should return a GLOB_EXECUTION_ERROR on glob failure" time="0.062405257">
            <system-err>
GlobLogic execute Error: Glob failed Error: Glob failed
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/tools/glob.test.ts:229:46
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

            </system-err>
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; validateToolParams &gt; should return null for valid parameters (pattern only)" time="0.054465125">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; validateToolParams &gt; should return null for valid parameters (pattern and path)" time="0.055729491">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; validateToolParams &gt; should return null for valid parameters (pattern, path, and case_sensitive)" time="0.054728562">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; validateToolParams &gt; should return error if pattern is missing (schema validation)" time="0.054343049">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; validateToolParams &gt; should return error if pattern is an empty string" time="0.053885023">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; validateToolParams &gt; should return error if pattern is only whitespace" time="0.054568135">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; validateToolParams &gt; should pass if path is provided but is not a string (type coercion)" time="0.055194803">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; validateToolParams &gt; should pass if case_sensitive is provided but is not a boolean (type coercion)" time="0.053759601">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; validateToolParams &gt; should return error if search path resolves outside the tool&apos;s root directory" time="0.052890074">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; validateToolParams &gt; should return error if specified search path does not exist" time="0.062885054">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; validateToolParams &gt; should return error if specified search path is a file, not a directory" time="0.05633485">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; workspace boundary validation &gt; should validate search paths are within workspace boundaries" time="0.054304367">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; workspace boundary validation &gt; should provide clear error messages when path is outside workspace" time="0.05786141">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="GlobTool &gt; workspace boundary validation &gt; should work with paths in workspace subdirectories" time="0.057949343">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="sortFileEntries &gt; should sort a mix of recent and older files correctly" time="0.008869179">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="sortFileEntries &gt; should sort only recent files by mtime descending" time="0.000270099">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="sortFileEntries &gt; should sort only older files alphabetically by path" time="0.00014575">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="sortFileEntries &gt; should handle an empty array" time="0.000076341">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="sortFileEntries &gt; should correctly sort files when mtimes are identical for older files" time="0.000110113">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="sortFileEntries &gt; should correctly sort files when mtimes are identical for recent files (maintaining mtime sort)" time="0.000397795">
        </testcase>
        <testcase classname="src/tools/glob.test.ts" name="sortFileEntries &gt; should use recencyThresholdMs parameter correctly" time="0.000138255">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/grep.test.ts" timestamp="2025-10-05T22:46:17.200Z" hostname="uby" tests="25" failures="1" errors="0" skipped="0" time="0.168503933">
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; validateToolParams &gt; should return null for valid params (pattern only)" time="0.040382782">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; validateToolParams &gt; should return null for valid params (pattern and path)" time="0.005164763">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; validateToolParams &gt; should return null for valid params (pattern, path, and include)" time="0.004985322">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; validateToolParams &gt; should return error if pattern is missing" time="0.003493145">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; validateToolParams &gt; should return error for invalid regex pattern" time="0.004097422">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; validateToolParams &gt; should return error if path does not exist" time="0.004591465">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; validateToolParams &gt; should return error if path is a file, not a directory" time="0.004746741">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; execute &gt; should find matches for a simple pattern in all files" time="0.015676307">
            <system-out>
GrepLogic: Falling back to JavaScript grep implementation.

            </system-out>
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; execute &gt; should find matches in a specific path" time="0.00773315">
            <system-out>
GrepLogic: Falling back to JavaScript grep implementation.

            </system-out>
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; execute &gt; should find matches with an include glob" time="0.006396901">
            <system-out>
GrepLogic: Falling back to JavaScript grep implementation.

            </system-out>
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; execute &gt; should find matches with an include glob and path" time="0.010246183">
            <system-out>
GrepLogic: Falling back to JavaScript grep implementation.

            </system-out>
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; execute &gt; should return &quot;No matches found&quot; when pattern does not exist" time="0.007786388">
            <system-out>
GrepLogic: Falling back to JavaScript grep implementation.

            </system-out>
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; execute &gt; should handle regex special characters correctly" time="0.009197095">
            <system-out>
GrepLogic: Falling back to JavaScript grep implementation.

            </system-out>
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; execute &gt; should be case-insensitive by default (JS fallback)" time="0.006612259">
            <system-out>
GrepLogic: Falling back to JavaScript grep implementation.

            </system-out>
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; execute &gt; should throw an error if params are invalid" time="0.003720555">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; execute &gt; should return a GREP_EXECUTION_ERROR on failure" time="0.004561459">
            <system-out>
GrepLogic: Falling back to JavaScript grep implementation.

            </system-out>
            <system-err>
GrepLogic: Error in performGrepSearch (Strategy: javascript fallback): filesIterator is not async iterable

Error during GrepLogic execution: TypeError: filesIterator is not async iterable

            </system-err>
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; multi-directory workspace &gt; should search across all workspace directories when no path is specified" time="0.008535222">
            <system-out>
GrepLogic: Falling back to JavaScript grep implementation.

GrepLogic: Falling back to JavaScript grep implementation.

            </system-out>
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; multi-directory workspace &gt; should search only specified path within workspace directories" time="0.005409035">
            <system-out>
GrepLogic: Falling back to JavaScript grep implementation.

            </system-out>
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; getDescription &gt; should generate correct description with pattern only" time="0.002221956">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; getDescription &gt; should generate correct description with pattern and include" time="0.001877249">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; getDescription &gt; should generate correct description with pattern and path" time="0.001883661">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; getDescription &gt; should indicate searching across all workspace directories when no path specified" time="0.001559161">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; getDescription &gt; should generate correct description with pattern, include, and path" time="0.001562858">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="GrepTool &gt; getDescription &gt; should use ./ for root path in description" time="0.001717434">
        </testcase>
        <testcase classname="src/tools/grep.test.ts" name="Result limiting" time="0.00243519">
            <failure message="No test found in suite Result limiting" type="Error">
Error: No test found in suite Result limiting
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="src/tools/ls.test.ts" timestamp="2025-10-05T22:46:17.202Z" hostname="uby" tests="22" failures="0" errors="0" skipped="0" time="0.091377163">
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; parameter validation &gt; should accept valid absolute paths within workspace" time="0.03639297">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; parameter validation &gt; should reject relative paths" time="0.004114964">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; parameter validation &gt; should reject paths outside workspace with clear error message" time="0.003025911">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; parameter validation &gt; should accept paths in secondary workspace directory" time="0.002221686">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; execute &gt; should list files in a directory" time="0.003986687">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; execute &gt; should list files from secondary workspace directory" time="0.002426224">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; execute &gt; should handle empty directories" time="0.001936819">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; execute &gt; should respect ignore patterns" time="0.002415614">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; execute &gt; should respect gitignore patterns" time="0.002035882">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; execute &gt; should respect geminiignore patterns" time="0.001930057">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; execute &gt; should handle non-directory paths" time="0.002228288">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; execute &gt; should handle non-existent paths" time="0.00221372">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; execute &gt; should sort directories first, then files alphabetically" time="0.001885414">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; execute &gt; should handle permission errors gracefully" time="0.001640591">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; execute &gt; should throw for invalid params at build time" time="0.001629671">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; execute &gt; should handle errors accessing individual files during listing" time="0.003510657">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; getDescription &gt; should return shortened relative path" time="0.002176732">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; getDescription &gt; should handle paths in secondary workspace" time="0.003393421">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; workspace boundary validation &gt; should accept paths in primary workspace directory" time="0.002964859">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; workspace boundary validation &gt; should accept paths in secondary workspace directory" time="0.002524415">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; workspace boundary validation &gt; should reject paths outside all workspace directories" time="0.002388063">
        </testcase>
        <testcase classname="src/tools/ls.test.ts" name="LSTool &gt; workspace boundary validation &gt; should list files from secondary workspace directory" time="0.002235381">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/mcp-client-manager.test.ts" timestamp="2025-10-05T22:46:17.203Z" hostname="uby" tests="1" failures="0" errors="0" skipped="0" time="0.002297135">
        <testcase classname="src/tools/mcp-client-manager.test.ts" name="McpClientManager &gt; should discover tools from all servers" time="0.00144477">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/mcp-client.test.ts" timestamp="2025-10-05T22:46:17.203Z" hostname="uby" tests="42" failures="0" errors="0" skipped="0" time="0.023178101">
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; McpClient &gt; should discover tools" time="0.005010199">
            <system-err>
Error discovering prompts from test-server: mcpClient.getServerCapabilities is not a function

            </system-err>
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; McpClient &gt; should skip tools if a parameter is missing a type" time="0.003092424">
            <system-err>
Error discovering prompts from test-server: mcpClient.getServerCapabilities is not a function

            </system-err>
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; McpClient &gt; should handle errors when discovering prompts" time="0.002875864">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; appendMcpServerCommand &gt; should do nothing if no MCP servers or command are configured" time="0.000723086">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; appendMcpServerCommand &gt; should discover tools via mcpServerCommand" time="0.00126605">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; appendMcpServerCommand &gt; should handle error if mcpServerCommand parsing fails" time="0.000415979">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; createTransport &gt; should connect via httpUrl &gt; without headers" time="0.000458387">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; createTransport &gt; should connect via httpUrl &gt; with headers" time="0.00030289">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; createTransport &gt; should connect via url &gt; without headers" time="0.000262064">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; createTransport &gt; should connect via url &gt; with headers" time="0.0001842">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; createTransport &gt; should connect via command" time="0.001012391">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; createTransport &gt; useGoogleCredentialProvider &gt; should use GoogleCredentialProvider when specified" time="0.00045471">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; createTransport &gt; useGoogleCredentialProvider &gt; should use GoogleCredentialProvider with SSE transport" time="0.000235185">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; createTransport &gt; useGoogleCredentialProvider &gt; should throw an error if no URL is provided with GoogleCredentialProvider" time="0.000338576">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; isEnabled &gt; should return true if no include or exclude lists are provided" time="0.000327806">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; isEnabled &gt; should return false if the tool is in the exclude list" time="0.000333146">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; isEnabled &gt; should return true if the tool is in the include list" time="0.000373931">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; isEnabled &gt; should return true if the tool is in the include list with parentheses" time="0.000264529">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; isEnabled &gt; should return false if the include list exists but does not contain the tool" time="0.00019474">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; isEnabled &gt; should return false if the tool is in both the include and exclude lists" time="0.000209166">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; isEnabled &gt; should return false if the function declaration has no name" time="0.000419655">
            <system-err>
Discovered a function declaration without a name from MCP server &apos;myServer&apos;. Skipping.

            </system-err>
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return true for a valid schema with anyOf" time="0.000231017">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return false for an invalid schema with anyOf" time="0.00017306">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return true for a valid schema with allOf" time="0.000137353">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return false for an invalid schema with allOf" time="0.000110524">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return true for a valid schema with oneOf" time="0.000109582">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return false for an invalid schema with oneOf" time="0.000112938">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return true for a valid schema with nested subschemas" time="0.00011905">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return false for an invalid schema with nested subschemas" time="0.00010842">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return true for a schema with a type and subschemas" time="0.000110865">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return false for a schema with no type and no subschemas" time="0.000103591">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return true for a valid schema" time="0.000104703">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return false if a parameter is missing a type" time="0.000101528">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return false if a nested parameter is missing a type" time="0.000105755">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return false if an array item is missing a type" time="0.000106117">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return true for a schema with no properties" time="0.000181706">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasValidTypes &gt; should return true for a schema with an empty properties object" time="0.000146741">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasNetworkTransport &gt; should return true if only url is provided" time="0.000139718">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasNetworkTransport &gt; should return true if only httpUrl is provided" time="0.000107849">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasNetworkTransport &gt; should return true if both url and httpUrl are provided" time="0.000113861">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasNetworkTransport &gt; should return false if neither url nor httpUrl is provided" time="0.000143425">
        </testcase>
        <testcase classname="src/tools/mcp-client.test.ts" name="mcp-client &gt; hasNetworkTransport &gt; should return false for an empty config object" time="0.000111055">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/mcp-tool.test.ts" timestamp="2025-10-05T22:46:17.204Z" hostname="uby" tests="33" failures="0" errors="0" skipped="0" time="0.033566657">
        <testcase classname="src/tools/mcp-tool.test.ts" name="generateValidName &gt; should return a valid name for a simple function" time="0.00124975">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="generateValidName &gt; should replace invalid characters with underscores" time="0.000143225">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="generateValidName &gt; should truncate long names" time="0.000094685">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="generateValidName &gt; should handle names with only invalid characters" time="0.00008103">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="generateValidName &gt; should handle names that are exactly 63 characters long" time="0.000072073">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="generateValidName &gt; should handle names that are exactly 64 characters long" time="0.000060101">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="generateValidName &gt; should handle names that are longer than 64 characters" time="0.000042539">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; constructor &gt; should set properties correctly" time="0.023796192">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; constructor &gt; should accept and store a custom timeout" time="0.000229293">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should call mcpTool.callTool with correct parameters and format display output" time="0.001497197">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should handle empty result from getStringifiedResultForDisplay" time="0.000255462">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should propagate rejection if mcpTool.callTool rejects" time="0.000748213">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should return a structured error if MCP tool reports an error" time="0.00060074">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should return a structured error if MCP tool reports an error" time="0.000146721">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should consider a ToolResult with isError ${description} to be a success" time="0.000209587">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should consider a ToolResult with isError ${description} to be a success" time="0.000109683">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should handle a simple text response correctly" time="0.000309372">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should handle an AudioBlock response" time="0.000209447">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should handle a ResourceLinkBlock response" time="0.000158393">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should handle an embedded text ResourceBlock response" time="0.000199539">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should handle an embedded binary ResourceBlock response" time="0.000156058">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should handle a mix of content block types" time="0.000173541">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should ignore unknown content block types" time="0.000124841">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; execute &gt; should handle a complex mix of content block types" time="0.000139548">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; shouldConfirmExecute &gt; should return false if trust is true" time="0.000131072">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; shouldConfirmExecute &gt; should return false if server is allowlisted" time="0.000069298">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; shouldConfirmExecute &gt; should return false if tool is allowlisted" time="0.000062105">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; shouldConfirmExecute &gt; should return confirmation details if not trusted and not allowlisted" time="0.000244151">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; shouldConfirmExecute &gt; should add server to allowlist on ProceedAlwaysServer" time="0.000144117">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; shouldConfirmExecute &gt; should add tool to allowlist on ProceedAlwaysTool" time="0.00009737">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; shouldConfirmExecute &gt; should handle Cancel confirmation outcome" time="0.000136032">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; shouldConfirmExecute &gt; should handle ProceedOnce confirmation outcome" time="0.000090237">
        </testcase>
        <testcase classname="src/tools/mcp-tool.test.ts" name="DiscoveredMCPTool &gt; DiscoveredMCPToolInvocation &gt; should return the stringified params from getDescription" time="0.000076772">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/memoryTool.test.ts" timestamp="2025-10-05T22:46:17.205Z" hostname="uby" tests="29" failures="0" errors="0" skipped="0" time="0.046314403">
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; setGeminiMdFilename &gt; should update currentGeminiMdFilename when a valid new name is provided" time="0.001711753">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; setGeminiMdFilename &gt; should not update currentGeminiMdFilename if the new name is empty or whitespace" time="0.000220748">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; setGeminiMdFilename &gt; should handle an array of filenames" time="0.000781685">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; performAddMemoryEntry (static method) &gt; should create section and save a fact if file does not exist" time="0.001679493">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; performAddMemoryEntry (static method) &gt; should create section and save a fact if file is empty" time="0.000276712">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; performAddMemoryEntry (static method) &gt; should add a fact to an existing section" time="0.000259169">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; performAddMemoryEntry (static method) &gt; should add a fact to an existing empty section" time="0.000168962">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; performAddMemoryEntry (static method) &gt; should add a fact when other ## sections exist and preserve spacing" time="0.000192145">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; performAddMemoryEntry (static method) &gt; should correctly trim and add a fact that starts with a dash" time="0.000188879">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; performAddMemoryEntry (static method) &gt; should handle error from fsAdapter.writeFile" time="0.005847164">
            <system-err>
[MemoryTool] Error adding memory entry to /mock/home/.qwen/QWEN.md: Error: Disk full
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/tools/memoryTool.test.ts:185:49
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

            </system-err>
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; execute (instance method) &gt; should have correct name, displayName, description, and schema" time="0.000543414">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; execute (instance method) &gt; should call performAddMemoryEntry with correct parameters and return success for global scope" time="0.024984348">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; execute (instance method) &gt; should call performAddMemoryEntry with correct parameters and return success for project scope" time="0.000572849">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; execute (instance method) &gt; should return an error if fact is empty" time="0.000332495">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; execute (instance method) &gt; should handle errors from performAddMemoryEntry" time="0.000704231">
            <system-err>
[MemoryTool] Error executing save_memory for fact &quot;This will fail&quot; in global: [MemoryTool] Failed to add memory entry: Disk full

            </system-err>
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; execute (instance method) &gt; should return error when executing without scope parameter" time="0.000361999">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; shouldConfirmExecute &gt; should return confirmation details when memory file is not allowlisted for global scope" time="0.001780009">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; shouldConfirmExecute &gt; should return confirmation details when memory file is not allowlisted for project scope" time="0.000543224">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; shouldConfirmExecute &gt; should return false when memory file is already allowlisted for global scope" time="0.000188087">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; shouldConfirmExecute &gt; should return false when memory file is already allowlisted for project scope" time="0.000105615">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; shouldConfirmExecute &gt; should add memory file to allowlist when ProceedAlways is confirmed for global scope" time="0.000327285">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; shouldConfirmExecute &gt; should add memory file to allowlist when ProceedAlways is confirmed for project scope" time="0.000356028">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; shouldConfirmExecute &gt; should not add memory file to allowlist when other outcomes are confirmed" time="0.000459148">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; shouldConfirmExecute &gt; should handle existing memory file with content for global scope" time="0.000602393">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; shouldConfirmExecute &gt; should prompt for scope selection when scope is not specified" time="0.000493021">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; shouldConfirmExecute &gt; should show correct file paths in scope selection prompt" time="0.000376917">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; getDescription &gt; should return correct description for global scope" time="0.000274827">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; getDescription &gt; should return correct description for project scope" time="0.000196243">
        </testcase>
        <testcase classname="src/tools/memoryTool.test.ts" name="MemoryTool &gt; getDescription &gt; should show choice prompt when scope is not specified" time="0.000218383">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/modifiable-tool.test.ts" timestamp="2025-10-05T22:46:17.206Z" hostname="uby" tests="11" failures="0" errors="0" skipped="0" time="0.050734621">
        <testcase classname="src/tools/modifiable-tool.test.ts" name="modifyWithEditor &gt; successful modification &gt; should successfully modify content with VSCode editor" time="0.022274541">
        </testcase>
        <testcase classname="src/tools/modifiable-tool.test.ts" name="modifyWithEditor &gt; successful modification &gt; should create temp directory if it does not exist" time="0.002499238">
        </testcase>
        <testcase classname="src/tools/modifiable-tool.test.ts" name="modifyWithEditor &gt; successful modification &gt; should not create temp directory if it already exists" time="0.00509789">
        </testcase>
        <testcase classname="src/tools/modifiable-tool.test.ts" name="modifyWithEditor &gt; should handle missing old temp file gracefully" time="0.004598417">
            <system-err>
Error deleting temp diff file: /tmp/qwen-code-tool-modify-diffs/qwen-code-modify-test-old-1759704372013.txt

            </system-err>
        </testcase>
        <testcase classname="src/tools/modifiable-tool.test.ts" name="modifyWithEditor &gt; should handle missing new temp file gracefully" time="0.00202951">
            <system-err>
Error deleting temp diff file: /tmp/qwen-code-tool-modify-diffs/qwen-code-modify-test-new-1759704372017.txt

            </system-err>
        </testcase>
        <testcase classname="src/tools/modifiable-tool.test.ts" name="modifyWithEditor &gt; should clean up temp files even if editor fails" time="0.001738953">
        </testcase>
        <testcase classname="src/tools/modifiable-tool.test.ts" name="modifyWithEditor &gt; should handle temp file cleanup errors gracefully" time="0.00411819">
        </testcase>
        <testcase classname="src/tools/modifiable-tool.test.ts" name="modifyWithEditor &gt; should create temp files with correct naming with extension" time="0.002637213">
        </testcase>
        <testcase classname="src/tools/modifiable-tool.test.ts" name="modifyWithEditor &gt; should create temp files with correct naming without extension" time="0.001716863">
        </testcase>
        <testcase classname="src/tools/modifiable-tool.test.ts" name="isModifiableTool &gt; should return true for objects with getModifyContext method" time="0.000217973">
        </testcase>
        <testcase classname="src/tools/modifiable-tool.test.ts" name="isModifiableTool &gt; should return false for objects without getModifyContext method" time="0.000089295">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/read-file.test.ts" timestamp="2025-10-05T22:46:17.207Z" hostname="uby" tests="25" failures="0" errors="0" skipped="0" time="0.170524397">
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; build &gt; should return an invocation for valid params (absolute path within root)" time="0.034099051">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; build &gt; should throw error if file path is relative" time="0.00357696">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; build &gt; should throw error if path is outside root" time="0.003443343">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; build &gt; should throw error if path is empty" time="0.002454175">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; build &gt; should throw error if offset is negative" time="0.002310259">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; build &gt; should throw error if limit is zero or negative" time="0.002054507">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; getDescription &gt; should return relative path without limit/offset" time="0.002907092">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; getDescription &gt; should return shortened path when file path is deep" time="0.002746365">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; getDescription &gt; should handle non-normalized file paths correctly" time="0.003904595">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; getDescription &gt; should return . if path is the root directory" time="0.003215402">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; should return error if file does not exist" time="0.003393391">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; should return success result for a text file" time="0.005883653">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; should return error if path is a directory" time="0.003054945">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; should return error for a file that is too large" time="0.059345673">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; should handle text file with lines exceeding maximum length" time="0.00383707">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; should handle image file and return appropriate content" time="0.005263726">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; should handle PDF file and return appropriate content" time="0.00272724">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; should handle binary file and skip content" time="0.002778144">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; should handle SVG file as text" time="0.002736416">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; should handle large SVG file" time="0.00555247">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; should handle empty file" time="0.002301413">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; should support offset and limit for text files" time="0.003358416">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; with .qwenignore &gt; should throw error if path is ignored by a .qwenignore pattern" time="0.002479212">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; with .qwenignore &gt; should throw error if file is in an ignored directory" time="0.002703275">
        </testcase>
        <testcase classname="src/tools/read-file.test.ts" name="ReadFileTool &gt; execute &gt; with .qwenignore &gt; should allow reading non-ignored files" time="0.002195136">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/read-many-files.test.ts" timestamp="2025-10-05T22:46:17.208Z" hostname="uby" tests="31" failures="0" errors="0" skipped="0" time="0.311552609">
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; build &gt; should return an invocation for valid relative paths within root" time="0.033009197">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; build &gt; should return an invocation for valid glob patterns within root" time="0.002945032">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; build &gt; should return an invocation for paths trying to escape the root (e.g., ../) as execute handles this" time="0.002429109">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; build &gt; should return an invocation for absolute paths as execute handles this" time="0.002488147">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; build &gt; should throw error if paths array is empty" time="0.002913343">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; build &gt; should return an invocation for valid exclude and include patterns" time="0.002720116">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; build &gt; should throw error if paths array contains an empty string" time="0.00260835">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; build &gt; should coerce non-string elements in include array" time="0.000426137">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; build &gt; should throw error if exclude array contains non-string elements" time="0.006263875">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should read a single specified file" time="0.0268258">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should read multiple specified files" time="0.009462175">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should handle glob patterns" time="0.008833603">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should respect exclude patterns" time="0.008534721">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should handle nonexistent specific files gracefully" time="0.006510881">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should use default excludes" time="0.012106611">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should NOT use default excludes if useDefaultExcludes is false" time="0.007775929">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should include images as inlineData parts if explicitly requested by extension" time="0.008022895">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should include images as inlineData parts if explicitly requested by name" time="0.01014707">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should skip PDF files if not explicitly requested by extension or name" time="0.010325471">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should include PDF files as inlineData parts if explicitly requested by extension" time="0.008714964">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should include PDF files as inlineData parts if explicitly requested by name" time="0.009936301">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should return error if path is ignored by a .qwenignore pattern" time="0.006250971">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should read files from multiple workspace directories" time="0.007843184">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should add a warning for truncated files" time="0.007071337">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should read files with special characters like [] and () in the path" time="0.008713561">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; execute &gt; should read files with special characters in the name" time="0.007806535">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; Error handling &gt; should return an INVALID_TOOL_PARAMS error if no paths are provided" time="0.004138096">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; Error handling &gt; should return a READ_MANY_FILES_SEARCH_ERROR on glob failure" time="0.003066136">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; Batch Processing &gt; should process files in parallel" time="0.017740171">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; Batch Processing &gt; should handle batch processing errors gracefully" time="0.006104891">
        </testcase>
        <testcase classname="src/tools/read-many-files.test.ts" name="ReadManyFilesTool &gt; Batch Processing &gt; should execute file operations concurrently" time="0.057522755">
            <system-out>
Execution order: [
  [32m&apos;start:file1.txt&apos;[39m,
  [32m&apos;start:file2.txt&apos;[39m,
  [32m&apos;start:file3.txt&apos;[39m,
  [32m&apos;end:file1.txt&apos;[39m,
  [32m&apos;end:file2.txt&apos;[39m,
  [32m&apos;end:file3.txt&apos;[39m
]

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="src/tools/ripGrep.test.ts" timestamp="2025-10-05T22:46:17.209Z" hostname="uby" tests="36" failures="0" errors="0" skipped="0" time="0.356094096">
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; validateToolParams &gt; should return null for valid params (pattern only)" time="0.035783033">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; validateToolParams &gt; should return null for valid params (pattern and path)" time="0.005750256">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; validateToolParams &gt; should return null for valid params (pattern, path, and include)" time="0.003377552">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; validateToolParams &gt; should return error if pattern is missing" time="0.004764254">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; validateToolParams &gt; should return null for what would be an invalid regex pattern" time="0.004094747">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; validateToolParams &gt; should return error if path does not exist" time="0.005134137">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; validateToolParams &gt; should return error if path is a file, not a directory" time="0.004920603">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; execute &gt; should find matches for a simple pattern in all files" time="0.016283941">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; execute &gt; should find matches in a specific path" time="0.020209304">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; execute &gt; should find matches with an include glob" time="0.009110155">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; execute &gt; should find matches with an include glob and path" time="0.007466187">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; execute &gt; should return &quot;No matches found&quot; when pattern does not exist" time="0.012758636">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; execute &gt; should return an error from ripgrep for invalid regex pattern" time="0.014891317">
            <system-err>
GrepLogic: ripgrep failed: ripgrep exited with code 2: 

Error during GrepLogic execution: Error: ripgrep exited with code 2: 

            </system-err>
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; execute &gt; should handle regex special characters correctly" time="0.006972985">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; execute &gt; should be case-insensitive by default (JS fallback)" time="0.009521153">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; execute &gt; should throw an error if params are invalid" time="0.004050866">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; multi-directory workspace &gt; should search across all workspace directories when no path is specified" time="0.017760408">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; multi-directory workspace &gt; should search only specified path within workspace directories" time="0.027926385">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; abort signal handling &gt; should handle AbortSignal during search" time="0.013065323">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; abort signal handling &gt; should abort streaming search when signal is triggered" time="0.015155715">
            <system-err>
GrepLogic: ripgrep failed: ripgrep exited with code null: 

Error during GrepLogic execution: Error: ripgrep exited with code null: 

            </system-err>
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; error handling and edge cases &gt; should handle workspace boundary violations" time="0.005233311">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; error handling and edge cases &gt; should handle empty directories gracefully" time="0.011156566">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; error handling and edge cases &gt; should handle empty files correctly" time="0.013064081">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; error handling and edge cases &gt; should handle special characters in file names" time="0.010701445">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; error handling and edge cases &gt; should handle deeply nested directories" time="0.016140075">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; regex pattern validation &gt; should handle complex regex patterns" time="0.008949637">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; regex pattern validation &gt; should handle case sensitivity correctly in JS fallback" time="0.006722152">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; regex pattern validation &gt; should handle escaped regex special characters" time="0.014396563">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; include pattern filtering &gt; should handle multiple file extensions in include pattern" time="0.005803664">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; include pattern filtering &gt; should handle directory patterns in include" time="0.005846884">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; getDescription &gt; should generate correct description with pattern only" time="0.002907463">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; getDescription &gt; should generate correct description with pattern and include" time="0.002791318">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; getDescription &gt; should generate correct description with pattern and path" time="0.002793672">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; getDescription &gt; should indicate searching across all workspace directories when no path specified" time="0.002979355">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; getDescription &gt; should generate correct description with pattern, include, and path" time="0.002461869">
        </testcase>
        <testcase classname="src/tools/ripGrep.test.ts" name="RipGrepTool &gt; getDescription &gt; should use ./ for root path in description" time="0.002534193">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/shell.test.ts" timestamp="2025-10-05T22:46:17.210Z" hostname="uby" tests="37" failures="0" errors="0" skipped="0" time="0.14657391">
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; isCommandAllowed &gt; should allow a command if no restrictions are provided" time="0.003018808">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; isCommandAllowed &gt; should block a command with command substitution using $()" time="0.000782315">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; build &gt; should return an invocation for a valid command" time="0.020963077">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; build &gt; should throw an error for an empty command" time="0.004585914">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; build &gt; should throw an error for a non-existent directory" time="0.005526042">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; build &gt; should include background indicator in description when is_background is true" time="0.003551262">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; build &gt; should not include background indicator in description when is_background is false" time="0.003353717">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; should wrap command on linux and parse pgrep output" time="0.006676107">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; should add ampersand to command when is_background is true and command does not end with &amp;" time="0.004143858">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; should not add extra ampersand when is_background is true and command already ends with &amp;" time="0.002915718">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; should not add ampersand when is_background is false" time="0.002901371">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; should not wrap command on windows" time="0.004197867">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; should format error messages correctly" time="0.002984154">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; should return a SHELL_EXECUTE_ERROR for a command failure" time="0.002430251">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; should throw an error for invalid parameters" time="0.002788853">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; should throw an error for invalid directory" time="0.002917371">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; should summarize output when configured" time="0.003967151">
            <system-err>
missing pgrep output

            </system-err>
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; should clean up the temp file on synchronous execution error" time="0.004564966">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; Streaming to `updateOutput` &gt; should throttle text output updates" time="0.007626372">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; Streaming to `updateOutput` &gt; should immediately show binary detection message and throttle progress" time="0.004494866">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; addCoAuthorToGitCommit &gt; should add co-author to git commit with double quotes" time="0.004087173">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; addCoAuthorToGitCommit &gt; should add co-author to git commit with single quotes" time="0.004612754">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; addCoAuthorToGitCommit &gt; should handle git commit with additional flags" time="0.003004081">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; addCoAuthorToGitCommit &gt; should not modify non-git commands" time="0.002833927">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; addCoAuthorToGitCommit &gt; should not modify git commands without -m flag" time="0.002619691">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; addCoAuthorToGitCommit &gt; should handle git commit with escaped quotes in message" time="0.002626904">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; addCoAuthorToGitCommit &gt; should not add co-author when disabled in config" time="0.003374265">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; execute &gt; addCoAuthorToGitCommit &gt; should use custom name and email from config" time="0.0040315">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; shouldConfirmExecute &gt; should not request confirmation for read-only commands" time="0.003863619">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; shouldConfirmExecute &gt; should request confirmation for a new command and whitelist it on &quot;Always&quot;" time="0.003451157">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; shouldConfirmExecute &gt; should throw an error if validation fails" time="0.002598842">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; getDescription &gt; should return the windows description when on windows" time="0.001965903">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="ShellTool &gt; getDescription &gt; should return the non-windows description when not on windows" time="0.001183176">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="validateToolParams &gt; should return null for valid directory" time="0.002325597">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="validateToolParams &gt; should return error for directory outside workspace" time="0.002409121">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="build &gt; should return an invocation for valid directory" time="0.002353139">
        </testcase>
        <testcase classname="src/tools/shell.test.ts" name="build &gt; should throw an error for directory outside workspace" time="0.002041181">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/task.test.ts" timestamp="2025-10-05T22:46:17.211Z" hostname="uby" tests="21" failures="0" errors="0" skipped="0" time="0.016472709">
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; initialization &gt; should initialize with correct name and properties" time="0.003464853">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; initialization &gt; should load available subagents during initialization" time="0.00077357">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; initialization &gt; should update description with available subagents" time="0.000436436">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; initialization &gt; should handle empty subagents list gracefully" time="0.000286489">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; initialization &gt; should handle subagent loading errors gracefully" time="0.00192145">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; schema generation &gt; should generate schema with subagent names as enum" time="0.00057389">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; schema generation &gt; should generate schema without enum when no subagents available" time="0.000349897">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; validateToolParams &gt; should validate valid parameters" time="0.000321995">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; validateToolParams &gt; should reject empty description" time="0.00029224">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; validateToolParams &gt; should reject empty prompt" time="0.000253348">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; validateToolParams &gt; should reject empty subagent_type" time="0.000327295">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; validateToolParams &gt; should reject non-existent subagent" time="0.000280548">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; refreshSubagents &gt; should refresh available subagents and update description" time="0.000309301">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; TaskToolInvocation &gt; should execute subagent successfully" time="0.00173203">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; TaskToolInvocation &gt; should handle subagent not found error" time="0.0004489">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; TaskToolInvocation &gt; should handle execution errors gracefully" time="0.001165324">
            <system-err>
[TaskTool] Error running subagent: Creation failed

            </system-err>
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; TaskToolInvocation &gt; should execute subagent without live output callback" time="0.000592655">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; TaskToolInvocation &gt; should set context variables correctly" time="0.000375944">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; TaskToolInvocation &gt; should return structured display object" time="0.000582957">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; TaskToolInvocation &gt; should not require confirmation" time="0.000378068">
        </testcase>
        <testcase classname="src/tools/task.test.ts" name="TaskTool &gt; TaskToolInvocation &gt; should provide correct description" time="0.000305915">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/todoWrite.test.ts" timestamp="2025-10-05T22:46:17.212Z" hostname="uby" tests="17" failures="0" errors="0" skipped="0" time="0.017286052">
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; validateToolParams &gt; should validate correct parameters" time="0.003864542">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; validateToolParams &gt; should accept empty todos array" time="0.001329818">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; validateToolParams &gt; should accept single todo" time="0.000918056">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; validateToolParams &gt; should reject todos with empty content" time="0.000689524">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; validateToolParams &gt; should reject todos with empty id" time="0.000591944">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; validateToolParams &gt; should reject todos with invalid status" time="0.000296788">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; validateToolParams &gt; should reject todos with duplicate IDs" time="0.000258357">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; execute &gt; should create new todos file when none exists" time="0.003269341">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; execute &gt; should replace todos with new ones" time="0.000840713">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; execute &gt; should handle file write errors" time="0.001152871">
            <system-err>
[TodoWriteTool] Error executing todo_write: Write failed

            </system-err>
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; execute &gt; should handle empty todos array" time="0.000426057">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; tool properties &gt; should have correct tool name" time="0.000306276">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; tool properties &gt; should have correct display name" time="0.000208195">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; tool properties &gt; should have correct kind" time="0.000169133">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; tool properties &gt; should have schema with required properties" time="0.000678123">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; getDescription &gt; should return &quot;Create todos&quot; when no todos file exists" time="0.000365105">
        </testcase>
        <testcase classname="src/tools/todoWrite.test.ts" name="TodoWriteTool &gt; getDescription &gt; should return &quot;Update todos&quot; when todos file exists" time="0.00034123">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/tool-registry.test.ts" timestamp="2025-10-05T22:46:17.213Z" hostname="uby" tests="9" failures="0" errors="0" skipped="0" time="0.087152126">
        <testcase classname="src/tools/tool-registry.test.ts" name="ToolRegistry &gt; registerTool &gt; should register a new tool" time="0.033095055">
            <system-err>
Error accessing installation ID file, generating ephemeral ID: TypeError: Cannot read properties of undefined (reading &apos;trim&apos;)
    at InstallationManager.readInstallationIdFromFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/installationManager.ts:21:50[90m)[39m
    at InstallationManager.getInstallationId [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/installationManager.ts:42:33[90m)[39m
    at QwenLogger.generateUserId [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/qwen-logger/qwen-logger.ts:123:53[90m)[39m
    at new QwenLogger [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/qwen-logger/qwen-logger.ts:114:24[90m)[39m
    at QwenLogger.getInstance [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/qwen-logger/qwen-logger.ts:131:29[90m)[39m
    at logCliConfiguration [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/loggers.ts:85:14[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:452:5[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/tools/tool-registry.test.ts:120:14
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20

            </system-err>
        </testcase>
        <testcase classname="src/tools/tool-registry.test.ts" name="ToolRegistry &gt; getAllTools &gt; should return all registered tools sorted alphabetically by displayName" time="0.00288428">
        </testcase>
        <testcase classname="src/tools/tool-registry.test.ts" name="ToolRegistry &gt; getAllToolNames &gt; should return all registered tool names" time="0.001322864">
        </testcase>
        <testcase classname="src/tools/tool-registry.test.ts" name="ToolRegistry &gt; getToolsByServer &gt; should return an empty array if no tools match the server name" time="0.001188736">
        </testcase>
        <testcase classname="src/tools/tool-registry.test.ts" name="ToolRegistry &gt; getToolsByServer &gt; should return only tools matching the server name, sorted by name" time="0.003104527">
        </testcase>
        <testcase classname="src/tools/tool-registry.test.ts" name="ToolRegistry &gt; discoverTools &gt; should will preserve tool parametersJsonSchema during discovery from command" time="0.003887323">
        </testcase>
        <testcase classname="src/tools/tool-registry.test.ts" name="ToolRegistry &gt; discoverTools &gt; should return a DISCOVERED_TOOL_EXECUTION_ERROR on tool failure" time="0.03324897">
        </testcase>
        <testcase classname="src/tools/tool-registry.test.ts" name="ToolRegistry &gt; discoverTools &gt; should discover tools using MCP servers defined in getMcpServers" time="0.003383492">
        </testcase>
        <testcase classname="src/tools/tool-registry.test.ts" name="ToolRegistry &gt; DiscoveredToolInvocation &gt; should return the stringified params from getDescription" time="0.003080392">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/tools.test.ts" timestamp="2025-10-05T22:46:17.213Z" hostname="uby" tests="11" failures="0" errors="0" skipped="0" time="0.008418276">
        <testcase classname="src/tools/tools.test.ts" name="DeclarativeTool &gt; validateBuildAndExecute &gt; should return INVALID_TOOL_PARAMS error if build fails" time="0.004749105">
        </testcase>
        <testcase classname="src/tools/tools.test.ts" name="DeclarativeTool &gt; validateBuildAndExecute &gt; should return EXECUTION_FAILED error if execute fails" time="0.000853417">
        </testcase>
        <testcase classname="src/tools/tools.test.ts" name="DeclarativeTool &gt; validateBuildAndExecute &gt; should return the result of execute on success" time="0.000379922">
        </testcase>
        <testcase classname="src/tools/tools.test.ts" name="hasCycleInSchema &gt; should detect a simple direct cycle" time="0.000411661">
        </testcase>
        <testcase classname="src/tools/tools.test.ts" name="hasCycleInSchema &gt; should detect a cycle from object properties referencing parent properties" time="0.000096979">
        </testcase>
        <testcase classname="src/tools/tools.test.ts" name="hasCycleInSchema &gt; should detect a cycle from array items referencing parent properties" time="0.000058288">
        </testcase>
        <testcase classname="src/tools/tools.test.ts" name="hasCycleInSchema &gt; should detect a cycle between sibling properties" time="0.000054211">
        </testcase>
        <testcase classname="src/tools/tools.test.ts" name="hasCycleInSchema &gt; should not detect a cycle in a valid schema" time="0.000061373">
        </testcase>
        <testcase classname="src/tools/tools.test.ts" name="hasCycleInSchema &gt; should handle non-cyclic sibling refs" time="0.000057877">
        </testcase>
        <testcase classname="src/tools/tools.test.ts" name="hasCycleInSchema &gt; should handle nested but not cyclic refs" time="0.000052047">
        </testcase>
        <testcase classname="src/tools/tools.test.ts" name="hasCycleInSchema &gt; should return false for an empty schema" time="0.000036838">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/web-fetch.test.ts" timestamp="2025-10-05T22:46:17.214Z" hostname="uby" tests="7" failures="0" errors="0" skipped="0" time="0.043475086">
        <testcase classname="src/tools/web-fetch.test.ts" name="WebFetchTool &gt; execute &gt; should throw validation error when url parameter is missing" time="0.022188812">
        </testcase>
        <testcase classname="src/tools/web-fetch.test.ts" name="WebFetchTool &gt; execute &gt; should return WEB_FETCH_FALLBACK_FAILED on fetch failure" time="0.005333817">
            <system-out>
[WebFetchTool] Private IP detected for https://private.ip, using direct fetch
[WebFetchTool] Fetching content from: https://private.ip

            </system-out>
            <system-err>
[WebFetchTool] Error during fetch for https://private.ip: fetch failed Error: fetch failed
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/tools/web-fetch.test.ts:55:9
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

            </system-err>
        </testcase>
        <testcase classname="src/tools/web-fetch.test.ts" name="WebFetchTool &gt; execute &gt; should return WEB_FETCH_FALLBACK_FAILED on API processing failure" time="0.008342967">
            <system-out>
[WebFetchTool] Public URL detected for https://public.ip, using direct fetch
[WebFetchTool] Fetching content from: https://public.ip

[WebFetchTool] Successfully fetched content from https://public.ip

[WebFetchTool] Converted HTML to text (12 characters)
[WebFetchTool] Processing content with prompt: &quot;summarize this&quot;

            </system-out>
            <system-err>
[WebFetchTool] Error during fetch for https://public.ip: API error Error: API error
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/tools/web-fetch.test.ts:70:45
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

            </system-err>
        </testcase>
        <testcase classname="src/tools/web-fetch.test.ts" name="WebFetchTool &gt; shouldConfirmExecute &gt; should return confirmation details with the correct prompt and urls" time="0.002280174">
        </testcase>
        <testcase classname="src/tools/web-fetch.test.ts" name="WebFetchTool &gt; shouldConfirmExecute &gt; should return github urls as-is in confirmation details" time="0.001328866">
        </testcase>
        <testcase classname="src/tools/web-fetch.test.ts" name="WebFetchTool &gt; shouldConfirmExecute &gt; should return false if approval mode is AUTO_EDIT" time="0.001205949">
        </testcase>
        <testcase classname="src/tools/web-fetch.test.ts" name="WebFetchTool &gt; shouldConfirmExecute &gt; should call setApprovalMode when onConfirm is called with ProceedAlways" time="0.001628379">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/web-search.test.ts" timestamp="2025-10-05T22:46:17.214Z" hostname="uby" tests="8" failures="0" errors="0" skipped="0" time="0.041507821">
        <testcase classname="src/tools/web-search.test.ts" name="WebSearchTool &gt; build &gt; should return an invocation for a valid query" time="0.021811565">
        </testcase>
        <testcase classname="src/tools/web-search.test.ts" name="WebSearchTool &gt; build &gt; should throw an error for an empty query" time="0.002415293">
        </testcase>
        <testcase classname="src/tools/web-search.test.ts" name="WebSearchTool &gt; build &gt; should throw an error for a query with only whitespace" time="0.001696906">
        </testcase>
        <testcase classname="src/tools/web-search.test.ts" name="WebSearchTool &gt; getDescription &gt; should return a description of the search" time="0.001696936">
        </testcase>
        <testcase classname="src/tools/web-search.test.ts" name="WebSearchTool &gt; execute &gt; should return search results for a successful query" time="0.001922112">
        </testcase>
        <testcase classname="src/tools/web-search.test.ts" name="WebSearchTool &gt; execute &gt; should handle no search results found" time="0.001621617">
        </testcase>
        <testcase classname="src/tools/web-search.test.ts" name="WebSearchTool &gt; execute &gt; should handle API errors gracefully" time="0.005972447">
            <system-err>
Error during web search for query &quot;error query&quot;: API Failure Error: API Failure
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/tools/web-search.test.ts:123:39
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

            </system-err>
        </testcase>
        <testcase classname="src/tools/web-search.test.ts" name="WebSearchTool &gt; execute &gt; should correctly format results with sources" time="0.003164127">
        </testcase>
    </testsuite>
    <testsuite name="src/tools/write-file.test.ts" timestamp="2025-10-05T22:46:17.214Z" hostname="uby" tests="25" failures="0" errors="0" skipped="0" time="0.102045908">
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; build &gt; should return an invocation for a valid absolute path within root" time="0.027517218">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; build &gt; should throw an error for a relative path" time="0.002384115">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; build &gt; should throw an error for a path outside root" time="0.001783236">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; build &gt; should throw an error if path is a directory" time="0.00159054">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; build &gt; should coerce null content into an empty string" time="0.00052479">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; build &gt; should throw error if the file_path is empty" time="0.001339836">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; getCorrectedFileContent &gt; should return proposed content unchanged for a new file" time="0.001269937">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; getCorrectedFileContent &gt; should return proposed content unchanged for an existing file" time="0.004802935">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; getCorrectedFileContent &gt; should return error if reading an existing file fails (e.g. permissions)" time="0.001943852">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; shouldConfirmExecute &gt; should return false if _getCorrectedFileContent returns an error" time="0.0022404">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; shouldConfirmExecute &gt; should request confirmation with diff for a new file" time="0.0031764">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; shouldConfirmExecute &gt; should request confirmation with diff for an existing file" time="0.002884951">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; execute &gt; should return error if _getCorrectedFileContent returns an error during execute" time="0.003189384">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; execute &gt; should write a new file and return diff" time="0.00706734">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; execute &gt; should overwrite an existing file and return diff" time="0.008801554">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; execute &gt; should create directory if it does not exist" time="0.007347157">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; execute &gt; should include modification message when proposed content is modified" time="0.002460947">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; execute &gt; should not include modification message when proposed content is not modified" time="0.0020189">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; execute &gt; should not include modification message when modified_by_user is not provided" time="0.00320905">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; workspace boundary validation &gt; should validate paths are within workspace root" time="0.002080515">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; workspace boundary validation &gt; should reject paths outside workspace root" time="0.002266107">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; specific error types for write failures &gt; should return PERMISSION_DENIED error when write fails with EACCES" time="0.003358346">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; specific error types for write failures &gt; should return NO_SPACE_LEFT error when write fails with ENOSPC" time="0.002257682">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; specific error types for write failures &gt; should return TARGET_IS_DIRECTORY error when write fails with EISDIR" time="0.001967085">
        </testcase>
        <testcase classname="src/tools/write-file.test.ts" name="WriteFileTool &gt; specific error types for write failures &gt; should return FILE_WRITE_FAILURE for generic write errors" time="0.002579807">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/bfsFileSearch.test.ts" timestamp="2025-10-05T22:46:17.215Z" hostname="uby" tests="11" failures="0" errors="0" skipped="0" time="0.058025553">
        <testcase classname="src/utils/bfsFileSearch.test.ts" name="bfsFileSearch &gt; should find a file in the root directory" time="0.006756124">
        </testcase>
        <testcase classname="src/utils/bfsFileSearch.test.ts" name="bfsFileSearch &gt; should find a file in a nested directory" time="0.00222435">
        </testcase>
        <testcase classname="src/utils/bfsFileSearch.test.ts" name="bfsFileSearch &gt; should find multiple files with the same name" time="0.002166914">
        </testcase>
        <testcase classname="src/utils/bfsFileSearch.test.ts" name="bfsFileSearch &gt; should return an empty array if no file is found" time="0.001567987">
        </testcase>
        <testcase classname="src/utils/bfsFileSearch.test.ts" name="bfsFileSearch &gt; should ignore directories specified in ignoreDirs" time="0.002245129">
        </testcase>
        <testcase classname="src/utils/bfsFileSearch.test.ts" name="bfsFileSearch &gt; should respect the maxDirs limit and not find the file" time="0.000839051">
        </testcase>
        <testcase classname="src/utils/bfsFileSearch.test.ts" name="bfsFileSearch &gt; should respect the maxDirs limit and find the file" time="0.00299795">
        </testcase>
        <testcase classname="src/utils/bfsFileSearch.test.ts" name="bfsFileSearch &gt; with FileDiscoveryService &gt; should ignore gitignored files" time="0.003334902">
        </testcase>
        <testcase classname="src/utils/bfsFileSearch.test.ts" name="bfsFileSearch &gt; with FileDiscoveryService &gt; should ignore geminiignored files" time="0.001776773">
        </testcase>
        <testcase classname="src/utils/bfsFileSearch.test.ts" name="bfsFileSearch &gt; with FileDiscoveryService &gt; should not ignore files if respect flags are false" time="0.001502407">
        </testcase>
        <testcase classname="src/utils/bfsFileSearch.test.ts" name="bfsFileSearch &gt; should find all files in a complex directory structure" time="0.030979646">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/editor.test.ts" timestamp="2025-10-05T22:46:17.216Z" hostname="uby" tests="108" failures="0" errors="0" skipped="0" time="0.023888463">
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; vscode &gt; should return true if first command &quot;code&quot; exists on non-windows" time="0.002760551">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; vscode &gt; should return false if none of the commands exist on non-windows" time="0.000279497">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; vscode &gt; should return true if first command &quot;code.cmd&quot; exists on windows" time="0.000278665">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; vscode &gt; should return false if none of the commands exist on windows" time="0.000169062">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; vscodium &gt; should return true if first command &quot;codium&quot; exists on non-windows" time="0.000206091">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; vscodium &gt; should return false if none of the commands exist on non-windows" time="0.000122947">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; vscodium &gt; should return true if first command &quot;codium.cmd&quot; exists on windows" time="0.000141471">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; vscodium &gt; should return false if none of the commands exist on windows" time="0.000092391">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; windsurf &gt; should return true if first command &quot;windsurf&quot; exists on non-windows" time="0.00026546">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; windsurf &gt; should return false if none of the commands exist on non-windows" time="0.000141071">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; windsurf &gt; should return true if first command &quot;windsurf&quot; exists on windows" time="0.000129981">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; windsurf &gt; should return false if none of the commands exist on windows" time="0.000054921">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; cursor &gt; should return true if first command &quot;cursor&quot; exists on non-windows" time="0.000069989">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; cursor &gt; should return false if none of the commands exist on non-windows" time="0.000047046">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; cursor &gt; should return true if first command &quot;cursor&quot; exists on windows" time="0.000082923">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; cursor &gt; should return false if none of the commands exist on windows" time="0.000076181">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; vim &gt; should return true if first command &quot;vim&quot; exists on non-windows" time="0.000107499">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; vim &gt; should return false if none of the commands exist on non-windows" time="0.000047307">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; vim &gt; should return true if first command &quot;vim&quot; exists on windows" time="0.00005986">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; vim &gt; should return false if none of the commands exist on windows" time="0.000042128">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; neovim &gt; should return true if first command &quot;nvim&quot; exists on non-windows" time="0.000055833">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; neovim &gt; should return false if none of the commands exist on non-windows" time="0.000044763">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; neovim &gt; should return true if first command &quot;nvim&quot; exists on windows" time="0.000058539">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; neovim &gt; should return false if none of the commands exist on windows" time="0.000044472">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; zed &gt; should return true if first command &quot;zed&quot; exists on non-windows" time="0.000083585">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; zed &gt; should return true if first command doesn&apos;t exist but second command &quot;zeditor&quot; exists on non-windows" time="0.000207213">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; zed &gt; should return false if none of the commands exist on non-windows" time="0.000063247">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; zed &gt; should return true if first command &quot;zed&quot; exists on windows" time="0.000073486">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; zed &gt; should return false if none of the commands exist on windows" time="0.000045825">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; emacs &gt; should return true if first command &quot;emacs&quot; exists on non-windows" time="0.000109072">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; emacs &gt; should return false if none of the commands exist on non-windows" time="0.000063497">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; emacs &gt; should return true if first command &quot;emacs.exe&quot; exists on windows" time="0.000058869">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; checkHasEditorType &gt; emacs &gt; should return false if none of the commands exist on windows" time="0.00004333">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should use first command &quot;code&quot; when it exists on non-windows" time="0.000247607">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should fall back to last command &quot;code&quot; when none exist on non-windows" time="0.00009225">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should use first command &quot;code.cmd&quot; when it exists on windows" time="0.000069739">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should fall back to last command &quot;code.cmd&quot; when none exist on windows" time="0.000057887">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should use first command &quot;codium&quot; when it exists on non-windows" time="0.000051846">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should fall back to last command &quot;codium&quot; when none exist on non-windows" time="0.000044002">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should use first command &quot;codium.cmd&quot; when it exists on windows" time="0.00004317">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should fall back to last command &quot;codium.cmd&quot; when none exist on windows" time="0.000061814">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should use first command &quot;windsurf&quot; when it exists on non-windows" time="0.000075059">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should fall back to last command &quot;windsurf&quot; when none exist on non-windows" time="0.000044382">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should use first command &quot;windsurf&quot; when it exists on windows" time="0.000035356">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should fall back to last command &quot;windsurf&quot; when none exist on windows" time="0.00003262">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should use first command &quot;cursor&quot; when it exists on non-windows" time="0.000041587">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should fall back to last command &quot;cursor&quot; when none exist on non-windows" time="0.000033272">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should use first command &quot;cursor&quot; when it exists on windows" time="0.000037269">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should fall back to last command &quot;cursor&quot; when none exist on windows" time="0.000034013">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should use first command &quot;zed&quot; when it exists on non-windows" time="0.000061153">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should use second command &quot;zeditor&quot; when first doesn&apos;t exist on non-windows" time="0.000115223">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should fall back to last command &quot;zeditor&quot; when none exist on non-windows" time="0.000049482">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should use first command &quot;zed&quot; when it exists on windows" time="0.000036087">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should fall back to last command &quot;zed&quot; when none exist on windows" time="0.000094745">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should return the correct command for vim" time="0.000150107">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should return the correct command for neovim" time="0.000082923">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should return the correct command for emacs" time="0.000100236">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; getDiffCommand &gt; should return null for an unsupported editor" time="0.000063948">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should call spawn for vscode" time="0.001195008">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should reject if spawn for vscode fails" time="0.001012331">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should reject if vscode exits with non-zero code" time="0.000268486">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should call spawn for vscodium" time="0.000245263">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should reject if spawn for vscodium fails" time="0.000191624">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should reject if vscodium exits with non-zero code" time="0.001283522">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should call spawn for windsurf" time="0.000336411">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should reject if spawn for windsurf fails" time="0.000254641">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should reject if windsurf exits with non-zero code" time="0.000198086">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should call spawn for cursor" time="0.00023228">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should reject if spawn for cursor fails" time="0.000165005">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should reject if cursor exits with non-zero code" time="0.000127756">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should call spawn for zed" time="0.00021104">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should reject if spawn for zed fails" time="0.000137153">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should reject if zed exits with non-zero code" time="0.000125653">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should call execSync for vim on non-windows" time="0.000244703">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should call execSync for vim on windows" time="0.000162721">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should call execSync for neovim on non-windows" time="0.00007558">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should call execSync for neovim on windows" time="0.000056664">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should call execSync for emacs on non-windows" time="0.000066483">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should call execSync for emacs on windows" time="0.000071292">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; should log an error if diff command is not available" time="0.000289455">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; onEditorClose callback &gt; should call onEditorClose for execSync editors" time="0.000152101">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; onEditorClose callback &gt; should call onEditorClose for execSync editors when an error is thrown" time="0.004589641">
            <system-err>
Error in onEditorClose callback: Error: test error
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/editor.test.ts:437:17
    at mockCall (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/spy[24m/dist/index.js:96:15)
    at spy (file:///home/atmandk/LowCal-dev/node_modules/[4mtinyspy[24m/dist/index.js:47:103)
    at Module.openDiff [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/editor.ts:211:11[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/editor.test.ts:440:9
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)

            </system-err>
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; openDiff &gt; onEditorClose callback &gt; should not call onEditorClose for spawn editors" time="0.00044402">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should allow vim in sandbox mode" time="0.000240164">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should allow vim when not in sandbox mode" time="0.000110424">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should allow emacs in sandbox mode" time="0.000116325">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should allow emacs when not in sandbox mode" time="0.000093503">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should allow neovim in sandbox mode" time="0.000084336">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should allow neovim when not in sandbox mode" time="0.000100506">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should not allow vscode in sandbox mode" time="0.000097721">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should allow vscode when not in sandbox mode" time="0.000076772">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should not allow vscodium in sandbox mode" time="0.000053689">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should allow vscodium when not in sandbox mode" time="0.000035937">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should not allow windsurf in sandbox mode" time="0.000035636">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should allow windsurf when not in sandbox mode" time="0.000032089">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should not allow cursor in sandbox mode" time="0.000033833">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should allow cursor when not in sandbox mode" time="0.000032861">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should not allow zed in sandbox mode" time="0.000035866">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; allowEditorTypeInSandbox &gt; should allow zed when not in sandbox mode" time="0.000044151">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; isEditorAvailable &gt; should return false for undefined editor" time="0.000085338">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; isEditorAvailable &gt; should return false for empty string editor" time="0.000045454">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; isEditorAvailable &gt; should return false for invalid editor type" time="0.000040334">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; isEditorAvailable &gt; should return true for vscode when installed and not in sandbox mode" time="0.000076531">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; isEditorAvailable &gt; should return false for vscode when not installed and not in sandbox mode" time="0.00009753">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; isEditorAvailable &gt; should return false for vscode when installed and in sandbox mode" time="0.00008141">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; isEditorAvailable &gt; should return true for vim when installed and in sandbox mode" time="0.000070219">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; isEditorAvailable &gt; should return true for emacs when installed and in sandbox mode" time="0.000061554">
        </testcase>
        <testcase classname="src/utils/editor.test.ts" name="editor utils &gt; isEditorAvailable &gt; should return true for neovim when installed and in sandbox mode" time="0.000077423">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/environmentContext.test.ts" timestamp="2025-10-05T22:46:17.220Z" hostname="uby" tests="8" failures="0" errors="0" skipped="0" time="0.030185609">
        <testcase classname="src/utils/environmentContext.test.ts" name="getDirectoryContextString &gt; should return context string for a single directory" time="0.001640431">
        </testcase>
        <testcase classname="src/utils/environmentContext.test.ts" name="getDirectoryContextString &gt; should return context string for multiple directories" time="0.000338686">
        </testcase>
        <testcase classname="src/utils/environmentContext.test.ts" name="getEnvironmentContext &gt; should return basic environment context for a single directory" time="0.013338798">
        </testcase>
        <testcase classname="src/utils/environmentContext.test.ts" name="getEnvironmentContext &gt; should return basic environment context for multiple directories" time="0.000997984">
        </testcase>
        <testcase classname="src/utils/environmentContext.test.ts" name="getEnvironmentContext &gt; should include full file context when getFullContext is true" time="0.001747719">
        </testcase>
        <testcase classname="src/utils/environmentContext.test.ts" name="getEnvironmentContext &gt; should handle read_many_files returning no content" time="0.001859817">
            <system-err>
Full context requested, but read_many_files returned no content.

            </system-err>
        </testcase>
        <testcase classname="src/utils/environmentContext.test.ts" name="getEnvironmentContext &gt; should handle read_many_files tool not being found" time="0.002870995">
            <system-err>
Full context requested, but read_many_files tool not found.

            </system-err>
        </testcase>
        <testcase classname="src/utils/environmentContext.test.ts" name="getEnvironmentContext &gt; should handle errors when reading full file context" time="0.005931811">
            <system-err>
Error reading full file context: Error: Read error
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/environmentContext.test.ts:205:44
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="src/utils/errorParsing.test.ts" timestamp="2025-10-05T22:46:17.220Z" hostname="uby" tests="21" failures="0" errors="0" skipped="0" time="0.005751989">
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a valid API error JSON" time="0.001499351">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a 429 API error with the default message" time="0.000394038">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a 429 API error with the personal message" time="0.000283363">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a 429 API error with the vertex message" time="0.000109251">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should return the original message if it is not a JSON error" time="0.000074507">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should return the original message for malformed JSON" time="0.000074608">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should handle JSON that does not match the ApiError structure" time="0.000083865">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a nested API error" time="0.000131463">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a StructuredError" time="0.000090226">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a 429 StructuredError with the vertex message" time="0.00008094">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should handle an unknown error type" time="0.000055613">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a 429 API error with Pro quota exceeded message for Google auth (Free tier)" time="0.000186384">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a regular 429 API error with standard message for Google auth" time="0.000194599">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a 429 API error with generic quota exceeded message for Google auth" time="0.000152802">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should prioritize Pro quota message over generic quota message for Google auth" time="0.000116304">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a 429 API error with Pro quota exceeded message for Google auth (Standard tier)" time="0.000149266">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a 429 API error with Pro quota exceeded message for Google auth (Legacy tier)" time="0.000113399">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should handle different Gemini 2.5 version strings in Pro quota exceeded errors" time="0.000143365">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should not match non-Pro models with similar version strings" time="0.00012959">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a generic quota exceeded message for Google auth (Standard tier)" time="0.000126323">
        </testcase>
        <testcase classname="src/utils/errorParsing.test.ts" name="parseAndFormatApiError &gt; should format a regular 429 API error with standard message for Google auth (Standard tier)" time="0.000108731">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/errorReporting.test.ts" timestamp="2025-10-05T22:46:17.221Z" hostname="uby" tests="6" failures="0" errors="0" skipped="0" time="0.031832111">
        <testcase classname="src/utils/errorReporting.test.ts" name="reportError &gt; should generate a report and log the path" time="0.008870471">
        </testcase>
        <testcase classname="src/utils/errorReporting.test.ts" name="reportError &gt; should handle errors that are plain objects with a message property" time="0.00277623">
        </testcase>
        <testcase classname="src/utils/errorReporting.test.ts" name="reportError &gt; should handle string errors" time="0.004332706">
        </testcase>
        <testcase classname="src/utils/errorReporting.test.ts" name="reportError &gt; should log fallback message if writing report fails" time="0.008419187">
        </testcase>
        <testcase classname="src/utils/errorReporting.test.ts" name="reportError &gt; should handle stringification failure of report content (e.g. BigInt in context)" time="0.004354196">
        </testcase>
        <testcase classname="src/utils/errorReporting.test.ts" name="reportError &gt; should generate a report without context if context is not provided" time="0.001360905">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/fileUtils.test.ts" timestamp="2025-10-05T22:46:17.221Z" hostname="uby" tests="40" failures="0" errors="0" skipped="0" time="0.060969494">
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; isWithinRoot &gt; should return true for paths directly within the root" time="0.002645088">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; isWithinRoot &gt; should return true for the root path itself" time="0.000744827">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; isWithinRoot &gt; should return false for paths outside the root" time="0.0004436">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; isWithinRoot &gt; should return false for paths that only partially match the root prefix" time="0.000529338">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; isWithinRoot &gt; should handle paths with trailing slashes correctly" time="0.00110949">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; isWithinRoot &gt; should handle different path separators (POSIX vs Windows)" time="0.000890706">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; isWithinRoot &gt; should return false for a root path that is a sub-path of the path to check" time="0.000366077">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; isBinaryFile &gt; should return false for an empty file" time="0.001537972">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; isBinaryFile &gt; should return false for a typical text file" time="0.000842126">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; isBinaryFile &gt; should return true for a file with many null bytes" time="0.000615187">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; isBinaryFile &gt; should return true for a file with high percentage of non-printable ASCII" time="0.000558582">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; isBinaryFile &gt; should return false if file access fails (e.g., ENOENT)" time="0.001784007">
            <system-err>
Failed to check if file is binary: /tmp/fileUtils-test-zAMDBG/binaryCheck.tmp ENOENT: no such file or directory, open &apos;/tmp/fileUtils-test-zAMDBG/binaryCheck.tmp&apos;

            </system-err>
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; detectFileType &gt; should detect typescript type by extension (ts, mts, cts, tsx)" time="0.001663634">
            <system-err>
Failed to check if file is binary: component.tsx ENOENT: no such file or directory, open &apos;component.tsx&apos;

            </system-err>
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; detectFileType &gt; should detect image type by extension (png)" time="0.000560195">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; detectFileType &gt; should detect image type by extension (jpeg)" time="0.000457846">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; detectFileType &gt; should detect svg type by extension" time="0.000458477">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; detectFileType &gt; should detect pdf type by extension" time="0.000622751">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; detectFileType &gt; should detect audio type by extension" time="0.000467995">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; detectFileType &gt; should detect video type by extension" time="0.000562179">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; detectFileType &gt; should detect known binary extensions as binary (e.g. .zip)" time="0.000500094">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; detectFileType &gt; should detect known binary extensions as binary (e.g. .exe)" time="0.000842536">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; detectFileType &gt; should use isBinaryFile for unknown extensions and detect as binary" time="0.001083052">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; detectFileType &gt; should default to text if mime type is unknown and content is not binary" time="0.001149124">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should read a text file successfully" time="0.001722773">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should handle file not found" time="0.000970012">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should handle read errors for text files" time="0.001045292">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should handle read errors for image/pdf files" time="0.000484906">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should process an image file" time="0.00161242">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should process a PDF file" time="0.001148592">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should read an SVG file as text when under 1MB" time="0.001351878">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should skip binary files" time="0.000803905">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should handle path being a directory" time="0.001297147">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should paginate text files correctly (offset and limit)" time="0.002622426">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should identify truncation when reading the end of a file" time="0.001673091">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should handle limit exceeding file length" time="0.001046744">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should truncate long lines in text files" time="0.001119589">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should truncate when line count exceeds the limit" time="0.000737593">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should truncate when a line length exceeds the character limit" time="0.001238739">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should truncate both line count and line length when both exceed limits" time="0.001245602">
        </testcase>
        <testcase classname="src/utils/fileUtils.test.ts" name="fileUtils &gt; processSingleFileContent &gt; should return an error if the file size exceeds 20MB" time="0.018115986">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/flashFallback.integration.test.ts" timestamp="2025-10-05T22:46:17.223Z" hostname="uby" tests="4" failures="0" errors="0" skipped="0" time="0.203789987">
        <testcase classname="src/utils/flashFallback.integration.test.ts" name="Flash Fallback Integration &gt; should automatically accept fallback" time="0.022824687">
            <system-out>
Invalid JSON in log file /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json. Backing up and starting fresh. SyntaxError: &quot;undefined&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Logger._readLogFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:91:31[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:155:19[90m)[39m

Backed up corrupted log file to /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json.invalid_json.1759704374084.bak

            </system-out>
            <system-err>
Error accessing installation ID file, generating ephemeral ID: TypeError: Cannot read properties of undefined (reading &apos;trim&apos;)
    at InstallationManager.readInstallationIdFromFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/installationManager.ts:21:50[90m)[39m
    at InstallationManager.getInstallationId [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/installationManager.ts:42:33[90m)[39m
    at QwenLogger.generateUserId [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/qwen-logger/qwen-logger.ts:123:53[90m)[39m
    at new QwenLogger [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/qwen-logger/qwen-logger.ts:114:24[90m)[39m
    at QwenLogger.getInstance [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/qwen-logger/qwen-logger.ts:131:29[90m)[39m
    at logCliConfiguration [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/telemetry/loggers.ts:85:14[90m)[39m
    at new Config [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/config/config.ts:452:5[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/flashFallback.integration.test.ts:33:14
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20

            </system-err>
        </testcase>
        <testcase classname="src/utils/flashFallback.integration.test.ts" name="Flash Fallback Integration &gt; should trigger fallback after 2 consecutive 429 errors for OAuth users" time="0.005005088">
            <system-out>
Invalid JSON in log file /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json. Backing up and starting fresh. SyntaxError: &quot;undefined&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Logger._readLogFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:91:31[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:155:19[90m)[39m

Backed up corrupted log file to /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json.invalid_json.1759704374086.bak

            </system-out>
            <system-err>
Attempt 1 failed with status 429. Retrying with backoff... Error: Rate limit exceeded (simulated)
    at Module.createSimulated429Error [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/testUtils.ts:59:17[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/flashFallback.integration.test.ts:69:30
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8) {
  status: [33m429[39m
}

            </system-err>
        </testcase>
        <testcase classname="src/utils/flashFallback.integration.test.ts" name="Flash Fallback Integration &gt; should not trigger fallback for API key users" time="0.173711136">
            <system-out>
Invalid JSON in log file /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json. Backing up and starting fresh. SyntaxError: &quot;undefined&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Logger._readLogFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:91:31[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:155:19[90m)[39m

Backed up corrupted log file to /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json.invalid_json.1759704374091.bak

            </system-out>
            <system-err>
Attempt 1 failed with status 429. Retrying with backoff... Error: Rate limit exceeded (simulated)
    at Module.createSimulated429Error [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/testUtils.ts:59:17[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/flashFallback.integration.test.ts:109:51
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8) {
  status: [33m429[39m
}

Attempt 2 failed with status 429. Retrying with backoff... Error: Rate limit exceeded (simulated)
    at Module.createSimulated429Error [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/testUtils.ts:59:17[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/flashFallback.integration.test.ts:109:51
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8) {
  status: [33m429[39m
}

Attempt 3 failed with status 429. Retrying with backoff... Error: Rate limit exceeded (simulated)
    at Module.createSimulated429Error [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/testUtils.ts:59:17[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/flashFallback.integration.test.ts:109:51
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8) {
  status: [33m429[39m
}

Attempt 4 failed with status 429. Retrying with backoff... Error: Rate limit exceeded (simulated)
    at Module.createSimulated429Error [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/testUtils.ts:59:17[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/flashFallback.integration.test.ts:109:51
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8) {
  status: [33m429[39m
}

            </system-err>
        </testcase>
        <testcase classname="src/utils/flashFallback.integration.test.ts" name="Flash Fallback Integration &gt; should properly disable simulation state after fallback" time="0.0010063">
            <system-out>
Invalid JSON in log file /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json. Backing up and starting fresh. SyntaxError: &quot;undefined&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Logger._readLogFile [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:91:31[90m)[39m
    at Logger.initialize [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/core/logger.ts:155:19[90m)[39m

Backed up corrupted log file to /home/atmandk/.qwen/tmp/b306d9ff847c120dd7eb00fcebe5f118b9875b09db67ad8f0834aea7a0d8cb8c/logs.json.invalid_json.1759704374265.bak

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="src/utils/generateContentResponseUtilities.test.ts" timestamp="2025-10-05T22:46:17.223Z" hostname="uby" tests="29" failures="0" errors="0" skipped="0" time="0.007342638">
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getResponseTextFromParts &gt; should return undefined for no parts" time="0.001181944">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getResponseTextFromParts &gt; should extract text from a single text part" time="0.000331151">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getResponseTextFromParts &gt; should concatenate text from multiple text parts" time="0.000150348">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getResponseTextFromParts &gt; should ignore function call parts" time="0.000195331">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getResponseTextFromParts &gt; should return undefined if only function call parts exist" time="0.000113039">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCalls &gt; should return undefined for no candidates" time="0.000209748">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCalls &gt; should return undefined for empty candidates array" time="0.000082192">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCalls &gt; should return undefined for no parts" time="0.000171557">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCalls &gt; should extract a single function call" time="0.00062796">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCalls &gt; should extract multiple function calls" time="0.000175054">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCalls &gt; should ignore text parts" time="0.000094034">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCalls &gt; should return undefined if only text parts exist" time="0.000136181">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCallsFromParts &gt; should return undefined for no parts" time="0.000132936">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCallsFromParts &gt; should extract a single function call" time="0.000127055">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCallsFromParts &gt; should extract multiple function calls" time="0.000070711">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCallsFromParts &gt; should ignore text parts" time="0.000085548">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCallsFromParts &gt; should return undefined if only text parts exist" time="0.000074487">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCallsAsJson &gt; should return JSON string of function calls" time="0.0001896">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCallsAsJson &gt; should return undefined if no function calls" time="0.000080368">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCallsFromPartsAsJson &gt; should return JSON string of function calls from parts" time="0.000208906">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getFunctionCallsFromPartsAsJson &gt; should return undefined if no function calls in parts" time="0.000083614">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getStructuredResponse &gt; should return only text if only text exists" time="0.000316866">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getStructuredResponse &gt; should return only function call JSON if only function calls exist" time="0.000145659">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getStructuredResponse &gt; should return text and function call JSON if both exist" time="0.000123137">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getStructuredResponse &gt; should return undefined if neither text nor function calls exist" time="0.000053539">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getStructuredResponseFromParts &gt; should return only text if only text exists in parts" time="0.000122466">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getStructuredResponseFromParts &gt; should return only function call JSON if only function calls exist in parts" time="0.000124691">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getStructuredResponseFromParts &gt; should return text and function call JSON if both exist in parts" time="0.000125492">
        </testcase>
        <testcase classname="src/utils/generateContentResponseUtilities.test.ts" name="generateContentResponseUtilities &gt; getStructuredResponseFromParts &gt; should return undefined if neither text nor function calls exist in parts" time="0.000111005">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/getFolderStructure.test.ts" timestamp="2025-10-05T22:46:17.224Z" hostname="uby" tests="15" failures="2" errors="0" skipped="0" time="0.070606121">
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; should return basic folder structure" time="0.007687014">
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; should handle an empty folder" time="0.000629353">
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; should ignore folders specified in ignoredFolders (default)" time="0.010342942">
            <failure message="expected &apos;Showing up to 20 items (files + folde…&apos; to be &apos;Showing up to 20 items (files + folde…&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;Showing up to 20 items (files + folde…&apos; to be &apos;Showing up to 20 items (files + folde…&apos; // Object.is equality

- Expected
+ Received

@@ -1,6 +1,6 @@
- Showing up to 20 items (files + folders). Folders or files indicated with ... contain more items not shown, were ignored, or the display limit (20 items) was reached.
+ Showing up to 20 items (files + folders). Folders or files indicated with ... contain more items not shown, were ignored, or the display limit (20 items) was reached. Truncated directories to inspect further: node_modules. Consider running /list_directory &lt;path&gt; or /glob for deeper listings.

  /tmp/folder-structure-test-oi9nbw/
  ├───.hiddenfile
  ├───file1.txt
  ├───emptyFolder/

 ❯ src/utils/getFolderStructure.test.ts:82:30
            </failure>
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; should ignore folders specified in custom ignoredFolders" time="0.003280462">
            <failure message="expected &apos;Showing up to 20 items (files + folde…&apos; to be &apos;Showing up to 20 items (files + folde…&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;Showing up to 20 items (files + folde…&apos; to be &apos;Showing up to 20 items (files + folde…&apos; // Object.is equality

- Expected
+ Received

@@ -1,6 +1,6 @@
- Showing up to 20 items (files + folders). Folders or files indicated with ... contain more items not shown, were ignored, or the display limit (20 items) was reached.
+ Showing up to 20 items (files + folders). Folders or files indicated with ... contain more items not shown, were ignored, or the display limit (20 items) was reached. Truncated directories to inspect further: node_modules, subfolderA. Consider running /list_directory &lt;path&gt; or /glob for deeper listings.

  /tmp/folder-structure-test-LAsfCH/
  ├───.hiddenfile
  ├───file1.txt
  ├───emptyFolder/

 ❯ src/utils/getFolderStructure.test.ts:120:30
            </failure>
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; should filter files by fileIncludePattern" time="0.001246854">
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; should handle maxItems truncation for files within a folder" time="0.005750155">
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; should handle maxItems truncation for subfolders" time="0.002616485">
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; should handle maxItems that only allows the root folder itself" time="0.008012466">
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; should handle non-existent directory" time="0.001944142">
            <system-err>
Warning: Could not read directory /tmp/folder-structure-test-qVS4Y9/non-existent: ENOENT: no such file or directory, scandir &apos;/tmp/folder-structure-test-qVS4Y9/non-existent&apos;

            </system-err>
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; should handle deep folder structure within limits" time="0.002395426">
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; should truncate deep folder structure if maxItems is small" time="0.002447774">
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; with gitignore &gt; should ignore files and folders specified in .gitignore" time="0.013802164">
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; with gitignore &gt; should not ignore files if respectGitIgnore is false" time="0.001912504">
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; with geminiignore &gt; should ignore geminiignore files by default" time="0.002735805">
        </testcase>
        <testcase classname="src/utils/getFolderStructure.test.ts" name="getFolderStructure &gt; with geminiignore &gt; should not ignore files if respectGeminiIgnore is false" time="0.003947805">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/gitIgnoreParser.test.ts" timestamp="2025-10-05T22:46:17.225Z" hostname="uby" tests="18" failures="0" errors="0" skipped="0" time="0.048556676">
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; initialization &gt; should initialize without errors when no .gitignore exists" time="0.004876161">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; initialization &gt; should load .gitignore patterns when file exists" time="0.00370655">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; initialization &gt; should handle git exclude file" time="0.00524904">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; initialization &gt; should handle custom patterns file name" time="0.001691386">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; initialization &gt; should initialize without errors when no .qwenignore exists" time="0.001533133">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; isIgnored &gt; should always ignore .git directory" time="0.007485933">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; isIgnored &gt; should ignore files matching patterns" time="0.003364607">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; isIgnored &gt; should ignore files with path-specific patterns" time="0.002026645">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; isIgnored &gt; should handle negation patterns" time="0.004103122">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; isIgnored &gt; should not ignore files that do not match patterns" time="0.004787026">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; isIgnored &gt; should handle absolute paths correctly" time="0.001423541">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; isIgnored &gt; should handle paths outside project root by not ignoring them" time="0.001077702">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; isIgnored &gt; should handle relative paths correctly" time="0.000923095">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; isIgnored &gt; should normalize path separators on Windows" time="0.001029242">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; isIgnored &gt; should handle root path &quot;/&quot; without throwing error" time="0.00090402">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; isIgnored &gt; should handle absolute-like paths without throwing error" time="0.000802693">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; isIgnored &gt; should handle paths that start with forward slash" time="0.00080607">
        </testcase>
        <testcase classname="src/utils/gitIgnoreParser.test.ts" name="GitIgnoreParser &gt; getIgnoredPatterns &gt; should return the raw patterns added" time="0.000934547">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/ignorePatterns.test.ts" timestamp="2025-10-05T22:46:17.226Z" hostname="uby" tests="28" failures="0" errors="0" skipped="0" time="0.012676594">
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; getCoreIgnorePatterns &gt; should return basic ignore patterns" time="0.003167123">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; getDefaultExcludePatterns &gt; should return comprehensive patterns by default" time="0.000803865">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; getDefaultExcludePatterns &gt; should respect includeDefaults option" time="0.000571797">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; getDefaultExcludePatterns &gt; should include custom patterns" time="0.000212423">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; getDefaultExcludePatterns &gt; should include runtime patterns" time="0.000155537">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; getDefaultExcludePatterns &gt; should respect includeDynamicPatterns option" time="0.000176416">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; getReadManyFilesExcludes &gt; should provide legacy compatibility" time="0.000231999">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; getGlobExcludes &gt; should return core patterns for glob operations" time="0.000322296">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; getGlobExcludes &gt; should include additional excludes" time="0.000179332">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; with Config &gt; should use config custom excludes when available" time="0.00045461">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; with Config &gt; should handle config without getCustomExcludes method" time="0.000214587">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; with Config &gt; should include config custom excludes in glob patterns" time="0.000288353">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="FileExclusions &gt; buildExcludePatterns &gt; should be an alias for getDefaultExcludePatterns" time="0.000555056">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="BINARY_EXTENSIONS &gt; should include common binary file extensions" time="0.000133637">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="BINARY_EXTENSIONS &gt; should include additional binary extensions" time="0.000090337">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="BINARY_EXTENSIONS &gt; should include media file extensions" time="0.000144768">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="BINARY_EXTENSIONS &gt; should be sorted" time="0.000136523">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="BINARY_EXTENSIONS &gt; should not contain invalid extensions from brace patterns" time="0.000121094">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="extractExtensionsFromPatterns &gt; should extract simple extensions" time="0.000110174">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="extractExtensionsFromPatterns &gt; should handle brace expansion patterns" time="0.000245413">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="extractExtensionsFromPatterns &gt; should combine simple and brace expansion patterns" time="0.000158713">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="extractExtensionsFromPatterns &gt; should handle empty brace expansion" time="0.000101167">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="extractExtensionsFromPatterns &gt; should ignore invalid patterns" time="0.000090207">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="extractExtensionsFromPatterns &gt; should remove duplicates and sort results" time="0.000077323">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="extractExtensionsFromPatterns &gt; should handle complex brace patterns with multiple extensions" time="0.000072524">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="extractExtensionsFromPatterns &gt; should handle compound extensions correctly using path.extname" time="0.000057156">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="extractExtensionsFromPatterns &gt; should handle dotfiles correctly" time="0.000066363">
        </testcase>
        <testcase classname="src/utils/ignorePatterns.test.ts" name="extractExtensionsFromPatterns &gt; should handle edge cases with path.extname" time="0.00005365">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/installationManager.test.ts" timestamp="2025-10-05T22:46:17.227Z" hostname="uby" tests="4" failures="0" errors="0" skipped="0" time="0.007711761">
        <testcase classname="src/utils/installationManager.test.ts" name="InstallationManager &gt; getInstallationId &gt; should create and write a new installation ID if one does not exist" time="0.004121135">
        </testcase>
        <testcase classname="src/utils/installationManager.test.ts" name="InstallationManager &gt; getInstallationId &gt; should read an existing installation ID from a file" time="0.000670148">
        </testcase>
        <testcase classname="src/utils/installationManager.test.ts" name="InstallationManager &gt; getInstallationId &gt; should return the same ID on subsequent calls" time="0.00050313">
        </testcase>
        <testcase classname="src/utils/installationManager.test.ts" name="InstallationManager &gt; getInstallationId &gt; should handle read errors and return a fallback ID" time="0.000947931">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/memoryDiscovery.test.ts" timestamp="2025-10-05T22:46:17.227Z" hostname="uby" tests="14" failures="0" errors="0" skipped="0" time="0.102596215">
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should return empty memory and count if no context files are found" time="0.00734359">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should load only the global context file if present and others are not (default filename)" time="0.013682553">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should load only the global custom context file if present and filename is changed" time="0.007666076">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should load context files by upward traversal with custom filename" time="0.003996335">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should load context files by downward traversal with custom filename" time="0.002899187">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should load ORIGINAL_GEMINI_MD_FILENAME files by upward traversal from CWD to project root" time="0.00349584">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should load ORIGINAL_GEMINI_MD_FILENAME files by downward traversal from CWD" time="0.004630717">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should load and correctly order global, upward, and downward ORIGINAL_GEMINI_MD_FILENAME files" time="0.005249611">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should ignore specified directories during downward scan" time="0.010895133">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should respect the maxDirs parameter during downward scan" time="0.019976124">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should load extension context file paths" time="0.004809708">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should load memory from included directories" time="0.002674482">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should handle multiple directories and files in parallel correctly" time="0.008453261">
        </testcase>
        <testcase classname="src/utils/memoryDiscovery.test.ts" name="loadServerHierarchicalMemory &gt; should preserve order and prevent duplicates when processing multiple directories" time="0.004975594">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/memoryImportProcessor.test.ts" timestamp="2025-10-05T22:46:17.228Z" hostname="uby" tests="23" failures="0" errors="0" skipped="0" time="0.030598542">
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should process basic md file imports" time="0.014444211">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should import non-md files just like md files" time="0.001299161">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should handle circular imports" time="0.000785432">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should handle file not found errors" time="0.000755846">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should respect max depth limit" time="0.000571827">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should handle nested imports recursively" time="0.000650833">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should handle absolute paths in imports" time="0.00055162">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should handle multiple imports in same content" time="0.000650262">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should ignore imports inside code blocks" time="0.001338484">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should ignore imports inside inline code" time="0.000787676">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should handle nested tokens and non-unique content correctly" time="0.000337002">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should allow imports from parent and subdirectories within project root" time="0.000323588">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should reject imports outside project root" time="0.00023249">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should build import tree structure" time="0.001271289">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should produce flat output in Claude-style with unique files in order" time="0.001123587">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should not duplicate files in flat output if imported multiple times" time="0.000399268">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; processImports &gt; should handle nested imports in flat output" time="0.001608563">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; validateImportPath &gt; should reject URLs" time="0.000316294">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; validateImportPath &gt; should allow paths within allowed directories" time="0.000280689">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; validateImportPath &gt; should reject paths outside allowed directories" time="0.000279707">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; validateImportPath &gt; should handle multiple allowed directories" time="0.000376285">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; validateImportPath &gt; should handle relative paths correctly" time="0.000336371">
        </testcase>
        <testcase classname="src/utils/memoryImportProcessor.test.ts" name="memoryImportProcessor &gt; validateImportPath &gt; should handle absolute paths correctly" time="0.00039">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/nextSpeakerChecker.test.ts" timestamp="2025-10-05T22:46:17.229Z" hostname="uby" tests="10" failures="0" errors="0" skipped="0" time="0.027964175">
        <testcase classname="src/utils/nextSpeakerChecker.test.ts" name="checkNextSpeaker &gt; should return null if history is empty" time="0.004552473">
        </testcase>
        <testcase classname="src/utils/nextSpeakerChecker.test.ts" name="checkNextSpeaker &gt; should return null if the last speaker was the user" time="0.002273351">
        </testcase>
        <testcase classname="src/utils/nextSpeakerChecker.test.ts" name="checkNextSpeaker &gt; should return { next_speaker: &apos;model&apos; } when model intends to continue" time="0.002398542">
        </testcase>
        <testcase classname="src/utils/nextSpeakerChecker.test.ts" name="checkNextSpeaker &gt; should return { next_speaker: &apos;user&apos; } when model asks a question" time="0.001794135">
        </testcase>
        <testcase classname="src/utils/nextSpeakerChecker.test.ts" name="checkNextSpeaker &gt; should return { next_speaker: &apos;user&apos; } when model makes a statement" time="0.002205766">
        </testcase>
        <testcase classname="src/utils/nextSpeakerChecker.test.ts" name="checkNextSpeaker &gt; should return null if geminiClient.generateJson throws an error" time="0.002546395">
        </testcase>
        <testcase classname="src/utils/nextSpeakerChecker.test.ts" name="checkNextSpeaker &gt; should return null if geminiClient.generateJson returns invalid JSON (missing next_speaker)" time="0.002918583">
        </testcase>
        <testcase classname="src/utils/nextSpeakerChecker.test.ts" name="checkNextSpeaker &gt; should return null if geminiClient.generateJson returns a non-string next_speaker" time="0.002052092">
        </testcase>
        <testcase classname="src/utils/nextSpeakerChecker.test.ts" name="checkNextSpeaker &gt; should return null if geminiClient.generateJson returns an invalid next_speaker string value" time="0.003179686">
        </testcase>
        <testcase classname="src/utils/nextSpeakerChecker.test.ts" name="checkNextSpeaker &gt; should call generateJson with DEFAULT_QWEN_FLASH_MODEL" time="0.002631673">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/partUtils.test.ts" timestamp="2025-10-05T22:46:17.229Z" hostname="uby" tests="37" failures="0" errors="0" skipped="0" time="0.011199875">
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (default behavior) &gt; should return empty string for undefined or null" time="0.001643968">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (default behavior) &gt; should return string input unchanged" time="0.000164013">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (default behavior) &gt; should concatenate strings from an array" time="0.000133978">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (default behavior) &gt; should return text property when provided a text part" time="0.000086129">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (default behavior) &gt; should return empty string for non-text parts" time="0.000118238">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should return empty string for undefined or null" time="0.000235145">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should return string input unchanged" time="0.000088623">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should join parts if the value is an array" time="0.000081049">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should return the text property if the part is an object with text" time="0.000081951">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should return descriptive string for videoMetadata part" time="0.00007587">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should return descriptive string for thought part" time="0.000085097">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should return descriptive string for codeExecutionResult part" time="0.000082412">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should return descriptive string for executableCode part" time="0.00008694">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should return descriptive string for fileData part" time="0.000088434">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should return descriptive string for functionCall part" time="0.000090086">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should return descriptive string for functionResponse part" time="0.000096508">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should return descriptive string for inlineData part" time="0.00007605">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should return an empty string for an unknown part type" time="0.000062997">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; partToString (verbose) &gt; should handle complex nested arrays with various part types" time="0.000322245">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; getResponseText &gt; should return null when no candidates exist" time="0.000224274">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; getResponseText &gt; should return concatenated text from first candidate" time="0.000115273">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; getResponseText &gt; should ignore parts without text" time="0.000070621">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; getResponseText &gt; should return null when candidate has no parts" time="0.000057687">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; getResponseText &gt; should return null if the first candidate has no content property" time="0.000072384">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; flatMapTextParts &gt; should return an empty array for empty input" time="0.000670649">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; flatMapTextParts &gt; should transform a simple string input" time="0.000265631">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; flatMapTextParts &gt; should transform a single text part object" time="0.000154315">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; flatMapTextParts &gt; should transform an array of text parts and flatten the result" time="0.000505183">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; flatMapTextParts &gt; should pass through non-text parts unmodified" time="0.000154115">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; flatMapTextParts &gt; should handle a mix of text and non-text parts in an array" time="0.000148905">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; flatMapTextParts &gt; should handle a transform that returns an empty array" time="0.002764128">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; appendToLastTextPart &gt; should append to an empty prompt" time="0.000287992">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; appendToLastTextPart &gt; should append to a prompt with a string as the last part" time="0.000093273">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; appendToLastTextPart &gt; should append to a prompt with a text part object as the last part" time="0.000056505">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; appendToLastTextPart &gt; should append a new text part if the last part is not a text part" time="0.000051986">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; appendToLastTextPart &gt; should not append anything if the text to append is empty" time="0.000035936">
        </testcase>
        <testcase classname="src/utils/partUtils.test.ts" name="partUtils &gt; appendToLastTextPart &gt; should use a custom separator" time="0.000040515">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/pathReader.test.ts" timestamp="2025-10-05T22:46:17.231Z" hostname="uby" tests="16" failures="0" errors="0" skipped="0" time="0.068041693">
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; should read a text file from the CWD" time="0.007222266">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; should read a file from a secondary workspace directory" time="0.001723164">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; should prioritize CWD when file exists in both CWD and secondary dir" time="0.000986513">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; should read an image file and return it as inlineData (Part object)" time="0.000927584">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; should read a generic binary file and return an info string" time="0.000644722">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; should read a file from an absolute path if within workspace" time="0.001025915">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; Directory Expansion &gt; should expand a directory and read the content of its files" time="0.008017806">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; Directory Expansion &gt; should recursively expand a directory and read all nested files" time="0.003698033">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; Directory Expansion &gt; should handle mixed content and include files from subdirectories" time="0.004930271">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; Directory Expansion &gt; should handle an empty directory" time="0.001425524">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; File Ignoring &gt; should return an empty array for an ignored file" time="0.001762257">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; File Ignoring &gt; should not read ignored files when expanding a directory" time="0.001917434">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; should throw an error for an absolute path outside the workspace" time="0.001889962">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; should throw an error if a relative path is not found anywhere" time="0.000734969">
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; should return an error string if reading a file with no permissions" time="0.00222436">
            <system-err>
Failed to check if file is binary: /test/cwd/unreadable.txt EACCES, permission denied &apos;/test/cwd/unreadable.txt&apos;

            </system-err>
        </testcase>
        <testcase classname="src/utils/pathReader.test.ts" name="readPathFromWorkspace &gt; should return an error string for files exceeding the size limit" time="0.027045947">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/paths.test.ts" timestamp="2025-10-05T22:46:17.231Z" hostname="uby" tests="55" failures="0" errors="0" skipped="0" time="0.008540171">
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape spaces" time="0.001600909">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape tabs" time="0.000320332">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape parentheses" time="0.000134689">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape square brackets" time="0.000074147">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape curly braces" time="0.000069749">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape semicolons" time="0.000063748">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape ampersands" time="0.000057005">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape pipes" time="0.000053839">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape asterisks" time="0.000068777">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape question marks" time="0.000055723">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape dollar signs" time="0.000052828">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape backticks" time="0.000048831">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape single quotes" time="0.000073446">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape double quotes" time="0.000061233">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape hash symbols" time="0.000052127">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape exclamation marks" time="0.000066142">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape tildes" time="0.000051024">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should escape less than and greater than signs" time="0.000050985">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should handle multiple special characters" time="0.000079807">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should not double-escape already escaped characters" time="0.000100837">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should handle escaped backslashes correctly" time="0.000316134">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should handle complex escaped backslash scenarios" time="0.000094695">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should handle paths without special characters" time="0.00008671">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should handle complex real-world examples" time="0.000094404">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should handle empty strings" time="0.000057626">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="escapePath &gt; should handle paths with only special characters" time="0.000055112">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="unescapePath &gt; should unescape spaces" time="0.000187065">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="unescapePath &gt; should unescape tabs" time="0.000073576">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="unescapePath &gt; should unescape parentheses" time="0.000058037">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="unescapePath &gt; should unescape square brackets" time="0.00005413">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="unescapePath &gt; should unescape curly braces" time="0.000072414">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="unescapePath &gt; should unescape multiple special characters" time="0.000050914">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="unescapePath &gt; should handle paths without escaped characters" time="0.000057727">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="unescapePath &gt; should handle all special characters" time="0.000043119">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="unescapePath &gt; should be the inverse of escapePath" time="0.000143906">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="unescapePath &gt; should handle empty strings" time="0.000044933">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="unescapePath &gt; should not affect backslashes not followed by special characters" time="0.000060923">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="unescapePath &gt; should handle escaped backslashes in unescaping" time="0.000069138">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath &gt; should return true for a direct subpath" time="0.000133086">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath &gt; should return true for the same path" time="0.000052627">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath &gt; should return false for a parent path" time="0.000050624">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath &gt; should return false for a completely different path" time="0.0000488">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath &gt; should handle relative paths" time="0.000139658">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath &gt; should handle paths with .." time="0.00007594">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath &gt; should handle root paths" time="0.000072054">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath &gt; should handle trailing slashes" time="0.000086029">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath on Windows &gt; should return true for a direct subpath on Windows" time="0.000156599">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath on Windows &gt; should return true for the same path on Windows" time="0.000070841">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath on Windows &gt; should return false for a parent path on Windows" time="0.000071021">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath on Windows &gt; should return false for a different drive on Windows" time="0.000056274">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath on Windows &gt; should be case-insensitive for drive letters on Windows" time="0.000051956">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath on Windows &gt; should be case-insensitive for path components on Windows" time="0.000288653">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath on Windows &gt; should handle mixed slashes on Windows" time="0.000105074">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath on Windows &gt; should handle trailing slashes on Windows" time="0.000072253">
        </testcase>
        <testcase classname="src/utils/paths.test.ts" name="isSubpath on Windows &gt; should handle relative paths correctly on Windows" time="0.000128097">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/quotaErrorDetection.test.ts" timestamp="2025-10-05T22:46:17.234Z" hostname="uby" tests="27" failures="0" errors="0" skipped="0" time="0.004326385">
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenQuotaExceededError &gt; should detect insufficient_quota error message" time="0.001145877">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenQuotaExceededError &gt; should detect free allocated quota exceeded error message" time="0.000188398">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenQuotaExceededError &gt; should detect quota exceeded error message" time="0.000082923">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenQuotaExceededError &gt; should detect quota exceeded in string error" time="0.000053218">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenQuotaExceededError &gt; should detect quota exceeded in structured error" time="0.000066724">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenQuotaExceededError &gt; should detect quota exceeded in API error" time="0.000079938">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenQuotaExceededError &gt; should not detect throttling errors as quota exceeded" time="0.000072414">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenQuotaExceededError &gt; should not detect unrelated errors" time="0.000061224">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenThrottlingError &gt; should detect throttling error with 429 status" time="0.000150628">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenThrottlingError &gt; should detect requests throttling triggered with 429 status" time="0.000055072">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenThrottlingError &gt; should detect rate limit error with 429 status" time="0.000047227">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenThrottlingError &gt; should detect too many requests with 429 status" time="0.000039082">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenThrottlingError &gt; should detect throttling in string error" time="0.000043641">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenThrottlingError &gt; should detect throttling in structured error with 429" time="0.000043952">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenThrottlingError &gt; should detect throttling in API error with 429" time="0.000047147">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenThrottlingError &gt; should not detect throttling without 429 status in structured error" time="0.000035105">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenThrottlingError &gt; should not detect quota exceeded as throttling" time="0.000035746">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isQwenThrottlingError &gt; should not detect unrelated errors as throttling" time="0.000036287">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isProQuotaExceededError &gt; should detect Gemini Pro quota exceeded error" time="0.000204217">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isProQuotaExceededError &gt; should detect Gemini preview Pro quota exceeded error" time="0.00008641">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isProQuotaExceededError &gt; should not detect non-Pro quota errors" time="0.000049021">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isGenericQuotaExceededError &gt; should detect generic quota exceeded error" time="0.000105245">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; isGenericQuotaExceededError &gt; should not detect non-quota errors" time="0.000046887">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; type guards &gt; isApiError &gt; should detect valid API error" time="0.000054762">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; type guards &gt; isApiError &gt; should not detect invalid API error" time="0.000040194">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; type guards &gt; isStructuredError &gt; should detect valid structured error" time="0.000059009">
        </testcase>
        <testcase classname="src/utils/quotaErrorDetection.test.ts" name="quotaErrorDetection &gt; type guards &gt; isStructuredError &gt; should not detect invalid structured error" time="0.000038361">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/retry.test.ts" timestamp="2025-10-05T22:46:17.235Z" hostname="uby" tests="20" failures="0" errors="0" skipped="0" time="0.035778413">
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; should return the result on the first attempt if successful" time="0.004736292">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; should retry and succeed if failures are within maxAttempts" time="0.00818758">
            <system-err>
Attempt 1 failed with status 500. Retrying with backoff... Error: Simulated error attempt 1
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:24:32
    at mockCall (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/spy[24m/dist/index.js:96:15)
    at spy (file:///home/atmandk/LowCal-dev/node_modules/[4mtinyspy[24m/dist/index.js:47:103)
    at retryWithBackoff [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.ts:184:20[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:63:21
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10) {
  status: [33m500[39m
}

Attempt 2 failed with status 500. Retrying with backoff... Error: Simulated error attempt 2
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:24:32
    at mockCall (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/spy[24m/dist/index.js:96:15)
    at spy (file:///home/atmandk/LowCal-dev/node_modules/[4mtinyspy[24m/dist/index.js:47:103)
    at retryWithBackoff [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.ts:184:20[90m)[39m {
  status: [33m500[39m
}

            </system-err>
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; should throw an error if all attempts fail" time="0.002652011">
            <system-err>
Attempt 1 failed with status 500. Retrying with backoff... Error: Simulated error attempt 1
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:24:32
    at mockCall (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/spy[24m/dist/index.js:96:15)
    at spy (file:///home/atmandk/LowCal-dev/node_modules/[4mtinyspy[24m/dist/index.js:47:103)
    at retryWithBackoff [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.ts:184:20[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:79:21
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10) {
  status: [33m500[39m
}

Attempt 2 failed with status 500. Retrying with backoff... Error: Simulated error attempt 2
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:24:32
    at mockCall (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/spy[24m/dist/index.js:96:15)
    at spy (file:///home/atmandk/LowCal-dev/node_modules/[4mtinyspy[24m/dist/index.js:47:103)
    at retryWithBackoff [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.ts:184:20[90m)[39m {
  status: [33m500[39m
}

            </system-err>
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; should not retry if shouldRetry returns false" time="0.000706566">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; should use default shouldRetry if not provided, retrying on 429" time="0.000769983">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; should use default shouldRetry if not provided, not retrying on 400" time="0.000575714">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; should respect maxDelayMs" time="0.002063072">
            <system-err>
Attempt 1 failed with status 500. Retrying with backoff... Error: Simulated error attempt 1
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:24:32
    at mockCall (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/spy[24m/dist/index.js:96:15)
    at spy (file:///home/atmandk/LowCal-dev/node_modules/[4mtinyspy[24m/dist/index.js:47:103)
    at retryWithBackoff [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.ts:184:20[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:162:21
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10) {
  status: [33m500[39m
}

Attempt 2 failed with status 500. Retrying with backoff... Error: Simulated error attempt 2
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:24:32
    at mockCall (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/spy[24m/dist/index.js:96:15)
    at spy (file:///home/atmandk/LowCal-dev/node_modules/[4mtinyspy[24m/dist/index.js:47:103)
    at retryWithBackoff [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.ts:184:20[90m)[39m {
  status: [33m500[39m
}

Attempt 3 failed with status 500. Retrying with backoff... Error: Simulated error attempt 3
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:24:32
    at mockCall (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/spy[24m/dist/index.js:96:15)
    at spy (file:///home/atmandk/LowCal-dev/node_modules/[4mtinyspy[24m/dist/index.js:47:103)
    at retryWithBackoff [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.ts:184:20[90m)[39m {
  status: [33m500[39m
}

            </system-err>
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; should handle jitter correctly, ensuring varied delays" time="0.0021539">
            <system-err>
Attempt 1 failed with status 500. Retrying with backoff... Error: Simulated error attempt 1
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:24:32
    at mockCall (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/spy[24m/dist/index.js:96:15)
    at spy (file:///home/atmandk/LowCal-dev/node_modules/[4mtinyspy[24m/dist/index.js:47:103)
    at retryWithBackoff [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.ts:184:20[90m)[39m
    at runRetry [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:191:7[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:198:22
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;) {
  status: [33m500[39m
}

Attempt 1 failed with status 500. Retrying with backoff... Error: Simulated error attempt 1
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:24:32
    at mockCall (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/spy[24m/dist/index.js:96:15)
    at spy (file:///home/atmandk/LowCal-dev/node_modules/[4mtinyspy[24m/dist/index.js:47:103)
    at retryWithBackoff [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.ts:184:20[90m)[39m
    at runRetry [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:191:7[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:213:22
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20 {
  status: [33m500[39m
}

            </system-err>
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; Flash model fallback for OAuth users &gt; should trigger fallback for OAuth personal users after persistent 429 errors" time="0.00163972">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; Flash model fallback for OAuth users &gt; should NOT trigger fallback for API key users" time="0.000795019">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; Flash model fallback for OAuth users &gt; should reset attempt counter and continue after successful fallback" time="0.000643609">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; Flash model fallback for OAuth users &gt; should continue with original error if fallback is rejected" time="0.001845731">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; Flash model fallback for OAuth users &gt; should handle mixed error types (only count consecutive 429s)" time="0.001401019">
            <system-err>
Attempt 1 failed with status 500. Retrying with backoff... Error: Server error
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:378:36
    at mockCall (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/spy[24m/dist/index.js:96:15)
    at spy (file:///home/atmandk/LowCal-dev/node_modules/[4mtinyspy[24m/dist/index.js:47:103)
    at retryWithBackoff [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.ts:184:20[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:389:23
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10) {
  status: [33m500[39m
}

            </system-err>
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; Qwen OAuth 429 error handling &gt; should retry for Qwen OAuth 429 errors that are throttling-related" time="0.000782226">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; Qwen OAuth 429 error handling &gt; should throw immediately for Qwen OAuth with insufficient_quota message" time="0.000585162">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; Qwen OAuth 429 error handling &gt; should throw immediately for Qwen OAuth with free allocated quota exceeded message" time="0.00057394">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; Qwen OAuth 429 error handling &gt; should retry for Qwen OAuth with throttling message" time="0.000662525">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; Qwen OAuth 429 error handling &gt; should retry for Qwen OAuth with throttling error" time="0.00101731">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; Qwen OAuth 429 error handling &gt; should throw immediately for Qwen OAuth with quota message" time="0.000695996">
        </testcase>
        <testcase classname="src/utils/retry.test.ts" name="retryWithBackoff &gt; Qwen OAuth 429 error handling &gt; should retry normal errors for Qwen OAuth (not quota-related)" time="0.001516552">
            <system-err>
Attempt 1 failed with status 500. Retrying with backoff... Error: Network error
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:550:38
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8) {
  status: [33m500[39m
}

Attempt 2 failed with status 500. Retrying with backoff... Error: Network error
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/retry.test.ts:550:38
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1729:8) {
  status: [33m500[39m
}

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="src/utils/safeJsonParse.test.ts" timestamp="2025-10-05T22:46:17.237Z" hostname="uby" tests="14" failures="0" errors="0" skipped="0" time="0.00780355">
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; valid JSON parsing &gt; should parse valid JSON correctly" time="0.002710459">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; valid JSON parsing &gt; should parse valid JSON arrays" time="0.000306627">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; valid JSON parsing &gt; should parse valid JSON with nested objects" time="0.000262124">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; malformed JSON with jsonrepair fallback &gt; should handle malformed JSON with single quotes" time="0.001208914">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; malformed JSON with jsonrepair fallback &gt; should handle malformed JSON with unquoted keys" time="0.000392765">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; malformed JSON with jsonrepair fallback &gt; should handle malformed JSON with trailing commas" time="0.00026001">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; malformed JSON with jsonrepair fallback &gt; should handle malformed JSON with comments" time="0.000247788">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; fallback behavior &gt; should return fallback value for empty string" time="0.000102559">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; fallback behavior &gt; should return fallback value for null input" time="0.000109332">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; fallback behavior &gt; should return fallback value for undefined input" time="0.00012439">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; fallback behavior &gt; should return empty object as default fallback" time="0.000180574">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; fallback behavior &gt; should return custom fallback when parsing fails" time="0.00008621">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; type safety &gt; should preserve generic type when parsing valid JSON" time="0.000173891">
        </testcase>
        <testcase classname="src/utils/safeJsonParse.test.ts" name="safeJsonParse &gt; type safety &gt; should return fallback type when parsing fails" time="0.00009195">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/safeJsonStringify.test.ts" timestamp="2025-10-05T22:46:17.237Z" hostname="uby" tests="8" failures="0" errors="0" skipped="0" time="0.004376056">
        <testcase classname="src/utils/safeJsonStringify.test.ts" name="safeJsonStringify &gt; should stringify normal objects without issues" time="0.001686968">
        </testcase>
        <testcase classname="src/utils/safeJsonStringify.test.ts" name="safeJsonStringify &gt; should handle circular references by replacing them with [Circular]" time="0.000221379">
        </testcase>
        <testcase classname="src/utils/safeJsonStringify.test.ts" name="safeJsonStringify &gt; should handle complex circular structures like HttpsProxyAgent" time="0.000369272">
        </testcase>
        <testcase classname="src/utils/safeJsonStringify.test.ts" name="safeJsonStringify &gt; should respect the space parameter for formatting" time="0.000118459">
        </testcase>
        <testcase classname="src/utils/safeJsonStringify.test.ts" name="safeJsonStringify &gt; should handle circular references with formatting" time="0.000076982">
        </testcase>
        <testcase classname="src/utils/safeJsonStringify.test.ts" name="safeJsonStringify &gt; should handle arrays with circular references" time="0.000077804">
        </testcase>
        <testcase classname="src/utils/safeJsonStringify.test.ts" name="safeJsonStringify &gt; should handle null and undefined values" time="0.000090498">
        </testcase>
        <testcase classname="src/utils/safeJsonStringify.test.ts" name="safeJsonStringify &gt; should handle primitive values" time="0.000109282">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/secure-browser-launcher.test.ts" timestamp="2025-10-05T22:46:17.238Z" hostname="uby" tests="14" failures="0" errors="0" skipped="0" time="0.014419355">
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; URL validation &gt; should allow valid HTTP URLs" time="0.003806184">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; URL validation &gt; should allow valid HTTPS URLs" time="0.000679656">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; URL validation &gt; should reject non-HTTP(S) protocols" time="0.001466791">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; URL validation &gt; should reject invalid URLs" time="0.000299042">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; URL validation &gt; should reject URLs with control characters" time="0.000357411">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; Command injection prevention &gt; should prevent PowerShell command injection on Windows" time="0.000618493">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; Command injection prevention &gt; should handle URLs with special shell characters safely" time="0.001483311">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; Command injection prevention &gt; should properly escape single quotes in URLs on Windows" time="0.000359735">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; Platform-specific behavior &gt; should use correct command on macOS" time="0.000386444">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; Platform-specific behavior &gt; should use PowerShell on Windows" time="0.001156296">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; Platform-specific behavior &gt; should use xdg-open on Linux" time="0.000566687">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; Platform-specific behavior &gt; should throw on unsupported platforms" time="0.000604377">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; Error handling &gt; should handle browser launch failures gracefully" time="0.000497249">
        </testcase>
        <testcase classname="src/utils/secure-browser-launcher.test.ts" name="secure-browser-launcher &gt; Error handling &gt; should try fallback browsers on Linux" time="0.000581665">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/shell-utils.test.ts" timestamp="2025-10-05T22:46:17.238Z" hostname="uby" tests="51" failures="0" errors="0" skipped="0" time="0.010768579">
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; should allow a command if no restrictions are provided" time="0.001647204">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; should allow a command if it is in the global allowlist" time="0.000259609">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; should block a command if it is not in a strict global allowlist" time="0.000168632">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; should block a command if it is in the blocked list" time="0.000176807">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; should prioritize the blocklist over the allowlist" time="0.000134889">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; should allow any command when a wildcard is in coreTools" time="0.000090127">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; should block any command when a wildcard is in excludeTools" time="0.000097821">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; should block a command on the blocklist even with a wildcard allow" time="0.000100936">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; should allow a chained command if all parts are on the global allowlist" time="0.000139127">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; should block a chained command if any part is blocked" time="0.000124991">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; command substitution &gt; should block command substitution using `$(...)`" time="0.000164965">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; command substitution &gt; should block command substitution using `&lt;(...)`" time="0.000090307">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; command substitution &gt; should block command substitution using backticks" time="0.000082662">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandAllowed &gt; command substitution &gt; should allow substitution-like patterns inside single quotes" time="0.000106396">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="checkCommandPermissions &gt; in &quot;Default Allow&quot; mode (no sessionAllowlist) &gt; should return a detailed success object for an allowed command" time="0.000608675">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="checkCommandPermissions &gt; in &quot;Default Allow&quot; mode (no sessionAllowlist) &gt; should return a detailed failure object for a blocked command" time="0.00014621">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="checkCommandPermissions &gt; in &quot;Default Allow&quot; mode (no sessionAllowlist) &gt; should return a detailed failure object for a command not on a strict allowlist" time="0.000120242">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="checkCommandPermissions &gt; in &quot;Default Deny&quot; mode (with sessionAllowlist) &gt; should allow a command on the sessionAllowlist" time="0.000157932">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="checkCommandPermissions &gt; in &quot;Default Deny&quot; mode (with sessionAllowlist) &gt; should block a command not on the sessionAllowlist or global allowlist" time="0.000126323">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="checkCommandPermissions &gt; in &quot;Default Deny&quot; mode (with sessionAllowlist) &gt; should allow a command on the global allowlist even if not on the session allowlist" time="0.000075499">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="checkCommandPermissions &gt; in &quot;Default Deny&quot; mode (with sessionAllowlist) &gt; should allow a chained command if parts are on different allowlists" time="0.000071623">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="checkCommandPermissions &gt; in &quot;Default Deny&quot; mode (with sessionAllowlist) &gt; should block a command on the sessionAllowlist if it is also globally blocked" time="0.000070851">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="checkCommandPermissions &gt; in &quot;Default Deny&quot; mode (with sessionAllowlist) &gt; should block a chained command if one part is not on any allowlist" time="0.000092621">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="getCommandRoots &gt; should return a single command" time="0.00019444">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="getCommandRoots &gt; should handle paths and return the binary name" time="0.000123398">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="getCommandRoots &gt; should return an empty array for an empty string" time="0.000053239">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="getCommandRoots &gt; should handle a mix of operators" time="0.00013511">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="getCommandRoots &gt; should correctly parse a chained command with quotes" time="0.000132815">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="stripShellWrapper &gt; should strip sh -c with quotes" time="0.000252186">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="stripShellWrapper &gt; should strip bash -c with extra whitespace" time="0.000128327">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="stripShellWrapper &gt; should strip zsh -c without quotes" time="0.000051905">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="stripShellWrapper &gt; should strip cmd.exe /c" time="0.000040204">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="stripShellWrapper &gt; should not strip anything if no wrapper is present" time="0.000038051">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="escapeShellArg &gt; POSIX (bash) &gt; should use shell-quote for escaping" time="0.00103929">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="escapeShellArg &gt; POSIX (bash) &gt; should handle empty strings" time="0.000260642">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="escapeShellArg &gt; Windows &gt; when shell is cmd.exe &gt; should wrap simple arguments in double quotes" time="0.000188137">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="escapeShellArg &gt; Windows &gt; when shell is cmd.exe &gt; should escape internal double quotes by doubling them" time="0.000067324">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="escapeShellArg &gt; Windows &gt; when shell is cmd.exe &gt; should handle empty strings" time="0.00004314">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="escapeShellArg &gt; Windows &gt; when shell is PowerShell &gt; should wrap simple arguments in single quotes" time="0.000049">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="escapeShellArg &gt; Windows &gt; when shell is PowerShell &gt; should escape internal single quotes by doubling them" time="0.000045624">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="escapeShellArg &gt; Windows &gt; when shell is PowerShell &gt; should handle double quotes without escaping them" time="0.000042649">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="escapeShellArg &gt; Windows &gt; when shell is PowerShell &gt; should handle empty strings" time="0.000039283">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="getShellConfiguration &gt; should return bash configuration on Linux" time="0.000187406">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="getShellConfiguration &gt; should return bash configuration on macOS (darwin)" time="0.000104162">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="getShellConfiguration &gt; on Windows &gt; should return cmd.exe configuration by default" time="0.00009768">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="getShellConfiguration &gt; on Windows &gt; should respect ComSpec for cmd.exe" time="0.000090136">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="getShellConfiguration &gt; on Windows &gt; should return PowerShell configuration if ComSpec points to powershell.exe" time="0.000083584">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="getShellConfiguration &gt; on Windows &gt; should return PowerShell configuration if ComSpec points to pwsh.exe" time="0.000077283">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="getShellConfiguration &gt; on Windows &gt; should be case-insensitive when checking ComSpec" time="0.00007576">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandNeedPermission &gt; returns false for read-only commands" time="0.000362359">
        </testcase>
        <testcase classname="src/utils/shell-utils.test.ts" name="isCommandNeedPermission &gt; returns true for mutating commands with reason" time="0.000198076">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/shellReadOnlyChecker.test.ts" timestamp="2025-10-05T22:46:17.240Z" hostname="uby" tests="9" failures="0" errors="0" skipped="0" time="0.003737156">
        <testcase classname="src/utils/shellReadOnlyChecker.test.ts" name="evaluateShellCommandReadOnly &gt; allows simple read-only command" time="0.001853625">
        </testcase>
        <testcase classname="src/utils/shellReadOnlyChecker.test.ts" name="evaluateShellCommandReadOnly &gt; rejects mutating commands like rm" time="0.000181125">
        </testcase>
        <testcase classname="src/utils/shellReadOnlyChecker.test.ts" name="evaluateShellCommandReadOnly &gt; rejects redirection output" time="0.000071021">
        </testcase>
        <testcase classname="src/utils/shellReadOnlyChecker.test.ts" name="evaluateShellCommandReadOnly &gt; rejects command substitution" time="0.00005946">
        </testcase>
        <testcase classname="src/utils/shellReadOnlyChecker.test.ts" name="evaluateShellCommandReadOnly &gt; allows git status but rejects git commit" time="0.000163182">
        </testcase>
        <testcase classname="src/utils/shellReadOnlyChecker.test.ts" name="evaluateShellCommandReadOnly &gt; rejects find with exec" time="0.000174222">
        </testcase>
        <testcase classname="src/utils/shellReadOnlyChecker.test.ts" name="evaluateShellCommandReadOnly &gt; rejects sed in-place" time="0.00011343">
        </testcase>
        <testcase classname="src/utils/shellReadOnlyChecker.test.ts" name="evaluateShellCommandReadOnly &gt; rejects empty command" time="0.000046937">
        </testcase>
        <testcase classname="src/utils/shellReadOnlyChecker.test.ts" name="evaluateShellCommandReadOnly &gt; respects environment prefix followed by allowed command" time="0.000058849">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/subagentGenerator.test.ts" timestamp="2025-10-05T22:46:17.240Z" hostname="uby" tests="9" failures="0" errors="0" skipped="0" time="0.029544895">
        <testcase classname="src/utils/subagentGenerator.test.ts" name="subagentGenerator &gt; should throw error for empty user description" time="0.004506417">
        </testcase>
        <testcase classname="src/utils/subagentGenerator.test.ts" name="subagentGenerator &gt; should successfully generate content with valid LLM response" time="0.003921666">
        </testcase>
        <testcase classname="src/utils/subagentGenerator.test.ts" name="subagentGenerator &gt; should throw error when LLM response is missing required fields" time="0.002929734">
        </testcase>
        <testcase classname="src/utils/subagentGenerator.test.ts" name="subagentGenerator &gt; should throw error when LLM response has empty fields" time="0.002475394">
        </testcase>
        <testcase classname="src/utils/subagentGenerator.test.ts" name="subagentGenerator &gt; should throw error when generateJson throws an error" time="0.002888728">
        </testcase>
        <testcase classname="src/utils/subagentGenerator.test.ts" name="subagentGenerator &gt; should call generateJson with correct schema and model" time="0.003852218">
        </testcase>
        <testcase classname="src/utils/subagentGenerator.test.ts" name="subagentGenerator &gt; should include user description in the prompt" time="0.002455477">
        </testcase>
        <testcase classname="src/utils/subagentGenerator.test.ts" name="subagentGenerator &gt; should throw error for null response from generateJson" time="0.002208411">
        </testcase>
        <testcase classname="src/utils/subagentGenerator.test.ts" name="subagentGenerator &gt; should throw error for undefined response from generateJson" time="0.003000143">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/summarizer.test.ts" timestamp="2025-10-05T22:46:17.241Z" hostname="uby" tests="8" failures="0" errors="0" skipped="0" time="0.028111807">
        <testcase classname="src/utils/summarizer.test.ts" name="summarizers &gt; summarizeToolOutput &gt; should return original text if it is shorter than maxLength" time="0.006073133">
        </testcase>
        <testcase classname="src/utils/summarizer.test.ts" name="summarizers &gt; summarizeToolOutput &gt; should return original text if it is empty" time="0.002817617">
        </testcase>
        <testcase classname="src/utils/summarizer.test.ts" name="summarizers &gt; summarizeToolOutput &gt; should call generateContent if text is longer than maxLength" time="0.003126938">
        </testcase>
        <testcase classname="src/utils/summarizer.test.ts" name="summarizers &gt; summarizeToolOutput &gt; should return original text if generateContent throws an error" time="0.003745672">
        </testcase>
        <testcase classname="src/utils/summarizer.test.ts" name="summarizers &gt; summarizeToolOutput &gt; should construct the correct prompt for summarization" time="0.002322432">
        </testcase>
        <testcase classname="src/utils/summarizer.test.ts" name="summarizers &gt; llmSummarizer &gt; should summarize tool output using summarizeToolOutput" time="0.002409924">
        </testcase>
        <testcase classname="src/utils/summarizer.test.ts" name="summarizers &gt; llmSummarizer &gt; should handle different llmContent types" time="0.003265324">
        </testcase>
        <testcase classname="src/utils/summarizer.test.ts" name="summarizers &gt; defaultSummarizer &gt; should stringify the llmContent" time="0.002970369">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/systemEncoding.test.ts" timestamp="2025-10-05T22:46:17.241Z" hostname="uby" tests="38" failures="0" errors="0" skipped="0" time="0.016861959">
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; windowsCodePageToEncoding &gt; should map common Windows code pages correctly" time="0.001853314">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; windowsCodePageToEncoding &gt; should return null for unmapped code pages and warn" time="0.001528474">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; windowsCodePageToEncoding &gt; should handle all Windows-specific code pages" time="0.00070367">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; detectEncodingFromBuffer &gt; should detect encoding using chardet successfully" time="0.001126441">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; detectEncodingFromBuffer &gt; should handle chardet returning mixed case encoding" time="0.000448309">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; detectEncodingFromBuffer &gt; should return null when chardet fails" time="0.001275747">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; detectEncodingFromBuffer &gt; should return null when chardet returns null" time="0.000216269">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; detectEncodingFromBuffer &gt; should return null when chardet returns non-string" time="0.000143184">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Windows &gt; should parse Windows chcp output correctly" time="0.000717827">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Windows &gt; should handle different chcp output formats" time="0.000225226">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Windows &gt; should handle chcp output with extra whitespace" time="0.00014022">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Windows &gt; should return null when chcp command fails" time="0.000545839">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Windows &gt; should return null when chcp output cannot be parsed" time="0.000255302">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Windows &gt; should return null when code page is not a number" time="0.000210449">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Windows &gt; should return null when code page maps to null" time="0.000183609">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Unix-like &gt; should parse locale from LC_ALL environment variable" time="0.000237479">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Unix-like &gt; should parse locale from LC_CTYPE when LC_ALL is not set" time="0.000206542">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Unix-like &gt; should parse locale from LANG when LC_ALL and LC_CTYPE are not set" time="0.000326413">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Unix-like &gt; should handle locale charmap command when environment variables are empty" time="0.000336131">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Unix-like &gt; should handle locale charmap with mixed case" time="0.000197645">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Unix-like &gt; should return null when locale charmap fails" time="0.000240655">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Unix-like &gt; should handle locale without encoding (no dot)" time="0.000185333">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Unix-like &gt; should handle empty locale environment variables" time="0.000172258">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Unix-like &gt; should return locale as-is when locale format has no dot" time="0.000203716">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Unix-like &gt; should prioritize LC_ALL over other environment variables" time="0.000195762">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getSystemEncoding - Unix-like &gt; should prioritize LC_CTYPE over LANG" time="0.000139808">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getEncodingForBuffer &gt; should use cached system encoding on subsequent calls" time="0.000293081">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getEncodingForBuffer &gt; should fall back to buffer detection when system encoding fails" time="0.000312788">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getEncodingForBuffer &gt; should fall back to utf-8 when both system and buffer detection fail" time="0.000214226">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getEncodingForBuffer &gt; should not cache buffer detection results" time="0.000300425">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getEncodingForBuffer &gt; should handle Windows system encoding" time="0.000206342">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; getEncodingForBuffer &gt; should cache null system encoding result" time="0.00032994">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; Cross-platform behavior &gt; should work correctly on macOS" time="0.000144087">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; Cross-platform behavior &gt; should work correctly on other Unix-like systems" time="0.000103391">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; Cross-platform behavior &gt; should handle unknown platforms as Unix-like" time="0.000100957">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; Edge cases and error handling &gt; should handle empty buffer gracefully" time="0.000146201">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; Edge cases and error handling &gt; should handle very large buffers" time="0.000531612">
        </testcase>
        <testcase classname="src/utils/systemEncoding.test.ts" name="Shell Command Processor - Encoding Functions &gt; Edge cases and error handling &gt; should handle Unicode content" time="0.000278054">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/tool-utils.test.ts" timestamp="2025-10-05T22:46:17.243Z" hostname="uby" tests="7" failures="0" errors="0" skipped="0" time="0.002465476">
        <testcase classname="src/utils/tool-utils.test.ts" name="doesToolInvocationMatch &gt; should not match a partial command prefix" time="0.00103899">
        </testcase>
        <testcase classname="src/utils/tool-utils.test.ts" name="doesToolInvocationMatch &gt; should match an exact command" time="0.00012435">
        </testcase>
        <testcase classname="src/utils/tool-utils.test.ts" name="doesToolInvocationMatch &gt; should match a command that is a prefix" time="0.000087131">
        </testcase>
        <testcase classname="src/utils/tool-utils.test.ts" name="doesToolInvocationMatch &gt; for non-shell tools &gt; should match by tool name" time="0.000087351">
        </testcase>
        <testcase classname="src/utils/tool-utils.test.ts" name="doesToolInvocationMatch &gt; for non-shell tools &gt; should match by tool class name" time="0.000057957">
        </testcase>
        <testcase classname="src/utils/tool-utils.test.ts" name="doesToolInvocationMatch &gt; for non-shell tools &gt; should not match if neither name is in the patterns" time="0.000044803">
        </testcase>
        <testcase classname="src/utils/tool-utils.test.ts" name="doesToolInvocationMatch &gt; for non-shell tools &gt; should match by tool name when passed as a string" time="0.000051655">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/userAccountManager.test.ts" timestamp="2025-10-05T22:46:17.243Z" hostname="uby" tests="23" failures="0" errors="0" skipped="0" time="0.034853354">
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; cacheGoogleAccount &gt; should create directory and write initial account file" time="0.00465384">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; cacheGoogleAccount &gt; should update active account and move previous to old" time="0.00562273">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; cacheGoogleAccount &gt; should not add a duplicate to the old list" time="0.001819271">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; cacheGoogleAccount &gt; should handle corrupted JSON by starting fresh" time="0.004289887">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; cacheGoogleAccount &gt; should handle valid JSON with incorrect schema by starting fresh" time="0.00497355">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getCachedGoogleAccount &gt; should return the active account if file exists and is valid" time="0.000653067">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getCachedGoogleAccount &gt; should return null if file does not exist" time="0.000422481">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getCachedGoogleAccount &gt; should return null if file is empty" time="0.000403175">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getCachedGoogleAccount &gt; should return null and log if file is corrupted" time="0.000707678">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getCachedGoogleAccount &gt; should return null if active key is missing" time="0.00051955">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; clearCachedGoogleAccount &gt; should set active to null and move it to old" time="0.001082581">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; clearCachedGoogleAccount &gt; should handle empty file gracefully" time="0.001370873">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; clearCachedGoogleAccount &gt; should handle corrupted JSON by creating a fresh file" time="0.001124598">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; clearCachedGoogleAccount &gt; should be idempotent if active account is already null" time="0.001090125">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; clearCachedGoogleAccount &gt; should not add a duplicate to the old list" time="0.001232908">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getLifetimeGoogleAccounts &gt; should return 0 if the file does not exist" time="0.000372177">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getLifetimeGoogleAccounts &gt; should return 0 if the file is empty" time="0.000334037">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getLifetimeGoogleAccounts &gt; should return 0 if the file is corrupted" time="0.000501818">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getLifetimeGoogleAccounts &gt; should return 1 if there is only an active account" time="0.000366798">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getLifetimeGoogleAccounts &gt; should correctly count old accounts when active is null" time="0.000336752">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getLifetimeGoogleAccounts &gt; should correctly count both active and old accounts" time="0.000336822">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getLifetimeGoogleAccounts &gt; should handle valid JSON with incorrect schema by returning 0" time="0.000574242">
        </testcase>
        <testcase classname="src/utils/userAccountManager.test.ts" name="UserAccountManager &gt; getLifetimeGoogleAccounts &gt; should not double count if active account is also in old list" time="0.000373581">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/workspaceContext.test.ts" timestamp="2025-10-05T22:46:17.244Z" hostname="uby" tests="34" failures="0" errors="0" skipped="0" time="0.02980727">
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; initialization &gt; should initialize with a single directory (cwd)" time="0.002749401">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; initialization &gt; should validate and resolve directories to absolute paths" time="0.000743414">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; initialization &gt; should handle empty initialization" time="0.001491977">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; adding directories &gt; should add valid directories" time="0.00049786">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; adding directories &gt; should resolve relative paths to absolute" time="0.000529448">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; adding directories &gt; should prevent duplicate directories" time="0.000456914">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; adding directories &gt; should handle symbolic links correctly" time="0.000452937">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; should accept paths within workspace directories" time="0.000701446">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; should accept non-existent paths within workspace directories" time="0.000439211">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; should reject paths outside workspace" time="0.000269288">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; should reject non-existent paths outside workspace" time="0.00024324">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; should handle nested directories correctly" time="0.000304503">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; should handle edge cases (root, parent references)" time="0.000380994">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; should handle non-existent paths correctly" time="0.000407022">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; with symbolic link &gt; in the workspace &gt; should accept dir paths" time="0.000399207">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; with symbolic link &gt; in the workspace &gt; should accept non-existent paths" time="0.000330842">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; with symbolic link &gt; in the workspace &gt; should accept non-existent deep paths" time="0.000305084">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; with symbolic link &gt; outside the workspace &gt; should reject dir paths" time="0.000375133">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; with symbolic link &gt; outside the workspace &gt; should reject non-existent paths" time="0.000407703">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; with symbolic link &gt; outside the workspace &gt; should reject non-existent deep paths" time="0.000345248">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; with symbolic link &gt; outside the workspace &gt; should reject partially non-existent deep paths" time="0.000398867">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; with symbolic link &gt; should reject symbolic file links outside the workspace" time="0.000344116">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; with symbolic link &gt; should reject non-existent symbolic file links outside the workspace" time="0.000358212">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; path validation &gt; with symbolic link &gt; should handle circular symlinks gracefully" time="0.000467513">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; onDirectoriesChanged &gt; should call listener when adding a directory" time="0.001330269">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; onDirectoriesChanged &gt; should not call listener when adding a duplicate directory" time="0.000604007">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; onDirectoriesChanged &gt; should call listener when setting different directories" time="0.00048128">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; onDirectoriesChanged &gt; should not call listener when setting same directories" time="0.000383979">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; onDirectoriesChanged &gt; should support multiple listeners" time="0.000379501">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; onDirectoriesChanged &gt; should allow unsubscribing a listener" time="0.00028679">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; onDirectoriesChanged &gt; should not fail if a listener throws an error" time="0.009013676">
            <system-err>
Error in WorkspaceContext listener: Error: test error
    at errorListener [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/workspaceContext.test.ts:350:15[90m)[39m
    at WorkspaceContext.notifyDirectoriesChanged [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/workspaceContext.ts:53:9[90m)[39m
    at WorkspaceContext.addDirectory [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/workspaceContext.ts:73:12[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/workspaceContext.test.ts:357:26
    at Proxy.assertThrows (file:///home/atmandk/LowCal-dev/node_modules/[4mchai[24m/chai.js:2723:5)
    at Proxy.methodWrapper (file:///home/atmandk/LowCal-dev/node_modules/[4mchai[24m/chai.js:1618:25)
    at Proxy.&lt;anonymous&gt; (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/expect[24m/dist/index.js:1088:12)
    at Proxy.overwritingMethodWrapper (file:///home/atmandk/LowCal-dev/node_modules/[4mchai[24m/chai.js:1670:33)
    at Proxy.&lt;anonymous&gt; (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/expect[24m/dist/index.js:1420:16)
    at Proxy.&lt;anonymous&gt; (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/expect[24m/dist/index.js:1029:14)

            </system-err>
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with real filesystem &gt; getDirectories &gt; should return a copy of directories array" time="0.000576024">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with optional directories &gt; should skip a missing optional directory and log a warning" time="0.001141239">
        </testcase>
        <testcase classname="src/utils/workspaceContext.test.ts" name="WorkspaceContext with optional directories &gt; should include an existing optional directory" time="0.000489113">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/yaml-parser.test.ts" timestamp="2025-10-05T22:46:17.245Z" hostname="uby" tests="18" failures="0" errors="0" skipped="0" time="0.007514636">
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; parse &gt; should parse simple key-value pairs" time="0.002076648">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; parse &gt; should parse arrays" time="0.000248319">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; parse &gt; should parse nested objects" time="0.000301096">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; should stringify simple objects" time="0.000338295">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; should stringify arrays" time="0.00011349">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; should stringify nested objects" time="0.000097761">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; string escaping security &gt; should properly escape strings with quotes" time="0.000107919">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; string escaping security &gt; should properly escape strings with backslashes" time="0.000104914">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; string escaping security &gt; should properly escape strings with backslash-quote sequences" time="0.000117227">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; string escaping security &gt; should handle complex escaping scenarios" time="0.000204889">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; string escaping security &gt; should maintain round-trip integrity for escaped strings" time="0.000389229">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; string escaping security &gt; should not quote strings that do not need quoting" time="0.000098081">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; string escaping security &gt; should quote strings with colons" time="0.000085789">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; string escaping security &gt; should quote strings with hash symbols" time="0.000802753">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; string escaping security &gt; should quote strings with leading/trailing whitespace" time="0.000133157">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; numeric string handling &gt; should parse unquoted numeric values as numbers" time="0.000164173">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; numeric string handling &gt; should parse quoted numeric values as strings" time="0.00017869">
        </testcase>
        <testcase classname="src/utils/yaml-parser.test.ts" name="yaml-parser &gt; stringify &gt; numeric string handling &gt; should handle mixed numeric and string values" time="0.00018388">
        </testcase>
    </testsuite>
    <testsuite name="src/core/__tests__/openaiTimeoutHandling.test.ts" timestamp="2025-10-05T22:46:17.246Z" hostname="uby" tests="12" failures="0" errors="0" skipped="0" time="0.030217158">
        <testcase classname="src/core/__tests__/openaiTimeoutHandling.test.ts" name="OpenAIContentGenerator Timeout Handling &gt; timeout error identification through actual requests &gt; should handle various timeout error formats correctly" time="0.008596045">
            <system-err>
OpenAI API Error: Request timeout after 0s. Try reducing input length or increasing timeout in config.

OpenAI API Error: Request timeout after 0s. Try reducing input length or increasing timeout in config.

OpenAI API Error: Request timeout after 0s. Try reducing input length or increasing timeout in config.

OpenAI API Error: Request timeout after 0s. Try reducing input length or increasing timeout in config.

OpenAI API Error: Request timeout after 0s. Try reducing input length or increasing timeout in config.

OpenAI API Error: Request timeout after 0s. Try reducing input length or increasing timeout in config.

OpenAI API Error: Request timeout after 0s. Try reducing input length or increasing timeout in config.

OpenAI API Error: Request timeout after 0s. Try reducing input length or increasing timeout in config.

            </system-err>
        </testcase>
        <testcase classname="src/core/__tests__/openaiTimeoutHandling.test.ts" name="OpenAIContentGenerator Timeout Handling &gt; timeout error identification through actual requests &gt; should handle non-timeout errors without timeout messaging" time="0.004773311">
            <system-err>
OpenAI API Error: Invalid API key

OpenAI API Error: Rate limit exceeded

OpenAI API Error: Model not found

OpenAI API Error: Auth error

OpenAI API Error: API error

            </system-err>
        </testcase>
        <testcase classname="src/core/__tests__/openaiTimeoutHandling.test.ts" name="OpenAIContentGenerator Timeout Handling &gt; generateContent timeout handling &gt; should handle timeout errors with helpful message" time="0.003078268">
            <system-err>
OpenAI API Error: Request timeout after 0s. Try reducing input length or increasing timeout in config.

            </system-err>
        </testcase>
        <testcase classname="src/core/__tests__/openaiTimeoutHandling.test.ts" name="OpenAIContentGenerator Timeout Handling &gt; generateContent timeout handling &gt; should handle non-timeout errors normally" time="0.001506234">
            <system-err>
OpenAI API Error: Invalid API key

            </system-err>
        </testcase>
        <testcase classname="src/core/__tests__/openaiTimeoutHandling.test.ts" name="OpenAIContentGenerator Timeout Handling &gt; generateContent timeout handling &gt; should include troubleshooting tips for timeout errors" time="0.001770031">
            <system-err>
OpenAI API Error: Request timeout after 0s. Try reducing input length or increasing timeout in config.

            </system-err>
        </testcase>
        <testcase classname="src/core/__tests__/openaiTimeoutHandling.test.ts" name="OpenAIContentGenerator Timeout Handling &gt; generateContentStream timeout handling &gt; should handle streaming timeout errors" time="0.001567236">
            <system-err>
OpenAI API Streaming Error: Streaming request timeout after 0s. Try reducing input length or increasing timeout in config.

            </system-err>
        </testcase>
        <testcase classname="src/core/__tests__/openaiTimeoutHandling.test.ts" name="OpenAIContentGenerator Timeout Handling &gt; generateContentStream timeout handling &gt; should include streaming-specific troubleshooting tips" time="0.001337211">
            <system-err>
OpenAI API Streaming Error: Streaming request timeout after 0s. Try reducing input length or increasing timeout in config.

            </system-err>
        </testcase>
        <testcase classname="src/core/__tests__/openaiTimeoutHandling.test.ts" name="OpenAIContentGenerator Timeout Handling &gt; timeout configuration &gt; should use default timeout configuration" time="0.000960365">
        </testcase>
        <testcase classname="src/core/__tests__/openaiTimeoutHandling.test.ts" name="OpenAIContentGenerator Timeout Handling &gt; timeout configuration &gt; should use custom timeout from config" time="0.001064296">
        </testcase>
        <testcase classname="src/core/__tests__/openaiTimeoutHandling.test.ts" name="OpenAIContentGenerator Timeout Handling &gt; timeout configuration &gt; should handle missing timeout config gracefully" time="0.001144254">
        </testcase>
        <testcase classname="src/core/__tests__/openaiTimeoutHandling.test.ts" name="OpenAIContentGenerator Timeout Handling &gt; token estimation on timeout &gt; should surface a clear timeout error when request times out" time="0.001068535">
            <system-err>
OpenAI API Error: Request timeout after 0s. Try reducing input length or increasing timeout in config.

            </system-err>
        </testcase>
        <testcase classname="src/core/__tests__/openaiTimeoutHandling.test.ts" name="OpenAIContentGenerator Timeout Handling &gt; token estimation on timeout &gt; should fall back to character-based estimation if countTokens fails" time="0.001056452">
            <system-err>
OpenAI API Error: Request timeout after 0s. Try reducing input length or increasing timeout in config.

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="src/core/openaiContentGenerator/converter.test.ts" timestamp="2025-10-05T22:46:17.247Z" hostname="uby" tests="3" failures="0" errors="0" skipped="0" time="0.003778051">
        <testcase classname="src/core/openaiContentGenerator/converter.test.ts" name="OpenAIContentConverter &gt; resetStreamingToolCalls &gt; should clear streaming tool calls accumulator" time="0.002141747">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/converter.test.ts" name="OpenAIContentConverter &gt; resetStreamingToolCalls &gt; should be safe to call multiple times" time="0.000200401">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/converter.test.ts" name="OpenAIContentConverter &gt; resetStreamingToolCalls &gt; should be safe to call on empty accumulator" time="0.00021101">
        </testcase>
    </testsuite>
    <testsuite name="src/core/openaiContentGenerator/errorHandler.test.ts" timestamp="2025-10-05T22:46:17.247Z" hostname="uby" tests="38" failures="0" errors="0" skipped="0" time="0.018365877">
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; constructor &gt; should create instance with default shouldSuppressLogging function" time="0.002550583">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; constructor &gt; should create instance with custom shouldSuppressLogging function" time="0.000421259">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; handle method &gt; should throw the original error for non-timeout errors" time="0.000981835">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; handle method &gt; should log error message for non-timeout errors" time="0.001855488">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; handle method &gt; should log streaming error message for streaming requests" time="0.000467344">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; handle method &gt; should throw enhanced error message for timeout errors" time="0.000472353">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; handle method &gt; should not log error when suppression is enabled" time="0.00180201">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; handle method &gt; should handle string errors" time="0.000410399">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; handle method &gt; should handle null/undefined errors" time="0.00036788">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; shouldSuppressErrorLogging method &gt; should return false by default" time="0.000342814">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; shouldSuppressErrorLogging method &gt; should use custom suppression function" time="0.000294995">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should detect timeout error: timeout in message" time="0.000245544">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should detect timeout error: timed out in message" time="0.001460298">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should detect timeout error: connection timeout" time="0.000285868">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should detect timeout error: request timeout" time="0.000098031">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should detect timeout error: read timeout" time="0.000081039">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should detect timeout error: etimedout" time="0.000116456">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should detect timeout error: esockettimedout" time="0.000143806">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should detect timeout error: deadline exceeded" time="0.000098873">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should detect timeout error: ETIMEDOUT code" time="0.00016214">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should detect timeout error: ESOCKETTIMEDOUT code" time="0.00053584">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should detect timeout error: timeout type" time="0.000133767">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should not detect non-timeout errors as timeout" time="0.000250523">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; timeout error detection &gt; should handle case-insensitive timeout detection" time="0.000136803">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; error message building &gt; should build timeout error message for non-streaming requests" time="0.000164855">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; error message building &gt; should build timeout error message for streaming requests" time="0.000300956">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; error message building &gt; should use original error message for non-timeout errors" time="0.000289465">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; error message building &gt; should handle non-Error objects" time="0.000259699">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; error message building &gt; should convert non-Error objects to strings for timeout errors" time="0.00020579">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; error message building &gt; should handle different duration values correctly" time="0.000150658">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; troubleshooting tips generation &gt; should provide general troubleshooting tips for non-streaming requests" time="0.000214386">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; troubleshooting tips generation &gt; should provide streaming-specific troubleshooting tips for streaming requests" time="0.000198577">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; ErrorHandler interface compliance &gt; should implement ErrorHandler interface correctly" time="0.000172008">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; edge cases &gt; should handle zero duration" time="0.000166217">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; edge cases &gt; should handle negative duration" time="0.000169363">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; edge cases &gt; should handle very large duration" time="0.00024879">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; edge cases &gt; should handle empty error message" time="0.000192846">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/errorHandler.test.ts" name="EnhancedErrorHandler &gt; edge cases &gt; should handle error with only whitespace message" time="0.000161228">
        </testcase>
    </testsuite>
    <testsuite name="src/core/openaiContentGenerator/openaiContentGenerator.test.ts" timestamp="2025-10-05T22:46:17.248Z" hostname="uby" tests="8" failures="0" errors="0" skipped="0" time="0.011235642">
        <testcase classname="src/core/openaiContentGenerator/openaiContentGenerator.test.ts" name="OpenAIContentGenerator (Refactored) &gt; constructor &gt; should initialize with basic configuration" time="0.003142227">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/openaiContentGenerator.test.ts" name="OpenAIContentGenerator (Refactored) &gt; generateContent &gt; should delegate to pipeline.execute" time="0.000587736">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/openaiContentGenerator.test.ts" name="OpenAIContentGenerator (Refactored) &gt; generateContentStream &gt; should delegate to pipeline.executeStream" time="0.00033016">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/openaiContentGenerator.test.ts" name="OpenAIContentGenerator (Refactored) &gt; countTokens &gt; should count tokens using tiktoken" time="0.001062393">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/openaiContentGenerator.test.ts" name="OpenAIContentGenerator (Refactored) &gt; countTokens &gt; should fall back to character approximation if tiktoken fails" time="0.001522032">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/openaiContentGenerator.test.ts" name="OpenAIContentGenerator (Refactored) &gt; embedContent &gt; should delegate to pipeline.client.embeddings.create" time="0.000382326">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/openaiContentGenerator.test.ts" name="OpenAIContentGenerator (Refactored) &gt; shouldSuppressErrorLogging &gt; should return false by default" time="0.001938612">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/openaiContentGenerator.test.ts" name="OpenAIContentGenerator (Refactored) &gt; shouldSuppressErrorLogging &gt; should allow subclasses to override error suppression behavior" time="0.00070886">
        </testcase>
    </testsuite>
    <testsuite name="src/core/openaiContentGenerator/pipeline.test.ts" timestamp="2025-10-05T22:46:17.249Z" hostname="uby" tests="17" failures="0" errors="0" skipped="0" time="0.023995921">
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; constructor &gt; should initialize with correct configuration" time="0.003386347">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; execute &gt; should successfully execute non-streaming request" time="0.003716398">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; execute &gt; should handle tools in request" time="0.000916083">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; execute &gt; should handle errors and log them" time="0.002276867">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; executeStream &gt; should successfully execute streaming request" time="0.001974158">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; executeStream &gt; should filter empty responses" time="0.000919759">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; executeStream &gt; should handle streaming errors and reset tool calls" time="0.001125029">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; executeStream &gt; should merge finishReason and usageMetadata from separate chunks" time="0.001219504">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; executeStream &gt; should handle ideal case where last chunk has both finishReason and usageMetadata" time="0.000748332">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; executeStream &gt; should handle providers that send zero usage in finish chunk (like modelscope)" time="0.000871661">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; executeStream &gt; should handle providers that send finishReason and valid usage in same chunk" time="0.000745197">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; buildRequest &gt; should build request with sampling parameters" time="0.000618793">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; buildRequest &gt; should use config sampling parameters when request parameters are not provided" time="0.000560225">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; buildRequest &gt; should allow provider to enhance request" time="0.000716784">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; createRequestContext &gt; should create context with correct properties for non-streaming request" time="0.000615166">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; createRequestContext &gt; should create context with correct properties for streaming request" time="0.0007251">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/pipeline.test.ts" name="ContentGenerationPipeline &gt; createRequestContext &gt; should collect all OpenAI chunks for logging even when Gemini responses are filtered" time="0.000965083">
        </testcase>
    </testsuite>
    <testsuite name="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" timestamp="2025-10-05T22:46:17.250Z" hostname="uby" tests="51" failures="0" errors="0" skipped="0" time="0.015167929">
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Basic functionality &gt; should initialize with empty state" time="0.001757938">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Basic functionality &gt; should handle simple complete JSON in single chunk" time="0.000415297">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Basic functionality &gt; should accumulate chunks until complete JSON" time="0.000178209">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Basic functionality &gt; should handle empty chunks gracefully" time="0.000103311">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; JSON depth tracking &gt; should track nested objects correctly" time="0.000180574">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; JSON depth tracking &gt; should track nested arrays correctly" time="0.000197375">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; JSON depth tracking &gt; should handle mixed nested structures" time="0.000133807">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; String handling &gt; should handle strings with special characters" time="0.00007562">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; String handling &gt; should handle strings with braces and brackets" time="0.000063387">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; String handling &gt; should track string boundaries correctly across chunks" time="0.000068637">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; String handling &gt; should handle escaped quotes in strings" time="0.0000707">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; String handling &gt; should handle backslash escapes correctly" time="0.00005428">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Error handling and repair &gt; should return error for malformed JSON at depth 0" time="0.000191114">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Error handling and repair &gt; should auto-repair unclosed strings" time="0.001432958">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Error handling and repair &gt; should not attempt repair when still in nested structure" time="0.000087071">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Error handling and repair &gt; should handle repair failure gracefully" time="0.000072975">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Multiple tool calls &gt; should handle multiple tool calls with different indices" time="0.000118239">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Multiple tool calls &gt; should handle interleaved chunks from multiple tool calls" time="0.000102379">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Multiple tool calls &gt; should maintain separate state for each index" time="0.000112328">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Tool call metadata handling &gt; should store and retrieve tool call metadata" time="0.000069329">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Tool call metadata handling &gt; should handle metadata-only chunks" time="0.000071112">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Tool call metadata handling &gt; should update metadata incrementally" time="0.000095837">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Tool call metadata handling &gt; should detect new tool call with same index and reassign to new index" time="0.000192115">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Completed tool calls &gt; should return completed tool calls" time="0.000189941">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Completed tool calls &gt; should handle completed tool calls with repair" time="0.000219225">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Completed tool calls &gt; should use safeJsonParse as fallback for malformed JSON" time="0.000414135">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Completed tool calls &gt; should not return tool calls without function name" time="0.000121915">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Completed tool calls &gt; should not return tool calls with empty buffer" time="0.000082903">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Edge cases &gt; should handle very large JSON objects" time="0.000737733">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Edge cases &gt; should handle deeply nested structures" time="0.001346468">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Edge cases &gt; should handle JSON with unicode characters" time="0.000228562">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Edge cases &gt; should handle JSON with null and boolean values" time="0.000122957">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Edge cases &gt; should handle JSON with numbers" time="0.000107158">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Edge cases &gt; should handle whitespace-only chunks" time="0.000119211">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Edge cases &gt; should handle chunks with only structural characters" time="0.000115253">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Real-world streaming scenarios &gt; should handle typical OpenAI streaming pattern" time="0.000199699">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Real-world streaming scenarios &gt; should handle multiple concurrent tool calls streaming" time="0.000256975">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Real-world streaming scenarios &gt; should handle malformed streaming that gets repaired" time="0.000235295">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Tool call ID collision detection and mapping &gt; should handle tool call ID reuse correctly" time="0.000271571">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Tool call ID collision detection and mapping &gt; should detect index collision and find new index" time="0.000660992">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Tool call ID collision detection and mapping &gt; should handle continuation chunks without ID correctly" time="0.000148745">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Tool call ID collision detection and mapping &gt; should find most recent incomplete tool call for continuation chunks" time="0.000270821">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Index management and reset functionality &gt; should reset individual index correctly" time="0.000173921">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Index management and reset functionality &gt; should find next available index when all lower indices are occupied" time="0.000183359">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Index management and reset functionality &gt; should reuse incomplete index when available" time="0.000075139">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Repair functionality and flags &gt; should test repair functionality in getCompletedToolCalls" time="0.000872192">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Repair functionality and flags &gt; should not set repaired flag for normal parsing" time="0.000140289">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Repair functionality and flags &gt; should not attempt repair when still in nested structure" time="0.000079838">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Repair functionality and flags &gt; should handle repair failure gracefully" time="0.000082863">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Complex collision scenarios &gt; should handle rapid tool call switching at same index" time="0.000204248">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/streamingToolCallParser.test.ts" name="StreamingToolCallParser &gt; Complex collision scenarios &gt; should handle interleaved chunks from multiple tool calls with ID mapping" time="0.000165196">
        </testcase>
    </testsuite>
    <testsuite name="src/core/openaiContentGenerator/telemetryService.test.ts" timestamp="2025-10-05T22:46:17.251Z" hostname="uby" tests="33" failures="0" errors="0" skipped="0" time="0.020709218">
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; constructor &gt; should create instance with default OpenAI logging disabled" time="0.001837735">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; constructor &gt; should create instance with OpenAI logging enabled when specified" time="0.000258768">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logSuccess &gt; should log API response event with complete response data" time="0.003741023">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logSuccess &gt; should handle response without responseId" time="0.000575643">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logSuccess &gt; should handle response without usage metadata" time="0.000348564">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logSuccess &gt; should not log OpenAI interaction when logging is disabled" time="0.000367059">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logSuccess &gt; should log OpenAI interaction when logging is enabled" time="0.000437339">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logSuccess &gt; should not log OpenAI interaction when request or response is missing" time="0.000357">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logError &gt; should log API error event with Error instance" time="0.000554575">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logError &gt; should handle error without requestID" time="0.000385773">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logError &gt; should handle non-Error objects" time="0.000279887">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logError &gt; should handle null/undefined errors" time="0.000282933">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logError &gt; should not log OpenAI interaction when logging is disabled" time="0.000241917">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logError &gt; should log OpenAI interaction when logging is enabled" time="0.000370455">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logError &gt; should not log OpenAI interaction when request is missing" time="0.000272373">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logStreamingSuccess &gt; should log streaming success with multiple responses" time="0.000521613">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logStreamingSuccess &gt; should handle empty responses array" time="0.00036288">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logStreamingSuccess &gt; should handle responses without usage metadata" time="0.000353874">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logStreamingSuccess &gt; should use the last response with usage metadata" time="0.000338165">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logStreamingSuccess &gt; should not log OpenAI interaction when logging is disabled" time="0.000286529">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logStreamingSuccess &gt; should log OpenAI interaction when logging is enabled" time="0.001118056">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; logStreamingSuccess &gt; should not log OpenAI interaction when request or chunks are missing" time="0.000459649">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; RequestContext interface &gt; should have all required properties" time="0.000388387">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; RequestContext interface &gt; should support streaming context" time="0.000165155">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; combineOpenAIChunksForLogging &gt; should combine simple text chunks correctly" time="0.000521583">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; combineOpenAIChunksForLogging &gt; should combine tool call chunks correctly" time="0.000598476">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; combineOpenAIChunksForLogging &gt; should handle mixed content and tool calls" time="0.000425476">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; combineOpenAIChunksForLogging &gt; should handle chunks with no content or tool calls" time="0.000387225">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; combineOpenAIChunksForLogging &gt; should use default values when usage is missing" time="0.000387246">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; combineOpenAIChunksForLogging &gt; should use default finish_reason when missing" time="0.000545979">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; combineOpenAIChunksForLogging &gt; should filter out empty tool calls" time="0.000369624">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; integration with telemetry events &gt; should create ApiResponseEvent with correct structure" time="0.000475449">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/telemetryService.test.ts" name="DefaultTelemetryService &gt; integration with telemetry events &gt; should create ApiErrorEvent with correct structure" time="0.00085482">
        </testcase>
    </testsuite>
    <testsuite name="src/mcp/token-storage/base-token-storage.test.ts" timestamp="2025-10-05T22:46:17.252Z" hostname="uby" tests="12" failures="0" errors="0" skipped="0" time="0.006593624">
        <testcase classname="src/mcp/token-storage/base-token-storage.test.ts" name="BaseTokenStorage &gt; validateCredentials &gt; should validate valid credentials" time="0.002379087">
        </testcase>
        <testcase classname="src/mcp/token-storage/base-token-storage.test.ts" name="BaseTokenStorage &gt; validateCredentials &gt; should throw for missing server name" time="0.000320112">
        </testcase>
        <testcase classname="src/mcp/token-storage/base-token-storage.test.ts" name="BaseTokenStorage &gt; validateCredentials &gt; should throw for missing token" time="0.000188859">
        </testcase>
        <testcase classname="src/mcp/token-storage/base-token-storage.test.ts" name="BaseTokenStorage &gt; validateCredentials &gt; should throw for missing access token" time="0.000321283">
        </testcase>
        <testcase classname="src/mcp/token-storage/base-token-storage.test.ts" name="BaseTokenStorage &gt; validateCredentials &gt; should throw for missing token type" time="0.000312126">
        </testcase>
        <testcase classname="src/mcp/token-storage/base-token-storage.test.ts" name="BaseTokenStorage &gt; isTokenExpired &gt; should return false for tokens without expiry" time="0.000280178">
        </testcase>
        <testcase classname="src/mcp/token-storage/base-token-storage.test.ts" name="BaseTokenStorage &gt; isTokenExpired &gt; should return false for valid tokens" time="0.000126073">
        </testcase>
        <testcase classname="src/mcp/token-storage/base-token-storage.test.ts" name="BaseTokenStorage &gt; isTokenExpired &gt; should return true for expired tokens" time="0.00009751">
        </testcase>
        <testcase classname="src/mcp/token-storage/base-token-storage.test.ts" name="BaseTokenStorage &gt; isTokenExpired &gt; should apply 5-minute buffer for expiry check" time="0.000448459">
        </testcase>
        <testcase classname="src/mcp/token-storage/base-token-storage.test.ts" name="BaseTokenStorage &gt; sanitizeServerName &gt; should keep valid characters" time="0.000232009">
        </testcase>
        <testcase classname="src/mcp/token-storage/base-token-storage.test.ts" name="BaseTokenStorage &gt; sanitizeServerName &gt; should replace invalid characters with underscore" time="0.000095637">
        </testcase>
        <testcase classname="src/mcp/token-storage/base-token-storage.test.ts" name="BaseTokenStorage &gt; sanitizeServerName &gt; should handle special characters" time="0.000077333">
        </testcase>
    </testsuite>
    <testsuite name="src/telemetry/clearcut-logger/clearcut-logger.test.ts" timestamp="2025-10-05T22:46:17.253Z" hostname="uby" tests="21" failures="0" errors="0" skipped="0" time="0.14153587">
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; getInstance &gt; returns an instance if usage statistics are enabled" time="0.011782121">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; getInstance &gt; returns an instance if usage statistics are enabled" time="0.016125438">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; getInstance &gt; is a singleton" time="0.001513407">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; createLogEvent &gt; logs the total number of google accounts" time="0.002057211">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; createLogEvent &gt; logs the current surface from a github action" time="0.001342611">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; createLogEvent &gt; logs default metadata" time="0.002565852">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; createLogEvent &gt; logs the current surface" time="0.001687749">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; createLogEvent &gt; logs the current surface as &apos;cursor&apos;, preempting vscode detection" time="0.002430341">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; createLogEvent &gt; logs the current surface as &apos;vscode&apos;, preempting vscode detection" time="0.001868182">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; createLogEvent &gt; logs the current surface as &apos;firebasestudio&apos;, preempting vscode detection" time="0.001209485">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; createLogEvent &gt; logs the current surface as &apos;devin&apos;, preempting vscode detection" time="0.00145041">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; createLogEvent &gt; logs the current surface as &apos;cloudshell&apos;, preempting vscode detection" time="0.001167387">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; logChatCompressionEvent &gt; logs an event with proper fields" time="0.00155351">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; enqueueLogEvent &gt; should add events to the queue" time="0.001005849">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; enqueueLogEvent &gt; should evict the oldest event when the queue is full" time="0.020484733">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; flushToClearcut &gt; allows for usage with a configured proxy agent" time="0.037262727">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; flushToClearcut &gt; should clear events on successful flush" time="0.006371854">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; flushToClearcut &gt; should handle a network error and requeue events" time="0.005420817">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; flushToClearcut &gt; should handle an HTTP error and requeue events" time="0.004992025">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; requeueFailedEvents logic &gt; should limit the number of requeued events to max_retry_events" time="0.001464536">
        </testcase>
        <testcase classname="src/telemetry/clearcut-logger/clearcut-logger.test.ts" name="ClearcutLogger &gt; requeueFailedEvents logic &gt; should not requeue more events than available space in the queue" time="0.013977008">
        </testcase>
    </testsuite>
    <testsuite name="src/telemetry/qwen-logger/qwen-logger.test.ts" timestamp="2025-10-05T22:46:17.253Z" hostname="uby" tests="16" failures="0" errors="0" skipped="0" time="0.028074688">
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; getInstance &gt; returns undefined when usage statistics are disabled" time="0.003621973">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; getInstance &gt; returns an instance when usage statistics are enabled" time="0.000866731">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; getInstance &gt; is a singleton" time="0.000424895">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; event queue management &gt; should handle event overflow gracefully" time="0.004027883">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; event queue management &gt; should handle enqueue errors gracefully" time="0.001562598">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; concurrent flush protection &gt; should handle concurrent flush requests" time="0.001017921">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; failed event retry mechanism &gt; should requeue failed events with size limits" time="0.002214532">
            <system-err>
QwenLogger: Dropping 50 events due to retry queue limit. Total events: 150, keeping: 100

            </system-err>
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; failed event retry mechanism &gt; should handle empty retry queue gracefully" time="0.001299852">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; event handlers &gt; should log IDE connection events" time="0.003573734">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; event handlers &gt; should log Kitty sequence overflow events" time="0.001010517">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; event handlers &gt; should flush start session events immediately" time="0.001162698">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; event handlers &gt; should flush end session events immediately" time="0.000895154">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; flush timing &gt; should not flush if interval has not passed" time="0.000607833">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; flush timing &gt; should flush when interval has passed" time="0.000976203">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; error handling &gt; should handle flush errors gracefully with debug mode" time="0.002248124">
        </testcase>
        <testcase classname="src/telemetry/qwen-logger/qwen-logger.test.ts" name="QwenLogger &gt; constants export &gt; should export test constants" time="0.000460791">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/filesearch/crawlCache.test.ts" timestamp="2025-10-05T22:46:17.254Z" hostname="uby" tests="9" failures="0" errors="0" skipped="0" time="0.010513187">
        <testcase classname="src/utils/filesearch/crawlCache.test.ts" name="CrawlCache &gt; getCacheKey &gt; should generate a consistent hash" time="0.001805025">
        </testcase>
        <testcase classname="src/utils/filesearch/crawlCache.test.ts" name="CrawlCache &gt; getCacheKey &gt; should generate a different hash for different directories" time="0.000778649">
        </testcase>
        <testcase classname="src/utils/filesearch/crawlCache.test.ts" name="CrawlCache &gt; getCacheKey &gt; should generate a different hash for different ignore content" time="0.000149747">
        </testcase>
        <testcase classname="src/utils/filesearch/crawlCache.test.ts" name="CrawlCache &gt; getCacheKey &gt; should generate a different hash for different maxDepth values" time="0.000233281">
        </testcase>
        <testcase classname="src/utils/filesearch/crawlCache.test.ts" name="CrawlCache &gt; in-memory cache operations &gt; should write and read data from the cache" time="0.000661342">
        </testcase>
        <testcase classname="src/utils/filesearch/crawlCache.test.ts" name="CrawlCache &gt; in-memory cache operations &gt; should return undefined for a nonexistent key" time="0.000157962">
        </testcase>
        <testcase classname="src/utils/filesearch/crawlCache.test.ts" name="CrawlCache &gt; in-memory cache operations &gt; should clear the cache" time="0.000267655">
        </testcase>
        <testcase classname="src/utils/filesearch/crawlCache.test.ts" name="CrawlCache &gt; in-memory cache operations &gt; should automatically evict a cache entry after its TTL expires" time="0.004224877">
        </testcase>
        <testcase classname="src/utils/filesearch/crawlCache.test.ts" name="CrawlCache &gt; in-memory cache operations &gt; should reset the timer when an entry is updated" time="0.000742311">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/filesearch/crawler.test.ts" timestamp="2025-10-05T22:46:17.254Z" hostname="uby" tests="18" failures="0" errors="0" skipped="0" time="0.065168953">
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; should use .qwenignore rules" time="0.020556346">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; should combine .gitignore and .qwenignore rules" time="0.002847422">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; should use ignoreDirs option" time="0.001616016">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; should handle negated directories" time="0.002342899">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; should handle root-level file negation" time="0.002346856">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; should handle directory negation with glob" time="0.001955724">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; should correctly handle negated patterns in .gitignore" time="0.00154208">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; should initialize correctly when ignore files are missing" time="0.001485054">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; should handle empty or commented-only ignore files" time="0.003547475">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; should always ignore the .git directory" time="0.001399557">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; with in-memory cache &gt; should hit the cache for subsequent crawls" time="0.005139577">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; with in-memory cache &gt; should miss the cache when ignore rules change" time="0.006578797">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; with in-memory cache &gt; should miss the cache after TTL expires" time="0.004091681">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; with in-memory cache &gt; should miss the cache when maxDepth changes" time="0.002133492">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; with maxDepth &gt; should only crawl top-level files when maxDepth is 0" time="0.001662603">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; with maxDepth &gt; should crawl one level deep when maxDepth is 1" time="0.001427428">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; with maxDepth &gt; should crawl two levels deep when maxDepth is 2" time="0.001415636">
        </testcase>
        <testcase classname="src/utils/filesearch/crawler.test.ts" name="crawler &gt; with maxDepth &gt; should perform a full recursive crawl when maxDepth is undefined" time="0.001351417">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/filesearch/fileSearch.test.ts" timestamp="2025-10-05T22:46:17.255Z" hostname="uby" tests="27" failures="0" errors="0" skipped="0" time="0.074824095">
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should use .qwenignore rules" time="0.009856754">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should combine .gitignore and .qwenignore rules" time="0.002824049">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should use ignoreDirs option" time="0.002883529">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should handle negated directories" time="0.002682798">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should filter results with a search pattern" time="0.001669575">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should handle root-level file negation" time="0.001279875">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should handle directory negation with glob" time="0.002532771">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should correctly handle negated patterns in .gitignore" time="0.002482327">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should initialize correctly when ignore files are missing" time="0.001812109">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should respect maxResults option in search" time="0.001375342">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should use fzf for fuzzy matching when pattern does not contain wildcards" time="0.002455127">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should not use fzf for fuzzy matching when disableFuzzySearch is true" time="0.003832512">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should use fzf for fuzzy matching when disableFuzzySearch is false" time="0.00182409">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should return empty array when no matches are found" time="0.001002723">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should throw AbortError when filter is aborted" time="0.003985324">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should throw an error if search is called before initialization" time="0.001208693">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should handle empty or commented-only ignore files" time="0.001698939">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should always ignore the .git directory" time="0.002173116">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should be cancellable via AbortSignal" time="0.00657478">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should leverage ResultCache for bestBaseQuery optimization" time="0.004445555">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should be case-insensitive by default" time="0.003512441">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should respect maxResults even when the cache returns an exact match" time="0.002620482">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; should handle file paths with special characters that need escaping" time="0.00214289">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; DirectoryFileSearch &gt; should search for files in the current directory" time="0.001929856">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; DirectoryFileSearch &gt; should search for files in a subdirectory" time="0.001434711">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; DirectoryFileSearch &gt; should list all files in a directory" time="0.001158611">
        </testcase>
        <testcase classname="src/utils/filesearch/fileSearch.test.ts" name="FileSearch &gt; DirectoryFileSearch &gt; should respect ignore rules" time="0.001469255">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/filesearch/ignore.test.ts" timestamp="2025-10-05T22:46:17.256Z" hostname="uby" tests="12" failures="0" errors="0" skipped="0" time="0.025073592">
        <testcase classname="src/utils/filesearch/ignore.test.ts" name="Ignore &gt; getDirectoryFilter &gt; should ignore directories matching directory patterns" time="0.002466137">
        </testcase>
        <testcase classname="src/utils/filesearch/ignore.test.ts" name="Ignore &gt; getDirectoryFilter &gt; should not ignore directories with file patterns" time="0.000534087">
        </testcase>
        <testcase classname="src/utils/filesearch/ignore.test.ts" name="Ignore &gt; getFileFilter &gt; should not ignore files with directory patterns" time="0.000208986">
        </testcase>
        <testcase classname="src/utils/filesearch/ignore.test.ts" name="Ignore &gt; getFileFilter &gt; should ignore files matching file patterns" time="0.000392305">
        </testcase>
        <testcase classname="src/utils/filesearch/ignore.test.ts" name="Ignore &gt; should accumulate patterns across multiple add() calls" time="0.000291719">
        </testcase>
        <testcase classname="src/utils/filesearch/ignore.test.ts" name="Ignore &gt; should return a stable and consistent fingerprint" time="0.000839101">
        </testcase>
        <testcase classname="src/utils/filesearch/ignore.test.ts" name="loadIgnoreRules &gt; should load rules from .gitignore" time="0.010332153">
        </testcase>
        <testcase classname="src/utils/filesearch/ignore.test.ts" name="loadIgnoreRules &gt; should load rules from .qwenignore" time="0.001551687">
        </testcase>
        <testcase classname="src/utils/filesearch/ignore.test.ts" name="loadIgnoreRules &gt; should combine rules from .gitignore and .qwenignore" time="0.003679609">
        </testcase>
        <testcase classname="src/utils/filesearch/ignore.test.ts" name="loadIgnoreRules &gt; should add ignoreDirs" time="0.001621627">
        </testcase>
        <testcase classname="src/utils/filesearch/ignore.test.ts" name="loadIgnoreRules &gt; should handle missing ignore files gracefully" time="0.000971355">
        </testcase>
        <testcase classname="src/utils/filesearch/ignore.test.ts" name="loadIgnoreRules &gt; should always add .git to the ignore list" time="0.000722164">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/filesearch/result-cache.test.ts" timestamp="2025-10-05T22:46:17.256Z" hostname="uby" tests="3" failures="0" errors="0" skipped="0" time="0.004308351">
        <testcase classname="src/utils/filesearch/result-cache.test.ts" name="ResultCache basic usage" time="0.002464023">
        </testcase>
        <testcase classname="src/utils/filesearch/result-cache.test.ts" name="ResultCache cache hit/miss" time="0.000495816">
        </testcase>
        <testcase classname="src/utils/filesearch/result-cache.test.ts" name="ResultCache best base query" time="0.000166948">
        </testcase>
    </testsuite>
    <testsuite name="src/utils/request-tokenizer/imageTokenizer.test.ts" timestamp="2025-10-05T22:46:17.256Z" hostname="uby" tests="9" failures="0" errors="0" skipped="0" time="0.020456952">
        <testcase classname="src/utils/request-tokenizer/imageTokenizer.test.ts" name="ImageTokenizer &gt; token calculation &gt; should calculate tokens based on image dimensions with reference logic" time="0.001656942">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/imageTokenizer.test.ts" name="ImageTokenizer &gt; token calculation &gt; should calculate tokens for larger images" time="0.000265851">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/imageTokenizer.test.ts" name="ImageTokenizer &gt; token calculation &gt; should enforce minimum tokens per image with scaling" time="0.000099915">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/imageTokenizer.test.ts" name="ImageTokenizer &gt; token calculation &gt; should handle very large images with scaling" time="0.000266954">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/imageTokenizer.test.ts" name="ImageTokenizer &gt; PNG dimension extraction &gt; should extract dimensions from valid PNG" time="0.000572789">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/imageTokenizer.test.ts" name="ImageTokenizer &gt; PNG dimension extraction &gt; should handle invalid PNG gracefully" time="0.010035645">
            <system-err>
Failed to extract image metadata: Error: Invalid PNG: buffer too short
    at ImageTokenizer.extractPngDimensions [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:131:13[90m)[39m
    at ImageTokenizer.extractDimensions [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:91:19[90m)[39m
    at ImageTokenizer.extractImageMetadata [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:59:37[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.test.ts:93:40
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:155:11
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:26
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1897:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:1574:12)

            </system-err>
        </testcase>
        <testcase classname="src/utils/request-tokenizer/imageTokenizer.test.ts" name="ImageTokenizer &gt; batch processing &gt; should process multiple images serially" time="0.001157589">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/imageTokenizer.test.ts" name="ImageTokenizer &gt; batch processing &gt; should handle mixed valid and invalid images" time="0.001416538">
            <system-err>
Failed to extract image metadata: Error: Invalid PNG: buffer too short
    at ImageTokenizer.extractPngDimensions [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:131:13[90m)[39m
    at ImageTokenizer.extractDimensions [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:91:19[90m)[39m
    at ImageTokenizer.extractImageMetadata [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:59:37[90m)[39m
    at ImageTokenizer.calculateTokensBatch [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:320:37[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.test.ts:132:22
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

            </system-err>
        </testcase>
        <testcase classname="src/utils/request-tokenizer/imageTokenizer.test.ts" name="ImageTokenizer &gt; different image formats &gt; should handle different MIME types" time="0.002867479">
            <system-err>
Failed to extract image metadata: Error: Invalid JPEG signature
    at ImageTokenizer.extractJpegDimensions [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:159:13[90m)[39m
    at ImageTokenizer.extractDimensions [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:95:19[90m)[39m
    at ImageTokenizer.extractImageMetadata [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:59:37[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.test.ts:147:42
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Failed to extract image metadata: Error: Invalid WebP signature
    at ImageTokenizer.extractWebpDimensions [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:207:13[90m)[39m
    at ImageTokenizer.extractDimensions [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:99:19[90m)[39m
    at ImageTokenizer.extractImageMetadata [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:59:37[90m)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.test.ts:147:42
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

Unsupported image format: image/gif

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="src/utils/request-tokenizer/requestTokenizer.test.ts" timestamp="2025-10-05T22:46:17.257Z" hostname="uby" tests="12" failures="0" errors="0" skipped="0" time="0.538589824">
        <testcase classname="src/utils/request-tokenizer/requestTokenizer.test.ts" name="DefaultRequestTokenizer &gt; text token calculation &gt; should calculate tokens for simple text content" time="0.122680919">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/requestTokenizer.test.ts" name="DefaultRequestTokenizer &gt; text token calculation &gt; should handle multiple text parts" time="0.078181439">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/requestTokenizer.test.ts" name="DefaultRequestTokenizer &gt; text token calculation &gt; should handle string content" time="0.071225876">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/requestTokenizer.test.ts" name="DefaultRequestTokenizer &gt; image token calculation &gt; should calculate tokens for image content" time="0.000987375">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/requestTokenizer.test.ts" name="DefaultRequestTokenizer &gt; image token calculation &gt; should handle multiple images" time="0.000337854">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/requestTokenizer.test.ts" name="DefaultRequestTokenizer &gt; mixed content &gt; should handle text and image content together" time="0.078083048">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/requestTokenizer.test.ts" name="DefaultRequestTokenizer &gt; function content &gt; should handle function calls" time="0.085962969">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/requestTokenizer.test.ts" name="DefaultRequestTokenizer &gt; empty content &gt; should handle empty request" time="0.000445604">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/requestTokenizer.test.ts" name="DefaultRequestTokenizer &gt; empty content &gt; should handle undefined contents" time="0.00108262">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/requestTokenizer.test.ts" name="DefaultRequestTokenizer &gt; configuration &gt; should use custom text encoding" time="0.089995109">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/requestTokenizer.test.ts" name="DefaultRequestTokenizer &gt; configuration &gt; should process multiple images serially" time="0.000498141">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/requestTokenizer.test.ts" name="DefaultRequestTokenizer &gt; error handling &gt; should handle malformed image data gracefully" time="0.007034329">
            <system-err>
Failed to extract image metadata: Error: Invalid PNG: buffer too short
    at ImageTokenizer.extractPngDimensions [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:131:13[90m)[39m
    at ImageTokenizer.extractDimensions [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:91:19[90m)[39m
    at ImageTokenizer.extractImageMetadata [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:59:37[90m)[39m
    at ImageTokenizer.calculateTokensBatch [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/imageTokenizer.ts:320:37[90m)[39m
    at DefaultRequestTokenizer.calculateImageTokens [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/requestTokenizer.ts:136:35[90m)[39m
    at DefaultRequestTokenizer.calculateTokens [90m(/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/requestTokenizer.ts:72:38[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90m/home/atmandk/LowCal-dev/packages/core/[39msrc/utils/request-tokenizer/requestTokenizer.test.ts:287:22
    at file:///home/atmandk/LowCal-dev/node_modules/[4m@vitest/runner[24m/dist/chunk-hooks.js:752:20

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="src/utils/request-tokenizer/textTokenizer.test.ts" timestamp="2025-10-05T22:46:17.257Z" hostname="uby" tests="28" failures="0" errors="0" skipped="0" time="0.018674949">
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; constructor &gt; should create tokenizer with default encoding" time="0.001764881">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; constructor &gt; should create tokenizer with custom encoding" time="0.000249391">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokens &gt; should return 0 for empty text" time="0.000306747">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokens &gt; should return 0 for null/undefined text" time="0.000419536">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokens &gt; should calculate tokens using tiktoken when available" time="0.001845831">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokens &gt; should use fallback calculation when tiktoken fails to load" time="0.001346408">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokens &gt; should use fallback calculation when encoding fails" time="0.000501586">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokens &gt; should handle very long text" time="0.000253859">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokens &gt; should handle unicode characters" time="0.000218304">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokens &gt; should use custom encoding when specified" time="0.000267304">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokensBatch &gt; should process multiple texts and return token counts" time="0.000605749">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokensBatch &gt; should handle empty array" time="0.000226379">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokensBatch &gt; should handle array with empty strings" time="0.00146655">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokensBatch &gt; should use fallback calculation when tiktoken fails to load" time="0.000580092">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokensBatch &gt; should use fallback calculation when encoding fails during batch processing" time="0.000365435">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; calculateTokensBatch &gt; should handle null and undefined values in batch" time="0.000200872">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; dispose &gt; should free tiktoken encoding when disposing" time="0.000871601">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; dispose &gt; should handle disposal when encoding is not initialized" time="0.001737951">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; dispose &gt; should handle disposal when encoding is null" time="0.000464268">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; dispose &gt; should handle errors during disposal gracefully" time="0.000505324">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; dispose &gt; should allow multiple calls to dispose" time="0.000295025">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; lazy initialization &gt; should not initialize tiktoken until first use" time="0.000166868">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; lazy initialization &gt; should initialize tiktoken on first calculateTokens call" time="0.000182377">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; lazy initialization &gt; should not reinitialize tiktoken on subsequent calls" time="0.000177878">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; lazy initialization &gt; should initialize tiktoken on first calculateTokensBatch call" time="0.000185953">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; edge cases &gt; should handle very short text" time="0.000959032">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; edge cases &gt; should handle text with only whitespace" time="0.000349396">
        </testcase>
        <testcase classname="src/utils/request-tokenizer/textTokenizer.test.ts" name="TextTokenizer &gt; edge cases &gt; should handle special characters and symbols" time="0.000172589">
        </testcase>
    </testsuite>
    <testsuite name="src/core/openaiContentGenerator/provider/dashscope.test.ts" timestamp="2025-10-05T22:46:17.258Z" hostname="uby" tests="33" failures="0" errors="0" skipped="0" time="0.015571474">
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; constructor &gt; should initialize with provided configs" time="0.00199654">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; isDashScopeProvider &gt; should return true for QWEN_OAUTH auth type" time="0.000960054">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; isDashScopeProvider &gt; should return true for DashScope domestic URL" time="0.000229163">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; isDashScopeProvider &gt; should return true for DashScope international URL" time="0.000160196">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; isDashScopeProvider &gt; should return false for non-DashScope configurations" time="0.00022721">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildHeaders &gt; should build DashScope-specific headers" time="0.000985561">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildHeaders &gt; should handle unknown CLI version" time="0.000262665">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildClient &gt; should create OpenAI client with DashScope configuration" time="0.001349283">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildClient &gt; should use default timeout and maxRetries when not provided" time="0.000526703">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildMetadata &gt; should build metadata with session and prompt IDs" time="0.00024902">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildMetadata &gt; should handle missing session ID" time="0.000195571">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildRequest &gt; should add cache control to system message only for non-streaming requests" time="0.000925561">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildRequest &gt; should add cache control to both system and last messages for streaming requests" time="0.000372298">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildRequest &gt; should include metadata in the request" time="0.000222401">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildRequest &gt; should preserve all original request parameters" time="0.000701547">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildRequest &gt; should skip cache control when disabled" time="0.000260101">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildRequest &gt; should handle messages with array content for streaming requests" time="0.000306125">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildRequest &gt; should handle empty messages array" time="0.000153323">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildRequest &gt; should handle messages without content for streaming requests" time="0.000142122">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildRequest &gt; should add cache control to last text item in mixed content for streaming requests" time="0.00024354">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; buildRequest &gt; should add empty text item with cache control if last item is not text for streaming requests" time="0.000258798">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; cache control edge cases &gt; should handle request with only system message" time="0.000297991">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; cache control edge cases &gt; should handle request without system message for streaming requests" time="0.000465821">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; cache control edge cases &gt; should handle empty content array for streaming requests" time="0.000205119">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; output token limits &gt; should limit max_tokens when it exceeds model limit for qwen3-coder-plus" time="0.000197986">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; output token limits &gt; should limit max_tokens when it exceeds model limit for qwen-vl-max-latest" time="0.000258007">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; output token limits &gt; should not modify max_tokens when it is within model limit" time="0.000164885">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; output token limits &gt; should not add max_tokens when not present in request" time="0.000190031">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; output token limits &gt; should handle null max_tokens parameter" time="0.000159796">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; output token limits &gt; should use default output limit for unknown models" time="0.000204658">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; output token limits &gt; should preserve other request parameters when limiting max_tokens" time="0.000280499">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; output token limits &gt; should work with vision models and output token limits" time="0.000180835">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/dashscope.test.ts" name="DashScopeOpenAICompatibleProvider &gt; output token limits &gt; should handle streaming requests with output token limits" time="0.000177899">
        </testcase>
    </testsuite>
    <testsuite name="src/core/openaiContentGenerator/provider/default.test.ts" timestamp="2025-10-05T22:46:17.259Z" hostname="uby" tests="11" failures="0" errors="0" skipped="0" time="0.00780368">
        <testcase classname="src/core/openaiContentGenerator/provider/default.test.ts" name="DefaultOpenAICompatibleProvider &gt; constructor &gt; should initialize with provided configs" time="0.001275908">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/default.test.ts" name="DefaultOpenAICompatibleProvider &gt; buildHeaders &gt; should build headers with User-Agent" time="0.001132463">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/default.test.ts" name="DefaultOpenAICompatibleProvider &gt; buildHeaders &gt; should handle unknown CLI version" time="0.000366347">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/default.test.ts" name="DefaultOpenAICompatibleProvider &gt; buildClient &gt; should create OpenAI client with correct configuration" time="0.001175452">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/default.test.ts" name="DefaultOpenAICompatibleProvider &gt; buildClient &gt; should use default timeout and maxRetries when not provided" time="0.000310924">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/default.test.ts" name="DefaultOpenAICompatibleProvider &gt; buildClient &gt; should include custom headers from buildHeaders" time="0.001217249">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/default.test.ts" name="DefaultOpenAICompatibleProvider &gt; buildRequest &gt; should pass through all request parameters unchanged" time="0.000433922">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/default.test.ts" name="DefaultOpenAICompatibleProvider &gt; buildRequest &gt; should preserve all sampling parameters" time="0.000298421">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/default.test.ts" name="DefaultOpenAICompatibleProvider &gt; buildRequest &gt; should handle minimal request parameters" time="0.000109182">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/default.test.ts" name="DefaultOpenAICompatibleProvider &gt; buildRequest &gt; should handle streaming requests" time="0.000110674">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/default.test.ts" name="DefaultOpenAICompatibleProvider &gt; buildRequest &gt; should not modify the original request object" time="0.000121925">
        </testcase>
    </testsuite>
    <testsuite name="src/core/openaiContentGenerator/provider/lmstudio.test.ts" timestamp="2025-10-05T22:46:17.260Z" hostname="uby" tests="4" failures="0" errors="0" skipped="0" time="0.220977868">
        <testcase classname="src/core/openaiContentGenerator/provider/lmstudio.test.ts" name="LMStudioOpenAICompatibleProvider &gt; isLMStudioProvider &gt; should return true for LM Studio base URLs" time="0.002046823">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/lmstudio.test.ts" name="LMStudioOpenAICompatibleProvider &gt; isLMStudioProvider &gt; should return false for non-LM Studio base URLs" time="0.000215889">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/lmstudio.test.ts" name="LMStudioOpenAICompatibleProvider &gt; buildHeaders &gt; should remove User-Agent header for LM Studio compatibility" time="0.000344246">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/lmstudio.test.ts" name="LMStudioOpenAICompatibleProvider &gt; unloadModel &gt; should attempt to unload the model without throwing an error" time="0.216750016">
        </testcase>
    </testsuite>
    <testsuite name="src/core/openaiContentGenerator/provider/openrouter.test.ts" timestamp="2025-10-05T22:46:17.260Z" hostname="uby" tests="12" failures="0" errors="0" skipped="0" time="0.008881642">
        <testcase classname="src/core/openaiContentGenerator/provider/openrouter.test.ts" name="OpenRouterOpenAICompatibleProvider &gt; constructor &gt; should extend DefaultOpenAICompatibleProvider" time="0.002469474">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/openrouter.test.ts" name="OpenRouterOpenAICompatibleProvider &gt; isOpenRouterProvider &gt; should return true for openrouter.ai URLs" time="0.000528156">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/openrouter.test.ts" name="OpenRouterOpenAICompatibleProvider &gt; isOpenRouterProvider &gt; should return false for non-openrouter URLs" time="0.000353634">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/openrouter.test.ts" name="OpenRouterOpenAICompatibleProvider &gt; isOpenRouterProvider &gt; should handle missing baseUrl gracefully" time="0.000216941">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/openrouter.test.ts" name="OpenRouterOpenAICompatibleProvider &gt; buildHeaders &gt; should include base headers from parent class" time="0.000365215">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/openrouter.test.ts" name="OpenRouterOpenAICompatibleProvider &gt; buildHeaders &gt; should add OpenRouter-specific headers" time="0.000697449">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/openrouter.test.ts" name="OpenRouterOpenAICompatibleProvider &gt; buildHeaders &gt; should override parent headers if there are conflicts" time="0.000321073">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/openrouter.test.ts" name="OpenRouterOpenAICompatibleProvider &gt; buildHeaders &gt; should handle unknown CLI version from parent" time="0.000179982">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/openrouter.test.ts" name="OpenRouterOpenAICompatibleProvider &gt; buildClient &gt; should inherit buildClient behavior from parent" time="0.000356729">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/openrouter.test.ts" name="OpenRouterOpenAICompatibleProvider &gt; buildRequest &gt; should inherit buildRequest behavior from parent" time="0.000885616">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/openrouter.test.ts" name="OpenRouterOpenAICompatibleProvider &gt; integration with parent class &gt; should properly call parent constructor" time="0.000603305">
        </testcase>
        <testcase classname="src/core/openaiContentGenerator/provider/openrouter.test.ts" name="OpenRouterOpenAICompatibleProvider &gt; integration with parent class &gt; should maintain parent functionality while adding OpenRouter specifics" time="0.000213044">
        </testcase>
    </testsuite>
</testsuites>
