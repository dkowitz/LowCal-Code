# QWEN.md â€“ Project Context for LowCalâ€‘dev

## ğŸ“¦ Project Overview
**Qwen Code** is an AIâ€‘powered commandâ€‘line workflow tool that lets developers interact with large code models (e.g. Qwen3â€‘Coder) directly from the terminal.  It consists of a **CLI package** (`packages/cli`) and a **core server** (`packages/core`) plus a collection of helper tools (file system, shell, web fetch/search, memory).  The repository is written in **TypeScript**, runs on **Nodeâ€¯â‰¥20**, and uses **npm workspaces** for the multiple packages.

---
## ğŸ—‚ï¸ Directory Layout (highâ€‘level)
```
LowCal-dev/
â”œâ”€ bundle/                # Built distributable (gemini.js) â€“ entry point for `qwen` binary
â”œâ”€ docs/                  # Full documentation site (Markdown, assets)
â”œâ”€ integration-tests/     # Endâ€‘toâ€‘end test suite (Vitest)
â”œâ”€ packages/
â”‚   â”œâ”€ cli/               # CLI implementation (yargs, REPL, UI)
â”‚   â””â”€ core/              # Server, tool registry, model adapters
â”œâ”€ scripts/               # Build / release helper scripts
â”œâ”€ .gitignore, Makefile,  # Projectâ€‘level tooling & metadata
â”œâ”€ package.json           # Workspace root (defines npm scripts, deps)
â””â”€ README.md             # Highâ€‘level readme shown on GitHub/NPM
```

---
## âš™ï¸ Building & Running
The project follows the standard **npm** workflow; a `Makefile` provides shortcuts.
| Action | Command (via npm) | Shortcut (`make`) |
|--------|-------------------|------------------|
| Install dependencies | `npm ci` | `make install` |
| Build all packages & sandbox | `npm run build:all` | `make build-all` |
| Run the CLI (development) | `npm run start` | `make start` |
| Debug mode (inspect) | `npm run debug` | `make debug` |
| Run tests (workspace aware) | `npm run test --workspaces` | `make test` |
| Lint | `npm run lint` | `make lint` |
| Format with Prettier | `npm run format` | `make format` |
| Full preâ€‘flight check (formatâ€¯+â€¯lintâ€¯+â€¯buildâ€¯+â€¯typecheckâ€¯+â€¯tests) | `npm run preflight` | `make preflight` |

> **Tip:** The binary exposed after a successful build is `bundle/gemini.js`; it is linked as the `qwen` command in `package.json`.

---
## ğŸ§ª Testing & Quality Gates
* **Unit / integration tests** â€“ Vitest (`npm run test`).
* **Terminalâ€‘bench benchmarks** â€“ `npm run test:terminal-bench` (used for performance evaluation).
* **Linting** â€“ ESLint with Prettier (`npm run lint`, `npm run format`).
* **Type checking** â€“ `npm run typecheck` (runs perâ€‘workspace if present).

All CI pipelines expect the *preflight* script to pass without errors.

---
## ğŸ“š Documentation
The authoritative docs live under `docs/`.  Key entry points:
* `docs/index.md` â€“ navigation hub.
* `docs/cli/**` â€“ CLI usage, commands, configuration, token handling.
* `docs/core/**` â€“ core server and tool API details.
* `docs/tools/**` â€“ descriptions of each tool (`read_file`, `run_shell_command`, etc.).
* `docs/troubleshooting.md` â€“ common issues & FAQ.

You can open any file directly; the repository also ships a generated website (see `package.json` scripts for building docs).

---
## ğŸ› ï¸ Development Conventions
| Area | Convention |
|------|------------|
| **Code style** | ESLint + Prettier (`npm run lint`, `npm run format`).  The repo enforces `eslint-config-prettier` and a custom licenseâ€‘header rule.
| **TypeScript** | Strict mode enabled via `tsconfig.json`.  Each workspace may have its own `tsconfig.*`; run `npm run typecheck` to verify.
| **Commit workflow** | Use the provided scripts (`scripts/generate-git-commit-info.js`) for consistent commit messages.  The CI expects a clean changelog generated by `npm run generate`.
| **Testing** | Write Vitest tests under `**/*.test.ts` or `integration-tests/`.  Run `npm run test:ci` in CI environments.
| **Release** | Bump version with `npm run release:version`; the script updates package versions and changelog.

---
## ğŸ“¦ Key npm Scripts (excerpt)
```json
"scripts": {
  "start": "node scripts/start.js",
  "build": "node scripts/build.js",
  "bundle": "npm run generate && node esbuild.config.js && node scripts/copy_bundle_assets.js",
  "test": "npm run test --workspaces --if-present",
  "lint": "eslint . --ext .ts,.tsx && eslint integration-tests",
  "format": "prettier --experimental-cli --write .",
  "typecheck": "npm run typecheck --workspaces --if-present",
  "preflight": "npm run clean && npm ci && npm run format && npm run lint:ci && npm run build && npm run typecheck && npm run test:ci"
}
```

---
## ğŸ“¦ Runtime Dependencies (runtime only)
* `@lvce-editor/ripgrep` â€“ fast file searching.
* `simple-git` â€“ Git operations for automation.
* `strip-ansi` â€“ clean console output.

Optional native dependencies (`nodeâ€‘pty`) are used when a PTY is required; they are listed under `optionalDependencies` and loaded conditionally.

---
## ğŸ¯ Typical Workflow for a Contributor
1. **Clone & install**: `git clone â€¦ && make install`
2. **Run the CLI locally**: `make start` (or `npm run start`).
3. **Make changes** in `packages/cli` or `packages/core`.
4. **Run preflight**: `make preflight` â€“ ensures formatting, linting, typeâ€‘checking and tests all pass.
5. **Commit** using the conventional format (generated by `scripts/generate-git-commit-info.js`).
6. **Create a PR** â€“ CI will run the same preflight steps.

---
## ğŸ“„ License & Attribution
The project is licensed under the MIT license (`LICENSE`).  It is derived from Googleâ€™s Gemini CLI; see the *Acknowledgments* section in `README.md` for full attribution.

---
*This QWEN.md file is generated to give future interactions a concise, searchable snapshot of the LowCalâ€‘dev repository.*
